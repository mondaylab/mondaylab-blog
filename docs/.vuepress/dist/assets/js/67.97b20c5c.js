(window.webpackJsonp=window.webpackJsonp||[]).push([[67],{617:function(t,s,a){"use strict";a.r(s);var n=a(13),e=Object(n.a)({},(function(){var t=this,s=t.$createElement,a=t._self._c||s;return a("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[a("h1",{attrs:{id:"ğŸ¥-åºè¨€"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#ğŸ¥-åºè¨€"}},[t._v("#")]),t._v(" ğŸ¥ åºè¨€")]),t._v(" "),a("p",[t._v("æˆ‘ä»¬éƒ½çŸ¥é“ï¼Œ "),a("code",[t._v("webpack")]),t._v(" æ˜¯ä¸€ä¸ª"),a("strong",[t._v("æ‰“åŒ…å·¥å…·")]),t._v("ã€‚åœ¨æˆ‘ä»¬å¯¹å®ƒè¿›è¡Œé…ç½®ä¹‹å‰ï¼Œå®ƒä¹Ÿæ˜¯ç»è¿‡ä¸€ç³»åˆ—çš„ä»£ç ç¼–å†™ï¼Œæ‰ç”Ÿæˆçš„æ‰“åŒ…å·¥å…·ã€‚é‚£è¿™èƒŒåï¼Œåˆåšäº†ä»€ä¹ˆäº‹æƒ…å‘¢ï¼Ÿ")]),t._v(" "),a("p",[t._v("ä»Šå¤©ï¼Œæˆ‘ä»¬å°±æ¥åŸç”Ÿ "),a("code",[t._v("js")]),t._v(" ï¼Œæ¥æ‰‹å†™ä¸€ä¸ªç®€æ˜“çš„æ‰“åŒ…å·¥å…· "),a("code",[t._v("bundler")]),t._v(" ï¼Œå®ç°å¯¹é¡¹ç›®ä»£ç çš„æ‰“åŒ…ã€‚")]),t._v(" "),a("p",[t._v("ä¸‹é¢å¼€å§‹è¿›è¡Œæœ¬æ–‡çš„è®²è§£~")]),t._v(" "),a("h1",{attrs:{id:"ğŸ‰-ä¸€ã€æ¨¡å—åˆ†æ-å…¥å£æ–‡ä»¶ä»£ç åˆ†æ"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#ğŸ‰-ä¸€ã€æ¨¡å—åˆ†æ-å…¥å£æ–‡ä»¶ä»£ç åˆ†æ"}},[t._v("#")]),t._v(" ğŸ‰ ä¸€ã€æ¨¡å—åˆ†æ(å…¥å£æ–‡ä»¶ä»£ç åˆ†æ)")]),t._v(" "),a("h2",{attrs:{id:"_1-é¡¹ç›®ç»“æ„"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_1-é¡¹ç›®ç»“æ„"}},[t._v("#")]),t._v(" 1. é¡¹ç›®ç»“æ„")]),t._v(" "),a("p",[t._v("ä¸‹é¢å…ˆæ¥çœ‹ä¸‹æˆ‘ä»¬çš„é¡¹ç›®æ–‡ä»¶ç»“æ„ã€‚"),a("strong",[t._v("è¯·çœ‹ä¸‹å›¾ ğŸ‘‡")])]),t._v(" "),a("p",[a("img",{attrs:{src:"https://img-blog.csdnimg.cn/a51baa851d4044d2bd5204adbc0f7850.png#",alt:"bundleré¡¹ç›®ç»“æ„"}})]),t._v(" "),a("h2",{attrs:{id:"_2-å®‰è£…ç¬¬ä¸‰æ–¹ä¾èµ–"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_2-å®‰è£…ç¬¬ä¸‰æ–¹ä¾èµ–"}},[t._v("#")]),t._v(" 2. å®‰è£…ç¬¬ä¸‰æ–¹ä¾èµ–")]),t._v(" "),a("p",[t._v("æˆ‘ä»¬éœ€è¦ç”¨åˆ° "),a("code",[t._v("4")]),t._v(" ä¸ªç¬¬ä¸‰æ–¹ä¾èµ–åŒ…ï¼Œ"),a("strong",[t._v("åˆ†åˆ«æ˜¯ï¼š")])]),t._v(" "),a("ul",[a("li",[t._v("@babel/parser â€”â€” å¸®åŠ©æˆ‘ä»¬åˆ†ææºä»£ç å¹¶ç”ŸæˆæŠ½è±¡è¯­æ³•æ ‘ "),a("strong",[t._v("(AST)")]),t._v(" ï¼›")]),t._v(" "),a("li",[t._v("@babel/traverse â€”â€” å¸®åŠ©æˆ‘ä»¬"),a("strong",[t._v("å¯¹æŠ½è±¡è¯­æ³•æ ‘è¿›è¡Œéå†")]),t._v("ï¼Œå¹¶åˆ†æé‡Œè¯­æ³•æ ‘é‡Œé¢çš„è¯­å¥ï¼›")]),t._v(" "),a("li",[t._v("@babel/core â€”â€” å°†åŸå§‹ä»£ç æ‰“åŒ…ç¼–è¯‘æˆæµè§ˆå™¨èƒ½å¤Ÿè¿è¡Œçš„ä»£ç ï¼›")]),t._v(" "),a("li",[t._v("@babel/preset-env â€”â€” ç”¨äºåœ¨è§£ææŠ½è±¡è¯­æ³•æ ‘æ—¶è¿›è¡Œé…ç½®ã€‚")])]),t._v(" "),a("p",[t._v("ä¸‹é¢ä¾æ¬¡ç»™å‡ºå®‰è£…è¿™å››ä¸ªåº“çš„å‘½ä»¤ï¼Œ"),a("strong",[t._v("åˆ†åˆ«æ˜¯ï¼š")])]),t._v(" "),a("p",[a("strong",[t._v("ï¼ˆ1ï¼‰@babel/parser")])]),t._v(" "),a("div",{staticClass:"language-bash extra-class"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[a("span",{pre:!0,attrs:{class:"token function"}},[t._v("npm")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("install")]),t._v(" @babel/parser --save\n")])])]),a("p",[a("strong",[t._v("ï¼ˆ2ï¼‰@babel/traverse")])]),t._v(" "),a("div",{staticClass:"language-bash extra-class"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[a("span",{pre:!0,attrs:{class:"token function"}},[t._v("npm")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("install")]),t._v(" @babel/traverse --save\n")])])]),a("p",[a("strong",[t._v("ï¼ˆ3ï¼‰@babel/core")])]),t._v(" "),a("div",{staticClass:"language-bash extra-class"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[a("span",{pre:!0,attrs:{class:"token function"}},[t._v("npm")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("install")]),t._v(" @balbel/core --save\n")])])]),a("p",[a("strong",[t._v("ï¼ˆ4ï¼‰@babel/preset-env")])]),t._v(" "),a("div",{staticClass:"language-bash extra-class"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[a("span",{pre:!0,attrs:{class:"token function"}},[t._v("npm")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("install")]),t._v(" @babel/preset-env --save\n")])])]),a("h2",{attrs:{id:"_3-ä¸šåŠ¡ä»£ç "}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_3-ä¸šåŠ¡ä»£ç "}},[t._v("#")]),t._v(" 3. ä¸šåŠ¡ä»£ç ")]),t._v(" "),a("p",[t._v("å½“æˆ‘ä»¬å»åšä¸€ä¸ªé¡¹ç›®æ‰“åŒ…æ—¶ï¼Œé¦–å…ˆéœ€è¦å…ˆå¯¹é¡¹ç›®ä¸­çš„æ¨¡å—è¿›è¡Œåˆ†æï¼Œç°åœ¨æˆ‘ä»¬å…ˆå¯¹"),a("strong",[t._v("å…¥å£æ–‡ä»¶")]),t._v("è¿›è¡Œåˆ†æã€‚å‡è®¾æˆ‘ä»¬è¦å®ç°ä¸€ä¸ªä¸šåŠ¡ï¼Œè¾“å‡ºçš„æ˜¯ "),a("code",[t._v("hello monday")]),t._v(" ã€‚é‚£ä¹ˆæˆ‘ä»¬å…ˆæ¥ç¼–å†™æˆ‘ä»¬çš„ä¸šåŠ¡ä»£ç ã€‚")]),t._v(" "),a("p",[a("strong",[t._v("ç¬¬ä¸€æ­¥ï¼š")]),t._v(" ç¼–å†™ "),a("code",[t._v("word.js")]),t._v(" æ–‡ä»¶ä»£ç ã€‚"),a("strong",[t._v("å…·ä½“ä»£ç å¦‚ä¸‹ï¼š")])]),t._v(" "),a("div",{staticClass:"language-js extra-class"},[a("pre",{pre:!0,attrs:{class:"language-js"}},[a("code",[a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("export")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" word "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'monday'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])])]),a("p",[a("strong",[t._v("ç¬¬äºŒæ­¥ï¼š")]),t._v(" ç¼–å†™ "),a("code",[t._v("message.js")]),t._v(" æ–‡ä»¶ä»£ç ã€‚"),a("strong",[t._v("å…·ä½“ä»£ç å¦‚ä¸‹ï¼š")])]),t._v(" "),a("div",{staticClass:"language-js extra-class"},[a("pre",{pre:!0,attrs:{class:"language-js"}},[a("code",[a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("import")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" word "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("from")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'./word.js'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" message "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token template-string"}},[a("span",{pre:!0,attrs:{class:"token template-punctuation string"}},[t._v("`")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("hello ")]),a("span",{pre:!0,attrs:{class:"token interpolation"}},[a("span",{pre:!0,attrs:{class:"token interpolation-punctuation punctuation"}},[t._v("${")]),t._v("word"),a("span",{pre:!0,attrs:{class:"token interpolation-punctuation punctuation"}},[t._v("}")])]),a("span",{pre:!0,attrs:{class:"token template-punctuation string"}},[t._v("`")])]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("export")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("default")]),t._v(" message"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])])]),a("p",[a("strong",[t._v("ç¬¬ä¸‰æ­¥ï¼š")]),t._v(" ç¼–å†™ "),a("code",[t._v("index.js")]),t._v(" æ–‡ä»¶ä»£ç ã€‚"),a("strong",[t._v("å…·ä½“ä»£ç å¦‚ä¸‹ï¼š")])]),t._v(" "),a("div",{staticClass:"language-js extra-class"},[a("pre",{pre:!0,attrs:{class:"language-js"}},[a("code",[a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("import")]),t._v(" message "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("from")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'./message.js'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\nconsole"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("log")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("message"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])])]),a("h2",{attrs:{id:"_4-å¼€å§‹æ‰“åŒ…"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_4-å¼€å§‹æ‰“åŒ…"}},[t._v("#")]),t._v(" 4. å¼€å§‹æ‰“åŒ…")]),t._v(" "),a("p",[t._v("ç¼–å†™å®Œä¸šåŠ¡ä»£ç ä¹‹åï¼Œç°åœ¨ï¼Œæˆ‘ä»¬è¦å…ˆæ¥å¯¹å…¥å£æ–‡ä»¶ "),a("code",[t._v("index.js")]),t._v(" è¿›è¡Œæ‰“åŒ…ã€‚æ³¨æ„ï¼Œè¿™é‡Œé™¤äº† "),a("code",[t._v("babel")]),t._v(" å¤–ï¼Œæˆ‘ä»¬ä¸ä½¿ç”¨ä»»ä½•å·¥å…·ï¼Œæ²¡æœ‰ "),a("code",[t._v("webpack")]),t._v(" ã€ä¹Ÿæ²¡æœ‰ "),a("code",[t._v("webpack-cli")]),t._v(" ç­‰å·¥å…·ã€‚")]),t._v(" "),a("p",[t._v("æˆ‘ä»¬åœ¨æ ¹ç›®å½•ä¸‹å…ˆåˆ›å»ºä¸€ä¸ªæ–‡ä»¶ï¼Œå‘½åä¸º "),a("code",[t._v("bundler.js")]),t._v(" ï¼Œç”¨è¿™ä¸ªæ–‡ä»¶æ¥ç¼–å†™æˆ‘ä»¬çš„æ‰“åŒ…é€»è¾‘ã€‚"),a("strong",[t._v("å…·ä½“ä»£ç å¦‚ä¸‹ï¼š")])]),t._v(" "),a("div",{staticClass:"language-js extra-class"},[a("pre",{pre:!0,attrs:{class:"language-js"}},[a("code",[a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" fs "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("require")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'fs'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" path "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("require")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'path'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" parser "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("require")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'@babel/parser'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" traverse "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("require")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'@babel/traverse'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("default"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" babel "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("require")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'@babel/core'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function-variable function"}},[t._v("moduleAnalyser")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("filename")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//1. é¦–å…ˆæ‹¿åˆ°æ–‡ä»¶åï¼Œæ‹¿åˆ°æ–‡ä»¶åä¹‹åæˆ‘ä»¬å»è¯»å–æ–‡ä»¶é‡Œé¢çš„å†…å®¹")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" content "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" fs"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("readFileSync")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("filename"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'utf-8'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//2. å€ŸåŠ©Babel-parserï¼Œå°†æ–‡ä»¶é‡Œjsçš„å­—ç¬¦ä¸²ï¼Œè½¬åŒ–æˆä¸€ä¸ªjsçš„å¯¹è±¡->è¿™ä¸ªjså¯¹è±¡å°±æ˜¯æˆ‘ä»¬æ‰€è¯´çš„æŠ½è±¡è¯­æ³•æ ‘")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" ast "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" parser"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("parse")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("content"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 3. å¦‚æœä½ ä¼ å…¥çš„ES6çš„è¯­æ³•ï¼Œé‚£ä¹ˆéœ€è¦è®¾ç½®sourceTypeä¸ºmodule")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("sourceType")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'module'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n  "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//æ”¶é›†å…¥å£æ–‡ä»¶ä¸­çš„ä¾èµ–æ–‡ä»¶")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" dependencies "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n  "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("traverse")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("ast"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("/*4. æœ‰äº†æŠ½è±¡è¯­æ³•æ ‘ä¹‹åï¼Œæˆ‘ä»¬éœ€è¦å»åˆ†æï¼Œ\n        å®ƒé‡Œé¢çš„å£°æ˜éƒ½åœ¨å“ªäº›åœ°æ–¹ï¼Œ\n        å»æ‰¾åˆ°importè¿™äº›è¯­å¥å¯¹åº”çš„å†…å®¹\n        5. éœ€è¦å€ŸåŠ©@babel/traverseè¿™ä¸ªå·¥å…·ï¼Œ\n        è¿™ä¸ªå·¥å…·è¡¨æ˜å½“æŠ½è±¡è¯­æ³•æ ‘æœ‰ImportDeclarationè¿™æ ·çš„è¯­å¥æ—¶ï¼Œ\n        å®ƒå°±ä¼šç»§ç»­ä¸‹é¢çš„å‡½æ•°*/")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("ImportDeclaration")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token parameter"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" node "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")])]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n      "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// console.log(node);")]),t._v("\n      "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" dirname "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" path"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("dirname")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("filename"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n      "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" newFile "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'./'")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("+")]),t._v(" path"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("join")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("dirname"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" node"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("source"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("value"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n      "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// console.log(newFile);")]),t._v("\n      "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//6. æ‰¾åˆ°importè¯­å¥ä¹‹åï¼Œå°†è¿™äº›è¯­å¥æ‹¼è£…æˆä¸€ä¸ªå¯¹è±¡ï¼Œæ”¾åœ¨dependenciesè¿™ä¸ªå˜é‡ä¸­ï¼ˆä»¥é”®å€¼å¯¹çš„æ–¹å¼æ¥è¿›è¡Œå­˜å‚¨ï¼‰")]),t._v("\n      dependencies"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("node"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("source"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("value"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" newFile"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("/*\n    7. åˆ†æå¥½äº†ä¹‹åï¼Œå¯¹æ¨¡å—çš„æºä»£ç è¿›è¡Œä¸€æ¬¡ç¼–è¯‘ã€‚é€šè¿‡ä½¿ç”¨transformFromAstï¼Œ\n    æŠŠå®ƒä»ä¸€ä¸ªES moduleï¼Œè½¬æ¢æˆæµè§ˆå™¨å¯ä»¥æ‰§è¡Œçš„è¯­æ³•ï¼Œå¹¶å°†å…¶å­˜å‚¨åœ¨codeé‡Œé¢ï¼Œ\n    codeç”Ÿæˆçš„ä»£ç å°±æ˜¯æˆ‘ä»¬å¯ä»¥åœ¨æµè§ˆå™¨ä¸Šè¿è¡Œçš„ä»£ç */")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" code "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" babel"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("transformFromAst")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("ast"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("null")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("presets")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'@babel/preset-env'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//è¿”å›å…¥å£æ–‡ä»¶çš„åå­—")]),t._v("\n    filename"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//è¿”å›å…¥å£æ–‡ä»¶ä¸­çš„ä¾èµ–æ–‡ä»¶")]),t._v("\n    dependencies"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//è¿”å›æµè§ˆå™¨ä¸Šå¯ä»¥è¿è¡Œçš„ä»£ç ")]),t._v("\n    code"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// console.log(dependencies);")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" moduleInfo "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("moduleAnalyser")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'./src/index.js'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\nconsole"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("log")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("moduleInfo"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])])]),a("p",[t._v("é€šè¿‡ä»¥ä¸Šä»£ç ï¼Œç›¸ä¿¡å¤§å®¶å¯¹æ‰“åŒ…å…¥å£æ–‡ä»¶æœ‰ä¸€ä¸ªåŸºæœ¬çš„äº†è§£ã€‚ä¹‹åå‘¢ï¼Œåœ¨æ§åˆ¶å°è¿è¡Œ "),a("code",[t._v("node bundler.js")]),t._v(" å‘½ä»¤ï¼Œå¯ä»¥å¯¹æ‰“åŒ…è¿‡ç¨‹ä¸­çš„å„ç§åˆ†æè¿›è¡ŒæŸ¥çœ‹ã€‚")]),t._v(" "),a("p",[t._v("ä¸‹é¢æˆ‘ä»¬ç»§ç»­ç¬¬äºŒå—çš„å†…å®¹~")]),t._v(" "),a("h1",{attrs:{id:"ğŸ¥‘-äºŒã€ä¾èµ–å›¾è°±-dependencies-graph"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#ğŸ¥‘-äºŒã€ä¾èµ–å›¾è°±-dependencies-graph"}},[t._v("#")]),t._v(" ğŸ¥‘ äºŒã€ä¾èµ–å›¾è°± Dependencies Graph")]),t._v(" "),a("p",[t._v("å¯¹äºä¸Šè¿°æ‰€è®²çš„å†…å®¹ï¼Œæˆ‘ä»¬è°ˆåˆ°çš„ï¼Œåªæ˜¯å¯¹ä¸€ä¸ªå…¥å£æ–‡ä»¶è¿›è¡Œåˆ†æã€‚ä½†æ˜¯å‘¢ï¼Œè¿™è¿˜è¿œè¿œä¸å¤Ÿã€‚æ‰€ä»¥ï¼Œç°åœ¨æˆ‘ä»¬è¦æ¥å¯¹æ•´ä¸ªå·¥ç¨‹æ–‡ä»¶è¿›è¡Œåˆ†æã€‚")]),t._v(" "),a("h2",{attrs:{id:"_1-ç»“æœåˆ†æ"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_1-ç»“æœåˆ†æ"}},[t._v("#")]),t._v(" 1. ç»“æœåˆ†æ")]),t._v(" "),a("p",[t._v("æˆ‘ä»¬å…ˆæ¥çœ‹ä¸‹ä¸Šè¿°ä»£ç ä¸­ï¼Œåªåˆ†æå…¥å£æ–‡ä»¶æ—¶çš„æ‰“å°æƒ…å†µã€‚"),a("strong",[t._v("å…·ä½“ä»£ç å¦‚ä¸‹ï¼š")])]),t._v(" "),a("div",{staticClass:"language-json extra-class"},[a("pre",{pre:!0,attrs:{class:"language-json"}},[a("code",[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  filename"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" './src/index.js'"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  dependencies"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" './message.js'"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" './src\\\\message.js' "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  code"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" '"),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"use strict"')]),t._v(";\\n' +\n    '\\n' +\n    'var _message = _interopRequireDefault(require("),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"./message.js"')]),t._v("));\\n' +\n    '\\n' +\n    'function _interopRequireDefault(obj) "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" return obj && obj.__esModule ? obj "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token property"}},[t._v('"default"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" obj "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("; "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\\n' +\n    '\\n' +\n    'console.log(_message"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"default"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v(");'\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])]),a("p",[t._v("å¤§å®¶å¯ä»¥çœ‹åˆ°ï¼Œå…¥å£æ–‡ä»¶åˆ†æå®Œäº†ä»¥åï¼Œè¿˜æœ‰ä¸€å±‚ä¸€å±‚çš„ä¾èµ–å’Œ codeã€‚ç°åœ¨ï¼Œæˆ‘ä»¬éœ€è¦å»é¡ºç€è¿™äº›ä¾èµ–ï¼Œæ¥æŠŠæ•´ä¸ªé¡¹ç›®çš„å†…å®¹åˆ†æå‡ºæ¥ã€‚")]),t._v(" "),a("h2",{attrs:{id:"_2-åˆ†ææ‰€æœ‰æ¨¡å—çš„ä¾èµ–å…³ç³»"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_2-åˆ†ææ‰€æœ‰æ¨¡å—çš„ä¾èµ–å…³ç³»"}},[t._v("#")]),t._v(" 2. åˆ†ææ‰€æœ‰æ¨¡å—çš„ä¾èµ–å…³ç³»")]),t._v(" "),a("p",[t._v("æˆ‘ä»¬ç°åœ¨æ¥å¯¹ "),a("code",[t._v("bundler.js")]),t._v(" è¿›è¡Œå‡çº§æ”¹é€ ï¼ŒæŠŠæ‰€æœ‰æ¨¡å—çš„ä¾èµ–å…³ç³»ç»™æç»˜å‡ºæ¥ã€‚"),a("strong",[t._v("å…·ä½“ä»£ç å¦‚ä¸‹ï¼š")])]),t._v(" "),a("div",{staticClass:"language-js extra-class"},[a("pre",{pre:!0,attrs:{class:"language-js"}},[a("code",[a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" fs "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("require")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'fs'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" path "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("require")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'path'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" parser "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("require")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'@babel/parser'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" traverse "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("require")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'@babel/traverse'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("default"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" babel "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("require")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'@babel/core'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function-variable function"}},[t._v("moduleAnalyser")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("filename")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//1. é¦–å…ˆæ‹¿åˆ°æ–‡ä»¶åï¼Œæ‹¿åˆ°æ–‡ä»¶åä¹‹åæˆ‘ä»¬å»è¯»å–æ–‡ä»¶é‡Œé¢çš„å†…å®¹")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" content "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" fs"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("readFileSync")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("filename"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'utf-8'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//2. å€ŸåŠ©Babel-parserï¼Œå°†æ–‡ä»¶é‡Œjsçš„å­—ç¬¦ä¸²ï¼Œè½¬åŒ–æˆä¸€ä¸ªjsçš„å¯¹è±¡->è¿™ä¸ªjså¯¹è±¡å°±æ˜¯æˆ‘ä»¬æ‰€è¯´çš„æŠ½è±¡è¯­æ³•æ ‘")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" ast "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" parser"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("parse")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("content"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 3. å¦‚æœä½ ä¼ å…¥çš„ES6çš„è¯­æ³•ï¼Œé‚£ä¹ˆéœ€è¦è®¾ç½®sourceTypeä¸ºmodule")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("sourceType")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'module'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n  "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//æ”¶é›†å…¥å£æ–‡ä»¶ä¸­çš„ä¾èµ–æ–‡ä»¶")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" dependencies "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n  "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("traverse")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("ast"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("/*4. æœ‰äº†æŠ½è±¡è¯­æ³•æ ‘ä¹‹åï¼Œæˆ‘ä»¬éœ€è¦å»åˆ†æï¼Œ\n        å®ƒé‡Œé¢çš„å£°æ˜éƒ½åœ¨å“ªäº›åœ°æ–¹ï¼Œ\n        å»æ‰¾åˆ°importè¿™äº›è¯­å¥å¯¹åº”çš„å†…å®¹\n        5. éœ€è¦å€ŸåŠ©@babel/traverseè¿™ä¸ªå·¥å…·ï¼Œ\n        è¿™ä¸ªå·¥å…·è¡¨æ˜å½“æŠ½è±¡è¯­æ³•æ ‘æœ‰ImportDeclarationè¿™æ ·çš„è¯­å¥æ—¶ï¼Œ\n        å®ƒå°±ä¼šç»§ç»­ä¸‹é¢çš„å‡½æ•°*/")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("ImportDeclaration")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token parameter"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" node "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")])]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n      "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// console.log(node);")]),t._v("\n      "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" dirname "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" path"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("dirname")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("filename"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n      "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" newFile "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'./'")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("+")]),t._v(" path"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("join")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("dirname"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" node"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("source"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("value"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n      "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// console.log(newFile);")]),t._v("\n      "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//6. æ‰¾åˆ°importè¯­å¥ä¹‹åï¼Œå°†è¿™äº›è¯­å¥æ‹¼è£…æˆä¸€ä¸ªå¯¹è±¡ï¼Œæ”¾åœ¨dependenciesè¿™ä¸ªå˜é‡ä¸­ï¼ˆä»¥é”®å€¼å¯¹çš„æ–¹å¼æ¥è¿›è¡Œå­˜å‚¨ï¼‰")]),t._v("\n      dependencies"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("node"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("source"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("value"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" newFile"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("/*\n    7. åˆ†æå¥½äº†ä¹‹åï¼Œå¯¹æ¨¡å—çš„æºä»£ç è¿›è¡Œä¸€æ¬¡ç¼–è¯‘ã€‚é€šè¿‡ä½¿ç”¨transformFromAstï¼Œ\n    æŠŠå®ƒä»ä¸€ä¸ªES moduleï¼Œè½¬æ¢æˆæµè§ˆå™¨å¯ä»¥æ‰§è¡Œçš„è¯­æ³•ï¼Œå¹¶å°†å…¶å­˜å‚¨åœ¨codeé‡Œé¢ï¼Œ\n    codeç”Ÿæˆçš„ä»£ç å°±æ˜¯æˆ‘ä»¬å¯ä»¥åœ¨æµè§ˆå™¨ä¸Šè¿è¡Œçš„ä»£ç */")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" code "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" babel"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("transformFromAst")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("ast"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("null")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("presets")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'@babel/preset-env'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//è¿”å›å…¥å£æ–‡ä»¶çš„åå­—")]),t._v("\n    filename"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    dependencies"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    code"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// console.log(dependencies);")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function-variable function"}},[t._v("makeDependenciesGraph")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("entry")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//1. å¯¹å…¥å£æ¨¡å—è¿›è¡Œä¸€æ¬¡åˆ†æ")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" entryModule "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("moduleAnalyser")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("entry"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// console.log(entryModule);")]),t._v("\n\n  "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//2. å®šä¹‰ä¸€ä¸ªæ•°ç»„ï¼Œå­˜æ”¾å…¥å£æ–‡ä»¶å’Œä¾èµ–")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" graphArray "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("entryModule"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//3. å¯¹graphArrayè¿›è¡Œéå†")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("for")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("i "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("0")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v(" i "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v(" graphArray"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("length"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v(" i"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("++")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//4. å–å‡ºgraphArrayä¸­çš„æ¯ä¸€é¡¹")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" item "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" graphArray"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("i"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//5. å–å‡ºæ¯ä¸€é¡¹ä¸­çš„ä¾èµ–dependencies")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" dependencies "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" item"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//6. å¦‚æœå…¥å£æ–‡ä»¶æœ‰ä¾èµ–æ—¶ï¼Œå°±å¯¹ä¾èµ–è¿›è¡Œå¾ªç¯")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("if")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("dependencies"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n      "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("/*7. é€šè¿‡ä¸æ–­çš„å¾ªç¯ï¼Œæœ€ç»ˆï¼Œå¯ä»¥æŠŠå®ƒçš„å…¥å£æ–‡ä»¶ï¼Œä»¥åŠå®ƒçš„ä¾èµ–ï¼Œ\n            è¿˜æœ‰å®ƒçš„ä¾èµ–çš„ä¾èµ–ï¼Œä¸€å±‚ä¸€å±‚çš„éå†å‡ºæ¥ï¼Œå¹¶æ¨åˆ°graphArrayå½“ä¸­*/")]),t._v("\n      "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("for")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("let")]),t._v(" j "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("in")]),t._v(" dependencies"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("/*8. é€šè¿‡é˜Ÿåˆ—(å…ˆè¿›å…ˆå‡º)çš„æ–¹å¼å®ç°é€’å½’çš„æ•ˆæœï¼›\n                ä¸ºä»€ä¹ˆç”¨é€’å½’ï¼Ÿé€’å½’åœ°è¿›è¡Œåˆ†æï¼Œæ˜¯å› ä¸ºæ¯ä¸ªä¾èµ–ä¸‹é¢æœ‰å¯èƒ½è¿˜æœ‰ä¾èµ–*/")]),t._v("\n        graphArray"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("push")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("moduleAnalyser")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("dependencies"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("j"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n      "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//9. å¤„ç†åçš„graphArrayæ˜¯ä¸€ä¸ªæ•°ç»„ï¼Œç°åœ¨éœ€è¦å¯¹å®ƒè¿›è¡Œæ ¼å¼ä¸Šçš„è½¬æ¢")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" graph "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n  graphArray"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("forEach")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("item")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    graph"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("item"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("filename"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n      "),a("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("dependencies")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" item"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("dependencies"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n      "),a("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("code")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" item"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("code"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n  "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" graph"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// './src/index.js' ä¸ºå…¥å£æ–‡ä»¶")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" graphInfo "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("makeDependenciesGraph")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'./src/index.js'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\nconsole"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("log")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("graphInfo"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])])]),a("p",[t._v("å¤§å®¶å¯ä»¥çœ‹åˆ°ï¼Œæˆ‘ä»¬åˆ¶é€ äº†ä¸€ä¸ªæ–°çš„å‡½æ•° "),a("code",[t._v("makeDependenciesGraph")]),t._v(" ï¼Œæ¥æè¿°æ‰€æœ‰æ¨¡å—çš„ä¾èµ–å…³ç³»ï¼Œå¹¶åœ¨æœ€ç»ˆå¯¹å®ƒè¿›è¡Œæ ¼å¼ä¸Šçš„è½¬æ¢ï¼Œè½¬æ¢æˆæˆ‘ä»¬ç†æƒ³ä¸­çš„ "),a("code",[t._v("js")]),t._v(" å¯¹è±¡ã€‚ç°åœ¨ï¼Œæˆ‘ä»¬æ¥çœ‹ä¸‹ä¾èµ–å…³ç³»çš„æ‰“å°ç»“æœã€‚"),a("strong",[t._v("æ‰“å°ç»“æœå¦‚ä¸‹ï¼š")])]),t._v(" "),a("div",{staticClass:"language-json extra-class"},[a("pre",{pre:!0,attrs:{class:"language-json"}},[a("code",[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  './src/index.js'"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    dependencies"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" './message.js'"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" './src\\\\message.js' "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    code"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" '"),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"use strict"')]),t._v(";\\n' +\n      '\\n' +\n      'var _message = _interopRequireDefault(require("),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"./message.js"')]),t._v("));\\n' +\n      '\\n' +\n      'function _interopRequireDefault(obj) "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" return obj && obj.__esModule ? obj "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token property"}},[t._v('"default"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" obj "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("; "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\\n' +\n      '\\n' +\n      'console.log(_message"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"default"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v(");'\n  "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  './src\\\\message.js'"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    dependencies"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" './word.js'"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" './src\\\\word.js' "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    code"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" '"),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"use strict"')]),t._v(";\\n' +\n      '\\n' +\n      'Object.defineProperty(exports"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"__esModule"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\\n' +\n      '  value"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token boolean"}},[t._v("true")]),t._v("\\n' +\n      '"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v(");\\n' +\n      'exports"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"default"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v(" = void "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("0")]),t._v(";\\n' +\n      '\\n' +\n      'var _word = require("),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"./word.js"')]),t._v(");\\n' +\n      '\\n' +\n      'var message = "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"hello "')]),t._v(".concat(_word.word);\\n' +\n      'var _default = message;\\n' +\n      'exports"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"default"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v(" = _default;'\n  "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  './src\\\\word.js'"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    dependencies"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    code"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" '"),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"use strict"')]),t._v(";\\n' +\n      '\\n' +\n      'Object.defineProperty(exports"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"__esModule"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\\n' +\n      '  value"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token boolean"}},[t._v("true")]),t._v("\\n' +\n      '"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v(");\\n' +\n      'exports.word = void "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("0")]),t._v(";\\n' +\n      "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("\"var word = 'monday';\\n\"")]),t._v(" +\n      'exports.word = word;'\n  "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])]),a("p",[t._v("å¤§å®¶å¯ä»¥çœ‹åˆ°ï¼Œæ‰€æœ‰æ¨¡å—çš„ä¾èµ–å…³ç³»éƒ½ç»™éå†å‡ºæ¥äº†ã€‚è¿™ä¹Ÿå°±è¯´æ˜äº†ï¼Œæˆ‘ä»¬æˆåŠŸè¿›è¡Œäº†è¿™ä¸€æ­¥çš„åˆ†æã€‚")]),t._v(" "),a("h1",{attrs:{id:"ğŸ-ä¸‰ã€ç”Ÿæˆä»£ç "}},[a("a",{staticClass:"header-anchor",attrs:{href:"#ğŸ-ä¸‰ã€ç”Ÿæˆä»£ç "}},[t._v("#")]),t._v(" ğŸ ä¸‰ã€ç”Ÿæˆä»£ç ")]),t._v(" "),a("h2",{attrs:{id:"_1-é€»è¾‘ç¼–å†™"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_1-é€»è¾‘ç¼–å†™"}},[t._v("#")]),t._v(" 1. é€»è¾‘ç¼–å†™")]),t._v(" "),a("p",[t._v("ä¸Šé¢æˆ‘ä»¬å·²ç»æˆåŠŸç”Ÿæˆäº†ä¾èµ–å›¾è°±ï¼Œé‚£ç°åœ¨ï¼Œæˆ‘ä»¬å°±æ¥æŠŠè¿™ä¸ªä¾èµ–å›¾è°±ï¼Œç”Ÿæˆèƒ½å¤ŸçœŸæ­£åœ¨æµè§ˆå™¨ä¸Šè¿è¡Œçš„ä»£ç ã€‚æˆ‘ä»¬ç»§ç»­åœ¨ "),a("code",[t._v("bundle.js")]),t._v(" ä¸Šï¼Œç¼–å†™ä¸€ä¸ªç”Ÿæˆä»£ç çš„é€»è¾‘ã€‚"),a("strong",[t._v("å…·ä½“ä»£ç å¦‚ä¸‹ï¼š")])]),t._v(" "),a("div",{staticClass:"language-js extra-class"},[a("pre",{pre:!0,attrs:{class:"language-js"}},[a("code",[a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" fs "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("require")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'fs'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" path "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("require")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'path'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" parser "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("require")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'@babel/parser'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" traverse "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("require")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'@babel/traverse'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("default"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" babel "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("require")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'@babel/core'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function-variable function"}},[t._v("moduleAnalyser")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("filename")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//1. é¦–å…ˆæ‹¿åˆ°æ–‡ä»¶åï¼Œæ‹¿åˆ°æ–‡ä»¶åä¹‹åæˆ‘ä»¬å»è¯»å–æ–‡ä»¶é‡Œé¢çš„å†…å®¹")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" content "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" fs"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("readFileSync")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("filename"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'utf-8'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//2. å€ŸåŠ©Babel-parserï¼Œå°†æ–‡ä»¶é‡Œjsçš„å­—ç¬¦ä¸²ï¼Œè½¬åŒ–æˆä¸€ä¸ªjsçš„å¯¹è±¡->è¿™ä¸ªjså¯¹è±¡å°±æ˜¯æˆ‘ä»¬æ‰€è¯´çš„æŠ½è±¡è¯­æ³•æ ‘")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" ast "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" parser"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("parse")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("content"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 3. å¦‚æœä½ ä¼ å…¥çš„ES6çš„è¯­æ³•ï¼Œé‚£ä¹ˆéœ€è¦è®¾ç½®sourceTypeä¸ºmodule")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("sourceType")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'module'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n  "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//æ”¶é›†å…¥å£æ–‡ä»¶ä¸­çš„ä¾èµ–æ–‡ä»¶")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" dependencies "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n  "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("traverse")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("ast"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("/*4. æœ‰äº†æŠ½è±¡è¯­æ³•æ ‘ä¹‹åï¼Œæˆ‘ä»¬éœ€è¦å»åˆ†æï¼Œ\n        å®ƒé‡Œé¢çš„å£°æ˜éƒ½åœ¨å“ªäº›åœ°æ–¹ï¼Œ\n        å»æ‰¾åˆ°importè¿™äº›è¯­å¥å¯¹åº”çš„å†…å®¹\n        5. éœ€è¦å€ŸåŠ©@babel/traverseè¿™ä¸ªå·¥å…·ï¼Œ\n        è¿™ä¸ªå·¥å…·è¡¨æ˜å½“æŠ½è±¡è¯­æ³•æ ‘æœ‰ImportDeclarationè¿™æ ·çš„è¯­å¥æ—¶ï¼Œ\n        å®ƒå°±ä¼šç»§ç»­ä¸‹é¢çš„å‡½æ•°*/")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("ImportDeclaration")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token parameter"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" node "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")])]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n      "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// console.log(node);")]),t._v("\n      "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" dirname "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" path"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("dirname")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("filename"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n      "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" newFile "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'./'")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("+")]),t._v(" path"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("join")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("dirname"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" node"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("source"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("value"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n      "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// console.log(newFile);")]),t._v("\n      "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//6. æ‰¾åˆ°importè¯­å¥ä¹‹åï¼Œå°†è¿™äº›è¯­å¥æ‹¼è£…æˆä¸€ä¸ªå¯¹è±¡ï¼Œæ”¾åœ¨dependenciesè¿™ä¸ªå˜é‡ä¸­ï¼ˆä»¥é”®å€¼å¯¹çš„æ–¹å¼æ¥è¿›è¡Œå­˜å‚¨ï¼‰")]),t._v("\n      dependencies"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("node"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("source"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("value"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" newFile"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("/*\n    7. åˆ†æå¥½äº†ä¹‹åï¼Œå¯¹æ¨¡å—çš„æºä»£ç è¿›è¡Œä¸€æ¬¡ç¼–è¯‘ã€‚é€šè¿‡ä½¿ç”¨transformFromAstï¼Œ\n    æŠŠå®ƒä»ä¸€ä¸ªES moduleï¼Œè½¬æ¢æˆæµè§ˆå™¨å¯ä»¥æ‰§è¡Œçš„è¯­æ³•ï¼Œå¹¶å°†å…¶å­˜å‚¨åœ¨codeé‡Œé¢ï¼Œ\n    codeç”Ÿæˆçš„ä»£ç å°±æ˜¯æˆ‘ä»¬å¯ä»¥åœ¨æµè§ˆå™¨ä¸Šè¿è¡Œçš„ä»£ç */")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" code "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" babel"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("transformFromAst")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("ast"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("null")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("presets")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'@babel/preset-env'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//è¿”å›å…¥å£æ–‡ä»¶çš„åå­—")]),t._v("\n    filename"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    dependencies"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    code"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// console.log(dependencies);")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function-variable function"}},[t._v("makeDependenciesGraph")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("entry")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//1. å¯¹å…¥å£æ¨¡å—è¿›è¡Œä¸€æ¬¡åˆ†æ")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" entryModule "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("moduleAnalyser")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("entry"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// console.log(entryModule);")]),t._v("\n\n  "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//2. å®šä¹‰ä¸€ä¸ªæ•°ç»„ï¼Œå­˜æ”¾å…¥å£æ–‡ä»¶å’Œä¾èµ–")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" graphArray "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("entryModule"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//3. å¯¹graphArrayè¿›è¡Œéå†")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("for")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("i "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("0")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v(" i "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v(" graphArray"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("length"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v(" i"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("++")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//4. å–å‡ºgraphArrayä¸­çš„æ¯ä¸€é¡¹")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" item "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" graphArray"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("i"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//5. å–å‡ºæ¯ä¸€é¡¹ä¸­çš„ä¾èµ–dependencies")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" dependencies "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" item"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//6. å¦‚æœå…¥å£æ–‡ä»¶æœ‰ä¾èµ–æ—¶ï¼Œå°±å¯¹ä¾èµ–è¿›è¡Œå¾ªç¯")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("if")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("dependencies"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n      "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("/*7. é€šè¿‡ä¸æ–­çš„å¾ªç¯ï¼Œæœ€ç»ˆï¼Œå¯ä»¥æŠŠå®ƒçš„å…¥å£æ–‡ä»¶ï¼Œä»¥åŠå®ƒçš„ä¾èµ–ï¼Œ\n            è¿˜æœ‰å®ƒçš„ä¾èµ–çš„ä¾èµ–ï¼Œä¸€å±‚ä¸€å±‚çš„éå†å‡ºæ¥ï¼Œå¹¶æ¨åˆ°graphArrayå½“ä¸­*/")]),t._v("\n      "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("for")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("let")]),t._v(" j "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("in")]),t._v(" dependencies"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("/*8. é€šè¿‡é˜Ÿåˆ—(å…ˆè¿›å…ˆå‡º)çš„æ–¹å¼å®ç°é€’å½’çš„æ•ˆæœï¼›\n                ä¸ºä»€ä¹ˆç”¨é€’å½’ï¼Ÿé€’å½’åœ°è¿›è¡Œåˆ†æï¼Œæ˜¯å› ä¸ºæ¯ä¸ªä¾èµ–ä¸‹é¢æœ‰å¯èƒ½è¿˜æœ‰ä¾èµ–*/")]),t._v("\n        graphArray"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("push")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("moduleAnalyser")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("dependencies"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("j"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n      "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//9. å¤„ç†åçš„graphArrayæ˜¯ä¸€ä¸ªæ•°ç»„ï¼Œç°åœ¨éœ€è¦å¯¹å®ƒè¿›è¡Œæ ¼å¼ä¸Šçš„è½¬æ¢")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" graph "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n  graphArray"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("forEach")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("item")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    graph"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("item"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("filename"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n      "),a("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("dependencies")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" item"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("dependencies"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n      "),a("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("code")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" item"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("code"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n  "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" graph"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function-variable function"}},[t._v("generateCode")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("entry")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//1. å°†ç”Ÿæˆçš„ä¾èµ–å›¾è°±è¿›è¡Œæ ¼å¼è½¬æ¢")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" graph "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token constant"}},[t._v("JSON")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("stringify")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("makeDependenciesGraph")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("entry"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("/** 2. æ„é€ requireå‡½æ•°å’Œexportså¯¹è±¡ï¼Œè½¬åŒ–æˆæµè§ˆå™¨è®¤è¯†çš„å­—ç¬¦ä¸²\n   * return require(graph[module].dependencies[relative]) ç›®çš„æ˜¯ä¸ºäº†æ‰¾åˆ°çœŸå®çš„è·¯å¾„\n   */")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token template-string"}},[a("span",{pre:!0,attrs:{class:"token template-punctuation string"}},[t._v("`")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("\n        (function(graph){\n            function require(module){\n                function localRequire(relativePath) {\n                    return require(graph[module].dependencies[relativePath])\n                }\n                var exports = {};\n                (function(require, exports, code){\n                    eval(code)\n                })(localRequire, exports, graph[module].code);\n                return exports;\n            };\n            require('")]),a("span",{pre:!0,attrs:{class:"token interpolation"}},[a("span",{pre:!0,attrs:{class:"token interpolation-punctuation punctuation"}},[t._v("${")]),t._v("entry"),a("span",{pre:!0,attrs:{class:"token interpolation-punctuation punctuation"}},[t._v("}")])]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("')\n        })(")]),a("span",{pre:!0,attrs:{class:"token interpolation"}},[a("span",{pre:!0,attrs:{class:"token interpolation-punctuation punctuation"}},[t._v("${")]),t._v("graph"),a("span",{pre:!0,attrs:{class:"token interpolation-punctuation punctuation"}},[t._v("}")])]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v(");\n    ")]),a("span",{pre:!0,attrs:{class:"token template-punctuation string"}},[t._v("`")])]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// './src/index.js' ä¸ºå…¥å£æ–‡ä»¶")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" code "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("generateCode")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'./src/index.js'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\nconsole"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("log")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("code"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])])]),a("p",[t._v("é€šè¿‡ä¸Šé¢çš„ä»£ç æˆ‘ä»¬å¯ä»¥çœ‹åˆ°ï¼Œæˆ‘ä»¬å…ˆå°†ç”Ÿæˆçš„ä¾èµ–å›¾è°±è¿›è¡Œæ ¼å¼è½¬æ¢ï¼Œä¹‹åå‘¢ï¼Œæ„é€  "),a("code",[t._v("require")]),t._v(" å‡½æ•°å’Œ "),a("code",[t._v("exports")]),t._v(" å¯¹è±¡ï¼Œæœ€ç»ˆè½¬æ¢æˆæµè§ˆå™¨è®¤è¯†çš„å­—ç¬¦ä¸²ã€‚")]),t._v(" "),a("h2",{attrs:{id:"_2-ç»“æœåˆ†æ"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_2-ç»“æœåˆ†æ"}},[t._v("#")]),t._v(" 2. ç»“æœåˆ†æ")]),t._v(" "),a("p",[t._v("é€šè¿‡ä¸Šé¢çš„ä¸šåŠ¡ç¼–å†™ï¼Œæˆ‘ä»¬å®Œæˆäº†å¯¹æ•´ä¸ªé¡¹ç›®è¿›è¡Œæ‰“åŒ…çš„è¿‡ç¨‹ã€‚ç°åœ¨ï¼Œæˆ‘ä»¬æ¥çœ‹ä¸€ä¸‹"),a("strong",[t._v("æ‰“å°ç»“æœï¼š")])]),t._v(" "),a("div",{staticClass:"language-json extra-class"},[a("pre",{pre:!0,attrs:{class:"language-json"}},[a("code",[t._v("(function(graph)"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n            function require(module)"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n                function localRequire(relativePath) "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n                    return require(graph"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("module"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v(".dependencies"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("relativePath"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v(")\n                "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n                var exports = "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v(";\n                (function(require"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" exports"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" code)"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n                    eval(code)\n                "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v(")(localRequire"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" exports"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" graph"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("module"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v(".code);\n                return exports;\n            "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v(";\n            require('./src/index.js')\n        "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v(")("),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),a("span",{pre:!0,attrs:{class:"token property"}},[t._v('"./src/index.js"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),a("span",{pre:!0,attrs:{class:"token property"}},[t._v('"dependencies"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),a("span",{pre:!0,attrs:{class:"token property"}},[t._v('"./message.js"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"./src\\\\message.js"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),a("span",{pre:!0,attrs:{class:"token property"}},[t._v('"code"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"\\"use strict\\";\\n\\nvar _message = _interopRequireDefault(require(\\"./message.js\\"));\\n\\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { \\"default\\": obj }; }\\n\\nconsole.log(_message[\\"default\\"]);"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),a("span",{pre:!0,attrs:{class:"token property"}},[t._v('"./src\\\\message.js"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),a("span",{pre:!0,attrs:{class:"token property"}},[t._v('"dependencies"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),a("span",{pre:!0,attrs:{class:"token property"}},[t._v('"./word.js"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"./src\\\\word.js"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),a("span",{pre:!0,attrs:{class:"token property"}},[t._v('"code"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"\\"use strict\\";\\n\\nObject.defineProperty(exports, \\"__esModule\\", {\\n  value: true\\n});\\nexports[\\"default\\"] = void 0;\\n\\nvar _word = require(\\"./word.js\\");\\n\\nvar message = \\"hello \\".concat(_word.word);\\nvar _default = message;\\nexports[\\"default\\"] = _default;"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),a("span",{pre:!0,attrs:{class:"token property"}},[t._v('"./src\\\\word.js"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),a("span",{pre:!0,attrs:{class:"token property"}},[t._v('"dependencies"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),a("span",{pre:!0,attrs:{class:"token property"}},[t._v('"code"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"\\"use strict\\";\\n\\nObject.defineProperty(exports, \\"__esModule\\", {\\n  value: true\\n});\\nexports.word = void 0;\\nvar word = \'monday\';\\nexports.word = word;"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v(");\n")])])]),a("p",[t._v("æ¥ä¸‹æ¥ï¼Œæˆ‘ä»¬æŠŠè¿™ä¸ªæ‰“å°ç»“æœï¼Œæ”¾åˆ°æµè§ˆå™¨ä¸Šè¿›è¡Œæ£€éªŒã€‚"),a("strong",[t._v("æ£€éªŒç»“æœå¦‚ä¸‹ï¼š")])]),t._v(" "),a("p",[a("img",{attrs:{src:"https://img-blog.csdnimg.cn/23f90072e0094305b2e0e3db0cb8edc8.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3dlaXhpbl80NDgwMzc1Mw==,size_16,color_FFFFFF,t_70#",alt:"æ£€éªŒç»“æœ"}})]),t._v(" "),a("p",[t._v("å¤§å®¶å¯ä»¥çœ‹åˆ°ï¼Œæ‰“åŒ…åçš„ç»“æœï¼Œåœ¨æµè§ˆå™¨ä¸ŠæˆåŠŸè¿è¡Œäº†ï¼Œå¹¶æ˜¾ç¤ºé™¤äº† "),a("code",[t._v("hello monday")]),t._v(" ï¼Œè‡³æ­¤ï¼Œè¯´æ˜æˆ‘ä»¬çš„é¡¹ç›®æ‰“åŒ…æˆåŠŸã€‚")]),t._v(" "),a("h1",{attrs:{id:"ğŸ“-å››ã€ç»“æŸè¯­"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#ğŸ“-å››ã€ç»“æŸè¯­"}},[t._v("#")]),t._v(" ğŸ“ å››ã€ç»“æŸè¯­")]),t._v(" "),a("p",[t._v("åœ¨ä¸Šé¢çš„è¿™ç¯‡æ–‡ç« ä¸­ï¼Œä»æ¨¡å—çš„å…¥å£æ–‡ä»¶åˆ†æï¼Œå†åˆ°ä¾èµ–å›¾è°±çš„è§£æï¼Œæœ€ååˆ°ç”Ÿæˆæµè§ˆå™¨æ‰€è®¤è¯†çš„ä»£ç ï¼Œæˆ‘ä»¬äº†è§£äº†æ‰“åŒ…å·¥å…·çš„æ•´ä¸ªæ“ä½œæµç¨‹ã€‚")]),t._v(" "),a("p",[t._v("åˆ°è¿™é‡Œï¼Œå…³äºæœ¬æ–‡çš„è®²è§£å°±ç»“æŸå•¦ï¼å¸Œæœ›å¯¹å¤§å®¶æœ‰å¸®åŠ©~")]),t._v(" "),a("p",[t._v("å¦‚æ–‡ç« æœ‰è¯¯æˆ–æœ‰ä¸ç†è§£çš„åœ°æ–¹ï¼Œæ¬¢è¿å°ä¼™ä¼´ä»¬è¯„è®ºåŒºç•™è¨€æ’’~ğŸ’¬")]),t._v(" "),a("p",[t._v("æœ¬æ–‡ä»£ç å·²ä¸Šä¼ è‡³å…¬ä¼—å·ï¼Œåå°å›å¤å…³é”®è¯ "),a("code",[t._v("webpack")]),t._v(" å³å¯è·å–~")]),t._v(" "),a("h1",{attrs:{id:"ğŸ£-å½©è›‹-one-more-thing"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#ğŸ£-å½©è›‹-one-more-thing"}},[t._v("#")]),t._v(" ğŸ£ å½©è›‹ One More Thing")]),t._v(" "),a("h2",{attrs:{id:"å¾€æœŸæ¨è"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#å¾€æœŸæ¨è"}},[t._v("#")]),t._v(" ï¼ˆï¼šå¾€æœŸæ¨è")]),t._v(" "),a("p",[t._v("webpack å…¥é—¨æ ¸å¿ƒçŸ¥è¯† ğŸ‘‰"),a("a",{attrs:{href:"https://blog.csdn.net/weixin_44803753/article/details/118728201",target:"_blank",rel:"noopener noreferrer"}},[t._v("ä¸ä¼š webpack çš„å‰ç«¯å¯èƒ½æ˜¯æ¡æ¥çš„ï¼Œä¸‡å­—æ€»ç»“ webpack çš„è¶…å…¥é—¨æ ¸å¿ƒçŸ¥è¯†"),a("OutboundLink")],1)]),t._v(" "),a("p",[t._v("webpack å…¥é—¨è¿›é˜¶çŸ¥è¯† ğŸ‘‰"),a("a",{attrs:{href:"https://blog.csdn.net/weixin_44803753/article/details/118885391",target:"_blank",rel:"noopener noreferrer"}},[t._v("webpack å…¥é—¨æ ¸å¿ƒçŸ¥è¯†è¿˜çœ‹ä¸è¿‡ç˜¾ï¼Ÿé€Ÿæ¥å›´è§‚ä¸‡å­—è¿›é˜¶çŸ¥è¯†"),a("OutboundLink")],1)]),t._v(" "),a("p",[t._v("webpack å®æˆ˜æ¡ˆä¾‹é…ç½® ğŸ‘‰"),a("a",{attrs:{href:"https://blog.csdn.net/weixin_44803753/article/details/118977647",target:"_blank",rel:"noopener noreferrer"}},[t._v("[ä¸‡å­—æ€»ç»“]webpack åªä¼šåŸºç¡€é…ç½®å¯ä¸è¡Œï¼å¿«æ¥æŠŠå®æˆ˜æ¡ˆä¾‹é…ç½®ä¸€èµ·æ‰“åŒ…å¸¦èµ°"),a("OutboundLink")],1)]),t._v(" "),a("p",[t._v("æ‰‹å†™ loader å’Œ pluginğŸ‘‰"),a("a",{attrs:{href:"https://blog.csdn.net/weixin_44803753/article/details/119022964",target:"_blank",rel:"noopener noreferrer"}},[t._v("webpack å®æˆ˜ä¹‹æ‰‹å†™ä¸€ä¸ª loader å’Œ plugin"),a("OutboundLink")],1)]),t._v(" "),a("h2",{attrs:{id:"ç•ªå¤–ç¯‡"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#ç•ªå¤–ç¯‡"}},[t._v("#")]),t._v(" ï¼ˆï¼šç•ªå¤–ç¯‡")]),t._v(" "),a("blockquote",[a("ul",[a("li",[a("p",[t._v("å…³æ³¨å…¬ä¼—å·"),a("strong",[t._v("æ˜ŸæœŸä¸€ç ”ç©¶å®¤")]),t._v("ï¼Œç¬¬ä¸€æ—¶é—´å…³æ³¨ä¼˜è´¨æ–‡ç« ï¼Œ"),a("strong",[t._v("æ›´å¤šç²¾é€‰ä¸“æ å¾…ä½ è§£é”")]),t._v("~")])]),t._v(" "),a("li",[a("p",[t._v("å¦‚æœè¿™ç¯‡æ–‡ç« å¯¹ä½ æœ‰ç”¨ï¼Œè®°å¾—"),a("strong",[t._v("ç•™ä¸ªè„šå° jio")]),t._v("å†èµ°å“¦~")])]),t._v(" "),a("li",[a("p",[t._v("ä»¥ä¸Šå°±æ˜¯æœ¬æ–‡çš„å…¨éƒ¨å†…å®¹ï¼æˆ‘ä»¬ä¸‹æœŸè§ï¼ğŸ‘‹ğŸ‘‹ğŸ‘‹")])])])])])}),[],!1,null,null,null);s.default=e.exports}}]);