---
title: ç»„ä»¶åº“å®æˆ˜ | ç”¨vue3+tså®ç°å…¨å±€Headerå’Œåˆ—è¡¨æ•°æ®æ¸²æŸ“ColumnList
author: å‘¨ä¸€
date: '2021-07-13'
categories:
  - å‰ç«¯å¼€å‘
tags:
  - vue3+tsç»„ä»¶åº“å¼€å‘
sidebar: 'auto'
---

# ğŸ–¼ï¸ åºè¨€

æœ€è¿‘åœ¨ç”¨ `vue3` å’Œ `ts` æ£é¼“ä¸€äº›å°å·¥å…·ï¼Œå‘ç°å¹³å¸¸å¼€å‘ä¸­ä¸€ä¸ªå¾ˆå¸¸è§çš„éœ€æ±‚å°±æ˜¯ï¼Œ**æ•°æ®åˆ—è¡¨çš„æ¸²æŸ“**ã€‚ç°åœ¨é‡æ–°å­¦ä¹ ï¼Œå‘ç°æˆ‘åœ¨å­¦ `vue2` æ—¶çš„å¾ˆå¤šè®¾è®¡è§„èŒƒå’Œé€»è¾‘éƒ½è€ƒè™‘çš„ä¸æ˜¯ç‰¹åˆ«å¦¥å½“ã€‚

å› æ­¤ï¼Œå†™ä¸‹è¿™ç¯‡æ–‡ç« ï¼Œè®°å½•ç»„ä»¶è®¾è®¡ä¸­æ•°æ®åˆ—è¡¨æ¸²æŸ“å’Œå…¨å±€å¤´éƒ¨çš„è®¾è®¡ã€‚

ä¸€èµ·æ¥å­¦ä¹ å§~ğŸ™†

# ğŸ“» ä¸€ã€ColumnList æ•°æ®æ¸²æŸ“

## 1ã€è®¾è®¡ç¨¿æŠ¢å…ˆçŸ¥

åœ¨äº†è§£åŠŸèƒ½å®ç°ä¹‹å‰ï¼Œæˆ‘ä»¬å…ˆæ¥çœ‹çœ‹**åŸå‹å›¾**ï¼Œçœ‹æˆ‘ä»¬æƒ³è¦å®ç°çš„æ•°æ®åˆ—è¡¨æ˜¯æ€ä¹ˆæ ·çš„ã€‚**å¦‚ä¸‹å›¾æ‰€ç¤ºï¼š**

![columnListè®¾è®¡ç¨¿](https://img-blog.csdnimg.cn/20210713111811858.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3dlaXhpbl80NDgwMzc1Mw==,size_16,color_FFFFFF,t_70#pic_center)

å¤§å®¶å¯ä»¥å…ˆäº†è§£ä¸€ä¸‹ï¼Œæˆ‘ä»¬å¾…ä¼šæ‰€è¦å®ç°å†…å®¹çš„æ•ˆæœå›¾ã€‚

## 2ã€æ•°æ®æ„æ€

äº†è§£å®Œå…·ä½“çš„æ•ˆæœå›¾ä¹‹åå‘¢ï¼Œç°åœ¨æˆ‘ä»¬è¦å¼€å§‹æ¥å¹²æ´»å•¦ï¼

é¦–å…ˆæˆ‘ä»¬éœ€è¦å…ˆæ„æ€è¿™ä¸ªç»„ä»¶æ‰€éœ€è¦çš„æ•°æ®æœ‰å“ªä¸€äº›å‘¢ï¼Ÿ

è¿™ä¸ªç»„ä»¶æ‰€éœ€è¦çš„æ•°æ®ï¼Œé¦–å…ˆæ˜¯æ¯ä¸€è¡Œæ•°æ®å®ƒè‡ªå·±å”¯ä¸€çš„ `id` ï¼Œå…¶æ¬¡å°±æ˜¯æ ‡é¢˜ `title` ï¼Œè¿˜æœ‰ä¸€ä¸ªæ˜¯å¤´åƒ `avatar` ï¼Œæœ€åä¸€ä¸ªæ˜¯æ¯ä¸ªæ ‡é¢˜å¯¹åº”çš„æ–‡å­—æè¿° `description` ã€‚

åˆ†æå®Œæˆä¹‹åï¼Œæˆ‘ä»¬ç°åœ¨åœ¨ `vue3` é¡¹ç›®ä¸‹çš„ `src|components` æ–‡ä»¶å¤¹ä¸‹æ–°å»ºä¸€ä¸ªæ–‡ä»¶ï¼Œå‘½åä¸º `ColumnList.vue` ã€‚ä¹‹åå†ç¼–å†™è¿™æ®µä¸šåŠ¡ä»£ç ã€‚**å…·ä½“ä»£ç å¦‚ä¸‹ï¼š**

```html
<template>
  <div></div>
</template>

<script lang="ts">
  import { computed, defineComponent, PropType } from 'vue';
  //ç”¨tså†™ä¸€ä¸ªæ¥å£ï¼Œå­˜æ”¾åˆ—è¡¨æ•°æ®çš„å±æ€§
  export interface ColumnProps {
    id: number;
    title: string;
    avatar?: string;
    description: string;
  }
  export default defineComponent({
    name: 'ColumnList',
    props: {
      //å°†æ¥å£çš„å†…å®¹èµ‹å€¼ç»™listæ•°ç»„ï¼Œæ–¹ä¾¿æ¥æ”¶çˆ¶ç»„ä»¶ä¼ æ¥çš„æ•°æ®
      list: {
        type: Array as PropType<ColumnProps[]>,
        required: true,
      },
    },
  });
</script>
<style lang="scss" scoped></style>
```

## 3ã€è§†å›¾æ•°æ®ç»‘å®š

ç°åœ¨ï¼Œå¯¹æ•°æ®æ„æ€å®Œæ¯•ä¹‹åï¼Œæˆ‘ä»¬æ˜¯è¿˜æ²¡æœ‰å–åˆ°ä»»ä½•æ•°æ®å¯ä»¥æ¸²æŸ“çš„ï¼Œç›¸å½“äºæ˜¯ä¸€ä¸ªç©ºçš„ `ColumnList` ã€‚ä½†æ˜¯æˆ‘ä»¬å·²ç»æœ‰äº†æ¥å£çš„å±æ€§å†…å®¹ï¼Œæ‰€ä»¥æˆ‘ä»¬å…ˆæ¥æŠŠæ•°æ®ç»‘å®šåˆ°è§†å›¾å½“ä¸­ã€‚**å…·ä½“ä»£ç å¦‚ä¸‹ï¼š**

```html
<template>
  <div class="row">
    <div v-for="column in columnList" :key="column.id" class="col-4 mb-3">
      <div class="card h-100 shadow-sm">
        <div class="card-body text-center">
          <img
            :src="column.avatar"
            :alt="column.title"
            class="rounded-circle border border-light w-25 my-3"
          />
          <h5 class="title">{{column.title}}</h5>
          <p class="card-text text-left">{{column.description}}</p>
          <a href="#" class="btn btn-outline-primary">è¿›å…¥ä¸“æ </a>
        </div>
      </div>
    </div>
  </div>
</template>

<script lang="ts">
  import { computed, defineComponent, PropType } from 'vue';
  export interface ColumnProps {
    id: number;
    title: string;
    avatar?: string;
    description: string;
  }
  export default defineComponent({
    name: 'ColumnList',
    props: {
      list: {
        type: Array as PropType<ColumnProps[]>,
        required: true,
      },
    },
  });
</script>
<style lang="scss" scoped></style>
```

**æ³¨ï¼š** è¿™é‡Œæˆ‘ç”¨åˆ°çš„æ˜¯ `bootstrap` çš„æ ·å¼åº“ï¼Œæ‰€ä»¥ `css` æ–¹é¢ä¸åšè¿‡å¤šçš„ç¼–å†™ï¼Œå¤§å®¶æœ‰éœ€è¦å¯ä»¥åˆ°[å®˜æ–¹ä¸­æ–‡æ–‡æ¡£](https://v5.bootcss.com/docs/getting-started/introduction/)è¿›è¡ŒæŸ¥çœ‹ï¼Œä¹Ÿå¯ä»¥è‡ªå·±è¿›è¡Œæ ·å¼è®¾è®¡ã€‚

åˆ°æ­¤ï¼Œæˆ‘ä»¬å°±å®Œæˆäº†ç¬¬ä¸€è½®çš„æ•°æ®ç»‘å®šã€‚æ¥ä¸‹æ¥æˆ‘ä»¬åœ¨çˆ¶ç»„ä»¶ä¸­ï¼Œè¿›è¡Œæ•°æ®ä¼ é€’ã€‚

## 4ã€æ•°æ®ä¼ é€’

æˆ‘ä»¬åœ¨ vue3 é¡¹ç›®ä¸­çš„ `src` æ–‡ä»¶å¤¹ä¸‹çš„ `App.vue` ä¸­æ¥è¿›è¡Œæ•°æ®ä¼ é€’ã€‚**å…·ä½“ä»£ç å¦‚ä¸‹ï¼š**

```html
<template>
  <div class="container">
    <column-list :list="list"></column-list>
  </div>
</template>

<script lang="ts">
  import { defineComponent } from 'vue'
  //åœ¨æ ¹æ–‡ä»¶ä¸‹å¼•å…¥bootstrap
  import 'bootstrap/dist/css/bootstrap.min.css'
  //å¼•å…¥å­ç»„ä»¶
  import ColumnList, { ColumnProps } from './components/ColumnList.vue'

  //åˆ¶é€ å­ç»„ä»¶çš„æ¥å£æ•°æ®
  const testData: ColumnProps[] = [
    {
      id: 1,
      title: 'test1ä¸“æ ',
      description: 'ä¼—æ‰€å‘¨çŸ¥ï¼Œ js æ˜¯ä¸€é—¨å¼±ç±»å‹è¯­è¨€ï¼Œå¹¶ä¸”è§„èŒƒè¾ƒå°‘ã€‚è¿™å°±å¾ˆå®¹æ˜“å¯¼è‡´åœ¨é¡¹ç›®ä¸Šçº¿ä¹‹å‰æˆ‘ä»¬å¾ˆéš¾å‘ç°åˆ°å®ƒçš„é”™è¯¯ï¼Œç­‰åˆ°é¡¹ç›®ä¸€ä¸Šçº¿ï¼Œæµ‘ç„¶ä¸è§‰åœ°ï¼Œbugå°±UpUpäº†ã€‚äºæ˜¯ï¼Œåœ¨è¿‡å»çš„è¿™ä¸¤å¹´ï¼Œtsæ‚„æ‚„çš„å´›èµ·äº†ã€‚ æœ¬ä¸“æ å°†ä»‹ç»å…³äºtsçš„ä¸€äº›å­¦ä¹ è®°å½•ã€‚'
      avatar: 'https://img0.baidu.com/it/u=3101694723,748884042&fm=26&fmt=auto&gp=0.jpg'
    },
    {
      id: 2,
      title: 'test2ä¸“æ ',
      description: 'ä¼—æ‰€å‘¨çŸ¥ï¼Œ js æ˜¯ä¸€é—¨å¼±ç±»å‹è¯­è¨€ï¼Œå¹¶ä¸”è§„èŒƒè¾ƒå°‘ã€‚è¿™å°±å¾ˆå®¹æ˜“å¯¼è‡´åœ¨é¡¹ç›®ä¸Šçº¿ä¹‹å‰æˆ‘ä»¬å¾ˆéš¾å‘ç°åˆ°å®ƒçš„é”™è¯¯ï¼Œç­‰åˆ°é¡¹ç›®ä¸€ä¸Šçº¿ï¼Œæµ‘ç„¶ä¸è§‰åœ°ï¼Œbugå°±UpUpäº†ã€‚äºæ˜¯ï¼Œåœ¨è¿‡å»çš„è¿™ä¸¤å¹´ï¼Œtsæ‚„æ‚„çš„å´›èµ·äº†ã€‚ æœ¬ä¸“æ å°†ä»‹ç»å…³äºtsçš„ä¸€äº›å­¦ä¹ è®°å½•ã€‚',
      avatar: 'https://img0.baidu.com/it/u=3101694723,748884042&fm=26&fmt=auto&gp=0.jpg'
    }
  ]

  export default defineComponent({
    name: 'App',
    components: {
      ColumnList
    },
    setup () {
      return {
        list: testData
      }
    }
  })
</script>

<style>
  #app {
    font-family: Avenir, Helvetica, Arial, sans-serif;
    -webkit-font-smoothing: antialiased;
    -moz-osx-font-smoothing: grayscale;
    text-align: center;
    color: #2c3e50;
    margin-top: 60px;
  }
</style>
```

ç°åœ¨ï¼Œæˆ‘ä»¬æ¥çœ‹ä¸‹**æ­¤æ—¶æµè§ˆå™¨çš„è¿è¡Œæ•ˆæœï¼š**

![columnListé™æ€ç»„ä»¶](https://img-blog.csdnimg.cn/20210713111843767.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3dlaXhpbl80NDgwMzc1Mw==,size_16,color_FFFFFF,t_70#pic_center)

å¤§å®¶å¯ä»¥çœ‹åˆ°ï¼Œé€šè¿‡ä»¥ä¸Šçš„ä»£ç ç¼–å†™ï¼Œæ•°æ®æ­£å¸¸çš„ä¼ é€’å¹¶è¿è¡ŒæˆåŠŸäº†ã€‚

## 5ã€æŒ å¤´æƒ…å†µ

çœ‹åˆ°è¿™é‡Œï¼Œæ„Ÿè§‰æ•´ä¸ªç»„ä»¶çš„è®¾è®¡è¿˜æŒºå°½å–„å°½ç¾çš„ã€‚ä½†æ˜¯å‘¢ï¼Œå¤§å®¶æœ‰æ²¡æœ‰æƒ³è¿‡æœ‰ä¸€ç§ç‰¹æ®Šæƒ…å†µï¼Œå‡è®¾åç«¯ä¼ æ¥çš„æ•°æ®ä¸­ï¼Œ**æœ‰ä¸€è¡Œæ•°æ®é‡Œé¢ï¼Œæ²¡æœ‰å¤´åƒ avatar çš„å€¼**ã€‚é‚£è¿™ä¸ªæ—¶å€™ï¼Œå¦‚æœæˆ‘ä»¬å‰æœŸæ²¡æœ‰è€ƒè™‘æ¸…æ¥šæœ‰å¯èƒ½é‡åˆ°çš„å„ç§æƒ…å†µï¼Œç¨‹åºä¼°è®¡å¾ˆå®¹æ˜“åœ°å°±æŠ¥é”™äº†ã€‚

æ‰€ä»¥æˆ‘ä»¬è¿˜è¦åšçš„ä¸€ä»¶äº‹æƒ…å°±æ˜¯ï¼Œå½“æ”¶ä¸åˆ°å¤´åƒçš„æ•°æ®æ—¶ï¼Œæˆ‘ä»¬è¦ç»™å®ƒåŠ ä¸€å¼ åˆå§‹åŒ–çš„å›¾ç‰‡ï¼Œä»¥è‡³äºä¿æŒåˆ—è¡¨å†…å®¹ä¸€è‡´ã€‚

ç°åœ¨æˆ‘ä»¬æ¥å¯¹ `ColumnList.vue` æ–‡ä»¶è¿›è¡Œæ”¹é€ ï¼Œ**å…·ä½“ä»£ç å¦‚ä¸‹ï¼š**

```html
<template>
  <div class="row">
    <div v-for="column in columnList" :key="column.id" class="col-4 mb-3">
      <div class="card h-100 shadow-sm">
        <div class="card-body text-center">
          <img
            :src="column.avatar"
            :alt="column.title"
            class="rounded-circle border border-light w-25 my-3"
          />
          <h5 class="title">{{column.title}}</h5>
          <p class="card-text text-left">{{column.description}}</p>
          <a href="#" class="btn btn-outline-primary">è¿›å…¥ä¸“æ </a>
        </div>
      </div>
    </div>
  </div>
</template>

<script lang="ts">
  import { computed, defineComponent, PropType } from 'vue';
  //ç”¨tså†™ä¸€ä¸ªæ¥å£ï¼Œå­˜æ”¾åˆ—è¡¨æ•°æ®çš„å±æ€§
  export interface ColumnProps {
    id: number;
    title: string;
    avatar?: string;
    description: string;
  }
  export default defineComponent({
    name: 'ColumnList',
    props: {
      //å°†æ¥å£çš„å†…å®¹èµ‹å€¼ç»™listæ•°ç»„ï¼Œæ–¹ä¾¿æ¥æ”¶çˆ¶ç»„ä»¶ä¼ æ¥çš„æ•°æ®
      list: {
        type: Array as PropType<ColumnProps[]>,
        required: true,
      },
    },
    //å°†propsä¼ é€’ç»™setup
    setup(props) {
      const columnList = computed(() => {
        //éå†listæ•°ç»„æ•°æ®çš„æ¯ä¸€è¡Œ
        return props.list.map((column) => {
          //å½“é‡åˆ°å½“å‰è¡Œæ•°æ®æ²¡æœ‰å¤´åƒæ—¶
          if (!column.avatar) {
            //èµ‹äºˆåˆå§‹åŒ–å›¾ç‰‡
            column.avatar = require('@/assets/logo.png');
          }
          return column;
        });
      });
      return {
        columnList,
      };
    },
  });
</script>

<style lang="scss" scoped></style>
```

ç»§ç»­ï¼Œæˆ‘ä»¬æŠŠ `App.vue` ä¸­ `testData` çš„æ•°æ®è¿›è¡Œåˆ å‡ã€‚**å…·ä½“ä»£ç å¦‚ä¸‹ï¼š**

```html
<template>
  <div class="container">
    <column-list :list="list"></column-list>
  </div>
</template>

<script lang="ts">

//åˆ¶é€ å­ç»„ä»¶çš„æ¥å£æ•°æ®
const testData: ColumnProps[] = [
  {
    id: 1,
    title: 'test1ä¸“æ ',
    description: 'ä¼—æ‰€å‘¨çŸ¥ï¼Œ js æ˜¯ä¸€é—¨å¼±ç±»å‹è¯­è¨€ï¼Œå¹¶ä¸”è§„èŒƒè¾ƒå°‘ã€‚è¿™å°±å¾ˆå®¹æ˜“å¯¼è‡´åœ¨é¡¹ç›®ä¸Šçº¿ä¹‹å‰æˆ‘ä»¬å¾ˆéš¾å‘ç°åˆ°å®ƒçš„é”™è¯¯ï¼Œç­‰åˆ°é¡¹ç›®ä¸€ä¸Šçº¿ï¼Œæµ‘ç„¶ä¸è§‰åœ°ï¼Œbugå°±UpUpäº†ã€‚äºæ˜¯ï¼Œåœ¨è¿‡å»çš„è¿™ä¸¤å¹´ï¼Œtsæ‚„æ‚„çš„å´›èµ·äº†ã€‚ æœ¬ä¸“æ å°†ä»‹ç»å…³äºtsçš„ä¸€äº›å­¦ä¹ è®°å½•ã€‚'
    //avatar: 'https://img0.baidu.com/it/u=3101694723,748884042&fm=26&fmt=auto&gp=0.jpg'
  },
  {
    id: 2,
    title: 'test2ä¸“æ ',
    description: 'ä¼—æ‰€å‘¨çŸ¥ï¼Œ js æ˜¯ä¸€é—¨å¼±ç±»å‹è¯­è¨€ï¼Œå¹¶ä¸”è§„èŒƒè¾ƒå°‘ã€‚è¿™å°±å¾ˆå®¹æ˜“å¯¼è‡´åœ¨é¡¹ç›®ä¸Šçº¿ä¹‹å‰æˆ‘ä»¬å¾ˆéš¾å‘ç°åˆ°å®ƒçš„é”™è¯¯ï¼Œç­‰åˆ°é¡¹ç›®ä¸€ä¸Šçº¿ï¼Œæµ‘ç„¶ä¸è§‰åœ°ï¼Œbugå°±UpUpäº†ã€‚äºæ˜¯ï¼Œåœ¨è¿‡å»çš„è¿™ä¸¤å¹´ï¼Œtsæ‚„æ‚„çš„å´›èµ·äº†ã€‚ æœ¬ä¸“æ å°†ä»‹ç»å…³äºtsçš„ä¸€äº›å­¦ä¹ è®°å½•ã€‚',
    avatar: 'https://img0.baidu.com/it/u=3101694723,748884042&fm=26&fmt=auto&gp=0.jpg'
  }
]
```

å¤§å®¶å®šä½åˆ° `testData` ä¸­çš„ `avatar` é‚£ä¸€è¡Œï¼Œæˆ‘ä»¬æŠŠç¬¬ä¸€ä¸ªæ•°æ®çš„ `avatar` å±æ€§è¿›è¡Œæ³¨é‡Šã€‚ç°åœ¨ï¼Œ**æˆ‘ä»¬æ¥çœ‹ä¸‹æµè§ˆå™¨çš„æ•ˆæœï¼š**

![ç¼ºavataræ—¶çš„æ•ˆæœ](https://img-blog.csdnimg.cn/20210713111854892.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3dlaXhpbl80NDgwMzc1Mw==,size_16,color_FFFFFF,t_70#pic_center)

å¤§å®¶å¯ä»¥çœ‹åˆ°ï¼Œç¼º `avatar` å±æ€§æ—¶ï¼ŒæŒ‰ç…§æˆ‘ä»¬é¢„æœŸçš„ï¼Œæµè§ˆå™¨è‡ªåŠ¨æ˜¾ç¤ºäº†æˆ‘ä»¬**é¢„å…ˆåˆå§‹åŒ–çš„å›¾ç‰‡**ã€‚è¿™æ ·ï¼Œä¸è®ºä»ç»„ä»¶ç»“æ„è®¾è®¡è¿˜æ˜¯ä»ä»£ç é€»è¾‘ç»“æ„è®¾è®¡æ¥è¯´ï¼Œæ˜¯ä¸æ˜¯æ„Ÿè§‰å¯æ‰©å±•æ€§åˆå¢å¼ºäº†è®¸å¤šã€‚

# â˜ï¸ äºŒã€GlobalHeader å…¨å±€ Header

## 1ã€è®¾è®¡ç¨¿æŠ¢å…ˆçœ‹

å†™å®Œ `columnList` ç»„ä»¶ï¼Œæˆ‘ä»¬ç”¨ä¸€ä¸ªæ–°çš„ç»„ä»¶æ¥å¼ºåŒ–è¿™ç§è®¾è®¡æ–¹æ³•ã€‚æ¥ä¸‹æ¥æˆ‘ä»¬æ¥å†™ä¸€ä¸ªæ–°çš„ç»„ä»¶ï¼Œ`GlobalHeader` ï¼Œå³å…¨å±€å¤´éƒ¨ã€‚å…ˆæ¥çœ‹ä¸‹æˆ‘ä»¬è¦å®ç°çš„æ•ˆæœå›¾ã€‚**è¯¦æƒ…è§ä¸‹å›¾ï¼š**

![globalHeaderåŸå‹å›¾](https://img-blog.csdnimg.cn/20210713111912509.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3dlaXhpbl80NDgwMzc1Mw==,size_16,color_FFFFFF,t_70#pic_center)

## 2ã€æ•°æ®æ„æ€

äº†è§£å®Œå…·ä½“çš„æ•ˆæœå›¾ä¹‹åå‘¢ï¼ŒåŒæ ·åœ°ï¼Œæˆ‘ä»¬å…ˆæ¥æ„æ€è¿™ä¸ªç»„ä»¶æ‰€éœ€è¦çš„æ•°æ®æœ‰å“ªä¸€äº›ã€‚

è¿™ä¸ªç»„ä»¶æ‰€éœ€è¦çš„æ•°æ®ï¼Œé¦–å…ˆæ˜¯é’ˆå¯¹æ¯ä¸€ä¸ªç”¨æˆ·çš„ï¼Œæ‰€ä»¥å®ƒæ¯ä¸ªç”¨æˆ·æ‹¥æœ‰è‡ªå·±å”¯ä¸€çš„ `id` ï¼Œå…¶æ¬¡å°±æ˜¯**ç”¨æˆ·å** `name` ï¼Œæœ€åä¸€ä¸ªæ˜¯ **æ˜¯å¦ç™»å½•** `isLogin` ã€‚

åˆ†æå®Œæˆä¹‹åï¼Œæˆ‘ä»¬ç°åœ¨åœ¨ `vue3` é¡¹ç›®ä¸‹çš„ `src|components` æ–‡ä»¶å¤¹ä¸‹æ–°å»ºä¸€ä¸ªæ–‡ä»¶ï¼Œå‘½åä¸º `GlobalHeader.vue` ã€‚ä¹‹åç¼–å†™è¿™æ®µä¸šåŠ¡ä»£ç ã€‚**å…·ä½“ä»£ç å¦‚ä¸‹ï¼š**

```html
<template>
  <div></div>
</template>

<script lang="ts">
  import { defineComponent, PropType } from 'vue';

  //ç”¨tså†™ä¸€ä¸ªæ¥å£ï¼Œå­˜æ”¾åˆ—è¡¨æ•°æ®çš„å±æ€§
  //nameå’ŒidåŠ ï¼Ÿè¡¨ç¤ºæ˜¯å¯é€‰é¡¹
  export interface UserProps {
    isLogin: boolean;
    name?: string;
    id?: number;
  }
  export default defineComponent({
    name: 'GlobalHeader',
    props: {
      //å°†æ¥å£çš„å†…å®¹èµ‹å€¼ç»™userå¯¹è±¡ï¼Œæ–¹ä¾¿æ¥æ”¶çˆ¶ç»„ä»¶ä¼ æ¥çš„æ•°æ®
      user: {
        type: Object as PropType<UserProps>,
        required: true,
      },
    },
  });
</script>
<style lang="scss" scoped></style>
```

## 3ã€è§†å›¾æ•°æ®ç»‘å®š

ç°åœ¨ï¼Œå¯¹æ•°æ®æ„æ€å®Œæ¯•ä¹‹åï¼Œæˆ‘ä»¬æ¥æŠŠæ•°æ®ç»‘å®šåˆ°è§†å›¾å½“ä¸­ã€‚**å…·ä½“ä»£ç å¦‚ä¸‹ï¼š**

```html
<template>
  <nav class="navbar navbar-dark bg-primary justify-content-between mb-4 px-4">
    <a class="navbar-brand" href="#">å‘¨ä¸€ä¸“æ </a>
    <ul v-if="!user.isLogin" class="list-inline mb-0">
      <li class="list-inline-item">
        <a href="#" class="btn btn-outline-light my-2">ç™»å½•</a>
      </li>
      <li class="list-inline-item">
        <a href="#" class="btn btn-outline-light my-2">æ³¨å†Œ</a>
      </li>
    </ul>
    <ul v-else class="list-inline mb-0">
      <li class="list-inline-item">
        <a href="#" class="btn btn-outline-light my-2">æ¬¢è¿ä½  {{user.name}}</a>
      </li>
    </ul>
  </nav>
</template>

<script lang="ts">
  import { computed, defineComponent, PropType } from 'vue';
  export interface ColumnProps {
    id: number;
    title: string;
    avatar?: string;
    description: string;
  }
  export default defineComponent({
    name: 'ColumnList',
    props: {
      list: {
        type: Array as PropType<ColumnProps[]>,
        required: true,
      },
    },
  });
</script>
<style lang="scss" scoped></style>
```

## 4ã€æ•°æ®ä¼ é€’

ç°åœ¨ï¼Œæˆ‘ä»¬åœ¨ `vue3` é¡¹ç›®ä¸­çš„ `src` æ–‡ä»¶å¤¹ä¸‹çš„ `App.vue` ä¸­æ¥è¿›è¡Œæ•°æ®ä¼ é€’ã€‚**å…·ä½“ä»£ç å¦‚ä¸‹ï¼š**

```html
<template>
  <div class="container">
    <global-header :user="user"></global-header>
  </div>
</template>

<script lang="ts">
  import { defineComponent } from 'vue';
  //åœ¨æ ¹æ–‡ä»¶ä¸‹å¼•å…¥bootstrap
  import 'bootstrap/dist/css/bootstrap.min.css';
  //å¼•å…¥å­ç»„ä»¶
  import GlobalHeader, { UserProps } from './components/GlobalHeader.vue';

  //åˆ¶é€ å­ç»„ä»¶çš„æ¥å£æ•°æ®
  const currentUser: UserProps = {
    isLogin: false,
    name: 'Monday',
  };

  export default defineComponent({
    name: 'App',
    components: {
      GlobalHeader,
    },
    setup() {
      return {
        user: currentUser,
      };
    },
  });
</script>

<style lang="scss" scoped></style>
```

å½“å‰ `isLogin` çš„çŠ¶æ€æˆ‘ä»¬æ˜¯è®¾ç½®æˆ `false` ã€‚ç°åœ¨ï¼Œæˆ‘ä»¬æ¥çœ‹ä¸‹**æ­¤æ—¶æµè§ˆå™¨çš„è¿è¡Œæ•ˆæœï¼š**

![isLoginä¸ºfalseæ—¶](https://img-blog.csdnimg.cn/20210713111929694.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3dlaXhpbl80NDgwMzc1Mw==,size_16,color_FFFFFF,t_70#pic_center)

å¤§å®¶å¯ä»¥çœ‹åˆ°ï¼Œå½“å‰çŠ¶æ€ä¸º `false` ï¼Œæ‰€ä»¥ `header` çš„å³è¾¹æ˜¾ç¤ºçš„æ˜¯**ç™»å½•**å’Œ**æ³¨å†Œ**ä¸¤ä¸ªæŒ‰é’®ï¼Œå¦‚é¢„æœŸæ‰€æ–™ã€‚

ç°åœ¨ï¼Œæˆ‘ä»¬æ¥æŠŠ `isLogin` çš„çŠ¶æ€æ”¹ä¸º `true` ï¼Œ**å…·ä½“ä»£ç å¦‚ä¸‹ï¼š**

```js
const currentUser: UserProps = {
  isLogin: true,
  name: 'Monday',
};
```

æ­¤æ—¶æˆ‘ä»¬æ¥çœ‹ä¸‹æµè§ˆå™¨çš„æ˜¾ç¤ºæ•ˆæœï¼Œ**å¦‚ä¸‹å›¾æ‰€ç¤ºï¼š**

![isLoginä¸ºtrueæ—¶](https://img-blog.csdnimg.cn/20210713111941932.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3dlaXhpbl80NDgwMzc1Mw==,size_16,color_FFFFFF,t_70#pic_center)

ç°åœ¨ï¼Œå¯ä»¥çœ‹åˆ°ï¼Œå½“ `isLogin` ä¸º `true` æ—¶ï¼Œè¡¨ç¤ºç”¨æˆ·æˆåŠŸç™»å½•äº†ã€‚æ‰€ä»¥ `header` çš„å³æ–¹æ˜¾ç¤ºçš„æ˜¯ **æ¬¢è¿ä½  Monday** çš„å­—æ ·ï¼Œä¹Ÿå¦‚æˆ‘ä»¬é¢„æœŸæ‰€æ–™ã€‚

# ğŸ“¸ ä¸‰ã€Dropdown ä¸‹æ‹‰èœå•

çœ‹å®Œä¸Šé¢çš„å†…å®¹ï¼Œå¤§å®¶å¿ƒé‡Œæ˜¯å¦æœ‰ä¸€ä¸ªç–‘æƒ‘ï¼Œæˆ‘ä»¬ `header` æœ€å³æ–¹çš„**ä¸‹æ‹‰èœå•**è¿˜æ²¡æœ‰å®ç°ã€‚ä¸ç€æ€¥ï¼Œæ¥ä¸‹æ¥æˆ‘ä»¬å°±æ¥è®¾è®¡è¿™ä¸ªç»„ä»¶ã€‚

## 1ã€ç»„ä»¶åŸºæœ¬åŠŸèƒ½

æˆ‘ä»¬ç°åœ¨å…ˆæ¥è®¾è®¡ä¸‹è¿™ä¸ªç»„ä»¶çš„åŸºæœ¬åŠŸèƒ½ã€‚é¦–å…ˆåœ¨ `vue3` é¡¹ç›®çš„ `src|components` æ–‡ä»¶å¤¹ä¸‹ï¼Œæ–°å¢ä¸€ä¸ª `.vue` æ–‡ä»¶ï¼Œå‘½åä¸º `Dropdown.vue` ã€‚ä¹‹åç¼–å†™è¯¥æ–‡ä»¶çš„ä»£ç ï¼Œ**å…·ä½“ä»£ç å¦‚ä¸‹ï¼š**

```html
<template>
  <div class="dropdown">
    <!-- ä¸‹æ‹‰èœå•æ ‡é¢˜ -->
    <a
      href="#"
      class="btn btn-outline-light my-2dropdown-toggle"
      @click.prevent="toggleOpen()"
    >
      {{title}}
    </a>
    <!-- ä¸‹æ‹‰èœå•å†…å®¹ -->
    <ul class="dropdown-menu" :style="{ display: 'block' }" v-if="isOpen">
      <li class="dropdown-item">
        <a href="#">æ–°å»ºæ–‡ç« </a>
      </li>
      <li class="dropdown-item">
        <a href="#">ç¼–è¾‘èµ„æ–™</a>
      </li>
    </ul>
  </div>
</template>

<script lang="ts">
  import { defineComponent, ref, onMounted, onUnmounted, watch } from 'vue';

  export default defineComponent({
    name: 'Dropdown',
    props: {
      title: {
        type: String,
        required: true,
      },
    },
    setup() {
      const isOpen = ref(false);
      //ç‚¹å‡»åæ‰“å¼€èœå•
      const toggleOpen = () => {
        isOpen.value = !isOpen.value;
      };
      return {
        isOpen,
        toggleOpen,
      };
    },
  });
</script>

<style lang="scss" scoped></style>
```

---

ç»§ç»­ï¼Œæˆ‘ä»¬æ¥æ”¹é€ ä¸‹åˆšåˆšçš„ `GlobalHeader.vue` æ–‡ä»¶ã€‚**å…·ä½“ä»£ç å¦‚ä¸‹ï¼š**

```html
<template>
  <nav class="navbar navbar-dark bg-primary justify-content-between mb-4 px-4">
    <a class="navbar-brand" href="#">å‘¨ä¸€ä¸“æ </a>
    <ul v-if="!user.isLogin" class="list-inline mb-0">
      <li class="list-inline-item">
        <a href="#" class="btn btn-outline-light my-2">ç™»å½•</a>
      </li>
      <li class="list-inline-item">
        <a href="#" class="btn btn-outline-light my-2">æ³¨å†Œ</a>
      </li>
    </ul>
    <ul v-else class="list-inline mb-0">
      <li class="list-inline-item">
        <dropdown :title="`æ¬¢è¿ä½  ${user.name}`"></dropdown>
      </li>
    </ul>
  </nav>
</template>

<script lang="ts">
  import { defineComponent, PropType } from 'vue';
  import Dropdown from './Dropdown.vue';

  export interface UserProps {
    isLogin: boolean;
    name?: string;
    id?: number;
  }
  export default defineComponent({
    name: 'GlobalHeader',
    components: {
      Dropdown,
    },
    props: {
      user: {
        type: Object as PropType<UserProps>,
        required: true,
      },
    },
  });
</script>

<style lang="scss" scoped></style>
```

ç°åœ¨ï¼Œæˆ‘ä»¬æ¥çœ‹ä¸‹**æµè§ˆå™¨çš„æ˜¾ç¤ºæ•ˆæœï¼š**

![dropdownç»„ä»¶åŸºæœ¬åŠŸèƒ½](https://img-blog.csdnimg.cn/20210713112000431.gif#pic_center)

## 2ã€è‡ªå®šä¹‰èœå•å†…å®¹ DropdownItem

ç°åœ¨ï¼Œæˆ‘ä»¬å·²ç»å®Œæˆäº†ç»„ä»¶çš„åŸºæœ¬åŠŸèƒ½ã€‚ä½†æ˜¯ç»†å¿ƒçš„å°ä¼™ä¼´å·²ç»å‘ç°ï¼Œä¸‹æ‹‰èœå•æ²¡æœ‰åŠæ³•è‡ªå®šä¹‰ï¼Œå› ä¸ºå®ƒè¢«å†™æˆå›ºå®šçš„äº†ã€‚è¿˜æœ‰ä¸€ä¸ªé—®é¢˜å°±æ˜¯ï¼Œç‚¹å‡»å…¶ä»–åŒºåŸŸæˆ‘ä»¬ä¸èƒ½æ”¶èµ·èœå•ï¼Œè¿™é—´æ¥åœ°ï¼Œç”¨æˆ·ä½“éªŒå¥½åƒå°±æ²¡æœ‰é‚£ä¹ˆå¥½äº†ã€‚æ‰€ä»¥å‘¢ï¼Œæœ‰éœ€æ±‚äº†ï¼Œæˆ‘ä»¬å°±æ¥å®Œæˆéœ€æ±‚ã€‚ç°åœ¨ï¼Œæˆ‘ä»¬å°±æ¥è§£å†³ä¸Šè¿°æ‰€è¯´çš„ä¸¤ä¸ªé—®é¢˜ã€‚

åŒæ ·åœ°ï¼Œåœ¨ vue3 é¡¹ç›®ä¸­çš„ `src|components` æ–‡ä»¶å¤¹ä¸‹æ·»åŠ ä¸€ä¸ª `.vue` æ–‡ä»¶ï¼Œå‘½åä¸º `DropdownItem.vue` ã€‚å…·ä½“ä»£ç å¦‚ä¸‹ï¼š

```html
<template>
  <li class="dropdown-option" :class="{'is-disabled': disabled}">
    <!-- å®šä¹‰ä¸€ä¸ªæ’æ§½ï¼Œä¾›ç»™çˆ¶ç»„ä»¶ä½¿ç”¨ -->
    <slot></slot>
  </li>
</template>

<script lang="ts">
  import { defineComponent } from 'vue';
  export default defineComponent({
    props: {
      //ç¦ç”¨çŠ¶æ€å±æ€§
      disabled: {
        type: Boolean,
        default: false,
      },
    },
  });
</script>

<style>
  /* æ³¨æ„ï¼š*è¡¨ç¤ºä¸¤ä¸ªç±»ä¸‹é¢çš„æ‰€æœ‰å…ƒç´  */
  .dropdown-option.is-disabled * {
    color: #6c757d;
    /* ä¸è®©å…¶ç‚¹å‡»ï¼Œå°†pointer-eventsè®¾ç½®ä¸ºnone */
    pointer-events: none;
    background: transparent;
  }
</style>
```

æ¥ä¸‹æ¥æˆ‘ä»¬æ¥å°†ä¹‹å‰å†™æ­»çš„å†…å®¹è¿›è¡Œè¯¥æ‰“é€ ï¼Œå¤§å®¶å®šä½åˆ° `Dropdown.vue` æ–‡ä»¶ï¼Œ**å…·ä½“ä»£ç å¦‚ä¸‹ï¼š**

```html
<template>
  <div class="dropdown">
    <!-- ä¸‹æ‹‰èœå•æ ‡é¢˜ -->
    <a
      href="#"
      class="btn btn-outline-light my-2dropdown-toggle"
      @click.prevent="toggleOpen()"
    >
      {{title}}
    </a>
    <!-- ä¸‹æ‹‰èœå•å†…å®¹ -->
    <ul v-if="isOpen" class="dropdown-menu" :style="{ display: 'block' }">
      <slot></slot>
    </ul>
  </div>
</template>

<script lang="ts">
  import { defineComponent, ref } from 'vue';

  export default defineComponent({
    name: 'Dropdown',
    props: {
      title: {
        type: String,
        required: true,
      },
    },
    setup() {
      const isOpen = ref(false);
      //ç‚¹å‡»åæ‰“å¼€èœå•
      const toggleOpen = () => {
        isOpen.value = !isOpen.value;
      };
      return {
        isOpen,
        toggleOpen,
      };
    },
  });
</script>

<style lang="scss" scoped></style>
```

é€šè¿‡ä»¥ä¸Šä»£ç æˆ‘ä»¬å¯ä»¥äº†è§£åˆ°ï¼Œå°†æ’æ§½æ”¾åˆ° `dropdown-menu` ä¸­å»ã€‚

---

ç°åœ¨ï¼Œåˆ°äº†æœ€åä¸€æ­¥ï¼Œæˆ‘ä»¬æ¥çœ‹æŠŠå®ƒå¼•å…¥ `GlobalHeader.vue` æ–‡ä»¶ä¸­ã€‚**å…·ä½“ä»£ç å¦‚ä¸‹ï¼š**

```html
<template>
  <nav class="navbar navbar-dark bg-primary justify-content-between mb-4 px-4">
    <a class="navbar-brand" href="#">å‘¨ä¸€ä¸“æ </a>
    <ul v-if="!user.isLogin" class="list-inline mb-0">
      <li class="list-inline-item">
        <a href="#" class="btn btn-outline-light my-2">ç™»å½•</a>
      </li>
      <li class="list-inline-item">
        <a href="#" class="btn btn-outline-light my-2">æ³¨å†Œ</a>
      </li>
    </ul>
    <ul v-else class="list-inline mb-0">
      <li class="list-inline-item">
        <dropdown :title="`æ¬¢è¿ä½  ${user.name}`">
          <drop-down-item
            ><a href="#" class="dropdown-item">æ–°å»ºæ–‡ç« </a></drop-down-item
          >
          <drop-down-item disabled
            ><a href="#" class="dropdown-item">ç¼–è¾‘èµ„æ–™</a></drop-down-item
          >
          <drop-down-item
            ><a href="#" class="dropdown-item">é€€å‡ºç™»é™†</a></drop-down-item
          >
        </dropdown>
      </li>
    </ul>
  </nav>
</template>

<script lang="ts">
  import { defineComponent, PropType } from 'vue';
  import Dropdown from './Dropdown.vue';
  import DropDownItem from './DropDownItem.vue';

  export interface UserProps {
    isLogin: boolean;
    name?: string;
    id?: number;
  }
  export default defineComponent({
    name: 'GlobalHeader',
    components: {
      Dropdown,
      DropDownItem,
    },
    props: {
      user: {
        type: Object as PropType<UserProps>,
        required: true,
      },
    },
  });
</script>

<style lang="scss" scoped></style>
```

æ­¤æ—¶ï¼Œæˆ‘ä»¬æ¥çœ‹ä¸‹**æµè§ˆå™¨çš„æ˜¾ç¤ºæ•ˆæœï¼š**

![dropdownè‡ªå®šä¹‰èœå•å†…å®¹](https://img-blog.csdnimg.cn/20210713112015249.gif#pic_center)

å¤§å®¶å¯ä»¥çœ‹åˆ°ï¼Œæ­¤æ—¶çš„ç¼–è¾‘èµ„æ–™å·²ç»å˜æˆäº†**ç°è‰²**å¹¶ä¸”æ— æ³•è¿›è¡Œç‚¹å‡»å’Œè·³è½¬ã€‚åŒæ—¶ï¼Œè‡ªå®šä¹‰èœå•çš„å†…å®¹ä¹Ÿä¸€ä¸€æ˜¾ç¤ºäº†å‡ºæ¥ã€‚

åˆ°è¿™é‡Œï¼Œè¿™ä¸€æ­¥çš„å†…å®¹æˆ‘ä»¬å°±å®Œæˆå•¦ï¼æ¥ä¸‹æ¥æˆ‘ä»¬ç»§ç»­å‡åè¿™ä¸ªç»„ä»¶ï¼Œè®©å®ƒçš„ç”¨æˆ·ä½“éªŒæ›´ä¸ºæè‡´ã€‚

## 3ã€ç»„ä»¶ç‚¹å‡»å¤–éƒ¨åŒºåŸŸè‡ªåŠ¨éšè—

å¤§å®¶å¯ä»¥è”æƒ³åˆ°å¹³å¸¸è‡ªå·±ç‚¹å‡»å„å¤§ç½‘ç«™æ—¶çš„åœºæ™¯ï¼Œå½“ç‚¹å‡»èœå•å¤–éƒ¨åŒºåŸŸæ—¶ï¼Œç»„ä»¶æ˜¯ä¸æ˜¯å°±ä¼šè‡ªåŠ¨éšè—ã€‚æ‰€ä»¥ï¼Œæ¥ä¸‹æ¥æˆ‘ä»¬å°±æ¥å®ç°è¿™ä¸ªåŠŸèƒ½ã€‚

é¦–å…ˆæˆ‘ä»¬è¦æ˜ç¡®ï¼Œ**éœ€è¦å®Œæˆçš„ä¸¤ä¸ªä»»åŠ¡ï¼š**

- åœ¨ `onMounted` æ—¶å€™æ·»åŠ  `click` äº‹ä»¶ï¼Œåœ¨ `onUnmounted` çš„æ—¶å€™å°†äº‹ä»¶åˆ é™¤ï¼›
- æ‹¿åˆ° `Dropdown` çš„ `DOM` å…ƒç´ ï¼Œä»è€Œåˆ¤æ–­ç‚¹å‡»çš„å†…å®¹æ˜¯å¦è¢«è¿™ä¸ªå…ƒç´ åŒ…å«ã€‚

æ¥ä¸‹æ¥æˆ‘ä»¬å®šä½åˆ° `Dropdown.vue` æ–‡ä»¶ï¼Œç»§ç»­å‡çº§æ”¹é€ ã€‚**å…·ä½“ä»£ç å¦‚ä¸‹ï¼š**

```html
<template>
  <div class="dropdown" ref="dropdownRef">
    <a
      href="#"
      class="btn btn-outline-light my-2 dropdown-toggle"
      @click.prevent="toggleOpen()"
    >
      {{title}}
    </a>
    <ul v-if="isOpen" class="dropdown-menu" :style="{ display: 'block' }">
      <slot></slot>
    </ul>
  </div>
</template>

<script lang="ts">
  import { defineComponent, ref, onMounted, onUnmounted, watch } from 'vue';

  export default defineComponent({
    name: 'DropDown',
    props: {
      title: {
        type: String,
        required: true,
      },
    },
    setup() {
      const isOpen = ref(false);
      // è·å–refçš„dowèŠ‚ç‚¹
      const dropdownRef = ref<null | HTMLElement>(null);
      const toggleOpen = () => {
        isOpen.value = !isOpen.value;
      };
      const handler = (e: MouseEvent) => {
        if (dropdownRef.value) {
          // ç”¨containsæ¥åˆ¤æ–­æ˜¯å¦åŒ…å«å¦å¤–ä¸€ä¸ªdowèŠ‚ç‚¹
          // å½“ç‚¹å‡»çš„ä¸æ˜¯å½“å‰åŒºåŸŸçš„èŠ‚ç‚¹ï¼Œå¹¶ä¸”èœå•æ˜¯æ‰“å¼€çš„
          if (
            !dropdownRef.value.contains(e.target as HTMLElement) &&
            isOpen.value
          ) {
            isOpen.value = false;
          }
        }
      };
      onMounted(() => {
        document.addEventListener('click', handler);
      });
      onUnmounted(() => {
        document.removeEventListener('click', handler);
      });
      return {
        isOpen,
        toggleOpen,
        dropdownRef,
        handler,
      };
    },
  });
</script>

<style lang="scss" scoped></style>
```

æ­¤æ—¶æˆ‘ä»¬æ¥çœ‹ä¸‹**æµè§ˆå™¨çš„æ˜¾ç¤ºæ•ˆæœï¼š**

![dowpdownç»„ä»¶ç‚¹å‡»å¤–éƒ¨åŒºåŸŸè‡ªåŠ¨éšè—](https://img-blog.csdnimg.cn/20210713112045769.gif#pic_center)

å¤§å®¶å¯ä»¥çœ‹åˆ°ï¼Œæ”¹é€ å®Œ `dropdown` çš„é€»è¾‘åï¼Œå¦‚æˆ‘ä»¬é¢„æœŸæ‰€æ–™çš„ï¼Œå½“æˆ‘ä»¬ç‚¹å‡»ç»„ä»¶å¤–éƒ¨åŒºåŸŸæ—¶ï¼Œç»„ä»¶ä¹Ÿè‡ªåŠ¨éšè—äº†ã€‚

## 4ã€è‡ªå®šä¹‰å‡½æ•°

åˆ°è¿™é‡Œï¼Œæ•´ä¸ª `GlobalHeader` ç»„ä»¶å¯ä»¥è¯´æ˜¯ç›¸å¯¹æ¯”è¾ƒå®Œç¾äº†ã€‚ä½†æ˜¯å¤§å®¶æœ‰æ²¡æœ‰å‘ç°ï¼Œåœ¨è®¾è®¡ `dropdown` ç»„ä»¶æ—¶ï¼Œ`dropdown.vue` çš„ä»£ç å¥½åƒçœ‹èµ·æ¥è¿˜ç¨å¾®æœ‰ä¸€ç‚¹ç‚¹å†—ä½™ã€‚

è¿™ä¸ªæ—¶å€™æˆ‘ä»¬å¯ä»¥è€ƒè™‘æŠŠå®ƒçš„é€»è¾‘æŠ½ç¦»å‡ºæ¥ï¼Œå•ç‹¬æ”¾åˆ°ä¸€ä¸ªè‡ªå®šä¹‰å‡½æ•°é‡Œé¢ã€‚æ¥ä¸‹æ¥ä¸€èµ·æ¥å®ç°ä¸€ä¸‹å§~

é¦–å…ˆæˆ‘ä»¬åœ¨ `vue3` é¡¹ç›®ä¸­çš„ `src` æ–‡ä»¶å¤¹ä¸‹ï¼Œæ–°å»ºä¸€ä¸ªæ–‡ä»¶å¤¹ï¼Œå‘½åä¸º `hooks` ã€‚ä¹‹ååœ¨ `hooks` ä¸‹æ–°å»ºä¸€ä¸ªæ–‡ä»¶ï¼Œå‘½åä¸º `useClickOutside.ts` ã€‚ `useClickOutside` çš„**å…·ä½“ä»£ç å¦‚ä¸‹ï¼š**

```js
import { ref, onMounted, onUnmounted, Ref } from "vue";

const useClickOutside = (elementRef: Ref<null | HTMLElement>) => {
    const isClickOutside = ref(false)
    const handler = (e: MouseEvent) => {
        if (elementRef.value){
            if(elementRef.value.contains(e.target as HTMLElement)){
                isClickOutside.value = true
            }else{
                isClickOutside.value = false
            }
        }
    }
    onMounted( () => {
        document.addEventListener('click', handler)
    })
    onUnmounted(() => {
        document.removeEventListener('click', handler)
    })
    return isClickOutside
}

export default useClickOutside
```

---

æŠ½ç¦»å®Œä»£ç åï¼Œæˆ‘ä»¬ç»§ç»­æŠŠ `Dropdown.vue` åŒ–ç¹ä¸ºç®€ã€‚å…·ä½“ä»£ç å¦‚ä¸‹ï¼š

```html
<template>
  <div class="dropdown" ref="dropdownRef">
    <a
      href="#"
      class="btn btn-outline-light my-2 dropdown-toggle"
      @click.prevent="toggleOpen()"
    >
      {{title}}
    </a>
    <ul v-if="isOpen" class="dropdown-menu" :style="{ display: 'block' }">
      <slot></slot>
    </ul>
  </div>
</template>

<script lang="ts">
  import { defineComponent, ref, onMounted, onUnmounted, watch } from 'vue';
  import useClickOutside from '../hooks/useClickOutside';

  export default defineComponent({
    name: 'DropDown',
    props: {
      title: {
        type: String,
        required: true,
      },
    },
    setup() {
      const isOpen = ref(false);
      // è·å–refçš„dowèŠ‚ç‚¹
      const dropdownRef = ref<null | HTMLElement>(null);
      const toggleOpen = () => {
        isOpen.value = !isOpen.value;
      };
      const isClickOutside = useClickOutside(dropdownRef);
      if (isOpen.value && isClickOutside) {
        isOpen.value = false;
      }
      watch(isClickOutside, () => {
        if (isOpen.value && isClickOutside.value) {
          isOpen.value = false;
        }
      });
      return {
        isOpen,
        toggleOpen,
        dropdownRef,
      };
    },
  });
</script>

<style lang="ts" scoped></style>
```

**æ­¤æ—¶æµè§ˆå™¨çš„æ˜¾ç¤ºæ•ˆæœå¦‚ä¸‹ï¼š**

![dowpdownç»„ä»¶ç‚¹å‡»å¤–éƒ¨åŒºåŸŸè‡ªåŠ¨éšè—](https://img-blog.csdnimg.cn/20210713112029765.gif#pic_center)

å¤§å®¶å¯ä»¥çœ‹åˆ°ï¼Œæœ€ç»ˆçš„æ˜¾ç¤ºæ•ˆæœä¹Ÿæ˜¯ä¸€æ ·çš„ã€‚ä½†æ˜¯å‘¢ï¼Œé€šè¿‡ä»£ç é€»è¾‘æŠ½ç¦»ï¼Œæˆ‘ä»¬æ•´ä¸ªç»„ä»¶çš„è®¾è®¡çœ‹èµ·æ¥ä¹Ÿæ›´åŠ å®Œç¾ï¼Œå¯æ‰©å±•æ€§ä¹Ÿå˜å¾—æ›´é«˜ã€‚

## 5ã€è”åˆæ•ˆæœ

æœ€åï¼Œæˆ‘ä»¬æŠŠä¸Šé¢æ‰€å­¦çš„ GlobalHeader å’Œ Columnist ç»“åˆèµ·æ¥ï¼Œæ¥çœ‹ä¸€ä¸‹ä¸€ä½“åŒ–çš„æ•ˆæœã€‚**è¯¦æƒ…è§ä¸‹å›¾ï¼š**

![è”åˆæ•ˆæœ](https://img-blog.csdnimg.cn/20210713112057114.gif#pic_center)

ä»¥ä¸Šå°±æ˜¯å…³äº `ColumnList` å’Œ `GlobalHeader` ä¸¤ä¸ªç»„ä»¶çš„å®ç°æ–¹å¼ã€‚ä¸çŸ¥é“å¤§å®¶æ˜¯å¦è¿˜æ„çŠ¹æœªå°½å‘¢~

åé¢è¿˜ä¼šæŒç»­å‡ºå…³äºç»„ä»¶è®¾è®¡çš„æ–‡ç« ï¼Œæ¬¢è¿å…³æ³¨~

# ğŸ›’ å››ã€ç»“æŸè¯­

è®²åˆ°è¿™é‡Œï¼Œå…³äºç»„ä»¶ `GlobalHeader` å’Œ `ColumnList` çš„è®¾è®¡å°±ç»“æŸå•¦ï¼åœ¨è®¾è®¡ç»„ä»¶çš„æ—¶å€™å‘¢ï¼Œè¦ç‰¹åˆ«è€ƒè™‘ç»„ä»¶çš„å¯æ‰©å±•æ€§ã€‚å¦‚æœä¸€ä¸ªç»„ä»¶åœ¨å†™çš„æ—¶å€™ï¼Œæ„Ÿè§‰æ²¡ä»€ä¹ˆå¤ç”¨åº¦ï¼Œé‚£ä¹ˆè¿™ä¸ªæ—¶å€™å¯èƒ½å°±å¾—æ€è€ƒä¸‹ï¼Œæ˜¯ä¸æ˜¯å“ªä¸ªç¯èŠ‚å‡ºç°é—®é¢˜äº†ã€‚å¤šé—®è‡ªå·±ä¸ºä»€ä¹ˆï¼Œå¤šé—®è‡ªå·±è¿™ä¸ªç»„ä»¶æ˜¯å¦èƒ½æŠ½ç¦»çš„æ›´å¥½ã€‚

ä»¥ä¸Šå°±æ˜¯æœ¬æ–‡çš„å…¨éƒ¨å†…å®¹ï¼å¦‚æœ‰ç–‘é—®æˆ–æ–‡ç« æœ‰è¯¯æ¬¢è¿è¯„è®ºåŒºç•™è¨€æˆ–å…¬ä¼—å·åå°åŠ æˆ‘å¾®ä¿¡äº¤æµ~

# ğŸ£ å½©è›‹ One More Thing

## åŸºç¡€çŸ¥è¯†å›é¡¾

- [vuejs åŸºç¡€çŸ¥è¯†](https://juejin.cn/column/6976040277068759077)
- [ts åŸºç¡€çŸ¥è¯†](https://juejin.cn/column/6979926803238354952)

## è½¯ä»¶æ¨è

è¿™é‡Œç»™å¤§å®¶æ¨èæ–‡ç« ç”¨åˆ°çš„ä¸€ä¸ªç”»å›¾è½¯ä»¶ï¼š**Axure RP 9**

Axure RP æ—¨åœ¨ç”¨äºç”»ä½ä¿çœŸåŸå‹å›¾ï¼Œå¯¹äºå¼€å‘è€…æ¥è¯´ä¹Ÿæ˜¯æå…¶å‹å¥½çš„ã€‚ä¸°å¯Œçš„æ§ä»¶åº“å’ŒåŠ¨ç”»äº¤äº’ï¼Œå¯ä»¥æ»¡è¶³æ—¥å¸¸ç”»å›¾çš„å¤§éƒ¨åˆ†éœ€æ±‚ã€‚å®‰åˆ©ä¸€æ³¢~

## ç•ªå¤–ç¯‡

> - å…³æ³¨å…¬ä¼—å·**æ˜ŸæœŸä¸€ç ”ç©¶å®¤**ï¼Œç¬¬ä¸€æ—¶é—´å…³æ³¨å­¦ä¹ å¹²è´§ï¼Œ**æ›´å¤šç²¾é€‰ä¸“æ å¾…ä½ è§£é”**~
>
> - å¦‚æœè¿™ç¯‡æ–‡ç« å¯¹ä½ æœ‰ç”¨ï¼Œè®°å¾—ç•™ä¸‹è„šå°å†èµ°å“¦~
> - æˆ‘ä»¬ä¸‹æœŸè§ï¼ğŸ‘‹ğŸ‘‹ğŸ‘‹
