---
title: ã€é’è®­è¥ã€‘- æ¯å¤©éƒ½åœ¨çº¢ç»¿ç¯å‰é¢æ¢­è¡Œï¼Œä¸å¦‚è‡ªå·±æ¥å®ç°ä¸ªçº¢ç»¿ç¯ï¼Ÿ
author: å‘¨ä¸€
date: '2021-12-12'
categories:
  - å‰ç«¯å¼€å‘
tags:
  - é’è®­è¥YouthCamp
sidebar: 'auto'
---

# ğŸ”‡ å‰è¨€

åœ¨æˆ‘ä»¬çš„æ—¥å¸¸ç”Ÿæ´»ä¸­ï¼Œæ¯å¤©ä¸Šç­ä¸‹ç­ï¼Œä¼´éšç€æˆ‘ä»¬æœ€å¤šçš„è«è¿‡äºçº¢ç»¿ç¯äº†ã€‚é‚£ä¹ˆï¼Œåœ¨ä¸‹é¢çš„è¿™ç¯‡æ–‡ç« ä¸­ï¼Œæˆ‘ä»¬å°†æ‰‹åŠ¨çš„æ¥å®ç°ä¸€ä¸ª**äº¤é€šç¯**ã€‚ç…ç…æ¯å¤©éƒ½åœ¨çœ‹çš„çº¢ç»¿ç¯ï¼Œå®ƒåˆ°åº•æ˜¯æ€ä¹ˆå®ç°çš„å‘¢ï¼Ÿ

# ğŸ”ˆ ä¸€ã€éœ€æ±‚åˆ†æ - äº¤é€šç¯

é¦–å…ˆï¼Œæˆ‘ä»¬æƒ³è¦å®ç°çš„æ˜¯å¯ä»¥**åˆ‡æ¢å¤šç§äº¤é€šçŠ¶æ€**åŠŸèƒ½çš„äº¤é€šç¯ã€‚**å¦‚ä¸‹å›¾æ‰€ç¤ºï¼š**

![çº¢ç»¿ç¯](https://img-blog.csdnimg.cn/612a018118ca43ba82d827e7c7e3aada.png?x-oss-process=image/watermark,type_ZHJvaWRzYW5zZmFsbGJhY2s,shadow_50,text_Q1NETiBA5pif5pyf5LiA56CU56m25a6k,size_14,color_FFFFFF,t_70,g_se,x_16#)

æ¥ä¸‹æ¥ï¼Œæˆ‘ä»¬å°†ç”±æµ…å…¥æ·±çš„ï¼Œè®²è§£å¤šç§ç‰ˆæœ¬çš„å®ç°æ–¹å¼ã€‚

# ğŸ”‰ äºŒã€å®ç°ç‰ˆæœ¬

## 1. ç‰ˆæœ¬ä¸€ï¼šç®€å•ç²—æš´ç‰ˆ

ä¸‹é¢å…ˆé™„ä¸Šä»£ç ï¼š

`HTML` ä»£ç ï¼š

```html
<ul id="traffic" class="wait">
  <li></li>
  <li></li>
  <li></li>
  <li></li>
  <li></li>
</ul>
```

`CSS` ä»£ç ï¼š

```css
#traffic {
  display: flex;
  flex-direction: column;
}

#traffic li {
  list-style: none;
  width: 50px;
  height: 50px;
  background-color: gray;
  margin: 5px;
  border-radius: 50%;
}

#traffic.s1 li:nth-child(1) {
  background-color: #a00;
}

#traffic.s2 li:nth-child(2) {
  background-color: #aa0;
}

#traffic.s3 li:nth-child(3) {
  background-color: #0a0;
}

#traffic.s4 li:nth-child(4) {
  background-color: #a0a;
}

#traffic.s5 li:nth-child(5) {
  background-color: #0aa;
}
```

`JS` ä»£ç ï¼š

```js
const traffic = document.getElementById('traffic');

(function reset() {
  traffic.className = 's1';

  setTimeout(function () {
    traffic.className = 's2';
    setTimeout(function () {
      traffic.className = 's3';
      setTimeout(function () {
        traffic.className = 's4';
        setTimeout(function () {
          traffic.className = 's5';
          setTimeout(reset, 1000);
        }, 1000);
      }, 1000);
    }, 1000);
  }, 1000);
})();
```

**æ­¤æ—¶æµè§ˆå™¨çš„æ˜¾ç¤ºæ•ˆæœä¸ºï¼š**

![äº¤é€šç¯æ˜¾ç¤ºæ•ˆæœ](https://img-blog.csdnimg.cn/213947a26ecb4a0eb00c0ca21fde0995.gif#)

okï¼Œåˆ°è¿™é‡Œï¼Œæˆ‘ä»¬å°±åŸºæœ¬ä¸Šå®Œæˆäº†äº¤é€šç¯çš„åŸºæœ¬å½¢æ€ã€‚ä½†æ˜¯å‘¢ï¼Œæ˜¯å¦æœ‰å°ä¼™ä¼´è§‰å¾—ï¼Œåœ¨ä¸Šé¢çš„ `JS` ä»£ç ä¸­ï¼Œæœ‰ç‚¹æš´åŠ›å®ç°äº†ã€‚é¦–å…ˆå®ƒæ˜¯å…ˆåˆ›å»ºäº†ä¸€ä¸ªé—­åŒ… `()()` ï¼Œç„¶åå‘¢ï¼Œä¹‹åå‘¢ï¼Œè¦åˆ‡æ¢çŠ¶æ€çš„æ—¶å€™ï¼Œé€šè¿‡ä¸€å±‚ä¸€å±‚çš„ `setTimeout()` å»è¿›è¡ŒçŠ¶æ€åˆ‡æ¢ï¼Œè¿™æ ·å­å®ç°çš„è¯ï¼Œä¸ç®¡æ˜¯ä»å¤æ‚åº¦æ¥è®²ï¼Œè¿˜æ˜¯å…¶ä»–å±‚é¢ä¸Šæ¥è®²ï¼Œéƒ½æ˜¯éå¸¸çš„ææ€–çš„ã€‚

å› æ­¤å‘¢ï¼Œæˆ‘ä»¬è¦æ¥è¿›è¡Œç¬¬äºŒç‰ˆæœ¬çš„æ”¹è¿›ï¼Œ**å¯¹æ•°æ®è¿›è¡ŒæŠ½è±¡**ã€‚

## 2. ç‰ˆæœ¬äºŒï¼šæ•°æ®æŠ½è±¡ç‰ˆ

å…ˆé™„ä¸Šä»£ç ï¼š

`HTML` ä»£ç ï¼š

```html
<ul id="traffic" class="wait">
  <li></li>
  <li></li>
  <li></li>
</ul>
```

`CSS` ä»£ç ï¼š

```css
#traffic {
  display: flex;
  flex-direction: column;
}

#traffic li {
  display: inline-block;
  width: 50px;
  height: 50px;
  background-color: gray;
  margin: 5px;
  border-radius: 50%;
}

#traffic.stop li:nth-child(1) {
  background-color: #a00;
}

#traffic.wait li:nth-child(2) {
  background-color: #aa0;
}

#traffic.pass li:nth-child(3) {
  background-color: #0a0;
}
```

`JS` ä»£ç ï¼š

```js
const traffic = document.getElementById('traffic');

const stateList = [
  { state: 'wait', last: 1000 },
  { state: 'stop', last: 3000 },
  { state: 'pass', last: 3000 },
];

function start(traffic, stateList) {
  function applyState(stateIdx) {
    const { state, last } = stateList[stateIdx];
    traffic.className = state;
    setTimeout(() => {
      applyState((stateIdx + 1) % stateList.length);
    }, last);
  }
  applyState(0);
}

start(traffic, stateList);
```

**æ­¤æ—¶æµè§ˆå™¨çš„æ˜¾ç¤ºæ•ˆæœä¸ºï¼š**

![æ•°æ®æŠ½è±¡æ˜¾ç¤ºæ•ˆæœ](https://img-blog.csdnimg.cn/33a2e8b115804bacb925bb08f4445034.gif#)

åœ¨ä¸Šé¢çš„ä»£ç ä¸­ï¼Œæˆ‘ä»¬å¯¹**ç­‰å¾…**ã€**åœæ­¢**å’Œ**é€šè¿‡**è¿™ä¸‰ç§çŠ¶æ€è¿›è¡Œæ•°æ®æŠ½è±¡ï¼Œé¦–å…ˆæ˜¯æ¥æ”¶ä¸€ç»„çŠ¶æ€ï¼Œç„¶åå†æ ¹æ®è¿™ç»„çŠ¶æ€æ¥è¿›è¡ŒæŸäº›æŒ‡ä»¤çš„æ“ä½œï¼Œæ¯”å¦‚é€šè¿‡æ”¹å˜å…ƒç´ çš„ `class` æ¥åšçŠ¶æ€çš„åˆ‡æ¢ã€‚

æˆ‘ä»¬å¯ä»¥æŠŠå®ƒç†è§£ä¸ºæ˜¯æŠŠçŠ¶æ€ä¸­çš„æ•°æ®ç»™å°è£…èµ·æ¥ï¼Œä»¥æ­¤æ¥ä½¿å¾—ä»£ç æ›´å…·æœ‰æ‰©å±•æ€§ã€‚

ä½†æ˜¯å‘¢ï¼Œæ•°æ®æŠ½è±¡è¿˜è¿œè¿œä¸å¤Ÿï¼Œå› æ­¤å‘¢ï¼Œæ¥ä¸‹æ¥æˆ‘ä»¬æ¥ä»‹ç»ç¬¬ä¸‰ä¸ªç‰ˆæœ¬ï¼Œ**è¿‡ç¨‹æŠ½è±¡**ã€‚

## 3. ç‰ˆæœ¬ä¸‰ï¼šè¿‡ç¨‹æŠ½è±¡ç‰ˆ

**å…ˆé™„ä¸Šä»£ç ï¼š**

`HTML` ä»£ç ï¼š

```html
<ul id="traffic" class="wait">
  <li></li>
  <li></li>
  <li></li>
</ul>
```

`CSS` ä»£ç ï¼š

```css
#traffic {
  display: flex;
  flex-direction: column;
}

#traffic li {
  display: inline-block;
  width: 50px;
  height: 50px;
  background-color: gray;
  margin: 5px;
  border-radius: 50%;
}

#traffic.stop li:nth-child(1) {
  background-color: #a00;
}

#traffic.wait li:nth-child(2) {
  background-color: #aa0;
}

#traffic.pass li:nth-child(3) {
  background-color: #0a0;
}
```

`JS` ä»£ç ï¼š

```js
const traffic = document.getElementById('traffic');

function wait(ms) {
  return new Promise((resolve) => setTimeout(resolve, ms));
}

function poll(...fnList) {
  let stateIndex = 0;

  return async function (...args) {
    let fn = fnList[stateIndex++ % fnList.length];
    return await fn.apply(this, args);
  };
}

async function setState(state, ms) {
  traffic.className = state;
  await wait(ms);
}

let trafficStatePoll = poll(
  setState.bind(null, 'wait', 1000),
  setState.bind(null, 'stop', 3000),
  setState.bind(null, 'pass', 3000)
);

(async function () {
  // noprotect
  while (1) {
    await trafficStatePoll();
  }
})();
```

**æ­¤æ—¶æµè§ˆå™¨çš„æ˜¾ç¤ºæ•ˆæœä¸ºï¼š**

![è¿‡ç¨‹æŠ½è±¡æ˜¾ç¤ºæ•ˆæœ](https://img-blog.csdnimg.cn/6d5bb0ff137b4383a5848518c3573ea3.gif#)

åœ¨ä¸Šé¢çš„è¿‡ç¨‹æŠ½è±¡ä¸­å‘¢ï¼Œä¸Šé¢çš„åˆ‡æ¢çŠ¶æ€å‘¢ï¼Œæ˜¯ä¸€ä¸ªå…¸å‹çš„**è½®è¯¢æ“ä½œ**ã€‚æ‰€ä»¥å‘¢ï¼Œæˆ‘ä»¬å¯ä»¥æŠ½è±¡å‡ºä¸€ä¸ª**è½®è¯¢æ–¹æ³•**ï¼Œæ¥æŠŠæˆ‘ä»¬å‰é¢çš„ `start` æ–¹æ³•æŠ½è±¡æˆä¸€ä¸ªè½®è¯¢æ–¹æ³•ï¼Œç„¶ååœ¨è¿™ä¸ªè½®è¯¢æ–¹æ³•é‡Œé¢å‘¢ï¼Œæˆ‘ä»¬ç»™å®ƒä¸€ä¸ª `function list` ï¼Œä¹Ÿå°±æ˜¯ä¸€ç³»åˆ—çš„æ“ä½œå‡½æ•°ã€‚

ä¹‹åå‘¢ï¼Œæˆ‘ä»¬åœ¨ `fnList` é‡Œé¢å–å‡º**å½“å‰çŠ¶æ€**çš„æ“ä½œå‡½æ•°ï¼Œæœ€åå»æ‰§è¡Œè¿™ä¸ªå‡½æ•°ã€‚

åœ¨ä¸Šé¢çš„è¿™ä¸ªè¿‡ç¨‹ä¸­å‘¢ï¼Œæˆ‘ä»¬å®ç°çš„æ˜¯**è¿‡ç¨‹æŠ½è±¡**ã€‚é‚£å…¶å®å¯¹äºè¿™ä¸ªä¾‹å­æ¥è¯´ï¼Œå®ƒæ˜¯ä¸€ä¸ª**å¼‚æ­¥é—®é¢˜**ï¼Œå› æ­¤ï¼Œæˆ‘ä»¬å¯ä»¥é€šè¿‡ `promise` ã€ `async` å’Œ `await` ç­‰æ–¹å¼æ¥è§£å†³è¿™ä¸ªé—®é¢˜ã€‚è¯·çœ‹ä¸‹æ–¹ã€‚

## 4. ç‰ˆæœ¬å››ï¼šå‘½ä»¤å¼å’Œå£°æ˜å¼

**å…ˆé™„ä¸Šä»£ç ï¼š**

`HTML` ä»£ç ï¼š

```html
<ul id="traffic" class="wait">
  <li></li>
  <li></li>
  <li></li>
</ul>
```

`CSS` ä»£ç ï¼š

```css
#traffic {
  display: flex;
  flex-direction: column;
}

#traffic li {
  display: inline-block;
  width: 50px;
  height: 50px;
  background-color: gray;
  margin: 5px;
  border-radius: 50%;
}

#traffic.stop li:nth-child(1) {
  background-color: #a00;
}

#traffic.wait li:nth-child(2) {
  background-color: #aa0;
}

#traffic.pass li:nth-child(3) {
  background-color: #0a0;
}
```

`JS` ä»£ç ï¼š

```js
const traffic = document.getElementById('traffic');

// waitæ“ä½œï¼Œå³ç­‰å¾…å¤šé•¿æ—¶é—´
function wait(time) {
  return new Promise((resolve) => setTimeout(resolve, time));
}

// è®¾ç½®çŠ¶æ€
function setState(state) {
  traffic.className = state;
}

async function start() {
  //noprotect
  while (1) {
    setState('wait');
    await wait(1000);
    setState('stop');
    await wait(3000);
    setState('pass');
    await wait(3000);
  }
}

start();
```

**æ­¤æ—¶æµè§ˆå™¨çš„æ˜¾ç¤ºæ•ˆæœæ˜¯ï¼š**

![å‘½ä»¤å¼å’Œå£°æ˜å¼ç»“æœ](https://img-blog.csdnimg.cn/d7d3a3dedb9c426684562665b520a186.gif#)

äº¤é€šç¯çš„åˆ‡æ¢å¯ä»¥æŠŠå®ƒè§†ä¸ºæ˜¯ä¸€ä¸ªä¸åœçš„å¾ªç¯ï¼Œé‚£åœ¨è¿™ä¸ªå¾ªç¯é‡Œé¢å‘¢ï¼Œä»–ä¼šå…ˆ `setState` ä¸€ä¸ªçŠ¶æ€ï¼Œä¹‹å `await` ä¸€æ®µæ—¶é—´ã€‚åé¢ç»§ç»­å† `setState` ä¸€ä¸ªçŠ¶æ€ï¼Œç„¶ååˆ `await` ä¸€æ®µæ—¶é—´ï¼Œä»¥æ­¤ç±»æ¨ã€‚

é‚£åœ¨å®é™…çš„åº”ç”¨ä¸­ï¼Œå¦‚æœæˆ‘ä»¬è¦å¯¹å…¶è¿›è¡Œæ‰©å±•çš„æ—¶å€™ï¼Œå¯ä»¥é€šè¿‡ä¿®æ”¹ `while` çš„æ–¹å¼æ¥è¿›è¡Œæ“ä½œã€‚

# ğŸ”Š ä¸‰ã€åœ¨çº¿ online

**ä»¥ä¸Šå››ä¸ªç‰ˆæœ¬çš„åœ¨çº¿åœ°å€ï¼š**

- ç‰ˆæœ¬ä¸€ï¼š[ç®€å•ç²—æš´ç‰ˆ](https://code.h5jun.com/jezew/2/edit?js,output)
- ç‰ˆæœ¬äºŒï¼š[æ•°æ®æŠ½è±¡ç‰ˆ](https://code.h5jun.com/jezew/2/edit?js,output)
- ç‰ˆæœ¬ä¸‰ï¼š[è¿‡ç¨‹æŠ½è±¡ç‰ˆ](https://code.h5jun.com/bodul/2/edit?js,output)
- ç‰ˆæœ¬å››ï¼š[å‘½ä»¤å¼å’Œå£°æ˜å¼](https://code.h5jun.com/jobe/3/edit?js,output)

# ğŸ“¢ å››ã€ç»“æŸè¯­

åˆ°è¿™é‡Œï¼Œç”±æµ…å…¥æ·±çš„å››ä¸ªäº¤é€šç¯ç‰ˆæœ¬çš„å®ç°å°±è®²è§£ç»“æŸå•¦ï¼

å¦‚æœæ¢åœ¨ä»¥å‰ï¼Œé‚£æˆ‘æˆ‘å¯èƒ½ç”¨æš´åŠ›ç ´è§£å’Œæ•°æ®æŠ½è±¡çš„æ–¹æ³•å¤šä¸€ç‚¹ï¼Œé‚£é€šè¿‡ä¸Šæ–‡çš„å­¦ä¹ ï¼Œç°åœ¨æˆ‘åˆå¤šå­¦ä¹ äº†è¿‡ç¨‹æŠ½è±¡å’Œå‘½ä»¤å¼å’Œå£°æ˜å¼ã€‚

æ‰€ä»¥è¯´ï¼Œ `js` è¿˜æœ‰å¾ˆå¤šé«˜é˜¶çš„å†…å®¹å€¼å¾—æˆ‘ä»¬å»æ¢ç´¢å’ŒæŒ–æ˜~

å¦‚æœæ‚¨è§‰å¾—è¿™ç¯‡æ–‡ç« æœ‰å¸®åŠ©åˆ°æ‚¨çš„çš„è¯ä¸å¦¨ç‚¹èµæ”¯æŒä¸€ä¸‹å“Ÿ~~ğŸ˜‰

# ğŸ“£ å¾€æœŸæ¨è

ğŸ‘‰[å€¼å¾—å…³æ³¨çš„ HTML åŸºç¡€çŸ¥è¯†](https://juejin.cn/post/6998084998972588068)

ğŸ‘‰[css è¿˜åªåœç•™åœ¨å†™å¸ƒå±€ï¼Ÿ10 åˆ†é’Ÿå¸¦ä½ æ¢ç´¢ css ä¸­æ›´ä¸ºå¥‡å¦™çš„å¥¥ç§˜ï¼](https://juejin.cn/post/7000943186000494628)

ğŸ‘‰[å‰ç«¯åªæ˜¯åˆ‡å›¾ä»”ï¼Ÿæ¥å­¦å­¦ç»™å¼€å‘äººçœ‹çš„ UI è®¾è®¡](https://juejin.cn/post/7001989357980631076)

ğŸ‘‰[ç´§è·Ÿæœˆå½±å¤§ä½¬çš„æ­¥ä¼ï¼Œä¸€èµ·æ¥å­¦ä¹ å¦‚ä½•å†™å¥½ JSï¼ˆä¸Šï¼‰](https://juejin.cn/post/7007988121107169287)

ğŸ‘‰[ç´§è·Ÿæœˆå½±å¤§ä½¬çš„æ­¥ä¼ï¼Œä¸€èµ·æ¥å­¦ä¹ å¦‚ä½•å†™å¥½ JSï¼ˆä¸‹ï¼‰](https://juejin.cn/post/7008381454614790158)

ğŸ‘‰[å¬çº¢å®ä¹¦è¯‘è€…è°ˆ Web è§†è§’ä¸‹çš„å‰ç«¯å¼€å‘](https://juejin.cn/post/7008885851593637924)
