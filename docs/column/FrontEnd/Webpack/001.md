---
title: ä¸ä¼šwebpackçš„å‰ç«¯å¯èƒ½æ˜¯æ¡æ¥çš„ï¼Œä¸‡å­—æ€»ç»“webpackçš„è¶…å…¥é—¨æ ¸å¿ƒçŸ¥è¯†
author: å‘¨ä¸€
date: '2021-07-15'
categories:
  - å‰ç«¯å¼€å‘
tags:
  - Webpack
sidebar: 'auto'
---

# ğŸ¨ åºè¨€

ä¼—æ‰€å‘¨çŸ¥ï¼Œåœ¨å‰ç«¯å·¥ç¨‹åŒ–æ—¥è¶‹å¤æ‚çš„ä»Šå¤©ï¼Œæ¨¡å—åŒ–æ‰“åŒ…å·¥å…·åœ¨æˆ‘ä»¬çš„æ—¥å¸¸å¼€å‘ä¸­èµ·ç€è¶Šæ¥è¶Šé‡è¦çš„ä½œç”¨ï¼Œè€Œå…¶ä¸­ï¼Œ `webpack` å·²ç„¶æ˜¯å‰ç«¯æ‰“åŒ…æ„å»ºçš„ä¸äºŒé€‰æ‹©ã€‚

è¯´åˆ° `webpack` ï¼Œå¯èƒ½å¾ˆå¤šå°ä¼™ä¼´ä¼šè§‰å¾—æ—¢ç†Ÿæ‚‰åˆé™Œç”Ÿï¼Œç†Ÿæ‚‰æ˜¯å› ä¸ºåœ¨æˆ‘ä»¬å¼€å‘çš„æ¯ä¸€ä¸ªé¡¹ç›®ä¸­ï¼Œéƒ½ä¼šä½¿ç”¨åˆ°å®ƒã€‚è€Œé™Œç”Ÿåœ¨äºï¼Œ `webpack` æœ‰ç€å¤æ‚çš„é…ç½®å’Œäº”èŠ±å…«é—¨çš„åŠŸèƒ½è€Œæ„Ÿåˆ°é™Œç”Ÿã€‚

å› æ­¤ï¼Œæˆ‘ä»¬æœ‰æ—¶å€™ä¼šè¢«è¿™å¤æ‚çš„é…ç½®å…ˆå“åˆ°ï¼Œä»è€Œè¢«åŠé€€å­¦ä¹ ã€‚

ç„¶è€Œï¼Œåœ¨æŠ€æœ¯æ›´æ–°è¿­ä»£è¿™ä¹ˆå¿«çš„ä¸€ä¸ªå¤§ç¯å¢ƒä¸‹ï¼Œ `webpack` è¿˜æ˜¯å¾ˆå€¼å¾—æˆ‘ä»¬å»å­¦ä¹ çš„ã€‚

åœ¨ä¸‹é¢çš„è¿™ç¯‡æ–‡ç« ä¸­ï¼Œå°†è®²è§£ `webpack` çš„æ ¸å¿ƒæ¦‚å¿µã€‚ä¸€èµ·æ¥å­¦ä¹ å§~ğŸ¬

# ğŸ“… ä¸€ã€webpack ç©¶ç«Ÿæ˜¯ä»€ä¹ˆ

## 1ã€å†™åœ¨å‰é¢

å½“æˆ‘ä»¬è¦å†™ä¸€ä¸ªç½‘é¡µæ—¶ï¼Œé¦–å…ˆæˆ‘ä»¬ä¼šå…ˆåˆ›å»ºä¸€ä¸ª `index.html` æ–‡ä»¶ï¼Œä¹‹ååœ¨å¯èƒ½è¿˜ä¼šæœ‰ä¸€äº› `js` æ–‡ä»¶ï¼Œé‚£ä¹ˆæˆ‘ä»¬å°±ä¼šåœ¨ `html` æ–‡ä»¶ä¸­ï¼Œå¼•å…¥è¿™äº› `js` æ–‡ä»¶ã€‚

è¯•æƒ³ä¸€ä¸‹ï¼Œå¦‚æœ `js` æ–‡ä»¶å¾ˆå¤šï¼Œç„¶åæˆ‘ä»¬ä¸€ä¸ªä¸ªå¼•å…¥ï¼Œè¿™æ ·å¦‚æœé‡åˆ°æŠ¥é”™äº†å‘¢ï¼Ÿä¼šä¸ä¼šå°±å¾ˆéš¾å®šä½åˆ°æ˜¯å“ªä¸ªæ–‡ä»¶é”™äº†ï¼Œè¿™æ ·å°±ä¼šä½¿å¾—å¼€å‘æ•ˆç‡éå¸¸ä½ä¸‹äº†ã€‚

å› æ­¤ï¼Œå°±æœ‰äº† `webpack` ã€‚ `webpack` ä¼šå°†æˆ‘ä»¬æ‰€å†™çš„ä»£ç ï¼Œè¿›è¡Œä¸€ä¸ªç¿»è¯‘ï¼Œå¹¶å°†ç¿»è¯‘å®Œçš„å†…å®¹ï¼Œè¿›è¡Œä¸€ä¸ªæ¨¡å—åŒ–çš„æ‰“åŒ…ï¼Œä½¿å¾—é¡¹ç›®å˜å¾—å·¥ç¨‹åŒ–ã€‚

æ¥ä¸‹æ¥ï¼Œæˆ‘ä»¬å°±æ¥è®²è§£ï¼Œ `webpack` ç©¶ç«Ÿæ˜¯ä»€ä¹ˆä»¥åŠæ€ä¹ˆå®‰è£…ä½¿ç”¨ã€‚

## 2ã€ä»€ä¹ˆæ˜¯æ¨¡å—æ‰“åŒ…å·¥å…·ï¼Ÿ

`webpack` æœ‰æ—¶å€™ä¼šè¢«è¯¯è®¤ä¸ºæ˜¯ä¸€ä¸ª `js` çš„ç¿»è¯‘å™¨ï¼Œä½†å…¶å® `webpack` ç§°ä¸ä¸Šæ˜¯ä¸€ä¸ª `js` çš„ç¿»è¯‘å™¨ã€‚

å› ä¸ºå®ƒåªè®¤è¯† `import` è¿™æ ·ç±»ä¼¼çš„è¯­å¥ï¼Œè€Œä¸è®¤è¯†å…¶ä»–çš„ `js` é«˜çº§è¯­æ³•ã€‚æ‰€ä»¥å¦‚æœç§°å®ƒæ˜¯ä¸€ä¸ª `js` çš„ç¿»è¯‘å™¨ï¼Œå®é™…ä¸Šæ˜¯æˆ‘ä»¬é«˜çœ‹äº†å®ƒã€‚

æŸ¥çœ‹å®˜æ–¹çš„å®šä¹‰æˆ‘ä»¬å¯ä»¥å‘ç°ï¼Œ `webpack` æ˜¯ä¸€ä¸ª**æ¨¡å—æ‰“åŒ…å·¥å…·**ï¼ŒåŒæ—¶ `webpack` ä¹Ÿå¯ä»¥æ”¯æŒ `commonjs` çš„æ¨¡å—æ‰“åŒ…è§„èŒƒã€‚

ç„¶è€Œï¼Œéšç€æ—¶é—´çš„æ¨ç§»å’ŒæŠ€æœ¯çš„ä¸æ–­æ›´æ–°ï¼Œ `webpack` ä¸å†æ˜¯åªä¼šæ‰“åŒ… `js` çš„**æ¨¡å—æ‰“åŒ…å·¥å…·**ï¼Œ `webpack` ç°åœ¨è¿˜æ”¯æŒ `cssæ–‡ä»¶` ã€ `jpg` ã€ `png` ç­‰å„ç§æ–‡ä»¶çš„æ‰“åŒ…ã€‚

# ğŸ“ äºŒã€å¦‚ä½•ç”¨ Webpack æ­å»ºç¯å¢ƒ

## 1ã€å®‰è£… node

`webpack` æ˜¯åŸºäº `nodejs` å¼€å‘çš„æ¨¡å—æ‰“åŒ…å·¥å…·ï¼Œæœ¬è´¨ä¸Šæ˜¯ç”± `node` å®ç°çš„ã€‚å› æ­¤æˆ‘ä»¬è¦å…ˆå®‰è£…æœ¬æœºçš„ `node` ç¯å¢ƒã€‚[è¿™é‡Œé™„ä¸Šå®˜æ–¹ç½‘ç«™çš„é“¾æ¥ï¼Œå»ºè®®å¤§å®¶ä¸‹è½½ç¨³å®šç‰ˆæœ¬](https://nodejs.org/zh-cn/)

ä¹‹åæŸ¥è¯¢æœ¬æœºçš„ `node` å’Œ `npm` ç‰ˆæœ¬ï¼ŒæŸ¥çœ‹æ˜¯å¦å®‰è£…æˆåŠŸã€‚

```bash
node -v
npm -v
```

## 2ã€åˆ›å»ºé¡¹ç›®

å…ˆåˆ›å»ºä¸€ä¸ªé¡¹ç›®ï¼Œå‡è®¾å‘½åä¸º `webpack-demo` ã€‚ä¹‹ååœ¨è¯¥é¡¹ç›®ä¸‹**é€šè¿‡ä»¥ä¸‹å‘½ä»¤åˆ›å»ºä¸€ä¸ªæ–‡ä»¶å¤¹ï¼š**

```bash
mkdir webpack-demo
```

## 3ã€åˆå§‹åŒ–é¡¹ç›®

è¿›å…¥ `webpack-demo` æ–‡ä»¶ï¼Œåˆå§‹åŒ–é¡¹ç›®ã€‚**å‘½ä»¤è¡Œå¦‚ä¸‹ï¼š**

```bash
cd webpack-demo
npm init æˆ– npm init -y //åŠ -yè¡¨ç¤ºé»˜è®¤è‡ªåŠ¨é…ç½®é¡¹
```

ä¹‹åä¸€è·¯ `Enter` å›è½¦å³å¯ã€‚

å¤§å®¶å¯ä»¥çœ‹åˆ°é¡¹ç›®ç»“æ„ï¼Œä»¥ä¸Šæ“ä½œå°±æ˜¯åœ¨ `webpack-demo` æ–‡ä»¶ä¸‹åˆ›å»ºäº†ä¸€ä¸ª `package.json` æ–‡ä»¶ï¼Œä¹‹åæˆ‘ä»¬æŠŠ `package.json` æ–‡ä»¶çš„å†…è¿›è¡Œæ”¹é€ ã€‚**å…·ä½“ä»£ç å¦‚ä¸‹ï¼š**

```json
{
  "name": "webpack-demo",
  "version": "1.0.0",
  "description": "",
  //å°†è¿™ä¸ªé¡¹ç›®è®¾ç½®ä¸ºç§æœ‰
  "private": true,
  //"main": "index.js", //å»æ‰å…¥å£æ–‡ä»¶
  "scripts": {
    "test": "echo \"Error: no test specified\" && exit 1"
  },
  //å†™ä¸Šä½œè€…å
  "author": "Monday",
  //ä¿æŒé¡¹ç›®ç§æœ‰
  "license": "ISC"
}
```

## 4ã€å®‰è£… webpack

**ç¬¬ä¸€ç§æ–¹å¼ï¼šå…¨å±€å®‰è£…**

```bash
npm install webpack webpack-cli -g
```

**ç¬¬äºŒç§æ–¹å¼ï¼šå½“å‰é¡¹ç›®ä¸‹å®‰è£…**

```bash
npm install webpack webpack-cli -D
```

åœ¨è¿™é‡Œçš„å»ºè®®æ˜¯é€‰æ‹©ç¬¬äºŒç§æ–¹å¼è¿›è¡Œå®‰è£…ã€‚é‚£ä¸ºä»€ä¹ˆå‘¢ï¼Ÿæ˜¯å› ä¸ºå…¨å±€å®‰è£… `webpack` æœ‰ä»€ä¹ˆé—®é¢˜å—ï¼Ÿ

äº‹å®ä¸Šï¼Œå…¨å±€å®‰è£…åªä¼šå®‰è£…ä¸€ä¸ªç‰ˆæœ¬ã€‚

é‚£ä¹ˆå‡å¦‚æˆ‘ä»¬ç°åœ¨è¦è·‘ä¸¤ä¸ªé¡¹ç›®ï¼Œå¹¶ä¸”è¿™ä¸¤ä¸ªé¡¹ç›®å‡ºç°åŸå…ˆå®‰è£…çš„ `webpack` ç‰ˆæœ¬ä¸ä¸€æ ·ï¼Œå®‰è£…ä½ç‰ˆæœ¬ `webpack` çš„é¡¹ç›®ï¼Œå°±æœ‰å¯èƒ½ä¼šå¯¼è‡´åœ¨æˆ‘ä»¬çš„æœ¬æœºä¸­è¿è¡Œä¸èµ·æ¥ã€‚æ‰€ä»¥å»ºè®®æ˜¯ä½¿ç”¨ç¬¬äºŒç§æ–¹å¼è¿›è¡Œå®‰è£…ã€‚

---

å®‰è£…å®Œæˆä¹‹åï¼Œæˆ‘ä»¬è¿˜è¦æ¥æŸ¥è¯¢å½“å‰ä½¿ç”¨çš„ `webpack` ç‰ˆæœ¬å·ï¼Œä»¥ç¡®ä¿æˆ‘ä»¬æ˜¯å¦å·²ç»å®‰è£…æˆåŠŸã€‚**å…·ä½“å‘½ä»¤è¡Œå¦‚ä¸‹ï¼š**

```bash
npx webpack -v
```

è¿™ä¸ªæ—¶å€™å°±æœ‰å°ä¼™ä¼´ä¼šæœ‰ç–‘é—®è¯´ï¼Œä¸ºä»€ä¹ˆå‰é¢è¿˜è¦åŠ ä¸ª `npx` æ‰èƒ½æŸ¥æ‰¾ç‰ˆæœ¬å·ã€‚

åŸå› åœ¨äºï¼Œæˆ‘ä»¬åªåœ¨å½“å‰é¡¹ç›®ä¸­å®‰è£…ï¼Œæ‰€ä»¥ `webpack` è¿™ä¸ªå‘½ä»¤åœ¨å…¨å±€ä¸­å¹¶æ²¡æœ‰æ‰¾åˆ°ã€‚è€Œ `node` æä¾›äº† `npx` ï¼Œè¿™ä¸ªæ—¶å€™ `npx` å°±å¯ä»¥æ‰¾åˆ°æˆ‘ä»¬æ‰€è¿è¡Œé¡¹ç›®ç›®å½•ä¸‹çš„ `node-module` ä¸­çš„ `webpack` å®‰è£…åŒ…ï¼Œæ‰€ä»¥è¿™ç§æ–¹å¼æ˜¯æŠŠæˆ‘ä»¬çš„ `webpack` å®‰è£…åœ¨æˆ‘ä»¬çš„é¡¹ç›®å†…ï¼Œç„¶åé€šè¿‡ `npx` å»è¿è¡Œ `webpack` å°±å¯ä»¥äº†ã€‚

## 5ã€å®‰è£…å…·ä½“ç‰ˆæœ¬çš„ webpack

å¦‚æœæˆ‘ä»¬æƒ³è¦å®‰è£…å…·ä½“ç‰ˆæœ¬å·çš„ `webpack` ï¼Œé‚£ä¹ˆæˆ‘ä»¬å…ˆæŸ¥çœ‹ `webpack` çš„ç‰ˆæœ¬å·ä¿¡æ¯ã€‚**å‘½ä»¤å¦‚ä¸‹ï¼š**

```bash
npm info webpack
```

æŸ¥åˆ°å…·ä½“ç‰ˆæœ¬å·ä»¥åï¼Œä½¿ç”¨ä»¥ä¸‹å‘½ä»¤è¿›è¡Œå®‰è£…ï¼š

```bash
npm install webpack@4.16.5 webpack-cli -D //4.16.5è¡¨ç¤ºç‰ˆæœ¬å·
```

# âš™ï¸ ä¸‰ã€Webpack çš„é…ç½®æ–‡ä»¶

## 1ã€é»˜è®¤é…ç½®æ–‡ä»¶

å¾ˆå¤šæ—¶å€™ï¼Œæˆ‘ä»¬è¿˜æ²¡å†™é…ç½®æ–‡ä»¶ï¼Œé¡¹ç›®å°±æˆåŠŸè·‘èµ·æ¥äº†ã€‚è¿™å¹¶ä¸æ˜¯å› ä¸ºä¸ç”¨å†™ï¼Œè€Œæ˜¯ `webpack` å›¢é˜Ÿæå‰å¸®æˆ‘ä»¬å†™å¥½äº†å¾ˆå¤š**é»˜è®¤çš„é…ç½®æ–‡ä»¶**ï¼Œä½¿å¾—æˆ‘ä»¬åœ¨è¿è¡Œé¡¹ç›®æ—¶ä¸ç”¨è¿›è¡Œè¿‡å¤šçš„é…ç½®å°±å¯ä»¥è¾¾åˆ°æˆ‘ä»¬çš„ä½¿ç”¨éœ€æ±‚ã€‚é‚£ä¸‹é¢ï¼Œå°±è·Ÿç€å¤§å®¶ä¸€èµ·æ¥å†™ä¸€ä¸ªé…ç½®æ–‡ä»¶ã€‚

æˆ‘ä»¬å…ˆæ¥äº†è§£ä¸‹é¡¹ç›®ç»“æ„ï¼Œåœ¨æˆ‘ä»¬åˆ›å»ºå®Œé¡¹ç›®æ—¶ï¼Œæˆ‘ä»¬çš„æºä»£ç ä¸€èˆ¬æ”¾åœ¨ `src` æ–‡ä»¶å¤¹ä¸‹ï¼Œå¹¶ä¸”æ‰“åŒ…åçš„æ–‡ä»¶ä¸€èˆ¬æ”¾åœ¨ `dist` æ–‡ä»¶ä¸‹ï¼ŒåŒæ—¶ `webpack` çš„é…ç½®æ–‡ä»¶å‘½åä¸º `webpack.config.js` ï¼Œå¹¶ä¸”æ”¾åœ¨é¡¹ç›®çš„æ ¹ç›®å½•ä¸‹ã€‚

```bash
â”œâ”€â”€ dist æ”¾ç½®æ‰“åŒ…åçš„æ–‡ä»¶
â”œâ”€â”€ src æ”¾ç½®é¡¹ç›®æºä»£ç 
â”œâ”€â”€ webpack.config.js webpacké…ç½®æ–‡ä»¶
â”œâ”€â”€ package-lock.json
â”œâ”€â”€ package.json
```

çœ‹å®Œé¡¹ç›®ç»“æ„ï¼Œæˆ‘ä»¬æ¥äº†è§£ä¸€ä¸‹ `webpack` çš„**é…ç½®æ–‡ä»¶**å…·ä½“éœ€è¦æ€ä¹ˆé…ç½®ã€‚**å…·ä½“ä»£ç å¦‚ä¸‹ï¼š**

```js
//nodeçš„æ ¸å¿ƒæ¨¡å—
const path = require('path');

module.exports = {
  //è®¾ç½®ä¸ºdevelopmentæ—¶ï¼Œä»£ç ä¸ä¼šè¿›è¡Œå‹ç¼©ï¼›è®¾ç½®ä¸ºproductionæ—¶ï¼Œä»£ç ä¼šè¿›è¡Œå‹ç¼©ã€‚
  mode: 'production',
  // æ”¾ç½®å…¥å£æ–‡ä»¶ï¼Œæ˜ç¡®æ€ä¹ˆæ‰“åŒ…ï¼Œè¦æ‰“åŒ…å“ªä¸€ä¸ªæ–‡ä»¶
  entry: './src/index.js',
  //entry: {
  //    main: './src/index.js'
  //},
  // è¾“å‡ºï¼Œè¡¨æ˜webpackåº”è¯¥æ€ä¹ˆè¾“å‡ºï¼Œè¾“å‡ºåˆ°å“ªä¸ªåœ°æ–¹
  output: {
    filename: 'bundle.js',
    // æŒ‡æ‰“åŒ…åçš„æ–‡ä»¶è¦æ”¾åœ¨å“ªä¸ªæ–‡ä»¶ä¸‹
    // __dirnameè¡¨ç¤ºè¯¥é¡¹ç›®çš„æ ¹ç›®å½•
    path: path.resolve(__dirname, 'dist'),
  },
};
```

äº†è§£å®ŒåŸºæœ¬é…ç½®ï¼Œæ­¤æ—¶å¯èƒ½æœ‰å°ä¼™ä¼´å¿ƒé‡Œæœ‰ä¸€ä¸ªç–‘æƒ‘ï¼Œ `webpack` é…ç½®æ–‡ä»¶çš„å‘½åä¸€å®šè¦å‘½åä¸º `webpack.config.js` å—ï¼Œæ˜¯å¦å¯ä»¥å‘½åä¸ºå…¶ä»–çš„å‘¢ï¼Ÿ

**ç­”æ¡ˆæ˜¯è‚¯å®šå¯ä»¥çš„**ï¼Œä¸è¿‡æˆ‘ä»¬éœ€è¦è¿›è¡Œä¸€ä¸ªç‰¹æ®Šå¤„ç†ã€‚å¹³å¸¸å¦‚æœæˆ‘ä»¬å‘½åä¸º `webpack.config.js` æ—¶ï¼Œå¯ä»¥ç›´æ¥ä½¿ç”¨ `npm webpack` æ¥è·‘æˆ‘ä»¬çš„é¡¹ç›®ã€‚å¦‚æœä¸ç”¨è¿™ä¸ªå‘½åæ—¶ï¼Œå‡è®¾å‘½åä¸º `webpackconfig.js` ï¼Œé‚£ä¹ˆæˆ‘ä»¬å¯ä»¥é€šè¿‡ä»¥ä¸‹å‘½ä»¤è¡Œï¼Œæ¥æ‰“åŒ…æˆ‘ä»¬å…·ä½“çš„é¡¹ç›®ã€‚

```bash
 npx webpack --config webpackconfig.js
```

ä»¥ä¸Šå‘½ä»¤è¡Œçš„æ„æ€ä¸ºï¼šæŒ‡è®© `webpack` æ¥å¸®æˆ‘ä»¬æ‰“åŒ…ï¼Œå…·ä½“æ‰“åŒ…å“ªä¸€ä¸ªæ–‡ä»¶å‘¢ï¼Ÿä»¥ `webpackconfig.js` ä¸ºé…ç½®æ–‡ä»¶ï¼Œæ¥å¸®æˆ‘ä»¬æ‰“åŒ…ã€‚

## 2ã€ç”¨ npm script æ¥ç®€åŒ–æˆ‘ä»¬çš„æ‰“åŒ…ä»£ç 

çœ‹å®Œä¸Šé¢çš„å†…å®¹ï¼Œç›¸ä¿¡å°ä¼™ä¼´ä»¬å¯¹ `webpack` æœ‰äº†ä¸€ä¸ªåŸºç¡€çš„è®¤è¯†ã€‚

é‚£è¯•æƒ³ä»¥ä¸‹ï¼Œç»å¸¸è¦ä½¿ç”¨ `npx webpack` æ¥å¸®æˆ‘ä»¬æ‰“åŒ…æ–‡ä»¶ï¼Œè¿™æ ·æ˜¯ä¸æ˜¯ä¼šæœ‰ç‚¹ç•¥æ˜¾éº»çƒ¦å‘¢ï¼Ÿ

æ‰€ä»¥ï¼Œæˆ‘ä»¬æ¥å†äº†è§£ä¸€ä¸ªå†…å®¹ï¼šä½¿ç”¨ `npm script` æ¥ç®€åŒ–æˆ‘ä»¬çš„æ‰“åŒ…ä»£ç ã€‚

å†æˆ‘ä»¬çš„é¡¹ç›®æ ¹ç›®å½•ä¸‹ï¼Œä¼šæœ‰ä¸€ä¸ª `package.json` æ–‡ä»¶ï¼Œè¿™ä¸ªæ–‡ä»¶çš„**ä»£ç å¦‚ä¸‹ï¼š**

```json
{
  "name": "webpack-demo",
  "version": "1.0.0",
  "description": "",
  "private": true,
  "main": "index.js",
  "scripts": {
    "test": "echo \"Error: no test specified\" && exit 1"
  },
  "author": "Monday",
  "license": "ISC",
  "devDependencies": {
    "webpack": "^5.39.1",
    "webpack-cli": "^4.7.2"
  }
}
```

å¤§å®¶å®šä½åˆ° scripts éƒ¨åˆ†ï¼Œæ¥ä¸‹æ¥ï¼Œæˆ‘ä»¬æŠŠ script éƒ¨åˆ†è¿›è¡Œä¸€ä¸ªæ”¹é€ ã€‚å…·ä½“ä»£ç å¦‚ä¸‹ï¼š

```json
 "scripts": {
    /* webpack ä¼šå…ˆåˆ°node_moduleä¸‹é¢è¿›è¡Œæ‰“åŒ…*/
    "bundle": "webpack"
  },
```

æ”¹é€ å®Œæˆä»¥åï¼Œæˆ‘ä»¬å°±ç›¸å½“äºåœ¨ `package.json` é‡Œé¢é…ç½®äº†ä¸€ä¸ª `npm script` ï¼Œä¸Šé¢çš„ä»£ç æ„æ€ä¸ºè¿™ä¸ª `script` å¯¹åº”çš„åå­—å«åš `bundle` ï¼Œä¹‹åå‘¢ï¼Œ `bundle` çš„åº•å±‚ä¼šå¸®åŠ©æˆ‘ä»¬æ‰§è¡Œ `webpack` ï¼Œå¹¶è¿›è¡Œæ‰“åŒ…ã€‚

è¿™ä¹ˆç¼–å†™ä¹‹åï¼Œæˆ‘ä»¬å°±ä¸å†éœ€è¦ä½¿ç”¨ `npx webpack` æ¥åšè¿è¡Œ `webpack` ï¼Œè€Œæ˜¯ä½¿ç”¨ `npm run bundle` æ¥åšå‘½ä»¤è¿›è¡Œæ‰“åŒ…ã€‚

## 3ã€æµ…è°ˆ webpack æ‰“åŒ…è¾“å‡ºå†…å®¹

è®²è§£å®Œä¸Šé¢çš„å†…å®¹ï¼Œæˆ‘ä»¬æ¥å¯¹ `webpack` æ‰“åŒ…ä»¥åæ§åˆ¶å°çš„ä¸€äº›è¾“å‡ºå†…å®¹è¿›è¡Œå½’çº³æ€»ç»“ã€‚

|  è¾“å‡ºå†…å®¹   |                          å…·ä½“å«ä¹‰                          |
| :---------: | :--------------------------------------------------------: |
|    hash     |                ä»£è¡¨æœ¬æ¬¡æ‰“åŒ…å¯¹åº”çš„å”¯ä¸€å“ˆå¸Œå€¼                |
|   version   |             ä»£è¡¨æ­¤æ¬¡æ‰“åŒ…ä½¿ç”¨çš„ webpack çš„ç‰ˆæœ¬              |
|    time     |                 å½“å‰é¡¹ç›®æ•´ä½“æ‰“åŒ…çš„å…·ä½“è€—æ—¶                 |
|   assets    |         æ‰“åŒ…åçš„æ–‡ä»¶å…·ä½“æ˜¯å“ªä¸€ä¸ªï¼Œæ¯”å¦‚ï¼šbundle.js          |
|    size     |                      æ‰“åŒ…åæ–‡ä»¶çš„å¤§å°                      |
|   chunks    | æ”¾ç½®è‡ªå·±å¯¹åº”æ–‡ä»¶çš„ id å€¼ä»¥åŠå¯¹åº”æ–‡ä»¶æ‰€å¼•å…¥å…¶ä»–æ–‡ä»¶çš„ id å€¼ |
| chunk Names |                   å¯¹åº” entry é…ç½®çš„ main                   |

# ğŸ”‘ å››ã€Loader

## 1ã€å¼•ä¾‹é˜è¿°

`Webpack` é»˜è®¤æ˜¯çŸ¥é“å¦‚ä½•æ‰“åŒ… `js` æ¨¡å—çš„ï¼Œä½†æ˜¯å®ƒä¸çŸ¥é“ `jpg` è¿™ç§æ–‡ä»¶è¯¥æ€ä¹ˆæ‰“åŒ…ã€‚

è¿™ä¸ªæ—¶å€™æˆ‘ä»¬éœ€è¦åœ¨ `webpack.config.js` æ–‡ä»¶ä¸‹åšé…ç½®ï¼Œé…ç½® `file-loader` ã€‚æˆ‘ä»¬åœ¨é…ç½®ä¸­å¢åŠ ä¸€ä¸ªæ–°çš„ `module` ã€‚**å…·ä½“ä»£ç å¦‚ä¸‹ï¼š**

```js
module:{
    rules:[{
        test:/\.jpg$/,
        use:{
            loader:'file-loader'
        }
    }]
	},
```

æ¥ä¸‹æ¥æˆ‘ä»¬æ¥æ­£å‘åˆ†æä¸‹ `webpack` æ˜¯å¦‚ä½•æ‰“åŒ… `jpg` è¿™ç§é™æ€æ–‡ä»¶çš„ã€‚

é¦–å…ˆ `webpack` ä¼šè¿›å…¥`src` ç›®å½•ï¼Œ `new` ä¸€ä¸ª `index.js` æ–‡ä»¶ï¼Œé‚£ä¹ˆç°åœ¨æˆ‘ä»¬è¦å¯¹è¿™ä¸ªæ–‡ä»¶è¿›è¡Œæ‰“åŒ…ã€‚

æ‰€ä»¥ï¼Œæˆ‘åœ¨å‘½ä»¤è¡Œé‡Œï¼Œè¿è¡Œäº† `npm run bundle` ã€‚å½“ä½ è¿è¡Œ `npm run bundle` æ—¶ï¼Œå®é™…ä¸Šåœ¨æ‰§è¡Œçš„æ˜¯ `package.json` é‡Œé¢çš„ `script` ï¼Œè¿™ä¸ª `script` å¸®æˆ‘ä»¬è¿è¡Œ `webpack` ï¼Œç„¶åå‘¢ï¼Œ `webpack` å¸®æˆ‘ä»¬åšæ‰“åŒ…ã€‚è¿™ä¸ªæ—¶å€™ `webpack` å°±ä¼šå»æ‰¾å®ƒç›¸å¯¹åº”çš„é…ç½®ï¼Œæ ¹æ®è¿™ä¸ªé…ç½®å¸®æˆ‘ä»¬åšæ‰“åŒ…ã€‚

é‚£ä¹ˆæˆ‘ä»¬æ¥çœ‹ä¸€ä¸‹ï¼Œå¦‚æœæˆ‘ä»¬é‡åˆ°çš„æ˜¯ `js` æ–‡ä»¶ï¼Œé‚£ä¹ˆ `webpack` é»˜è®¤ä¼šè¿›è¡Œæ‰“åŒ…ã€‚ä½†æ˜¯å‘¢ï¼Ÿå¦‚æœé‡åˆ°çš„æ˜¯ä¸€å¼  `jpg` çš„å›¾ç‰‡å‘¢ï¼Ÿ `webpack` è¿™ä¸ªæ—¶å€™å°±æ‡µäº†ï¼Œ `webpack` å¹¶ä¸è®¤è¯† `jpg` è¿™ç§æ ¼å¼çš„ä»£ç ã€‚

å› æ­¤ï¼Œæˆ‘ä»¬å°±å¯ä»¥å¼•ç”¨ä¸€ä¸ªæ¨¡å— moduleï¼Œæ¥å¸®æˆ‘ä»¬æ‰“åŒ…ã€‚è¿™ä¸ªæ¨¡å—å« `file-loader` ï¼Œ`file-loader` è¿™ä¸ª `loader` å°±å¯ä»¥å¸®åŠ©æˆ‘ä»¬å®Œæˆæ‰“åŒ…çš„è¿‡ç¨‹ã€‚

é‚£ä¹ˆå®é™…ä¸Šï¼Œ `file-loader` çš„åº•å±‚ï¼Œå¸®æˆ‘ä»¬åšäº†ä»€ä¹ˆäº‹æƒ…å‘¢ï¼Ÿ

å½“æˆ‘ä»¬æ‰“åŒ… `jpg` æ–‡ä»¶æ—¶ï¼Œ `webpack` ä¼šæŠŠ `jpg` æ–‡ä»¶ç§»åŠ¨åˆ° `dist` æ–‡ä»¶ä¸‹ï¼Œå¹¶ä¸”å¯¹ `jpg` æ–‡ä»¶èµ‹äºˆä¸€ä¸ªæ–°çš„åç§°ã€‚ç„¶åå‘¢ï¼Œå®ƒä¼šæŠŠè¿™ä¸ªåç§°ä½œä¸ºä¸€ä¸ªè¿”å›å€¼ï¼Œè¿”å›ç»™æˆ‘ä»¬å¼•å…¥æ¨¡å—çš„å˜é‡ä¹‹ä¸­ã€‚

è¿™å°±æ˜¯ `file-loader` åº•å±‚å¤„ç†æ‰“åŒ…æ–‡ä»¶çš„ä¸€ä¸ªæµç¨‹ã€‚

å½“ç„¶ã€‚ `file-loader` ä¸ä»…ä»…å¯ä»¥å¤„ç† `jpg` è¿™æ ·çš„æ–‡ä»¶å›¾ç‰‡ã€‚ç†è®ºä¸Šï¼Œå®ƒè¿˜å¯ä»¥å¤„ç†**å¾ˆå¤šç§ç±»å‹çš„é™æ€èµ„æº**ã€‚

## 2ã€ä»€ä¹ˆæ˜¯ Loader

é˜è¿°äº† `file-loader` ä¹‹åï¼Œç›¸ä¿¡å¤§å®¶å¯¹ `loader ` æœ‰äº†ä¸€ä¸ªåŸºç¡€è®¤è¯†ã€‚é‚£ä¹ˆæˆ‘ä»¬ç°åœ¨å°±æ¥å¯¹ loader çš„åŸºç¡€å®šä¹‰è¿›è¡Œæ¢³ç†ã€‚**å…·ä½“å¦‚ä¸‹ï¼š**

æœ¬èº« `webpack` å¯¹äºä¸€äº›æ–‡ä»¶æ˜¯ä¸çŸ¥é“å¦‚ä½•å¤„ç†çš„ï¼Œä½†æ˜¯ `loader` çŸ¥é“ã€‚æ‰€ä»¥å‘¢ï¼Œå½“é‡åˆ°ä¸€äº› `éjs` æ–‡ä»¶æ—¶ï¼Œä¸€èˆ¬å»æ±‚åŠ©äº `loader` å°±å¯ä»¥äº†ã€‚å› æ­¤æˆ‘ä»¬å°±éœ€è¦è®© `webpack` å»æ±‚åŠ© `loader` æ¨¡å—ï¼Œæ¥è¯†åˆ«å‡º `éjs` çš„æ–‡ä»¶ã€‚

å¼•ç”¨ `webpack` å®˜æ–¹ä¸­æ–‡æ–‡æ¡£çš„ä¸€å¥è¯ï¼Œæ–‡æ¡£ä¸­è¯´åˆ°ï¼š `webpack` åªèƒ½ç†è§£ `JavaScript` å’Œ `JSON` æ–‡ä»¶ï¼Œè¿™æ˜¯ `webpack` å¼€ç®±å¯ç”¨çš„è‡ªå¸¦èƒ½åŠ›ã€‚**loader** è®© `webpack` èƒ½å¤Ÿå»å¤„ç†å…¶ä»–ç±»å‹çš„æ–‡ä»¶ï¼Œå¹¶å°†å®ƒä»¬è½¬æ¢ä¸ºæœ‰æ•ˆæ¨¡å—ï¼Œä»¥ä¾›**åº”ç”¨ç¨‹åº**ä½¿ç”¨ï¼Œä»¥åŠè¢«æ·»åŠ åˆ°**ä¾èµ–å›¾**ä¸­ã€‚æœ¬è´¨ä¸Šï¼Œ `loader` æ˜¯å¯¼å‡ºä¸ºå‡½æ•°çš„ `JavaScript` æ¨¡å—ã€‚

## 3ã€ä½¿ç”¨ Loader æ‰“åŒ…é™æ€èµ„æºï¼ˆå›¾ç‰‡ç¯‡ï¼‰

### ï¼ˆ1ï¼‰è‡ªå®šä¹‰å‘½åå›¾ç‰‡

å¦‚æœæˆ‘ä»¬ç°åœ¨è¦å¯¹æ‰“åŒ…åçš„å›¾ç‰‡è¿›è¡Œè‡ªå®šä¹‰å‘½åï¼Œé‚£è¯¥æ€ä¹ˆåšå‘¢ï¼Ÿ

æˆ‘ä»¬åœ¨ `webpack.config.js` æ–‡ä»¶ä¸‹çš„ `module` å†è¿›è¡Œæ”¹è¿›ã€‚**å…·ä½“ä»£ç å¦‚ä¸‹ï¼š**

```js
module: {
  rules: [
    {
      test: /\.jpg$/,
      use: {
        loader: 'file-loader',
        options: {
          //placeholder å ä½ç¬¦
          name: '[name]_[hash].[ext]',
        },
      },
    },
  ];
}
```

é€šè¿‡é…ç½® `options` ï¼Œå°±å¯ä»¥è¾¾åˆ°å›¾ç‰‡è‡ªå®šä¹‰å‘½åçš„æ•ˆæœã€‚

### ï¼ˆ2ï¼‰æ‰“åŒ…å„ç§ç±»å‹çš„å›¾ç‰‡æ–‡ä»¶

å‡è®¾æˆ‘ä»¬ç°åœ¨ä¸å±€é™äºæ‰“åŒ… `jpg` æ–‡ä»¶ï¼Œè¿˜æƒ³è¦æ‰“åŒ…å…¶ä»–çš„å›¾ç‰‡æ–‡ä»¶ã€‚**é‚£ä¹ˆæˆ‘ä»¬å¯ä»¥è¿™æ ·é…ç½®ï¼š**

```js
module: {
  rules: [
    {
      test: /\.(jpg|png|gif)$/,
      use: {
        loader: 'file-loader',
        options: {
          //placeholder å ä½ç¬¦
          name: '[name]_[hash].[ext]',
        },
      },
    },
  ];
}
```

é€šè¿‡æ­£åˆ™è¡¨è¾¾å¼çš„æ–¹å¼ï¼Œæ¥å¢åŠ æ–°çš„å›¾ç‰‡ç±»å‹ã€‚

### ï¼ˆ3ï¼‰æ‰“åŒ…åˆ° image æ–‡ä»¶ä¸‹

å‡è®¾æˆ‘ä»¬ç°åœ¨æƒ³è¦æŠŠæ‰“åŒ…åçš„æ–‡ä»¶æ”¾åˆ° `image` æ–‡ä»¶ä¸‹ï¼Œé‚£è¯¥æ€ä¹ˆåšå‘¢ï¼Ÿ**å…·ä½“ä»£ç å¦‚ä¸‹ï¼š**

```js
module: {
  rules: [
    {
      test: /\.(jpg|png|gif)$/,
      use: {
        loader: 'file-loader',
        options: {
          //placeholder å ä½ç¬¦
          name: '[name]_[hash].[ext]',
          //å°†jpgã€pngå’Œgifå›¾ç‰‡æ–‡ä»¶ï¼ŒæŒ‡å®šåˆ°distç›®å½•ä¸‹çš„imagesæ–‡ä»¶ä¸‹
          outputPath: 'images/',
        },
      },
    },
  ];
}
```

### ï¼ˆ4ï¼‰url-loader

åœ¨ä½¿ç”¨äº† `file-loader` ä¹‹åï¼Œæˆ‘ä»¬å†æ¥äº†è§£ä¸€ä¸ªçŸ¥è¯†ç‚¹ï¼š `url-loader` ã€‚ `url-loader` å¯ä»¥è¾¾åˆ°å‡ è¿‘ `file-loader` çš„æ•ˆæœã€‚å…·ä½“ä½¿ç”¨æ–¹æ³•å¦‚ä¸‹ï¼š

```bash
npm i url-loader -D
```

```js
module: {
  rules: [
    {
      test: /\.(jpg|png|gif)$/,
      use: {
        loader: 'url-loader',
        options: {
          name: '[name]_[hash].[ext]',
          outputPath: 'images/',
        },
      },
    },
  ];
}
```

æˆ‘ä»¬åªè¦å®‰è£…ä¸Š `url-loader` ï¼Œå¹¶ä¸”åœ¨é…ç½®ä¸­å°† `file-loader` æ›¿æ¢ä¸º `url-loader` å³å¯ã€‚

ä½†å€¼å¾—æ³¨æ„çš„æ˜¯ï¼Œä½¿ç”¨ `url-loader` è¿›è¡Œæ‰“åŒ…ï¼Œä¼šæœ‰ä¸€äº›éœ€è¦æ³¨æ„çš„äº‹é¡¹ã€‚

å½“ä½ å»æ‰“åŒ…ä¸€ä¸ª `jpg` æ–‡ä»¶çš„æ—¶å€™ï¼Œä¸ `file-loader` ä¸ä¸€æ ·çš„æ˜¯ï¼Œ `url-loader` ä¼šå°†å›¾ç‰‡è½¬æ¢æˆä¸€ä¸ª `base64` çš„å­—ç¬¦ä¸²ï¼Œç„¶åç›´æ¥æ”¾åˆ°æˆ‘ä»¬ `dist` ç›®å½•ä¸‹çš„ `bundle.js` é‡Œé¢ï¼Œè€Œä¸æ˜¯å•ç‹¬ç”Ÿæˆä¸€ä¸ªå›¾ç‰‡æ–‡ä»¶ã€‚

å¥½å¤„å°±æ˜¯ï¼Œç›´æ¥è®¿é—®ï¼Œè€Œä¸ç”¨å»æ–‡ä»¶å¤¹ä¸‹è®¿é—®ï¼ŒèŠ‚çœäº†ä¸€æ¬¡ `http` è¯·æ±‚ã€‚

è€Œå¸¦æ¥çš„åå¤„å°±æ˜¯ï¼Œå¦‚æœè¿™ä¸ª `js` æ–‡ä»¶ç‰¹åˆ«å¤§ï¼Œé‚£ä¹ˆæ‰“åŒ…ç”Ÿæˆçš„ js æ–‡ä»¶ä¹Ÿå°†ä¼šç‰¹åˆ«å¤§ï¼Œéšä¹‹åŠ è½½è¿™ä¸ª `js` çš„æ—¶é—´å°±ä¼šå¾ˆé•¿ã€‚

æ‰€ä»¥ï¼Œ `url-loader` çš„æœ€ä½³ä½¿ç”¨æ–¹å¼æ˜¯ä»€ä¹ˆå‘¢ï¼Ÿ

å¦‚æœè¯´æˆ‘ä»¬å¼•å…¥çš„å›¾ç‰‡å¾ˆå°ï¼Œåªæœ‰ `1~2KB` ç­‰å°çš„ä½“ç§¯ï¼Œé‚£ä¹ˆè¿™ä¸ªå›¾ç‰‡ä»¥ `base64` çš„å½¢å¼æ‰“åŒ…åˆ° `js` æ–‡ä»¶é‡Œï¼Œæ˜¯ä¸€ä¸ªå¾ˆå¥½çš„é€‰æ‹©ï¼Œå°±æ²¡æœ‰å¿…è¦è®©è¿™ä¹ˆå°çš„å›¾ç‰‡å†å»å‘ä¸€æ¬¡ `http` è¯·æ±‚ã€‚

ä½†å‡è®¾è¿™ä¸ªå›¾ç‰‡å¾ˆå¤§çš„è¯ï¼Œé‚£ä¹ˆå°½é‡ä¸è¦ä½¿ç”¨ `url-loader` ï¼Œè€Œä½¿ç”¨ `file-loader` ï¼ŒæŠŠè¿™ä¸ªå›¾ç‰‡æ‰“åŒ…åˆ° dist ç›®å½•ä¸‹ï¼Œä¸è¦æ‰“åŒ…åˆ° `bundle.js` é‡Œé¢ã€‚ä¸ç„¶ä¼šä½¿å¾— `bundle.js` æ–‡ä»¶å˜å¾—å¾ˆå¤§ï¼Œä½¿å¾—åŠ è½½æ—¶é—´å˜å¾—å¾ˆé•¿ï¼Œä¸åˆ©äºç»´æŠ¤ã€‚

è¿˜æœ‰ä¸€ç§æ–¹æ³•å°±æ˜¯ï¼Œæˆ‘ä»¬å¯ä»¥ç›´æ¥åœ¨ `url-loader` ä¸‹å†åŠ ä¸€ä¸ªé…ç½®ï¼š `limit` ã€‚**å…·ä½“ä»£ç å¦‚ä¸‹ï¼š**

```js
module: {
  rules: [
    {
      test: /\.(jpg|png|gif)$/,
      use: {
        loader: 'url-loader',
        options: {
          name: '[name]_[hash].[ext]',
          outputPath: 'images/',
          //20480=>20KB
          limit: 20480,
        },
      },
    },
  ];
}
```

é€šè¿‡ä»¥ä¸Šä»£ç æˆ‘ä»¬å¯ä»¥çŸ¥é“ï¼Œå½“ä½¿ç”¨ `url-loader` æ—¶ï¼Œæˆ‘ä»¬å¯ä»¥ç»™å…¶åŠ ä¸€ä¸ª `limit` å±æ€§ã€‚é‚£ä¹ˆä¸Šé¢ä»£ç æ‰€è¦è¡¨è¾¾çš„æ„æ€å°±æ˜¯ï¼Œå½“å›¾ç‰‡æ–‡ä»¶å¤§å°å¤§äº `20KB` æ—¶ï¼Œæˆ‘ä»¬ä½¿ç”¨ `url-loader` æ‰“åŒ…ã€‚å½“å¤§äº `20KB` æ—¶ï¼Œå°±å°†å›¾ç‰‡æ–‡ä»¶æ”¾åˆ° `dist` çš„ `images` æ–‡ä»¶ä¸‹ã€‚

## 4ã€ä½¿ç”¨ Loader æ‰“åŒ…é™æ€èµ„æºï¼ˆæ ·å¼ç¯‡ï¼‰

### ï¼ˆ1ï¼‰æ‰“åŒ… css æ–‡ä»¶

æ¯”å¦‚è¯´ï¼Œæˆ‘ä»¬ç°åœ¨æƒ³è¦è®©ä¸€å¼ å›¾ç‰‡çš„å¤§å°ä¸º `150*150` ï¼Œé‚£ä¹ˆæˆ‘ä»¬å°±éœ€è¦å†™ä¸‹æ ·å¼æ¥ä¿®æ”¹è¿™å¼ å›¾ç‰‡ã€‚é‚£ `webpack` å¦‚ä½•æ‰“åŒ… `css` æ–‡ä»¶å‘¢ï¼Ÿ

æˆ‘ä»¬å¯ä»¥ä½¿ç”¨ `css-loader` å’Œ `style-loader` æ¥å¯¹æ–‡ä»¶è¿›è¡Œæ‰“åŒ…ã€‚**å…·ä½“é…ç½®å¦‚ä¸‹ï¼š**

```bash
npm install sass-loader node-sass --save-dev
```

```js
module: {
  rules: [
    {
      test: /\.(jpg|png|gif)$/,
      use: {
        loader: 'file-loader',
        options: {
          //placeholder å ä½ç¬¦
          name: '[name]_[hash].[ext]',
          outputPath: 'images/',
        },
      },
    },
    {
      test: /\.css$/,
      use: ['style-loader', 'css-loader'],
    },
  ];
}
```

`css-loader` ä¼šå¸®æˆ‘ä»¬åˆ†æå‡ºï¼Œå‡ ä¸ª `css` æ–‡ä»¶ä¹‹é—´çš„å…³ç³»ï¼Œæœ€ç»ˆæŠŠä¸€ä¸ª `css` æ–‡ä»¶ï¼Œåˆå¹¶æˆä¸€ä¸ª `css` ã€‚é‚£ `style-loader` çš„ä½œç”¨åˆæ˜¯æ˜¯ä»€ä¹ˆå‘¢ï¼Ÿ

åœ¨å¾—åˆ°äº† `css-loader` ç”Ÿæˆçš„ `css` æ–‡ä»¶ä¹‹åï¼Œ `style-loader` ä¼šæŠŠè¿™æ®µå†…å®¹æŒ‚è½½åˆ°é¡µé¢çš„ `head` éƒ¨åˆ†ï¼Œå¹¶å°†æ ·å¼æŒ‚è½½åˆ° `head` ä¸­çš„ `<style></style>` é‡Œé¢ã€‚

### ï¼ˆ2ï¼‰æ‰“åŒ… sass æ–‡ä»¶

å¦‚æœæ˜¯è¦æ‰“åŒ… `sass` æ–‡ä»¶å‘¢ï¼Œåˆ™ä½¿ç”¨ `sass-loader` ã€ `style-loader` å’Œ `css-loader` è¿™ä¸‰ä¸ª `loader` æ¥å¯¹æ–‡ä»¶è¿›è¡Œæ‰“åŒ…ã€‚**å…·ä½“é…ç½®å¦‚ä¸‹ï¼š**

```bash
npm install sass-loader node-sass --save-dev
```

```js
module: {
  rules: [
    {
      test: /\.(jpg|png|gif)$/,
      use: {
        loader: 'file-loader',
        options: {
          //placeholder å ä½ç¬¦
          name: '[name]_[hash].[ext]',
          outputPath: 'images/',
        },
      },
    },
    {
      test: /\.scss$/,
      use: ['style-loader', 'css-loader', 'sass-loader'],
    },
  ];
}
```

å€¼å¾—æ³¨æ„çš„æ˜¯ï¼Œ `loader` çš„æ‰§è¡Œé¡ºåºæ˜¯**ä»ä¸‹åˆ°ä¸Šï¼Œä»å³åˆ°å·¦**ã€‚

æ‰€ä»¥å½“æˆ‘ä»¬å»æ‰§è¡Œä¸€ä¸ª `sass` æ–‡ä»¶æ—¶ï¼Œé¦–å…ˆä¼šæ‰§è¡Œ `sass-loader` ï¼Œä¹‹åæ‰§è¡Œ `css-loader` ï¼Œæœ€åæ‰æ‰§è¡Œ `style-loader` ã€‚

### ï¼ˆ3ï¼‰å…¼å®¹æ€§é—®é¢˜

æœ‰æ—¶å€™æˆ‘ä»¬å¦‚æœæƒ³è¦å…¼å®¹å¤šä¸ªæµè§ˆå™¨æ—¶ï¼Œé‚£ä¹ˆæˆ‘ä»¬å¯èƒ½ä¼šåœ¨ `css` æ–‡ä»¶é‡Œé¢æ·»åŠ  `-webkit-` ç­‰å‚å•†çš„å‰ç¼€ã€‚ä½†æ˜¯å‘¢ï¼Œè¦çŸ¥é“ `webpack` æ˜¯æ²¡åŠæ³•è¯†åˆ«è¿™äº›å‰ç¼€çš„ã€‚è¿™ä¸ªæ—¶å€™æˆ‘ä»¬äº†è§£ä¸€ä¸ªæ–°çš„ `loader` ï¼Œå°±æ˜¯ `postcss-loader` ï¼Œè¿™ä¸ª loader å¯ä»¥è‡ªåŠ¨åœ°å¸®æˆ‘ä»¬æ·»åŠ **å‚å•†å‰ç¼€**çš„ä¿¡æ¯ã€‚**å…·ä½“ä½¿ç”¨æ–¹å¼å¦‚ä¸‹ï¼š**

é¦–å…ˆæˆ‘ä»¬å…ˆå®‰è£… `postcss-loader` è¿™ä¸ªåº“ï¼Œå…·ä½“ä»£ç å¦‚ä¸‹ï¼š

```bash
npm i postcss-loader -D
```

å®‰è£…å®Œæˆä¹‹åï¼Œæˆ‘ä»¬åœ¨é¡¹ç›®æ ¹ç›®å½•ä¸‹åˆ›å»ºä¸€ä¸ªæ–°çš„æ–‡ä»¶ï¼Œåå­—å« `postcss.config.js` ï¼Œä¹‹åå¯¹è¿™ä¸ªæ–‡ä»¶è¿›è¡Œé…ç½®ï¼Œ**ä»£ç å¦‚ä¸‹ï¼š**

é¦–å…ˆå®‰è£… `autoprefixer` ï¼š

```bash
npm install autoprefixer -D
```

å®‰è£…å®Œæˆä¹‹åï¼Œç°åœ¨æˆ‘ä»¬åœ¨ `postcss.config.js` æ–‡ä»¶ä¸‹æ¥ä½¿ç”¨å®ƒï¼Œ**å…·ä½“ä»£ç å¦‚ä¸‹ï¼š**

```js
module.exports = {
  Plugin: [require('autoprefixer')],
};
```

æ¥ä¸‹æ¥æˆ‘ä»¬åœ¨ `webpack.config.js` æ–‡ä»¶ä¸‹é¢ï¼Œä½¿ç”¨ `postcss-loader` ã€‚**å…·ä½“ä»£ç å¦‚ä¸‹ï¼š**

```js
module: {
  rules: [
    {
      test: /\.(jpg|png|gif)$/,
      use: {
        loader: 'file-loader',
        options: {
          //placeholder å ä½ç¬¦
          name: '[name]_[hash].[ext]',
          outputPath: 'images/',
        },
      },
    },
    {
      test: /\.scss$/,
      use: ['style-loader', 'css-loader', 'sass-loader', 'postcss-loader'],
    },
  ];
}
```

é€šè¿‡ä»¥ä¸Šæ–¹å¼ï¼Œ `webpack ` å°±å¯ä»¥åœ¨å¸®æˆ‘ä»¬æ‰“åŒ…é™æ€æ–‡ä»¶æ—¶ï¼ŒæŠŠå¯¹åº”çš„éœ€è¦åŠ å…¥å‚å•†å‰ç¼€çš„æ ·å¼ç»™æ·»åŠ ä¸Šå‰ç¼€ã€‚

## 5ã€å¢åŠ é…ç½®é¡¹

å‡è®¾æˆ‘ä»¬ç°åœ¨æƒ³è¦ç»™æŸä¸€ä¸ª `loader` å¢åŠ é…ç½®é¡¹ï¼Œæ¯”å¦‚è¯´æˆ‘ä»¬è¦ç»™ `css-loader` å¢åŠ é…ç½®é¡¹ï¼Œé‚£ä¹ˆæˆ‘ä»¬å¯ä»¥å¯¹ä»£ç è¿›è¡Œå¦‚ä¸‹å¤„ç†ã€‚**å…·ä½“ä»£ç å¦‚ä¸‹ï¼š**

```js
module: {
  rules: [
    {
      test: /\.(jpg|png|gif)$/,
      use: {
        loader: 'file-loader',
        options: {
          //placeholder å ä½ç¬¦
          name: '[name]_[hash].[ext]',
          outputPath: 'images/',
        },
      },
    },
    {
      test: /\.scss$/,
      use: [
        'style-loader',
        {
          loader: 'css-loader',
          options: {
            //è¡¨æ˜å‰é¢è¦å…ˆèµ°sass-loaderå’Œpostcss-loader
            importLoaders: 2,
          },
        },
        'sass-loader',
        'postcss-loader',
      ],
    },
  ];
}
```

ä»ä»¥ä¸Šä»£ç ä¸­æˆ‘ä»¬å¯ä»¥çœ‹åˆ°ï¼Œå½“æˆ‘ä»¬æƒ³è¦ç»™ `css-loader` å¢åŠ é…ç½®é¡¹æ—¶ï¼Œé‚£ä¹ˆä¸å†ä½¿ç”¨å­—ç¬¦ä¸²çš„å½¢å¼ï¼Œæˆ‘ä»¬æŠŠå­—ç¬¦ä¸²è½¬åŒ–æˆä¸€ä¸ªå¯¹è±¡ã€‚åœ¨å¯¹è±¡é‡Œé¢ï¼Œæˆ‘ä»¬å¡«å†™ç›¸åº”çš„ `loader` å’Œ `options` é…ç½®ï¼Œè¿™æ ·å°±è¾¾åˆ°äº†æˆ‘ä»¬æƒ³è¦çš„éœ€æ±‚ã€‚

---

æœ‰æ—¶å€™æˆ‘ä»¬åœ¨ä¸€ä¸ªé¡µé¢ä¸Šï¼Œå¦‚æœå…¨å±€å¼•å…¥ `css` ï¼Œå¯èƒ½ä¼šå¾ˆå®¹æ˜“å¯¼è‡´**æ ·å¼å†²çªé—®é¢˜**ã€‚é‚£è¿™ç§æƒ…å†µè¯¥æ€ä¹ˆå¤„ç†å‘¢ï¼Ÿ

ä¸ºæ­¤æˆ‘ä»¬å¯ä»¥å€ŸåŠ© `css-loader` ä¸­çš„ `modules` æ¥å®ç° `css` çš„æ¨¡å—åŒ–ï¼Œæ—¨åœ¨è®©å¼•å…¥çš„ `css` æ–‡ä»¶æ‹¥æœ‰å®ƒç‹¬ç«‹çš„æ¨¡å—ã€‚é‚£å…·ä½“è¯¥æ€ä¹ˆä½¿ç”¨å‘¢ï¼Ÿ

```js
module:{
        test:/\.scss$/,
        use:[
            'style-loader',
            {
                loader: 'css-loader',
                options: {
                    //è¡¨æ˜å‰é¢è¦å…ˆèµ°sass-loaderå’Œpostcss-loader
                    importLoaders: 2,
                    modules: true
                }
            },
            'sass-loader',
            'postcss-loader'
        ]
    }]
}
```

ä»ä»¥ä¸Šä»£ç ä¸­æˆ‘ä»¬å¯ä»¥çŸ¥é“ï¼Œé€šè¿‡ `modules:true` è¯­å¥ï¼Œå°±å¯ä»¥å¼€å¯ `css` çš„æ¨¡å—åŒ–æ‰“åŒ…ã€‚å¼€å¯ä¹‹åï¼Œæˆ‘ä»¬å°±å¯ä»¥åœ¨å„ç§æ–‡ä»¶ä¸‹å¼•å…¥ã€‚**å¼•å…¥æ–¹å¼å¦‚ä¸‹ï¼š**

```js
import style from './index.scss';

var img = new Image();
img.src = bug;
img.classList.add(style.bug);
```

ä»ä¸Šè¿°ä»£ç ä¸­æˆ‘ä»¬å¯ä»¥çœ‹åˆ°ï¼Œå¼€å¯ `module` åï¼Œå°±å¯ä»¥éšå¿ƒæ‰€æ¬²çš„å¼•ç”¨è¯¥ `css` ä¸­çš„å†…å®¹å•¦ï¼

## 6ã€å¦‚ä½•ä½¿ç”¨ webpack æ‰“åŒ…å­—ä½“æ–‡ä»¶

æœ‰æ—¶å€™æˆ‘ä»¬åœ¨é¡¹ç›®ä¸­æœ‰å¯èƒ½ä¼šé‡åˆ°æƒ³è¦å¼•å…¥å­—ä½“çš„é—®é¢˜ï¼Œé‚£ `webpack` å¦‚ä½•æ‰“åŒ…å­—ä½“å‘¢ï¼Ÿ**å…·ä½“ä»£ç å¦‚ä¸‹ï¼š**

```js
module:{
		rules:[{
			test: /\.(eot|ttf|svg)$/,
			use: {
				loader: 'file-loader',
			}

		}]
	},
```

é€šè¿‡ä»¥ä¸Šä»£ç æˆ‘ä»¬å¯ä»¥çŸ¥é“ï¼Œè·Ÿ `webpack` ç›¸å…³çš„é™æ€æ–‡ä»¶æ ¼å¼ä¸º `eotã€ttfå’Œsvg` ç­‰æ ¼å¼ï¼Œæ‰€ä»¥éœ€è¦éœ€è¦æŠŠè¿™å‡ ç§ç±»å‹å¼•å…¥ã€‚åŒæ—¶ï¼Œè·Ÿå…¶ç›¸å…³çš„ `loader` ä¸º `file-loader` ã€‚

å­¦å®Œå…³äºå¦‚ä½•æ‰“åŒ…é™æ€èµ„æºåï¼Œå»ºè®®å¯ä»¥å†ç”¨å®˜æ–¹æ–‡æ¡£çš„ç›¸å…³éƒ¨åˆ†æ¥è¿›è¡Œå¤ä¹ ï¼Œ[å…·ä½“é“¾æ¥æˆ³](https://webpack.js.org/guides/asset-management/)~

# ğŸ§² äº”ã€ä½¿ç”¨ plugins è®©æ‰“åŒ…æ›´ä¾¿æº

## 1ã€html-webpack-plugin

åœ¨å­¦ä¹ äº†å¦‚ä½•ä½¿ç”¨ `loader` æ¥æ‰“åŒ…é™æ€æ–‡ä»¶ä¹‹åï¼Œæ¥ä¸‹æ¥æˆ‘ä»¬ä¸€èµ·æ¥äº†è§£åœ¨ `webpack` ä¸­ï¼Œå¦‚ä½•ä½¿ç”¨ `plugins ` è®©æ‰“åŒ…æ›´ä¾¿æ·ã€‚

æˆ‘ä»¬åœ¨æ‰“åŒ…é¡¹ç›®æ—¶ï¼Œ `webpack` æ€»æ˜¯ä¼šæŠŠæ‰“åŒ…åçš„å†…å®¹æ”¾åˆ° `dist` ç›®å½•ä¸‹ã€‚è¿™ä¸ªæ—¶å€™æˆ‘ä»¬å¯èƒ½è¿˜éœ€è¦è‡ªè¡Œå†å»åˆ›å»ºä¸€ä¸ª `index.html` æ¥å¼•å…¥æ ¸å¿ƒæ–‡ä»¶ã€‚é‚£è¿™æ ·ä¼šä¸ä¼šå°±æ˜¾å¾—ç•¥æœ‰ç‚¹éº»çƒ¦äº†ï¼Ÿ

å› æ­¤ï¼Œ `webpack` ç»™æˆ‘ä»¬æä¾›äº† `plugin` æ’ä»¶æ¥è§£å†³è¿™ä¸ªé—®é¢˜ã€‚

é¦–å…ˆï¼Œæˆ‘ä»¬å…ˆæ¥å®‰è£… `plugin` ï¼Œ**å…·ä½“å‘½ä»¤è¡Œå¦‚ä¸‹ï¼š**

```bash
npm install html-webpack-plugin -D
```

æ¥ä¸‹æ¥æˆ‘ä»¬å°†æ’ä»¶å¼•å…¥ `webpack.config.js` å½“ä¸­ï¼Œ**å…·ä½“ä»£ç å¦‚ä¸‹ï¼š**

```js
const HtmlWebpackPlugin = require('html-webpack-plugin');

plugins: [
  new HtmlWebpackPlugin({
    //è¡¨æ˜è¦å¼•ç”¨å“ªä¸€ä¸ªæ¨¡æ¿
    template: 'src/index.html',
  }),
];
```

ç°åœ¨ï¼Œæˆ‘ä»¬æ¥æ¢³ç†ä¸€ä¸‹ `htmlWebpackPlugin` å¦‚ä½•å¸®æˆ‘ä»¬å®Œæˆè‡ªåŠ¨æ‰“åŒ…ã€‚

é¦–å…ˆï¼Œ `htmlWebpackPlugin` ä¼šåœ¨æ‰“åŒ…ç»“æŸåï¼Œè‡ªåŠ¨ç”Ÿæˆä¸€ä¸ª `html` æ–‡ä»¶ã€‚ä¹‹åå‘¢ï¼ŒæŠŠæ‰“åŒ…ç”Ÿæˆçš„ `js` æ–‡ä»¶è‡ªåŠ¨å¼•å…¥åˆ°è¿™ä¸ª `html` æ–‡ä»¶ä¸­ã€‚

æ‰€ä»¥ï¼Œä»æŸç§ç¨‹åº¦ä¸Šæ¥è¯´å°±æ˜¯ï¼Œ `plugin` å¯ä»¥åœ¨ `webpack` è¿è¡Œåˆ°æŸä¸ªæ—¶åˆ»çš„æ—¶å€™ï¼Œè‡ªåŠ¨åœ°å¸®ä½ åšä¸€äº›äº‹æƒ…ã€‚å³å½“æˆ‘ä»¬æ‰“åŒ…ç»“æŸçš„è¿™å„¿ä¸€æ—¶åˆ»ï¼Œ `plugin` ä¼šè‡ªåŠ¨å¸®æˆ‘ä»¬åˆ›å»º `html` æ–‡ä»¶ä»¥ä¾›æˆ‘ä»¬ç›´æ¥ä½¿ç”¨ã€‚

## 2ã€clean-webpack-plugin

æœ‰æ—¶å€™æˆ‘ä»¬æœ‰å¯èƒ½å¯¹ `webpack.config.js` ä¸­çš„ output æ‰€å¯¹åº”çš„ filename è¿›è¡Œä¿®æ”¹ï¼Œè¿™å°±å¾ˆå®¹æ˜“å¯¼è‡´åœ¨æ‰“åŒ…è¿‡ç¨‹ä¸­é‡åˆ°å¤šæ–‡ä»¶å†²çªã€‚

é‚£ä¹ˆæˆ‘ä»¬æƒ³è¦å®ç°çš„å°±æ˜¯ï¼Œåœ¨æ‰“åŒ…æ—¶ï¼Œå…ˆæ¸…ç©ºåŸæ¥çš„ dist æ–‡ä»¶å¤¹ï¼Œç„¶åå†ç”Ÿæˆä¸€ä¸ªæ–°çš„ dist æ–‡ä»¶å¤¹ã€‚å¦‚ä½•å¤„ç†å‘¢ï¼Ÿè¯·çœ‹ä¸‹æ–¹ã€‚

é¦–å…ˆæˆ‘ä»¬å…ˆå®‰è£…ä¾èµ– `clean-webpack-plugin` ï¼Œ**å…·ä½“å‘½ä»¤è¡Œå¦‚ä¸‹ï¼š**

```bash
npm install clean-webpack-plugin -D
```

æ¥ä¸‹æ¥æˆ‘ä»¬å°†æ’ä»¶å¼•å…¥ `webpack.config.js` å½“ä¸­ï¼Œ**å…·ä½“ä»£ç å¦‚ä¸‹ï¼š**

```js
const CleanWebpackPlugin = require('clean-webpack-plugin');

plugins: [
  new HtmlWebpackPlugin({
    //è¡¨æ˜è¦å¼•ç”¨å“ªä¸€ä¸ªæ¨¡æ¿
    template: 'src/index.html',
  }),
  new CleanWebpackPlugin(['dist']),
];
```

é€šè¿‡ä»¥ä¸Šä»£ç ï¼Œå°±å¯ä»¥åœ¨æˆ‘ä»¬é¡¹ç›®æ‰“åŒ…æ—¶ï¼Œå…ˆåˆ é™¤ `dist` æ–‡ä»¶å¤¹ï¼Œä¹‹åå†åˆ›å»ºä¸€ä¸ªæ–°çš„æ–‡ä»¶å¤¹ã€‚

# ğŸ—ï¸ å…­ã€Entry å’Œ Output

æ¥ä¸‹æ¥æˆ‘ä»¬å†æ¥çœ‹ `webpack` ä¸­çš„ `entry` å’Œ `output` ä¸­å‡ ä¸ªæ¯”è¾ƒæ ¸å¿ƒçš„é…ç½®ã€‚

```js
module.exports = {
  mode: 'development',
  // æ”¾ç½®å…¥å£æ–‡ä»¶ï¼Œæ˜ç¡®æ€ä¹ˆæ‰“åŒ…
  entry: {
    main: './src/index.js',
    sub: './src/index.js',
  },
  plugins: [
    new HtmlWebpackPlugin({
      //è¡¨æ˜è¦å¼•ç”¨å“ªä¸€ä¸ªæ¨¡æ¿
      template: 'src/index.html',
    }),
    new CleanWebpackPlugin(['dist']),
  ],
  // è¾“å‡ºï¼Œè¡¨æ˜webpackåº”è¯¥æ€ä¹ˆè¾“å‡º
  output: {
    //å¦‚æœæŠŠèµ„æºæ”¾åœ¨cdnä¸‹ï¼Œåˆ™å¼•å…¥cdn
    publicPath: 'http://cdn.com.cn',
    //å½“entryæœ‰å¤šä¸ªå…¥å£æ–‡ä»¶æ—¶ï¼Œç”¨[]å¯ä»¥è¾“å‡ºå¤šä¸ªæ–‡ä»¶
    filename: '[name].js',
    // æŒ‡æ‰“åŒ…åçš„æ–‡ä»¶è¦æ”¾åœ¨å“ªä¸ªæ–‡ä»¶ä¸‹
    path: path.resolve(__dirname, 'dist'),
  },
};
```

# ğŸ—ºï¸ ä¸ƒã€SourceMap

## 1ã€å¼•ä¾‹é˜è¿°

æœ‰æ—¶å€™ï¼Œæˆ‘ä»¬åœ¨å†™ä»£ç æ—¶ï¼Œæ€»ä¼šè«åçš„å‡º bugã€‚çœ‹ç€æ§åˆ¶å°é‚£çº¢çº¢çš„æŠ¥é”™ï¼Œå¿ƒé‡Œæ€»å½’å¾ˆä¸æ˜¯æ»‹å‘³ã€‚åŒæ—¶ï¼Œå¦‚æœæˆ‘ä»¬æ²¡æœ‰é…ç½®å¥½ `webpack` çš„è¯ï¼Œé‚£é”™è¯¯æ‰¾èµ·æ¥ç®€ç›´æ˜¯å¾ˆææ€–çš„ã€‚

æ¯”å¦‚ï¼Œåœ¨å¼€å‘æ¨¡å¼ä¸‹ï¼Œæˆ‘ä»¬é»˜è®¤ `webpack.config.js` åƒä¸‹é¢è¿™æ ·é…ç½®ï¼Œ**å…·ä½“ä»£ç å¦‚ä¸‹ï¼š**

```js
module.exports = {
  mode: 'development',
  devtool: 'none',
  entry: {
    //æ‰“åŒ…åˆ°distç›®å½•ä¸‹çš„main.js
    main: './src/index.js',
  },
  output: {
    //ç”¨[]å¯ä»¥ç”Ÿæˆå¤šä¸ªæ–‡ä»¶
    filename: '[name].js',
    // æŒ‡æ‰“åŒ…åçš„æ–‡ä»¶è¦æ”¾åœ¨å“ªä¸ªæ–‡ä»¶ä¸‹
    path: path.resolve(__dirname, 'dist'),
  },
};
```

ç„¶åå‘¢ï¼Œå‡è®¾æˆ‘ä»¬ç°åœ¨ä»£ç é‡Œé¢é”™æŠŠ `console.log` å†™æˆ `consele.log` ã€‚é‚£ä¹ˆç°åœ¨**æ§åˆ¶å°çš„æ‰“å°æ•ˆæœå¦‚ä¸‹ï¼š**

![sourceMap](https://img-blog.csdnimg.cn/20210713195327800.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3dlaXhpbl80NDgwMzc1Mw==,size_16,color_FFFFFF,t_70#)

å¤§å®¶å¯ä»¥çœ‹åˆ°ï¼Œæ­¤æ—¶çš„é”™è¯¯å®šä½åˆ°æ‰“åŒ…åçš„ `main.js` æ–‡ä»¶é‡Œé¢çš„ç¬¬**96**è¡Œã€‚é‚£è¯•æƒ³ä¸€ä¸‹ï¼Œå¦‚æœæˆ‘ä»¬çš„ä¸šåŠ¡ä»£ç ç‰¹åˆ«å¤šï¼ŒæŠ¥é”™æœ‰å¯èƒ½å°±æ˜¯åœ¨æ–‡ä»¶ä¸­çš„ä¸Šå‰è¡Œäº†ã€‚

è¿™æ ·çš„åœºæ™¯å¹¶ä¸æ˜¯æˆ‘ä»¬æƒ³çœ‹åˆ°çš„ã€‚æˆ‘ä»¬æƒ³åšçš„äº‹æƒ…å‘¢å°±æ˜¯ï¼Œå¸Œæœ› `webpack` æ‰“åŒ…å®Œæˆä¹‹åå°±æŠŠé”™è¯¯ç›´æ¥æŠ›ç»™æˆ‘ä»¬ï¼Œå¹¶æŠŠå…¶å¯¹åº”çš„å…·ä½“æ–‡ä»¶åœ°å€æ˜¾ç¤ºå‡ºæ¥ã€‚ä¹Ÿå°±æ˜¯æˆ‘ä»¬å‡ºé”™çš„é‚£ä¸ªä»£ç æ–‡ä»¶ï¼Œè€Œä¸æ˜¯æ‰“åŒ…åçš„æ–‡ä»¶ `main.js` ã€‚

å› æ­¤ï¼Œ `webpack` ç»™æˆ‘ä»¬æä¾›äº† `sourceMap` è¿™ä¸ªé…ç½®ï¼Œæ¥è§£å†³è¿™ä¸ªé—®é¢˜ã€‚

## 2ã€sourceMap

æˆ‘ä»¬ç°åœ¨æŠŠ `devtool` è¿™ä¸ªé…ç½®ï¼Œæ”¹æˆ `sourceMap` ã€‚**å…·ä½“ä»£ç å¦‚ä¸‹ï¼š**

```js
module.exports = {
  mode: 'development',
  devtool: 'source-map',
  entry: {
    //æ‰“åŒ…åˆ°distç›®å½•ä¸‹çš„main.js
    main: './src/index.js',
  },
  output: {
    //ç”¨[]å¯ä»¥ç”Ÿæˆå¤šä¸ªæ–‡ä»¶
    filename: '[name].js',
    // æŒ‡æ‰“åŒ…åçš„æ–‡ä»¶è¦æ”¾åœ¨å“ªä¸ªæ–‡ä»¶ä¸‹
    path: path.resolve(__dirname, 'dist'),
  },
};
```

æ”¹å®Œä¹‹åå‘¢ï¼Œæˆ‘ä»¬æ¥çœ‹ä¸€ä¸‹**æ§åˆ¶å°çš„æ‰“å°ç»“æœï¼š**

![sourceMap](https://img-blog.csdnimg.cn/20210713195407277.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3dlaXhpbl80NDgwMzc1Mw==,size_16,color_FFFFFF,t_70#)

ç°åœ¨å¤§å®¶å¯ä»¥çœ‹åˆ°ï¼Œæ”¹æˆ `source-map` çš„é…ç½®ä¹‹åï¼ŒæŠ¥é”™çš„å®šä½ç›´æ¥åˆ°äº†æˆ‘ä»¬è‡ªå·±æ‰€ç¼–å†™ä»£ç çš„ç›®å½•ä¸‹ï¼Œå³ `index.js` ã€‚è€Œä¸å†æ˜¯å¤§æµ·æé’ˆä¼¼çš„åœ¨ `main.js` é‡Œé¢æ‰¾ã€‚

## 3ã€sourceMap å¸¸è§é…ç½®

çœ‹å®Œä¸Šé¢çš„ä¾‹å­ä¹‹åï¼Œç›¸ä¿¡å¤§å®¶å¯¹ `SourceMap` æœ‰äº†ä¸€å®šçš„äº†è§£ã€‚æ¥ä¸‹æ¥æˆ‘ä»¬æ¥çœ‹ä¸€ä¸‹ `sourceMap` çš„ä¸€äº›å¸¸è§é…ç½®ã€‚**å…·ä½“çœ‹çœ‹ä¸‹æ–¹ï¼š**

|          SourceMap           |                                                    å«ä¹‰                                                     |
| :--------------------------: | :---------------------------------------------------------------------------------------------------------: |
|      inline-source-map       |                                          æŠ¥é”™æ—¶å°†è¡Œå’Œåˆ—éƒ½æ˜¾ç¤ºå‡ºæ¥                                           |
|   cheap-inline-source-map    |                                  æŠ¥é”™æ—¶åªçŸ¥é“å“ªä¸€è¡Œå‡ºé”™äº†ï¼Œä¸çŸ¥é“åœ¨å“ªä¸€åˆ—                                   |
|   cheap-module-source-map    | **ç”Ÿäº§ç¯å¢ƒæœ€ä½³å®è·µ**ï¼Œä¸ä»…ç®¡è‡ªå·±çš„ä¸šåŠ¡ä»£ç é”™è¯¯ï¼Œè¿˜è¦ç®¡å…¶ä»–çš„å…¶ä»–çš„é”™è¯¯ï¼Œåƒ loaderã€å…¶ä»–ç¬¬ä¸‰æ–¹æ¨¡å—çš„é”™è¯¯ç­‰ç­‰ |
|             eval             |    eval æ˜¯æ‰“åŒ…é€Ÿåº¦æœ€å¿«çš„ä¸€ç§æ–¹å¼ï¼Œä½†å¦‚æœé‡åˆ°ä¸šåŠ¡ä»£ç æ¯”è¾ƒå¤æ‚çš„æƒ…å†µä¸‹ï¼Œç”¨ eval æç¤ºå‡ºæ¥çš„æ•ˆæœå¯èƒ½ä¸å¤ªå…¨é¢    |
|    module-eval-source-map    |                     ç”¨ moduleï¼Œè¡¨æ˜ä¸ä»…è¦æ˜¾ç¤ºä¸šåŠ¡é”™è¯¯ï¼Œè¿˜è¦æ˜¾ç¤º loaderã€ç¬¬ä¸‰æ–¹é”™è¯¯ç­‰ç­‰                      |
| cheap-module-eval-source-map |                                              å¼€å‘ç¯å¢ƒæœ€ä½³å®è·µ                                               |

# ğŸ§± å…«ã€ä½¿ç”¨ WebpackDevServer æå‡å¼€å‘æ•ˆç‡

## 1ã€--watch

äº‹å®ä¸Šï¼Œå¦‚æœæˆ‘ä»¬ä¸é‡‡ç”¨ `WebpackDevServer` çš„æ–¹å¼æ¥å¼€å‘çš„è¯ï¼Œé‚£ä¹ˆæˆ‘ä»¬æ¯ä¸€æ¬¡æƒ³è¦æŸ¥çœ‹ç¼–è¯‘åçš„è¿è¡Œç»“æœï¼Œéƒ½éœ€è¦å…ˆå‘½ä»¤è¡Œç¼–è¯‘ `npm run bundle` å‘½ä»¤ï¼Œä¹‹åå†æ‰“å¼€ `dist` ç›®å½•ä¸‹çš„ `index.html` æ–‡ä»¶æ‰èƒ½é‡æ–°æŸ¥çœ‹ã€‚è¿™æ ·ä¸€æ¥äºŒå¾€çš„ï¼Œéš¾å…æ•ˆç‡ä½ä¸‹ã€‚æˆ‘ä»¬æœŸå¾…çš„ç»“æœæ˜¯ä»€ä¹ˆå‘¢ï¼Ÿ

æˆ‘ä»¬æŠŠ `package.json` æ–‡ä»¶é‡Œçš„ `script` è¿›è¡Œä¸€ç•ªæ”¹é€ ï¼Œ**å…·ä½“ä»£ç å¦‚ä¸‹ï¼š**

```json
"scripts": {
    "watch": "webpack --watch",
    "bundle": "webpack"
  },
```

é€šè¿‡ä»¥ä¸Šä»£ç å¤§å®¶å¯ä»¥çœ‹åˆ°ï¼Œå°† `webpack` åé¢åŠ ä¸Š `--watch` å­—æ®µï¼Œç„¶åè¿è¡Œ `npm run watch` ï¼Œå°±å¯ä»¥æ¯æ¬¡ä¿®æ”¹å®Œä»£ç åï¼Œ `webpack` å®ç°è‡ªåŠ¨ç›‘å¬ï¼Œè€Œä¸ç”¨åƒä»¥å¾€é‚£æ ·ï¼Œæ¯ä¿®æ”¹ä¸€æ¬¡ä»£ç éƒ½è¦å¯¹å†é‡æ–°è¿è¡Œå‘½ä»¤æ¥å¯¹ `webpack` è¿›è¡Œæ‰“åŒ…ã€‚

## 2ã€webpackDevServer

ä½†æ˜¯å‘¢ï¼Œè¿™ç§æ–¹å¼å¯èƒ½è¿˜ä¸å¤Ÿå‹å¥½ï¼Œæ¯•ç«Ÿå¼€å‘è€…æ€»æ˜¯æ‡’æƒ°çš„ï¼Œèƒ½å°½é‡è®©ç¨‹åºæ¥å¹²æ´»å°±ä¸è¦ç”¨æ‰‹å·¥æ¥å¹²æ´»ã€‚

å®é™…ä¸Šæˆ‘ä»¬æƒ³è¦è¾¾åˆ°çš„æ•ˆæœæ˜¯ï¼Œå½“æˆ‘ä»¬è¿è¡Œå®Œ `npm run watch` è¿™è¡Œå‘½ä»¤çš„æ—¶å€™ï¼Œä¸ä»…èƒ½è‡ªåŠ¨å¸®æˆ‘ä»¬å®ç°æ‰“åŒ…ï¼ŒåŒæ—¶è¿˜èƒ½å¸®æˆ‘ä»¬æ‰“å¼€æ§åˆ¶å°ï¼Œå¹¶ä¸”æ¨¡æ‹Ÿä¸€äº›æœåŠ¡å™¨ä¸Šçš„ç‰¹æ€§ã€‚é‚£ä¹ˆæˆ‘ä»¬å°±å¯ä»¥é€šè¿‡ `webpackDevServer` æ¥å®ç°æˆ‘ä»¬æƒ³è¦çš„æ•ˆæœã€‚å¦‚ä½•ä½¿ç”¨ `webpckDevServer` å‘¢ï¼Ÿå…·ä½“çœ‹ä¸‹æ–¹ã€‚

### ï¼ˆ1ï¼‰å®‰è£… webpackDevServer

æˆ‘ä»¬ç°åœ¨é¡¹ç›®ä¸­å®‰è£… webpackDevServerï¼Œ**å…·ä½“å‘½ä»¤è¡Œå¦‚ä¸‹ï¼š**

```js
npm install webpack-dev-server -D
```

### ï¼ˆ2ï¼‰é…ç½® package.json æ–‡ä»¶

æ¥ä¸‹æ¥æˆ‘ä»¬æ¥é…ç½® `package.json` æ–‡ä»¶çš„ `script` ã€‚**å…·ä½“ä»£ç å¦‚ä¸‹ï¼š**

```json
"scripts": {
    "watch": "webpack --watch",
    "start": "webpack-dev-server"
  },
```

### ï¼ˆ3ï¼‰é…ç½® webpack æ–‡ä»¶

æ¥ä¸‹é¢æˆ‘ä»¬æ¥é…ç½® `webpack.config.js` æ–‡ä»¶ï¼Œ**å…·ä½“ä»£ç å¦‚ä¸‹ï¼š**

```js
module.exports = {
  mode: 'development',
  devtool: 'source-map',
  // æ”¾ç½®å…¥å£æ–‡ä»¶ï¼Œæ˜ç¡®æ€ä¹ˆæ‰“åŒ…
  entry: {
    main: './src/index.js',
  },
  devServer: {
    contentBase: './dist',
    // å½“è¿è¡Œå®Œnpm run startæ—¶ï¼Œä¼šè‡ªåŠ¨çš„å¸®æˆ‘ä»¬æ‰“å¼€æµè§ˆå™¨
    open: true,
  },
  output: {
    //ç”¨[]å¯ä»¥ç”Ÿæˆå¤šä¸ªæ–‡ä»¶
    filename: '[name].js',
    // æŒ‡æ‰“åŒ…åçš„æ–‡ä»¶è¦æ”¾åœ¨å“ªä¸ªæ–‡ä»¶ä¸‹
    path: path.resolve(__dirname, 'dist'),
  },
};
```

é‚£ä¹ˆç°åœ¨ï¼Œæˆ‘ä»¬æ¥çœ‹ä¸‹ï¼Œ `webpackDevServer` å¦‚ä½•åšåˆ°è‡ªåŠ¨æ‰“å¼€æµè§ˆå™¨ã€‚**è¯¦æƒ…è§ä¸‹å›¾ï¼š**

![webpackDevServer](https://img-blog.csdnimg.cn/20210713195421344.gif#pic_center)

å¤§å®¶å¯ä»¥çœ‹åˆ°ï¼Œé€šè¿‡ `webpackDevServer` ï¼Œå®ƒä¸ä½†ä¼šç›‘å¬åˆ°æˆ‘ä»¬çš„æ–‡ä»¶å‘ç”Ÿäº†æ”¹å˜ï¼Œé‡æ–°å¸®æˆ‘ä»¬è¿›è¡Œæ‰“åŒ…ã€‚åŒæ—¶å®ƒè¿˜ä¼š**è‡ªåŠ¨çš„å¸®æˆ‘ä»¬é‡æ–°åˆ·æ–°æµè§ˆå™¨**ï¼Œå¹¶ä¸”ä¼š**è‡ªåŠ¨åœ°å¸®æˆ‘ä»¬æ‰“å¼€æµè§ˆå™¨**ã€‚æ‰€ä»¥ç”¨å®ƒå‘¢ï¼Œå¯ä»¥**å¤§å¤§æå‡æˆ‘ä»¬çš„ä»£ç å¼€å‘æ•ˆç‡**ã€‚

### ï¼ˆ4ï¼‰é…ç½®ç«¯å£å·

`webpackDevServer` é»˜è®¤æˆ‘ä»¬æœåŠ¡å™¨çš„ç«¯å£å·æ˜¯ `8080` ï¼Œå¦‚æœæˆ‘ä»¬æƒ³è¦ä¿®æ”¹å®ƒä¸ºå…¶ä»–çš„ç«¯å£å·ï¼Œè¯¥æ€ä¹ˆåšå‘¢ï¼Ÿ

æˆ‘ä»¬éœ€è¦åœ¨æ¥ä¿®æ”¹ `webpack.config.js` æ–‡ä»¶ä¸‹çš„ `DevServer` ï¼Œ**å…·ä½“ä»£ç å¦‚ä¸‹ï¼š**

```js
module.exports = {
  mode: 'development',
  devtool: 'source-map',
  // æ”¾ç½®å…¥å£æ–‡ä»¶ï¼Œæ˜ç¡®æ€ä¹ˆæ‰“åŒ…
  entry: {
    main: './src/index.js',
  },
  devServer: {
    contentBase: './dist',
    // å½“è¿è¡Œå®Œnpm run startæ—¶ï¼Œä¼šè‡ªåŠ¨çš„å¸®æˆ‘ä»¬æ‰“å¼€æµè§ˆå™¨
    open: true,
    //ä¿®æ”¹ç«¯å£å·
    port: 3000,
  },
  output: {
    //ç”¨[]å¯ä»¥ç”Ÿæˆå¤šä¸ªæ–‡ä»¶
    filename: '[name].js',
    // æŒ‡æ‰“åŒ…åçš„æ–‡ä»¶è¦æ”¾åœ¨å“ªä¸ªæ–‡ä»¶ä¸‹
    path: path.resolve(__dirname, 'dist'),
  },
};
```

æˆ‘ä»¬åªéœ€è¦åœ¨ `devServer` é‡Œé¢åŠ ä¸Šä¸€ä¸ª `port` çš„é…ç½®ï¼Œå³å¯å®ç°**è‡ªå®šä¹‰ç«¯å£å·**ã€‚

åŒæ—¶å€¼å¾—æ³¨æ„çš„æ˜¯ï¼Œå½“æˆ‘ä»¬åœ¨ç”¨ `webpackDevServer` å¸®æˆ‘ä»¬é¡¹ç›®åšæ‰“åŒ…æ—¶ï¼Œå®ƒä¸ä¼šè‡ªåŠ¨ç”Ÿæˆ `dist` ç›®å½•ï¼Œé‚£è¿™æ˜¯ä¸ºä»€ä¹ˆå‘¢ï¼Ÿç”¨ `webpackDevServer` æ‰“åŒ…åçš„é¡¹ç›®ä¼šæ”¾åœ¨æˆ‘ä»¬çš„**ç”µè„‘å†…å­˜**ä¸­ï¼Œè¿™åœ¨æŸç§ç¨‹åº¦ä¸‹å¯ä»¥æœ‰æ•ˆçš„æå‡é¡¹ç›®çš„æ‰“åŒ…é€Ÿåº¦ï¼Œè®©æ‰“åŒ…å˜å¾—æ›´å¿«ã€‚

# ğŸŒ¡ï¸ ä¹ã€Hot Module Replacement çƒ­æ¨¡å—æ›´æ–°

## 1ã€å¼•ä¾‹é˜è¿°

å‡è®¾æˆ‘ä»¬ç°åœ¨è¦å®ç°ä¸€ä¸ª**æ–°å¢å…ƒç´ **çš„åŠŸèƒ½ï¼Œè¿™ä¸ªåŠŸèƒ½æ‰€è¦è¾¾åˆ°çš„æ•ˆæœæ˜¯æ¯ç‚¹å‡»ä¸€æ¬¡æŒ‰é’®ï¼Œå°±æ–°æ·»åŠ ä¸€æ¬¡æ–‡æœ¬ `item` ã€‚**å…·ä½“å®ç°ä»£ç å¦‚ä¸‹ï¼š**

**index.js æ–‡ä»¶ï¼š**

```js
import './style.css';

var btn = document.createElement('button');
btn.innerHTML = 'æ–°å¢';
document.body.appendChild(btn);

btn.onclick = function () {
  var div = document.createElement('div');
  div.innerHTML = 'item';
  document.body.appendChild(div);
};
```

**style.css æ–‡ä»¶ï¼š**

```css
div:nth-of-type(odd) {
  background: yellow;
}
```

æ­¤æ—¶æµè§ˆå™¨çš„æ˜¾ç¤ºæ•ˆæœ**å¦‚ä¸‹å›¾æ‰€ç¤ºï¼š**

![HMRâ‘ ](https://img-blog.csdnimg.cn/20210713195434569.gif#pic_center)

---

å‡è®¾æˆ‘ä»¬ç°åœ¨æ¥ç»™ css çš„èƒŒæ™¯æ”¹ä¸ªé¢œè‰²ï¼Œæ¯”å¦‚è¯´æ”¹æˆç´«è‰²ã€‚**å…·ä½“ä»£ç å¦‚ä¸‹ï¼š**

```css
div:nth-of-type(odd) {
  background: purple;
}
```

æ­¤æ—¶æˆ‘ä»¬ä¿å­˜åæµè§ˆå™¨ä¼šé‡æ–°è¿›è¡Œåˆ·æ–°ï¼Œä¹‹åæ¯ä¸€ä¸ª `item` åˆè¦é‡æ–° `append` è¿›æ¥ã€‚**å¦‚ä¸‹å›¾ï¼š**

![HMRâ‘¡](https://img-blog.csdnimg.cn/20210713195444874.gif#pic_center)

é‚£è¿™ç§æƒ…å†µä¸‹å¯èƒ½å°±ä¸æ˜¯æˆ‘ä»¬æƒ³è¦çš„ç»“æœäº†ã€‚æˆ‘ä»¬å¸Œæœ›çš„æ˜¯ï¼Œæ‰€æœ‰çš„ `item` ä¸è¿›è¡Œé‡æ–°åˆ·æ–°ï¼Œå¹¶ä¸”å½“ `css` æ ·å¼æ”¹å˜çš„æ—¶å€™ï¼Œå¯¹åº”çš„ `item` é¢œè‰²ä¹Ÿå¯ä»¥å¾—åˆ°æ”¹å˜ã€‚é‚£ä¹ˆè¿™å°±è¦å¼•å‡º `webpackDevServer` ä¸­çš„ä¸€ä¸ªå†…å®¹ï¼šçƒ­æ¨¡å—æ›´æ–° `Hot Module Replacement` ã€‚æ¥ä¸‹æ¥æˆ‘ä»¬æ¥äº†è§£çƒ­æ¨¡å—æ›´æ–°ç›¸å…³çš„é…ç½®ã€‚

## 2ã€çƒ­æ¨¡å—æ›´æ–°é…ç½®

çƒ­æ¨¡å—æ›´æ–°ï¼Œå³ Hot Module Replacementï¼Œç®€ç§°ä¸º `HMR` ã€‚

æ¥ä¸‹æ¥æˆ‘ä»¬åœ¨ `webpack.config.js` æ–‡ä»¶å¤¹ä¸‹è¿›è¡Œé…ç½®ã€‚**å…·ä½“ä»£ç å¦‚ä¸‹ï¼š**

```js
//nodeçš„æ ¸å¿ƒæ¨¡å—
const path = require('path');
const HtmlWebpackPlugin = require('html-webpack-plugin');
const CleanWebpackPlugin = require('clean-webpack-plugin');
const webpack = require('webpack');

module.exports = {
  mode: 'development',
  devtool: 'source-map',
  // æ”¾ç½®å…¥å£æ–‡ä»¶ï¼Œæ˜ç¡®æ€ä¹ˆæ‰“åŒ…
  entry: {
    main: './src/index.js',
  },
  devServer: {
    contentBase: './dist',
    // å½“è¿è¡Œå®Œnpm run startæ—¶ï¼Œä¼šè‡ªåŠ¨çš„å¸®æˆ‘ä»¬æ‰“å¼€æµè§ˆå™¨
    open: true,
    port: 8080,
    // è®©æˆ‘ä»¬çš„webpackDevServerå¼€å¯hotModuleReplacementè¿™æ ·å­çš„åŠŸèƒ½
    hot: true,
    // å³ä¾¿HMRæ²¡æœ‰ç”Ÿæ•ˆï¼Œä¹Ÿä¸è®©æµè§ˆå™¨è‡ªåŠ¨åˆ·æ–°
    hotOnly: true,
  },
  module: {
    rules: [
      {
        test: /\.(jpg|png|gif)$/,
        use: {
          loader: 'file-loader',
          options: {
            //placeholder å ä½ç¬¦
            name: '[name]_[hash].[ext]',
            outputPath: 'images/',
            limit: 10240,
          },
        },
      },
      {
        test: /\.scss$/,
        use: [
          'style-loader',
          {
            loader: 'css-loader',
            options: {
              //è¡¨æ˜å‰é¢è¦å…ˆèµ°sass-loaderå’Œpostcss-loader
              importLoaders: 2,
              modules: true,
            },
          },
          'sass-loader',
          'postcss-loader',
        ],
      },
      {
        test: /\.css$/,
        use: ['style-loader', 'css-loader', 'postcss-loader'],
      },
    ],
  },
  plugins: [
    new HtmlWebpackPlugin({
      //è¡¨æ˜è¦å¼•ç”¨å“ªä¸€ä¸ªæ¨¡æ¿
      template: 'src/index.html',
    }),
    new CleanWebpackPlugin(['dist']),
    new webpack.HotModuleReplacementPlugin(),
  ],
  // è¾“å‡ºï¼Œè¡¨æ˜webpackåº”è¯¥æ€ä¹ˆè¾“å‡º
  output: {
    // ä¸‹è½½middleï¼šnpm install express webpack-dev-middleware -D
    publicPath: '/',
    //ç”¨[]å¯ä»¥ç”Ÿæˆå¤šä¸ªæ–‡ä»¶
    filename: '[name].js',
    // æŒ‡æ‰“åŒ…åçš„æ–‡ä»¶è¦æ”¾åœ¨å“ªä¸ªæ–‡ä»¶ä¸‹
    path: path.resolve(__dirname, 'dist'),
  },
};
```

é€šè¿‡ä»¥ä¸Šä»£ç æˆ‘ä»¬å¯ä»¥çŸ¥é“ï¼Œé…ç½® `devServer` ä¸‹çš„ `hot` å’Œ `hotOnly` ï¼Œä»¥åŠ `plugins` ä¸‹çš„ `new webpack.HotModuleReplacementPlugin()` ï¼Œæ¥è¾¾åˆ°çƒ­æ¨¡å—æ›´æ–°çš„æ•ˆæœã€‚

æ¥ä¸‹æ¥æˆ‘ä»¬æ¥çœ‹ä¸€ä¸‹ï¼Œè¿›è¡Œé…ç½®ä¹‹åï¼Œæµè§ˆå™¨çš„æ•ˆæœã€‚**è¯¦æƒ…è§ä¸‹å›¾ï¼š**

![HMRâ‘¢](https://img-blog.csdnimg.cn/20210713195506593.gif#pic_center)

å¤§å®¶å¯ä»¥çœ‹åˆ°ï¼ŒåŠ ä¸Šè¿™å‡ ä¸ªé…ç½®ä¹‹åï¼Œ `item` ä¸ä¼šå†é‡æ–°åˆ·æ–°äº†ï¼Œè€Œæ˜¯åœ¨åŸæ¥çš„åŸºç¡€ä¸Šè¿›è¡Œæ ·å¼ä¿®æ”¹ã€‚

# ğŸ“€ åã€ä½¿ç”¨ Babel å¤„ç† ES6 è¯­æ³•

## 1ã€ES6 è¯­æ³•è½¬æ¢ä¸º ES5 è¯­æ³•

ç»§ç»­ï¼Œæ¥ä¸‹æ¥æˆ‘ä»¬æ¥äº†è§£ï¼Œå¦‚ä½•ä½¿ç”¨ webpack å’Œ babelï¼Œæ¥ç¼–å†™ ES6 çš„è¯­æ³•ã€‚

å¤§å®¶éƒ½çŸ¥é“ï¼ŒES6 çš„è¯­æ³•è§„èŒƒæ˜¯ 2015 å¹´æ‰æ­£å¼å‡ºç‰ˆçš„ã€‚æ‰€ä»¥æœ‰æ—¶å€™ï¼Œå¹¶ä¸æ˜¯æ‰€æœ‰çš„æµè§ˆå™¨éƒ½æ”¯æŒ ES6 è¯­æ³•ã€‚å› æ­¤ï¼Œæˆ‘ä»¬ç°åœ¨æƒ³è¦åšçš„äº‹æƒ…å°±æ˜¯ï¼Œåœ¨ webpack æ‰“åŒ…æ—¶ï¼Œèƒ½å¤Ÿå°† ES6 çš„è¯­æ³•è½¬æ¢ä¸º ES5 çš„è¯­æ³•ã€‚è¿™æ ·ï¼Œé¡¹ç›®è¿è¡Œçš„æ—¶å€™ï¼Œæµè§ˆå™¨å°±ä¸ä¼šæŠ¥é”™äº†ã€‚

é‚£æ€ä¹ˆå®ç°è¿™æ ·å­çš„æ‰“åŒ…å‘¢ï¼Ÿæ¥ä¸‹æ¥æˆ‘ä»¬ä¸€èµ·æ¥äº†è§£ä¸€ä¸‹ã€‚

é¦–å…ˆæˆ‘ä»¬æ‰“å¼€[babel çš„å®˜æ–¹ç½‘ç«™](https://babeljs.io/setup#installation)ï¼ŒæŒ‰ç…§æ­¥éª¤ï¼Œæˆ‘ä»¬ä¸€æ­¥æ­¥åœ¨ `webpack` ä¸­ä½¿ç”¨ `babel` ã€‚

**ç¬¬ä¸€æ­¥ï¼š** å®‰è£… `babel-loader` å’Œ `@babel/core` è¿™ä¸¤ä¸ªåº“ã€‚**å…·ä½“ä»£ç å¦‚ä¸‹ï¼š**

```bash
npm install --save-dev babel-loader @babel/core
```

`babel-loader` æ˜¯å¸®åŠ© webpack è¿›è¡Œæ‰“åŒ…ä½¿ç”¨çš„ä¸€ä¸ªå·¥å…·ï¼Œè€Œ `@babel/core` åˆ™æ˜¯ `babel` çš„ä¸€ä¸ªæ ¸å¿ƒåº“ï¼Œå®ƒèƒ½å¤Ÿè®© `babel` å»è¯†åˆ« `js` ä»£ç é‡Œçš„å†…å®¹ï¼Œç„¶åå‘¢æŠŠ `js` ä»£ç è½¬æ¢æˆ `AST` æŠ½è±¡è¯­æ³•æ ‘ï¼Œä¹‹åå†æŠŠæŠ½è±¡è¯­æ³•æ ‘ç¼–è¯‘æˆä¸€äº›æ–°çš„è¯­æ³•ã€‚

**ç¬¬äºŒæ­¥ï¼š** åœ¨ `webpack.config.js` æ–‡ä»¶ä¸‹çš„é…ç½®é¡¹é‡Œå¢è®¾è§„åˆ™ã€‚**å…·ä½“ä»£ç å¦‚ä¸‹ï¼š**

```js
module: {
  rules: [
    {
      test: /\.m?js$/,
      exclude: /node_modules/,
      use: {
        loader: 'babel-loader',
        options: {
          presets: ['@babel/preset-env'],
        },
      },
    },
  ];
}
```

**ç¬¬ä¸‰æ­¥ï¼š** å®‰è£… `@babel/preset-env` ã€‚**å…·ä½“ä»£ç å¦‚ä¸‹ï¼š**

```bash
npm install @babel/preset-env --save-dev
```

ä¸ºä»€ä¹ˆè¦å®‰è£…è¿™ä¸ªæ¨¡å—å‘¢ï¼Ÿå®é™…ä¸Šï¼Œå½“æˆ‘ä»¬ä½¿ç”¨ `babel-loader` å¤„ç†æ–‡ä»¶æ—¶ï¼Œå®é™…ä¸Š `babel-loader` åªæ˜¯ `webpack` å’Œ `babel` ä¹‹é—´åšé€šä¿¡çš„ä¸€ä¸ªæ¡¥æ¢ï¼Œå®ƒåªæ˜¯å¸®æˆ‘ä»¬æ‰“å¼€äº†ä¸€ä¸ªé€šé“ï¼Œä½†æ˜¯å®ƒå¹¶ä¸ä¼šå¸®æˆ‘ä»¬æŠŠ `ES6` çš„è¯­æ³•è½¬æ¢ä¸º `ES5` çš„è¯­æ³•ã€‚æ‰€ä»¥ï¼Œæˆ‘ä»¬å°±è¿˜éœ€è¦å€ŸåŠ©ä¸€äº›å…¶ä»–çš„æ¨¡å—ï¼Œæ¥åšè¿™é¡¹å·¥ä½œã€‚è¿™ä¸ªæ¨¡å—å°±æ˜¯å‰é¢æˆ‘ä»¬è¯´çš„ï¼Œ**preset-env** ã€‚

`babel/preset-env` ï¼ŒåŒ…å«äº†æ‰€æœ‰ `ES6` è½¬æ¢ä¸º `ES5` çš„è¯­æ³•è§„åˆ™ï¼Œå½“ä½¿ç”¨æ­¤æ¨¡å—æ‰“åŒ…æ—¶ï¼Œå°±å¯ä»¥æŠŠæˆ‘ä»¬æ‰€æœ‰ `js` ä¸­ `ES6` çš„ä»£ç è½¬æ¢ä¸º `ES5` äº†ã€‚å…·ä½“é…ç½®æ–¹å¼è§ä»¥ä¸Š**ç¬¬äºŒæ­¥**ã€‚

## 2ã€Babel-polyfill

é€šè¿‡ä»¥ä¸Šçš„æ–¹å¼ï¼Œæˆ‘ä»¬å¯ä»¥è¾¾åˆ°å°† ES6 è¯­æ³•è½¬æ¢ä¸º ES5 è¯­æ³•çš„æ•ˆæœã€‚ä½†æ˜¯å‘¢ï¼Œæˆ‘ä»¬è¿˜è¦è€ƒè™‘åˆ°çš„ä¸€ä¸ªé—®é¢˜å°±æ˜¯ï¼Œå¦‚æœé‡åˆ°åƒ promise è¿™ä¸€ç±»æ–°çš„è¯­æ³•å˜é‡ï¼Œæˆ–è€…æ—¶åƒæ•°ç»„é‡Œé¢ map è¿™ä¸€ç±»çš„å‡½æ•°ï¼Œä½ç‰ˆæœ¬çš„æµè§ˆå™¨é‡Œé¢ï¼Œå®é™…ä¸Šè¿˜æ˜¯ä¸å­˜åœ¨çš„ã€‚è™½ç„¶æˆ‘ä»¬åšäº†è¯­æ³•è§£é‡Šå’Œè¯­æ³•ç¿»è¯‘ï¼Œä½†ä¹Ÿåªæ˜¯ç¿»è¯‘äº†ä¸€éƒ¨åˆ†ã€‚è¿˜æœ‰ä¸€äº›å¯¹è±¡å’Œå‡½æ•°ï¼Œåœ¨ä½ç‰ˆæœ¬çš„æµè§ˆå™¨è¿˜æ˜¯æ²¡æœ‰çš„ã€‚

æ‰€ä»¥å‘¢ï¼Œè¿™ä¸ªæ—¶å€™æˆ‘ä»¬ä¸ä»…è¦ä½¿ç”¨ `babel/preset-env` åšè¯­æ³•è½¬æ¢ï¼Œè¿˜è¦**æŠŠè¿™äº›ç¼ºå¤±çš„å˜é‡å’Œå‡½æ•°è¡¥å……åˆ°ä½ç‰ˆæœ¬çš„æµè§ˆå™¨é‡Œé¢**ã€‚

é‚£æ€ä¹ˆè¡¥å……å‘¢ï¼Œè¿™ä¸ªæ—¶å€™æˆ‘ä»¬å°±éœ€è¦å€ŸåŠ© `babel-polyfill` è¿™ä¸ªå·¥å…·æ¥è¿›è¡Œè¡¥å……ã€‚æ¥ä¸‹æ¥è®²è§£è¿™ä¸ªæ¨¡å—çš„ä½¿ç”¨æ“ä½œã€‚

ç¬¬ä¸€æ­¥ï¼š å®šä½åˆ°[å®˜æ–¹æ–‡æ¡£](https://babeljs.io/docs/en/babel-polyfill)ï¼Œå®‰è£… `babel-polyfill` ã€‚**å…·ä½“ä»£ç å¦‚ä¸‹ï¼š**

```bash
npm install --save @babel/polyfill
```

ç¬¬äºŒæ­¥ï¼š å¼•å…¥è¯¥æ¨¡å—ã€‚**å…·ä½“ä»£ç å¦‚ä¸‹ï¼š**

```js
import '@babel/polyfill';
```

é€šå¸¸æƒ…å†µä¸‹ï¼Œè¿™æ®µä»£ç æ”¾åˆ°é¡¹ç›®çš„ `js` å…¥å£æ–‡ä»¶ä¸‹ã€‚

ç¬¬ä¸‰æ­¥ï¼š æ”¹é€  `webpack.cofig.js` æ–‡ä»¶ä¸‹çš„ `module` ï¼Œå‡å°‘æ‰“åŒ…å¤§å°ã€‚**å…·ä½“ä»£ç å¦‚ä¸‹ï¼š**

```js
module: {
  rules: [
    {
      test: /\.m?js$/,
      exclude: /node_modules/,
      use: {
        loader: 'babel-loader',
        options: {
          presets: [
            ['@babel/preset-env'],
            {
              useBuiltIns: 'usage',
            },
          ],
        },
      },
    },
  ];
}
```

è¿™æ®µä»£ç çš„æ„æ€å°±æ˜¯ï¼Œå½“ç”¨ `babel-polyfill` å¡«å……ä½ç‰ˆæœ¬æµè§ˆå™¨ç‰¹æ€§çš„æ—¶å€™ï¼Œä¸æ˜¯æŠŠæ˜¯å¤šæœ‰çš„ç‰¹æ€§éƒ½åŠ è¿›æ¥ï¼Œè€Œæ˜¯æ ¹æ®æˆ‘ä»¬çš„ä¸šåŠ¡ä»£ç æ¥å†³å®šåˆ°åº•åˆ°åŠ ä»€ä¹ˆã€‚

åŒæ—¶ï¼Œ `babel-preset` ä¹Ÿæœ‰å¾ˆå¤šå…¶ä»–å€¼å¾—å­¦ä¹ çš„é…ç½®å±æ€§ï¼Œè¿™é‡Œä¸å†è¿›è¡Œè®²è§£ã€‚å¤§å®¶å¯ä»¥è‡ªè¡Œåˆ°[å®˜æ–¹æ–‡æ¡£](https://babeljs.io/docs/en/usage)ä¸Šè¿›è¡ŒæŸ¥çœ‹~

# ğŸ“š åä¸€ã€ç»“æŸè¯­

å†™å®Œè¿™ç¯‡æ–‡ç« çš„æ—¶å€™ï¼Œçªç„¶æƒ³èµ·ä¸Šæ¬¡é¢è¯•æ—¶çš„é¢è¯•å®˜ã€‚åœ¨æœ€åçš„åé—®ç¯èŠ‚é—®ä»–å…³äº `webpack` çš„é—®é¢˜ï¼Œä»–è¯´ `webpack` ä¸€èˆ¬ä¼šè®©å¯¹å…¬å¸ä¸šåŠ¡å¾ˆç†Ÿæ‚‰çš„å‘˜å·¥æ¥å¤„ç†ï¼Œæ¯•ç«Ÿå‰ç«¯å·¥ç¨‹åŒ–ä¸æ˜¯å„¿æˆã€‚

å½“æ—¶æˆ‘è¿˜æ²¡æœ‰å¾ˆå¤§çš„æ„Ÿè§¦ï¼Œä½†ç°åœ¨å­¦åˆ°è¿™é‡Œçªç„¶å°±æƒ³åˆ°äº†é‚£ä¸ªåœºæ™¯ã€‚ç¡®å®æ˜¯è¿™æ ·ï¼Œæˆ‘è¿™æ‰å­¦äº†ä¸åˆ°å®ƒçš„å†°å±±ä¸€è§’ï¼Œå°±å·²ç»æ„Ÿåˆ° `webpack` çš„åºå¤§å·¥ç¨‹äº†ã€‚å¦‚æœåœ¨æ‰“åŒ…æ—¶å€™ï¼Œä½†å‡¡æœ‰ä¸€ä¸ªå°åœ°æ–¹çš„é…ç½®å‡ºç°é—®é¢˜ï¼Œå°±æœ‰å¯èƒ½å¼•å‘æ•´ä¸ªé¡¹ç›®çš„ä¸å¯æ”¶æ‹¾å±€é¢ã€‚ï¼ˆå½“ç„¶ä¸€èˆ¬æƒ…å†µä¸‹ä¸ä¼šå‡ºç°è¿™æ ·çš„æƒ…å†µï¼Œè¨€é‡äº†â€¦â€¦ï¼‰

åœ¨å­¦ä¹  `webpack` çš„è¿‡ç¨‹ä¸­ï¼Œè¦**æ˜ç¡®å¥½è‡ªå·±æ‰€ä½¿ç”¨çš„ webpack ç‰ˆæœ¬**ã€‚æ¯”å¦‚å‘¨ä¸€åˆšå¼€å§‹è¿·è¿·ç³Šç³Šçš„ï¼Œæ„Ÿè§‰ç‰ˆæœ¬ 4 å’Œç‰ˆæœ¬ 5 éƒ½å·®ä¸å¤šã€‚ä½†å¯¹äº `webpack` æ¥è¯´ï¼Œè¿™å®Œå…¨å°±æ˜¯åœ¨è·Ÿå®ƒå¼€ç©ç¬‘ã€‚æ¯ä¸€ä¸ªä¾èµ–éƒ½æœ‰ 4 å’Œ 5 å¯¹åº”çš„ç‰ˆæœ¬ï¼Œè€Œä¸æ˜¯è¯´æƒ³ç”¨å“ªä¸ªå°±å“ªä¸ªã€‚å¦‚æœèƒ¡ä¹±ä½¿ç”¨çš„è¯ï¼Œæ— å½¢ä¹‹ä¸­å¯èƒ½ä¼šæŠ¥é”™åˆ°æ€€ç–‘äººç”Ÿâ€¦â€¦

å› æ­¤ï¼Œç¡®å®šå¥½æ­¤æ—¶ç”¨ `webpack` æ‰“åŒ…æ—¶æ‰€ä½¿ç”¨çš„ç‰ˆæœ¬ï¼Œå¹¶åœ¨ä½¿ç”¨ `npm` ä¾èµ–æ—¶ä¹ŸåŒæ ·è¦æ‰¾åˆ°å¯¹åº”çš„ç‰ˆæœ¬æ¥è¿›è¡Œä½¿ç”¨ï¼Œé™ä½é”™è¯¯çš„å‘ç”Ÿã€‚

åˆ°è¿™é‡Œï¼Œå…³äº webpack çš„è¶…å…¥é—¨çŸ¥è¯†å°±è®²åˆ°è¿™é‡Œå•¦ï¼å¸Œæœ›å¯¹å¤§å®¶æœ‰å¸®åŠ©~

æœ¬æ–‡ä»£ç å·²ä¸Šä¼ è‡³å…¬ä¼—å·ï¼Œåå°å›å¤å…³é”®è¯ `webpack` å³å¯è·å–~

# ğŸ£ å½©è›‹ One More Thing

## å¾€æœŸæ¨è

- [vuejs åŸºç¡€çŸ¥è¯†ç³»åˆ—](https://juejin.cn/column/6976040277068759077)
- [vuejs åŸç†åˆ†æç³»åˆ—](https://juejin.cn/column/6976041758945706015)

## ç•ªå¤–ç¯‡

- å…³æ³¨å…¬ä¼—å·**æ˜ŸæœŸä¸€ç ”ç©¶å®¤**ï¼Œç¬¬ä¸€æ—¶é—´å…³æ³¨å­¦ä¹ å¹²è´§ï¼Œ**æ›´å¤šç²¾é€‰ä¸“æ å¾…ä½ è§£é”**~
- å¦‚æœè¿™ç¯‡æ–‡ç« å¯¹ä½ æœ‰ç”¨ï¼Œè®°å¾—**ç•™ä¸ªè„šå°**å†èµ°å“¦~

- ä»¥ä¸Šå°±æ˜¯æœ¬æ–‡çš„å…¨éƒ¨å†…å®¹ï¼æˆ‘ä»¬ä¸‹æœŸè§ï¼ğŸ‘‹ğŸ‘‹ğŸ‘‹
