---
title: vue3çš„ä¼ é€é—¨teleportç©¶ç«Ÿæœ‰å¤šç¥å¥‡ï¼Ÿsuspenseå‘èµ·å¼‚æ­¥è¯·æ±‚æœ‰å¤šç®€çº¦ï¼Ÿ
author: å‘¨ä¸€
date: '2021-06-26'
categories:
  - å‰ç«¯å¼€å‘
tags:
  - vue.js
sidebar: 'auto'
---

# å‰è¨€

å¤§å®¶éƒ½çŸ¥é“ï¼Œåœ¨æˆ‘ä»¬å¹³å¸¸çš„å‰ç«¯å¼€å‘ä¸­ï¼Œå®ç°æ¨¡æ€æ¡†å’Œå‘èµ·å¼‚æ­¥è¯·æ±‚æ˜¯å†å¸¸è§ä¸è¿‡çš„äº‹æƒ…äº†ã€‚ä½†æ˜¯å‘¢ï¼Œä¸ç®¡æ˜¯ç”¨ vue2 å’ŒåŸç”Ÿ js çš„å®ç°æ–¹å¼ï¼Œä»é€»è¾‘ä¸Šæ¥è¯´éƒ½è¿˜ä¸å¤Ÿç‹¬ç«‹ï¼Œå› æ­¤ï¼Œvue3 æ¨å‡ºäº†æ–°çš„æ–¹æ³•æ¥è§£å†³æ­¤é—®é¢˜ã€‚

ä¸‹é¢å°±å¸¦é¢†å¤§å®¶ä¸€èµ·æ¥äº†è§£ vue3 æ–°æ¨å‡ºçš„ `teleport` ç©¶ç«Ÿæœ‰å¤šç¥å¥‡ï¼Ÿä»¥åŠå¦‚ä½•ç”¨ `suspense` å‘èµ·å¤šä¸ªå¼‚æ­¥çš„è¯·æ±‚ï¼Ÿ

ä¸€èµ·æ¥å­¦ä¹ å§~ğŸ“š

# ä¸€ã€ğŸ‘‹ ç”¨ teleport å®ç°æ‰“å¼€æ¨¡æ€æ¡†æ“ä½œ

## 1ã€teleport æ˜¯ä»€ä¹ˆ

**teleport**ï¼Œå­—é¢æ„æ€å°±æ˜¯**è¿œè·ç¦»ä¼ é€**ï¼Œæˆ‘ä»¬å¯ä»¥æŠŠå®ƒç†è§£ä¸ºä¼ é€é—¨çš„æ„æ€ã€‚

å¤§å®¶éƒ½çŸ¥é“ï¼Œä¼ é€é—¨çš„æ„æ€å°±æ˜¯ä»ä¸€ä¸ªåœ°æ–¹ä¼ é€åˆ°äº†å¦å¤–ä¸€ä¸ªåœ°æ–¹ã€‚è€Œ `vue3` ä¸ºä»€ä¹ˆè¦ç”¨ `teleport` æ¥è¡¨è¾¾å‘¢ï¼Ÿ

å…¶å®ï¼Œæœ‰ä¸€ä¸ªéå¸¸å¸¸è§çš„éœ€æ±‚å°±æ˜¯ï¼Œæˆ‘ä»¬ç»å¸¸è¦é€šè¿‡ç‚¹å‡»ä¸€ä¸ªæŒ‰é’®ï¼Œæ¥å®ç°æ¨¡æ€æ¡†çš„æ•ˆæœã€‚è€Œåœ¨ `vue3` ä¹‹å‰ï¼Œæˆ‘ä»¬åŸºæœ¬ä¸Šæ§åˆ¶å®ƒéƒ½æ˜¯ç‚¹å‡»å**ä¸Šä¸‹ä¼šå½¢æˆä¸€ä¸ªçˆ¶å­ç»„ä»¶**çš„å…³ç³»ï¼Œè¿™æ ·å­æ„Ÿè§‰ç‹¬ç«‹æ€§å°±æ²¡æœ‰é‚£ä¹ˆå¼ºäº†ã€‚

![æ¨¡æ€æ¡†](https://img-blog.csdnimg.cn/20210620091754535.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3dlaXhpbl80NDgwMzc1Mw==,size_16,color_FFFFFF,t_70#pic_center)

å› æ­¤ï¼Œ `vue3` ä¸ºäº†è§£å†³è¯¥é—®é¢˜ï¼Œå°±ç”¨äº† `teleport` æ¥è§£å†³ã€‚ `teleport` å°±ä»¿ä½›ä¸€ä¸ªä¼ é€é—¨ï¼Œåƒä¸Šå›¾è¿™æ ·ï¼Œæ¯”å¦‚æˆ‘ä»¬ç‚¹å‡»äº†**æ‰“å¼€æŒ‰é’®**ï¼Œé‚£ä¹ˆç‚¹å‡»å®Œäº†ä¹‹åï¼Œä½¿ç”¨**ä¼ é€é—¨**ç¬é—´ç§»åŠ¨åˆ°å¦å¤–ä¸€ä¸ªåœ°æ–¹ï¼ˆæ¨¡æ€æ¡† `Model` ï¼‰ã€‚å†ç‚¹å‡»**å…³é—­æŒ‰é’®**ï¼Œ**ä¼ é€é—¨**æ¨¡æ€æ¡† `Modal` å°±æ¶ˆå¤±äº†ã€‚

é€šè¿‡è¿™æ ·çš„è§£é‡Šï¼Œç›¸ä¿¡å¤§å®¶å¯¹ `teleport` æœ‰äº†ä¸€ä¸ªåŸºç¡€çš„è®¤è¯†ã€‚

## 2ã€å®ç°æ¨¡æ€æ¡†åŠŸèƒ½

æ¥ä¸‹æ¥æˆ‘ä»¬å°±æ¥ç”¨è¿™ä¸ªåŠŸèƒ½ï¼Œå®ç°ä¸€ä¸ªæ¨¡æ€æ¡†ï¼Œæ§åˆ¶ç»„ä»¶çš„æ˜¾ç¤ºå’Œéšè—ã€‚

### ï¼ˆ1ï¼‰è®¾ç½®é”šç‚¹

æˆ‘ä»¬ç°åœ¨ `vue3` é¡¹ç›®ä¸‹çš„ `/public/index.html` è®¾ç½®ä¸€ä¸ª**é”šç‚¹**ï¼Œæ¥æ”¾ç½®ç»„ä»¶çš„å†…å®¹ã€‚å…·ä½“ä»£ç å¦‚ä¸‹ï¼š

```htmL
<body>
    <noscript>
      <strong>We're sorry but <%= htmlWebpackPlugin.options.title %> doesn't work properly without JavaScript enabled. Please enable it to continue.</strong>
    </noscript>
    <div id="app"></div>
    //å…ˆè¡Œå®šä¹‰ä¸€ä¸ªé”šç‚¹
    <div id="modal"></div>
    <!-- built files will be auto injected -->
  </body>
```

### ï¼ˆ2ï¼‰å®šä¹‰å­ç»„ä»¶

æ¥ä¸‹æ¥æˆ‘ä»¬åœ¨ `/src/components` ä¸‹å®šä¹‰ä¸€ä¸ª**å­ç»„ä»¶**ï¼Œå‘½åä¸º `Modal.vue` ã€‚**å…·ä½“ä»£ç å¦‚ä¸‹ï¼š**

```html
<template>
  <teleport to="#modal">
    <div id="center" v-if="isOpen">
      <h2><slot>this is a modal</slot></h2>
      <button class="btn2" @click="buttonClick">Close</button>
    </div>
  </teleport>
</template>

<script>
  import { defineComponent } from 'vue';
  export default defineComponent({
    //çˆ¶ç»„ä»¶çš„æ•°æ®éœ€è¦é€šè¿‡propsæŠŠæ•°æ®ä¼ ç»™å­ç»„ä»¶ï¼Œpropsçš„å–å€¼å¯ä»¥æ˜¯æ•°ç»„ä¹Ÿå¯ä»¥æ˜¯å¯¹è±¡
    props: {
      isOpen: Boolean,
    },
    //å­ç»„ä»¶å‘çˆ¶ç»„ä»¶ä¼ é€’æ•°æ®
    //ä½¿ç”¨emitsï¼Œæ›´æ˜ç¡®çš„æ˜¾ç¤ºç»„ä»¶çš„è‡ªå®šä¹‰äº‹ä»¶æœ‰å“ªäº›
    emits: {
      'close-modal': null,
    },
    //propså¯¹åº”propsçš„å†…å®¹
    //contextåå­—å¯ä»¥è‡ªå®šä¹‰ï¼Œåªè¦ä¸Šä¸‹å¯¹åº”å³å¯ï¼Œç”¨æ¥è§¦å‘emitçš„å†…å®¹
    setup(props, context) {
      const buttonClick = () => {
        context.emit('close-modal');
      };
      return {
        buttonClick,
      };
    },
  });
</script>

<style>
  #center {
    width: 200px;
    height: 200px;
    border: 2px solid rgb(105, 165, 56);
    text-align: center;
    border-radius: 2px;
    margin: 50px auto 0;
  }
  .btn2 {
    background: #1971c9;
    border: none;
    padding: 8px;
    border-radius: 5px;
    color: #fff;
    cursor: pointer;
  }
</style>
```

### ï¼ˆ3ï¼‰å®šä¹‰çˆ¶ç»„ä»¶

ä¹‹åæˆ‘ä»¬å†æ¥å®šä¹‰ä¸€ä¸ªçˆ¶ç»„ä»¶ï¼Œå‘½åä¸º `index.vue` ã€‚**å…·ä½“ä»£ç å¦‚ä¸‹ï¼š**

```html
<template>
  <button class="btn1" @click="openModal">æ‰“å¼€æ¨¡æ€æ¡†</button>
  <modal :isOpen="modalIsOpen" @close-modal="onModalClose"> My Modal!!! </modal>
</template>

<script lang="ts">
  import { ref, defineComponent } from 'vue';
  import Modal from './components/Modal.vue';

  export default defineComponent({
    name: 'App',
    components: {
      Modal,
    },
    setup() {
      //æ·»åŠ å“åº”å¼å¯¹è±¡æ§åˆ¶æ˜¯å¦æ˜¾ç¤º
      const modalIsOpen = ref(false);
      //æ‰“å¼€æ¨¡æ€æ¡†äº‹ä»¶
      const openModal = () => {
        modalIsOpen.value = true;
      };
      //å…³é—­æ¨¡æ€æ¡†äº‹ä»¶
      const onModalClose = () => {
        modalIsOpen.value = false;
      };

      return {
        modalIsOpen,
        openModal,
        onModalClose,
      };
    },
  });
</script>

<style>
  #app {
    font-family: Avenir, Helvetica, Arial, sans-serif;
    -webkit-font-smoothing: antialiased;
    -moz-osx-font-smoothing: grayscale;
    text-align: center;
    color: #2d4c6b;
    margin-top: 60px;
  }
  .btn1 {
    background: #1971c9;
    border: none;
    padding: 16px;
    border-radius: 5px;
    color: #fff;
    cursor: pointer;
  }
</style>
```

**ç°åœ¨æˆ‘ä»¬æ¥çœ‹ä¸‹æµè§ˆå™¨çš„æ˜¾ç¤ºæ•ˆæœï¼š**

![æ¨¡æ€æ¡†æ˜¾ç¤º](https://img-blog.csdnimg.cn/20210620091838597.gif#pic_center)

å¤§å®¶å¯ä»¥çœ‹åˆ°ï¼Œé€šè¿‡ `teleport` çš„æ–¹å¼ï¼Œç°åœ¨çš„æ¨¡æ€æ¡†æˆåŠŸæ˜¾ç¤ºåœ¨ `id` ä¸º `app` çš„ `div` åŒä¸€å±‚ä¸‹ï¼Œè¾¾åˆ°äº†**ç›¸äº’ç‹¬ç«‹**ï¼Œè€Œä¸å†æ˜¯çˆ¶å­å±‚çº§çš„ç»“æœã€‚

åœ¨ä¸Šé¢çš„æ¡ˆä¾‹ä¸­ï¼Œæˆ‘ä»¬å­¦ä¹ åˆ°äº†é€šè¿‡ä½¿ç”¨ `vue3` æ–°æ¨å‡ºçš„ `teleport` ç‰¹æ€§ï¼Œå°†ç»„ä»¶æ¸²æŸ“åˆ°å¦å¤–ä¸€ä¸ª `DOM` èŠ‚ç‚¹çš„æ–¹æ³•ï¼Œè¿™æ ·ä½¿å¾—ç»„ä»¶ä¹‹é—´çš„ç‹¬ç«‹æ€§æ›´å¼ºã€‚

# äºŒã€ğŸ¤š ç”¨ Suspense

## 1ã€Suspense æ˜¯ä»€ä¹ˆ

æˆ‘ä»¬éƒ½çŸ¥é“ï¼Œåœ¨ `web` ä¸–ç•Œä¸­ï¼Œç»å¸¸é‡åˆ°å¾ˆå¤šçš„å¼‚æ­¥è¯·æ±‚å›°å¢ƒã€‚åœ¨å‘èµ·å¼‚æ­¥è¯·æ±‚æ—¶ï¼Œæˆ‘ä»¬å¾€å¾€éœ€è¦å»åˆ¤æ–­è¿™äº›å¼‚æ­¥è¯·æ±‚çš„çŠ¶æ€ï¼Œç„¶åå‘¢ï¼Œæ ¹æ®è¿™äº›è¯·æ±‚æ¥å±•ç¤ºä¸åŒçš„ç•Œé¢ã€‚

é‚£ç°åœ¨å‘¢ï¼Œ `vue3` æ¨å‡ºäº†ä¸€ä¸ªæ–°çš„å†…ç½®ç»„ä»¶ `Suspense` ï¼Œ `Suspense` æ˜¯ä¸€ä¸ªç‰¹æ®Šçš„ç»„ä»¶ï¼Œå®ƒä¼šæœ‰ä¸¤ä¸ª `template slot` ï¼Œåˆšå¼€å§‹ä¼šæ¸²æŸ“ `feedback` å†…å®¹ï¼Œç›´åˆ°**è¾¾åˆ°æŸä¸ªæ¡ä»¶ä»¥å**ï¼Œæ‰ä¼šæ¸²æŸ“æ­£å¼çš„å†…å®¹ï¼Œä¹Ÿå°±æ˜¯ default çš„å†…å®¹ã€‚è¿™æ ·å‘¢ï¼Œè¿›è¡Œå¼‚æ­¥å†…å®¹çš„æ¸²æŸ“å°±ä¼šå˜å¾—ç‰¹åˆ«ç®€å•ã€‚

åŒæ—¶å€¼å¾—æ³¨æ„çš„æ˜¯ï¼Œå¦‚æœä½¿ç”¨ `Suspense` ï¼Œè¦è¿”å›ä¸€ä¸ª `promise` è€Œä¸æ˜¯ä¸€ä¸ªå¯¹è±¡ã€‚

## 2ã€ç”¨ Suspense å‘èµ·ä¸€ä¸ªå¼‚æ­¥è¯·æ±‚

æ¥ä¸‹æ¥æˆ‘ä»¬ä½¿ç”¨ `Suspense` æ¥**å‘èµ·ä¸€ä¸ªå¼‚æ­¥è¯·æ±‚**ã€‚

é¦–å…ˆæˆ‘ä»¬åœ¨é¡¹ç›®ä¸‹å®šä¹‰ä¸€ä¸ª**å­ç»„ä»¶**ï¼Œå‘½åä¸º `AsyncShow.vue` ï¼Œ**å…·ä½“ä»£ç å¦‚ä¸‹ï¼š**

```html
<template>
  <h1>{{result}}</h1>
</template>
<script lang="ts">
  import { defineComponent } from 'vue';
  export default defineComponent({
    setup() {
      //ä½¿ç”¨Suspenseéœ€è¦è¿”å›ä¸€ä¸ªå¯¹è±¡
      return new Promise((resolve) => {
        setTimeout(() => {
          return resolve({
            result: '10000',
          });
        }, 3000);
      });
    },
  });
</script>
```

ä¹‹ååœ¨é¡¹ç›®ä¸‹å†å®šä¹‰ä¸€ä¸ª**çˆ¶ç»„ä»¶**ï¼Œå‘½åä¸º `DogShow.vue` ï¼Œ**å…·ä½“ä»£ç å¦‚ä¸‹ï¼š**

```html
<template>
  <div id="app">
    <Suspense>
      <template #default>
        <async-show />
      </template>
      <template #fallback>
        <h1>Loading !...</h1>
      </template>
    </Suspense>
  </div>
</template>

<script lang="ts">
  import { defineComponent } from 'vue';
  import AsyncShow from './components/AsyncShow.vue';

  export default defineComponent({
    name: 'App',
    components: {
      AsyncShow,
    },
    setup() {},
  });
</script>

<style>
  #app {
    font-family: Avenir, Helvetica, Arial, sans-serif;
    -webkit-font-smoothing: antialiased;
    -moz-osx-font-smoothing: grayscale;
    text-align: center;
    color: #2c3e50;
    margin-top: 60px;
  }
  h1 {
    font-size: 6rem;
  }
</style>
```

**æœ€ç»ˆæµè§ˆå™¨çš„æ˜¾ç¤ºæ•ˆæœå¦‚ä¸‹ï¼š**

![å‘èµ·ä¸€ä¸ªå¼‚æ­¥è¯·æ±‚](https://img-blog.csdnimg.cn/20210620091902612.gif#pic_center)

å¤§å®¶å¯ä»¥çœ‹åˆ°ï¼Œé€šè¿‡ `Suspense` ï¼Œå¯ä»¥å¾ˆè½»æ˜“çš„**å‘èµ·ä¸€ä¸ªå¼‚æ­¥è¯·æ±‚**ã€‚åˆšå¼€å§‹æ˜¯**fallback çŠ¶æ€**ï¼Œä¹‹åè¾¾åˆ° `3s` çš„æ—¶é—´ä¹‹åï¼Œåˆ‡æ¢åˆ°**default çš„çŠ¶æ€**ï¼Œæ˜¾ç¤ºå‡ºå¯¹åº”çš„å¼‚æ­¥è¯·æ±‚å†…å®¹ã€‚

## 3ã€ç”¨ Suspense å‘èµ·å¤šä¸ªå¼‚æ­¥è¯·æ±‚

æˆ‘ä»¬ä¸æ»¡è¶³äºç°çŠ¶ï¼Œä¸”äº’è”ç½‘åƒå¥‡ç™¾æ€ªçš„ï¼Œæˆ‘ä»¬æ€»ä¸èƒ½ä¸€ç›´åªå‘é€ä¸€ä¸ªå¼‚æ­¥è¯·æ±‚å§ï¼æ‰€ä»¥ï¼Œæ¥ä¸‹æ¥æˆ‘ä»¬å°±æ¥å®ç°å‘èµ·å¤šä¸ªå¼‚æ­¥è¯·æ±‚çš„æ•ˆæœã€‚

é¦–å…ˆæˆ‘ä»¬ç”¨ä¸€ä¸ªå…è´¹çš„[åœ¨çº¿ API](https://dog.ceo/dog-api/) ï¼Œæ¥å‘èµ·ä¸€ä¸ªè¯·æ±‚ã€‚æ¥ä¸‹æ¥æˆ‘ä»¬åœ¨é¡¹ç›®çš„ `components` æ–‡ä»¶ä¸‹ï¼Œå†å®šä¹‰ä¸€ä¸ªå­ç»„ä»¶ï¼Œå‘½åä¸º `DogShow.vue` ï¼Œ**å…·ä½“ä»£ç å¦‚ä¸‹ï¼š**

```html
<template>
  <img :src="result && result.message" />
</template>
<script lang="ts">
  import axios from 'axios';
  import { defineComponent } from 'vue';
  export default defineComponent({
    async setup() {
      const rawData = await axios.get(
        'https://dog.ceo/api/breeds/image/random'
      );
      return {
        result: rawData.data,
      };
    },
  });
</script>
```

---

æ¥ä¸‹æ¥æˆ‘ä»¬å†æŠŠä»¥ä¸Šå­ç»„ä»¶çš„å†…å®¹æ·»åŠ åˆ°çˆ¶ç»„ä»¶ä¸­ï¼Œ**å…·ä½“ä»£ç å¦‚ä¸‹ï¼š**

```html
<template>
  <div id="app">
    <Suspense>
      <template #default>
        <async-show />
        <dog-show />
      <template #fallback>
        <h1>Loading !...</h1>
      </template>
    </Suspense>
  </div>
</template>

<script lang="ts">
import AsyncShow from './components/AsyncShow.vue'
import DogShow from './components/DogShow.vue'

export default {
  name: 'App',
  components: {
    AsyncShow,
    DogShow
  },
  setup() {

  }
};
</script>

<style>
#app {
  font-family: Avenir, Helvetica, Arial, sans-serif;
  -webkit-font-smoothing: antialiased;
  -moz-osx-font-smoothing: grayscale;
  text-align: center;
  color: #2c3e50;
  margin-top: 60px;
}
h1 {
  font-size: 6rem;
}
</style>
```

**æœ€ç»ˆæµè§ˆå™¨çš„æ˜¾ç¤ºæ•ˆæœå¦‚ä¸‹ï¼š**

![å‘èµ·å¤šä¸ªè¯·æ±‚](https://img-blog.csdnimg.cn/20210620091920700.gif#pic_center)

å¤§å®¶å¯ä»¥çœ‹åˆ°ï¼Œæˆ‘ä»¬åŒæ—¶å‘èµ·äº†ä¸¤ä¸ªå¼‚æ­¥è¯·æ±‚ï¼Œå¹¶ä¸”åœ¨ Suspense ä¸­çš„ default æ’æ§½é‡Œé¢åŒæ—¶ä½¿ç”¨ã€‚åŒæ ·çš„ï¼Œæµè§ˆå™¨ä¼šå…ˆæ˜¾ç¤º fallback çš„å†…å®¹ï¼Œä¹‹åç­‰åˆ°æ—¶æœºåˆ°äº†ï¼Œå°±æ˜¾ç¤ºæˆ‘ä»¬è¯·æ±‚çš„å†…å®¹ã€‚

ä¾æ®è¿™æ ·çš„ä¾‹å­ï¼Œæ˜¾ç¤ºæ›´å¤šçš„è¯·æ±‚ä¹ŸåŒæ ·æœ‰æ•ˆã€‚è¿™æ ·å¯¹æ¯”èµ·æ¥ï¼Œå‘é€å¤šä¸ªå¼‚æ­¥è¯·æ±‚æ˜¯ä¸æ˜¯å°±æ–¹ä¾¿äº†è®¸å¤šã€‚

## 4ã€å¦‚ä½•æŠ“å–é”™è¯¯

å­¦å®Œä¸Šé¢çš„å†…å®¹ï¼Œç›¸ä¿¡å¤§å®¶å¯¹ Suspense çš„ç”¨æ³•å·²ç»æœ‰æ‰€äº†è§£ã€‚é‚£ä¹ˆï¼Œç½‘ç»œè¯·æ±‚åƒå¥‡ç™¾æ€ªçš„ï¼Œæ€»ä¸èƒ½æ¯æ¬¡éƒ½èƒ½å¤Ÿå¾ˆé¡ºç•…çš„å‘èµ·è¯·æ±‚å¯¹å§ã€‚æ‰€ä»¥å‘¢ï¼Œæˆ‘ä»¬æ¥éœ€è¦å†æ¥å­¦ä¹ ä¸€ä¸‹ï¼Œå½“ç½‘ç»œè¯·æ±‚å¤±è´¥æ—¶ï¼Œ**å¦‚ä½•æŠ“å– Supsense åŒ…è£¹ä¸‹çš„é”™è¯¯**ã€‚

è¿™ä¸ªæ—¶å€™æˆ‘ä»¬å¯ä»¥ä½¿ç”¨ä¸€ä¸ªé’©å­å‡½æ•°ï¼Œè¿™ä¸ªå‡½æ•°å«åš `onErrorCaptured` ï¼Œæ¥ä¸‹æ¥æˆ‘ä»¬æ¥çœ‹ä¸‹æ€ä¹ˆæŠ“å–ã€‚

æˆ‘ä»¬å°†çˆ¶ç»„ä»¶ `index.vue` è¿›è¡Œæ”¹é€ ï¼Œå…·ä½“ä»£ç å¦‚ä¸‹ï¼š

```html
<template>
  <div id="app">
    <p>{{error}}</p>
    <Suspense>
      <template #default>
        <async-show />
        <dog-show />
      <template #fallback>
        <h1>Loading !...</h1>
      </template>
    </Suspense>
  </div>
</template>

<script lang="ts">
import { onErrorCaptured } from 'vue'
import AsyncShow from './components/AsyncShow.vue'
import DogShow from './components/DogShow.vue'

export default {
  name: 'App',
  components: {
    AsyncShow,
    DogShow
  },
  setup() {
    const error = ref(null)
    onErrorCaptured((e: any) => {
      error.value = e
      return true
    })
    return{
        error
    }
  }
};
</script>

<style>
#app {
  font-family: Avenir, Helvetica, Arial, sans-serif;
  -webkit-font-smoothing: antialiased;
  -moz-osx-font-smoothing: grayscale;
  text-align: center;
  color: #2c3e50;
  margin-top: 60px;
}
h1 {
  font-size: 6rem;
}
</style>
```

æ­¤æ—¶æˆ‘ä»¬å†å°† `DogShow.vue` çš„æ¥å£è¿›è¡Œä¿®æ”¹ï¼Œè®©å…¶å˜æˆä¸€ä¸ªæ— æ•ˆçš„ APIã€‚**ä»£ç å¦‚ä¸‹ï¼š**

```js
const rawData = await axios.get('https://dog.ceo/api/breeds/image');
```

æ¥ä¸‹æ¥æˆ‘ä»¬å°±æ¥çœ‹ä¸€ä¸‹**æµè§ˆå™¨çš„è¿è¡Œæ•ˆæœï¼š**

![å¦‚ä½•æŠ“å–é”™è¯¯](https://img-blog.csdnimg.cn/20210620091932992.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3dlaXhpbl80NDgwMzc1Mw==,size_16,color_FFFFFF,t_70#pic_center)

å¤§å®¶å¯ä»¥çœ‹åˆ°ï¼Œä¿®æ”¹æˆæ— æ•ˆçš„ `API` åï¼Œç‹—ç‹—çš„å›¾ç‰‡ä¹Ÿä¸æ˜¾ç¤ºäº†ï¼Œæœ€åæœ€ä¸Šæ–¹å°±æ˜¯é€šè¿‡ `onErrorCaptured` è¿™ä¸ªç”Ÿå‘½å‘¨æœŸæ•æ‰åˆ°çš„é”™è¯¯ï¼Œæ¸…æ™°æ˜äº†ã€‚

# ä¸‰ã€ğŸ–ï¸ ç»“æŸè¯­

åˆ°è¿™é‡Œï¼Œ `teleport` å’Œ `Suspense` çš„å†…å®¹å°±è®²è§£ç»“æŸå•¦ï¼ç›¸ä¿¡å¤§å®¶å¯¹ä¼ é€é—¨çš„ç¥å¥‡ä¹‹å¤„ä¹Ÿæœ‰äº†ä¸€å®šçš„äº†è§£ï¼Œå¯¹ `Suspense` çš„ç‹¬åˆ°ä¹‹å¤„ä¹Ÿæ„Ÿå—äº†ä¸€ç•ªã€‚

vue3 æŒç»­å­¦ä¹ ï¼Œæ›´æ–°æ°¸ä¸åœæ­‡â€¦â€¦

> - å…³æ³¨å…¬ä¼—å· **æ˜ŸæœŸä¸€ç ”ç©¶å®¤** ï¼Œç¬¬ä¸€æ—¶é—´å…³æ³¨å­¦ä¹ å¹²è´§ï¼Œæ›´å¤šæœ‰è¶£çš„ä¸“æ å¾…ä½ è§£é”~
> - å¦‚æœè¿™ç¯‡æ–‡ç« å¯¹ä½ æœ‰ç”¨ï¼Œè®°å¾— **ä¸€é”®ä¸‰è¿** å†èµ°å“¦~
> - æˆ‘ä»¬ä¸‹æœŸè§ï¼ğŸ¥‚ğŸ¥‚ğŸ¥‚
