import{_ as s,o as n,c as a,Q as l}from"./chunks/framework.98c15f2e.js";const u=JSON.parse('{"title":"åŸºäºè¿ç§»å­¦ä¹ çš„è¯­éŸ³è¯†åˆ«å™¨ï¼šå£°æ§è½®æ’­å›¾","description":"","frontmatter":{"title":"åŸºäºè¿ç§»å­¦ä¹ çš„è¯­éŸ³è¯†åˆ«å™¨ï¼šå£°æ§è½®æ’­å›¾","author":"å‘¨ä¸€","date":"2023-08-05","categories":["äººå·¥æ™ºèƒ½"],"tags":["æœºå™¨å­¦ä¹ "],"sidebar":"auto"},"headers":[{"level":1,"title":"ä¸€ã€ä»»åŠ¡ç®€ä»‹","slug":"ä¸€ã€ä»»åŠ¡ç®€ä»‹","link":"#ä¸€ã€ä»»åŠ¡ç®€ä»‹","children":[{"level":2,"title":"1ã€ä½¿ç”¨åœºæ™¯","slug":"_1ã€ä½¿ç”¨åœºæ™¯","link":"#_1ã€ä½¿ç”¨åœºæ™¯","children":[]},{"level":2,"title":"2ã€æ“ä½œæ­¥éª¤","slug":"_2ã€æ“ä½œæ­¥éª¤","link":"#_2ã€æ“ä½œæ­¥éª¤","children":[]}]},{"level":1,"title":"äºŒã€åœ¨æµè§ˆå™¨ä¸­æ”¶é›†ä¸­æ–‡è¯­éŸ³è®­ç»ƒæ•°æ®","slug":"äºŒã€åœ¨æµè§ˆå™¨ä¸­æ”¶é›†ä¸­æ–‡è¯­éŸ³è®­ç»ƒæ•°æ®","link":"#äºŒã€åœ¨æµè§ˆå™¨ä¸­æ”¶é›†ä¸­æ–‡è¯­éŸ³è®­ç»ƒæ•°æ®","children":[{"level":2,"title":"1ã€æ“ä½œæ­¥éª¤","slug":"_1ã€æ“ä½œæ­¥éª¤","link":"#_1ã€æ“ä½œæ­¥éª¤","children":[]},{"level":2,"title":"2ã€è®­ç»ƒè¿‡ç¨‹","slug":"_2ã€è®­ç»ƒè¿‡ç¨‹","link":"#_2ã€è®­ç»ƒè¿‡ç¨‹","children":[{"level":3,"title":"ï¼ˆ1ï¼‰å‡†å¤‡æ•°æ®","slug":"_1-å‡†å¤‡æ•°æ®","link":"#_1-å‡†å¤‡æ•°æ®","children":[]},{"level":3,"title":"ï¼ˆ2ï¼‰æ”¶é›†ä¸­æ–‡è¯­éŸ³","slug":"_2-æ”¶é›†ä¸­æ–‡è¯­éŸ³","link":"#_2-æ”¶é›†ä¸­æ–‡è¯­éŸ³","children":[]}]}]},{"level":1,"title":"ä¸‰ã€è¯­éŸ³ä¸–ç•Œè¿ç§»å­¦ä¹ çš„è®­ç»ƒå’Œé¢„æµ‹","slug":"ä¸‰ã€è¯­éŸ³ä¸–ç•Œè¿ç§»å­¦ä¹ çš„è®­ç»ƒå’Œé¢„æµ‹","link":"#ä¸‰ã€è¯­éŸ³ä¸–ç•Œè¿ç§»å­¦ä¹ çš„è®­ç»ƒå’Œé¢„æµ‹","children":[{"level":2,"title":"1ã€æ“ä½œæ­¥éª¤","slug":"_1ã€æ“ä½œæ­¥éª¤-1","link":"#_1ã€æ“ä½œæ­¥éª¤-1","children":[]},{"level":2,"title":"2ã€è®­ç»ƒè¿‡ç¨‹","slug":"_2ã€è®­ç»ƒè¿‡ç¨‹-1","link":"#_2ã€è®­ç»ƒè¿‡ç¨‹-1","children":[]}]},{"level":1,"title":"å››ã€è¯­éŸ³è®­ç»ƒæ•°æ®çš„ä¿å­˜å’ŒåŠ è½½","slug":"å››ã€è¯­éŸ³è®­ç»ƒæ•°æ®çš„ä¿å­˜å’ŒåŠ è½½","link":"#å››ã€è¯­éŸ³è®­ç»ƒæ•°æ®çš„ä¿å­˜å’ŒåŠ è½½","children":[{"level":2,"title":"1ã€æ“ä½œæ­¥éª¤","slug":"_1ã€æ“ä½œæ­¥éª¤-2","link":"#_1ã€æ“ä½œæ­¥éª¤-2","children":[]},{"level":2,"title":"2ã€è®­ç»ƒè¿‡ç¨‹","slug":"_2ã€è®­ç»ƒè¿‡ç¨‹-2","link":"#_2ã€è®­ç»ƒè¿‡ç¨‹-2","children":[{"level":3,"title":"ï¼ˆ1ï¼‰ä¿å­˜è¯­éŸ³è®­ç»ƒæ•°æ®","slug":"_1-ä¿å­˜è¯­éŸ³è®­ç»ƒæ•°æ®","link":"#_1-ä¿å­˜è¯­éŸ³è®­ç»ƒæ•°æ®","children":[]},{"level":3,"title":"ï¼ˆ2ï¼‰åŠ è½½è¯­éŸ³è®­ç»ƒæ•°æ®","slug":"_2-åŠ è½½è¯­éŸ³è®­ç»ƒæ•°æ®","link":"#_2-åŠ è½½è¯­éŸ³è®­ç»ƒæ•°æ®","children":[]},{"level":3,"title":"ï¼ˆ3ï¼‰è®­ç»ƒå’Œé¢„æµ‹","slug":"_3-è®­ç»ƒå’Œé¢„æµ‹","link":"#_3-è®­ç»ƒå’Œé¢„æµ‹","children":[]}]}]},{"level":1,"title":"äº”ã€å£°æ§è½®æ’­å›¾","slug":"äº”ã€å£°æ§è½®æ’­å›¾","link":"#äº”ã€å£°æ§è½®æ’­å›¾","children":[{"level":2,"title":"1ã€æ“ä½œæ­¥éª¤","slug":"_1ã€æ“ä½œæ­¥éª¤-3","link":"#_1ã€æ“ä½œæ­¥éª¤-3","children":[]},{"level":2,"title":"2ã€è®­ç»ƒè¿‡ç¨‹","slug":"_2ã€è®­ç»ƒè¿‡ç¨‹-3","link":"#_2ã€è®­ç»ƒè¿‡ç¨‹-3","children":[]}]}],"relativePath":"column/MachineLearning/Tensorflow/13_Carousel.md","filePath":"column/MachineLearning/Tensorflow/13_Carousel.md","lastUpdated":1720881464000}'),p={name:"column/MachineLearning/Tensorflow/13_Carousel.md"},o=l(`<h1 id="ä¸€ã€ä»»åŠ¡ç®€ä»‹" tabindex="-1">ä¸€ã€ä»»åŠ¡ç®€ä»‹ <a class="header-anchor" href="#ä¸€ã€ä»»åŠ¡ç®€ä»‹" aria-label="Permalink to &quot;ä¸€ã€ä»»åŠ¡ç®€ä»‹&quot;">â€‹</a></h1><h2 id="_1ã€ä½¿ç”¨åœºæ™¯" tabindex="-1">1ã€ä½¿ç”¨åœºæ™¯ <a class="header-anchor" href="#_1ã€ä½¿ç”¨åœºæ™¯" aria-label="Permalink to &quot;1ã€ä½¿ç”¨åœºæ™¯&quot;">â€‹</a></h2><ul><li>æ¯”å¦‚è¯´ä½ åŒæ‰‹æ­£åœ¨æ‰“å­—æˆ–è€…æ­£åœ¨å¿™åˆ«çš„ä¸œè¥¿ï¼Œæˆ–è€…ä½ äººç¦»ç”µè„‘å¾ˆè¿œï¼Œæ²¡æœ‰åŠæ³•é€šè¿‡é¼ æ ‡æˆ–é”®ç›˜æ¥åˆ‡æ¢è¿™ä¸ªå¹»ç¯ç‰‡æˆ–è€…è¯´è½®æ’­å›¾ï¼Œé‚£ä¹ˆä½ å°±å¯ä»¥è¿œç¨‹é€šè¿‡è¯­éŸ³æ¥æ§åˆ¶è¿™ä¸ªè½®æ’­ã€‚</li><li>ä¹Ÿå¯ä»¥é€šè¿‡å£°éŸ³æ¥æ§åˆ¶ç½‘é¡µåˆ‡æ¢ã€ä¸åŒæµè§ˆå™¨åˆ‡æ¢ç­‰ç­‰ã€‚</li><li>ç¼–å†™å£°æ§è½®æ’­å›¾åº”ç”¨</li></ul><h2 id="_2ã€æ“ä½œæ­¥éª¤" tabindex="-1">2ã€æ“ä½œæ­¥éª¤ <a class="header-anchor" href="#_2ã€æ“ä½œæ­¥éª¤" aria-label="Permalink to &quot;2ã€æ“ä½œæ­¥éª¤&quot;">â€‹</a></h2><ul><li>åœ¨æµè§ˆå™¨é‡Œé¢ï¼Œé€šè¿‡éº¦å…‹é£æ¥æ”¶é›†ä¸­æ–‡è¯­éŸ³è®­ç»ƒæ•°æ®ã€‚ä¹Ÿå°±æ˜¯æˆ‘ä¼šå¯¹ç€éº¦å…‹é£è¯´ä¸€äº›è¯­éŸ³ï¼Œè®©è¿™ä¸ªæ¨¡å‹æ¥è®­ç»ƒï¼Œè¿™ä¸ªè®­ç»ƒæ•°æ®å°±æ˜¯æˆ‘è¯´çš„ä¸­æ–‡è¯­éŸ³ã€‚</li><li>ç„¶åæ˜¯ä½¿ç”¨<code>speech commands</code>åŒ…è¿›è¡Œè¿ç§»å­¦ä¹ å¹¶é¢„æµ‹ã€‚</li><li>æœ€åæ˜¯è¯­éŸ³è®­ç»ƒæ•°æ®çš„<strong>ä¿å­˜</strong>å’Œ<strong>åŠ è½½</strong>ã€‚ä¸ºä»€ä¹ˆè¦åšè¯­éŸ³è®­ç»ƒæ•°æ®çš„ä¿å­˜å’ŒåŠ è½½å‘¢ï¼Ÿå› ä¸ºæˆ‘ä»¬æ˜¯ä»æµè§ˆå™¨é‡Œé¢æ”¶é›†ä¸­æ–‡è¯­éŸ³çš„ï¼Œå¦‚æœæ¯æ¬¡è¯­éŸ³è¯†åˆ«å‰ï¼Œæˆ‘éƒ½è¦å…ˆæ”¶é›†ä¸€ç•ªè¿™ä¸ªè®­ç»ƒæ•°æ®ï¼Œé‚£å°±å¤ªéº»çƒ¦äº†ã€‚ç†æƒ³çš„çŠ¶æ€æ˜¯æˆ‘æ”¶é›†ä¸€æ¬¡æŠŠå®ƒä¿å­˜æˆæ–‡ä»¶ä»¥åï¼Œæ¯æ¬¡éƒ½èƒ½ç”¨ï¼Œè¿™æ˜¯æœ€ç†æƒ³çš„ï¼Œå› æ­¤å°±éœ€è¦è¿™ä¸ªæ­¥éª¤ã€‚</li></ul><h1 id="äºŒã€åœ¨æµè§ˆå™¨ä¸­æ”¶é›†ä¸­æ–‡è¯­éŸ³è®­ç»ƒæ•°æ®" tabindex="-1">äºŒã€åœ¨æµè§ˆå™¨ä¸­æ”¶é›†ä¸­æ–‡è¯­éŸ³è®­ç»ƒæ•°æ® <a class="header-anchor" href="#äºŒã€åœ¨æµè§ˆå™¨ä¸­æ”¶é›†ä¸­æ–‡è¯­éŸ³è®­ç»ƒæ•°æ®" aria-label="Permalink to &quot;äºŒã€åœ¨æµè§ˆå™¨ä¸­æ”¶é›†ä¸­æ–‡è¯­éŸ³è®­ç»ƒæ•°æ®&quot;">â€‹</a></h1><h2 id="_1ã€æ“ä½œæ­¥éª¤" tabindex="-1">1ã€æ“ä½œæ­¥éª¤ <a class="header-anchor" href="#_1ã€æ“ä½œæ­¥éª¤" aria-label="Permalink to &quot;1ã€æ“ä½œæ­¥éª¤&quot;">â€‹</a></h2><ul><li>ä½¿ç”¨<code>speech commands</code>åŒ…åˆ›å»ºè¿ç§»å­¦ä¹ å™¨</li><li>ç¼–å†™å‰ç«¯ç•Œé¢ï¼Œä¸ºäº†æ”¶é›†è¯­éŸ³æ•°æ®åšå‡†å¤‡ã€‚ä¸»è¦æ”¶é›†ä¸Šä¸€å¼ ã€ä¸‹ä¸€å¼ ä»¥åŠèƒŒæ™¯å™ªéŸ³è¿™ä¸‰ç§è¯­éŸ³</li><li>è°ƒç”¨<code>collectExample</code>æ–¹æ³•æ”¶é›†è¯­éŸ³æ•°æ®</li></ul><h2 id="_2ã€è®­ç»ƒè¿‡ç¨‹" tabindex="-1">2ã€è®­ç»ƒè¿‡ç¨‹ <a class="header-anchor" href="#_2ã€è®­ç»ƒè¿‡ç¨‹" aria-label="Permalink to &quot;2ã€è®­ç»ƒè¿‡ç¨‹&quot;">â€‹</a></h2><h3 id="_1-å‡†å¤‡æ•°æ®" tabindex="-1">ï¼ˆ1ï¼‰å‡†å¤‡æ•°æ® <a class="header-anchor" href="#_1-å‡†å¤‡æ•°æ®" aria-label="Permalink to &quot;ï¼ˆ1ï¼‰å‡†å¤‡æ•°æ®&quot;">â€‹</a></h3><p>é¦–å…ˆåˆ›å»ºæ–‡ä»¶å¤¹<code>data/speech</code>ï¼Œç„¶ååœ¨<code>speech</code>ä¸‹ï¼Œå­˜æ”¾è¿™äº›å†…å®¹ã€‚<strong>å¦‚ä¸‹å›¾æ‰€ç¤ºï¼š</strong></p><p><img src="https://mondaylab-1309616765.cos.ap-shanghai.myqcloud.com/images/202407132228081.(null)" alt="img"></p><p>å…¶ä¸­ï¼Œ<code>group1</code>å¼€å¤´çš„æ˜¯<strong>ä¸¤ä¸ªæƒé‡æ–‡ä»¶</strong>ï¼Œ<code>metadata.json</code>æ˜¯å…ƒä¿¡æ¯çš„<code>json</code>ï¼Œ<code>model.json</code>æ˜¯æ¨¡å‹çš„<code>json</code>ã€‚æœ‰äº†è¿™äº›æ•°æ®åï¼Œå¯ä»¥å…ˆç”¨<code>http-server</code>åœ¨ç»ˆç«¯åŠ è½½ä¸Šé¢çš„è¿™äº›æ•°æ®æ–‡ä»¶ã€‚</p><p>ä¸‹é¢é™„ä¸Šæ•°æ®æ–‡ä»¶ğŸ‘‡ğŸ»ï¼š</p><p>æš‚æ—¶æ— æ³•åœ¨é£ä¹¦æ–‡æ¡£å¤–å±•ç¤ºæ­¤å†…å®¹</p><h3 id="_2-æ”¶é›†ä¸­æ–‡è¯­éŸ³" tabindex="-1">ï¼ˆ2ï¼‰æ”¶é›†ä¸­æ–‡è¯­éŸ³ <a class="header-anchor" href="#_2-æ”¶é›†ä¸­æ–‡è¯­éŸ³" aria-label="Permalink to &quot;ï¼ˆ2ï¼‰æ”¶é›†ä¸­æ–‡è¯­éŸ³&quot;">â€‹</a></h3><p>æ¥ç€ï¼Œæ ¹ç›®å½•åˆ›å»ºä¸€ä¸ªæ–°çš„æ–‡ä»¶å¤¹<code>speech-cn</code>ï¼Œç„¶ååœ¨è¿™ä¸ªæ–‡ä»¶å¤¹ä¸‹é¢åˆ›å»ºä¸¤ä¸ªæ–‡ä»¶ï¼Œåˆ†åˆ«ä¸º<code>index.html</code>å’Œ<code>script.js</code>ã€‚</p><p><code>index.html</code>ä»£ç å¦‚ä¸‹ï¼š</p><div class="language-HTML vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">HTML</span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#E1E4E8;">&lt;</span><span style="color:#85E89D;">script</span><span style="color:#E1E4E8;"> </span><span style="color:#B392F0;">src</span><span style="color:#E1E4E8;">=</span><span style="color:#9ECBFF;">&quot;script.js&quot;</span><span style="color:#E1E4E8;">&gt;&lt;/</span><span style="color:#85E89D;">script</span><span style="color:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="color:#E1E4E8;">&lt;</span><span style="color:#85E89D;">button</span><span style="color:#E1E4E8;"> </span><span style="color:#B392F0;">onclick</span><span style="color:#E1E4E8;">=</span><span style="color:#9ECBFF;">&quot;</span><span style="color:#B392F0;">collect</span><span style="color:#9ECBFF;">(</span><span style="color:#79B8FF;">this</span><span style="color:#9ECBFF;">)&quot;</span><span style="color:#E1E4E8;">&gt;ä¸Šä¸€å¼ &lt;/</span><span style="color:#85E89D;">button</span><span style="color:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="color:#E1E4E8;">&lt;</span><span style="color:#85E89D;">button</span><span style="color:#E1E4E8;"> </span><span style="color:#B392F0;">onclick</span><span style="color:#E1E4E8;">=</span><span style="color:#9ECBFF;">&quot;</span><span style="color:#B392F0;">collect</span><span style="color:#9ECBFF;">(</span><span style="color:#79B8FF;">this</span><span style="color:#9ECBFF;">)&quot;</span><span style="color:#E1E4E8;">&gt;ä¸‹ä¸€å¼ &lt;/</span><span style="color:#85E89D;">button</span><span style="color:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="color:#E1E4E8;">&lt;</span><span style="color:#85E89D;">button</span><span style="color:#E1E4E8;"> </span><span style="color:#B392F0;">onclick</span><span style="color:#E1E4E8;">=</span><span style="color:#9ECBFF;">&quot;</span><span style="color:#B392F0;">collect</span><span style="color:#9ECBFF;">(</span><span style="color:#79B8FF;">this</span><span style="color:#9ECBFF;">)&quot;</span><span style="color:#E1E4E8;">&gt;èƒŒæ™¯å™ªéŸ³&lt;/</span><span style="color:#85E89D;">button</span><span style="color:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="color:#6A737D;">&lt;!-- ä¿ç•™ç¨‹åºæœ€åˆå§‹çš„é£æ ¼ --&gt;</span></span>
<span class="line"><span style="color:#E1E4E8;">&lt;</span><span style="color:#85E89D;">pre</span><span style="color:#E1E4E8;"> </span><span style="color:#B392F0;">id</span><span style="color:#E1E4E8;">=</span><span style="color:#9ECBFF;">&quot;count&quot;</span><span style="color:#E1E4E8;">&gt;&lt;/</span><span style="color:#85E89D;">pre</span><span style="color:#E1E4E8;">&gt;</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#24292E;">&lt;</span><span style="color:#22863A;">script</span><span style="color:#24292E;"> </span><span style="color:#6F42C1;">src</span><span style="color:#24292E;">=</span><span style="color:#032F62;">&quot;script.js&quot;</span><span style="color:#24292E;">&gt;&lt;/</span><span style="color:#22863A;">script</span><span style="color:#24292E;">&gt;</span></span>
<span class="line"><span style="color:#24292E;">&lt;</span><span style="color:#22863A;">button</span><span style="color:#24292E;"> </span><span style="color:#6F42C1;">onclick</span><span style="color:#24292E;">=</span><span style="color:#032F62;">&quot;</span><span style="color:#6F42C1;">collect</span><span style="color:#032F62;">(</span><span style="color:#005CC5;">this</span><span style="color:#032F62;">)&quot;</span><span style="color:#24292E;">&gt;ä¸Šä¸€å¼ &lt;/</span><span style="color:#22863A;">button</span><span style="color:#24292E;">&gt;</span></span>
<span class="line"><span style="color:#24292E;">&lt;</span><span style="color:#22863A;">button</span><span style="color:#24292E;"> </span><span style="color:#6F42C1;">onclick</span><span style="color:#24292E;">=</span><span style="color:#032F62;">&quot;</span><span style="color:#6F42C1;">collect</span><span style="color:#032F62;">(</span><span style="color:#005CC5;">this</span><span style="color:#032F62;">)&quot;</span><span style="color:#24292E;">&gt;ä¸‹ä¸€å¼ &lt;/</span><span style="color:#22863A;">button</span><span style="color:#24292E;">&gt;</span></span>
<span class="line"><span style="color:#24292E;">&lt;</span><span style="color:#22863A;">button</span><span style="color:#24292E;"> </span><span style="color:#6F42C1;">onclick</span><span style="color:#24292E;">=</span><span style="color:#032F62;">&quot;</span><span style="color:#6F42C1;">collect</span><span style="color:#032F62;">(</span><span style="color:#005CC5;">this</span><span style="color:#032F62;">)&quot;</span><span style="color:#24292E;">&gt;èƒŒæ™¯å™ªéŸ³&lt;/</span><span style="color:#22863A;">button</span><span style="color:#24292E;">&gt;</span></span>
<span class="line"><span style="color:#6A737D;">&lt;!-- ä¿ç•™ç¨‹åºæœ€åˆå§‹çš„é£æ ¼ --&gt;</span></span>
<span class="line"><span style="color:#24292E;">&lt;</span><span style="color:#22863A;">pre</span><span style="color:#24292E;"> </span><span style="color:#6F42C1;">id</span><span style="color:#24292E;">=</span><span style="color:#032F62;">&quot;count&quot;</span><span style="color:#24292E;">&gt;&lt;/</span><span style="color:#22863A;">pre</span><span style="color:#24292E;">&gt;</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><p><code>script.js</code>ä»£ç å¦‚ä¸‹ï¼š</p><div class="language-JavaScript vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">JavaScript</span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#F97583;">import</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">*</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">as</span><span style="color:#E1E4E8;"> speechCommands </span><span style="color:#F97583;">from</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">&#39;@tensorflow-models/speech-commands&#39;</span><span style="color:#E1E4E8;">;</span></span>
<span class="line"><span style="color:#F97583;">import</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">*</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">as</span><span style="color:#E1E4E8;"> tfvis </span><span style="color:#F97583;">from</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">&#39;@tensorflow/tfjs-vis&#39;</span><span style="color:#E1E4E8;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F97583;">const</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">MODEL_PATH</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">&#39;http://127.0.0.1:8080&#39;</span><span style="color:#E1E4E8;">;</span></span>
<span class="line"><span style="color:#6A737D;">// è¿ç§»å­¦ä¹ è¯†åˆ«å™¨</span></span>
<span class="line"><span style="color:#F97583;">let</span><span style="color:#E1E4E8;"> transferRecognizer;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D;">/**</span></span>
<span class="line"><span style="color:#6A737D;"> * åŠ è½½è¯­éŸ³è¯†åˆ«æ•°æ®</span></span>
<span class="line"><span style="color:#6A737D;"> */</span></span>
<span class="line"><span style="color:#E1E4E8;">window.</span><span style="color:#B392F0;">onload</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">async</span><span style="color:#E1E4E8;"> () </span><span style="color:#F97583;">=&gt;</span><span style="color:#E1E4E8;"> {</span></span>
<span class="line"><span style="color:#E1E4E8;">  </span><span style="color:#F97583;">const</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">recognizer</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> speechCommands.</span><span style="color:#B392F0;">create</span><span style="color:#E1E4E8;">(</span></span>
<span class="line"><span style="color:#E1E4E8;">    </span><span style="color:#9ECBFF;">&#39;BROWSER_FFT&#39;</span><span style="color:#E1E4E8;">,</span></span>
<span class="line"><span style="color:#E1E4E8;">    </span><span style="color:#79B8FF;">null</span><span style="color:#E1E4E8;">,</span></span>
<span class="line"><span style="color:#E1E4E8;">    </span><span style="color:#79B8FF;">MODEL_PATH</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">+</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">&#39;/speech/model.json&#39;</span><span style="color:#E1E4E8;">,</span></span>
<span class="line"><span style="color:#E1E4E8;">    </span><span style="color:#79B8FF;">MODEL_PATH</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">+</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">&#39;/speech/metadata.json&#39;</span></span>
<span class="line"><span style="color:#E1E4E8;">  );</span></span>
<span class="line"><span style="color:#E1E4E8;">  </span><span style="color:#F97583;">await</span><span style="color:#E1E4E8;"> recognizer.</span><span style="color:#B392F0;">ensureModelLoaded</span><span style="color:#E1E4E8;">();</span></span>
<span class="line"><span style="color:#E1E4E8;">  transferRecognizer </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> recognizer.</span><span style="color:#B392F0;">createTransfer</span><span style="color:#E1E4E8;">(</span><span style="color:#9ECBFF;">&#39;è½®æ’­å›¾&#39;</span><span style="color:#E1E4E8;">);</span></span>
<span class="line"><span style="color:#E1E4E8;">};</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D;">/**</span></span>
<span class="line"><span style="color:#6A737D;"> * æ”¶é›†ä¸­æ–‡è¯­éŸ³è®­ç»ƒæ•°æ®</span></span>
<span class="line"><span style="color:#6A737D;"> */</span></span>
<span class="line"><span style="color:#E1E4E8;">window.</span><span style="color:#B392F0;">collect</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">async</span><span style="color:#E1E4E8;"> (</span><span style="color:#FFAB70;">btn</span><span style="color:#E1E4E8;">) </span><span style="color:#F97583;">=&gt;</span><span style="color:#E1E4E8;"> {</span></span>
<span class="line"><span style="color:#E1E4E8;">  </span><span style="color:#6A737D;">// ç‚¹å‡»ä¹‹åï¼Œè¦æŠŠå½“å‰æŒ‰é’®ç¦ç”¨æ‰</span></span>
<span class="line"><span style="color:#E1E4E8;">  btn.disabled </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">true</span><span style="color:#E1E4E8;">;</span></span>
<span class="line"><span style="color:#E1E4E8;">  </span><span style="color:#F97583;">const</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">label</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> btn.innerText;</span></span>
<span class="line"><span style="color:#E1E4E8;">  </span><span style="color:#6A737D;">// è°ƒç”¨è¿ç§»å­¦ä¹ å™¨çš„collectExampleæ–¹æ³•ï¼Œå“¦çˆ±æ”¶é›†è¯­éŸ³çš„æ•°æ®</span></span>
<span class="line"><span style="color:#E1E4E8;">  </span><span style="color:#F97583;">await</span><span style="color:#E1E4E8;"> transferRecognizer.</span><span style="color:#B392F0;">collectExample</span><span style="color:#E1E4E8;">(</span></span>
<span class="line"><span style="color:#E1E4E8;">    </span><span style="color:#6A737D;">// speech-commandé‡Œé¢æœ‰ä¸€ä¸ªèƒŒæ™¯å™ªéŸ³çš„å­—æ®µï¼Œè¿™é‡Œéœ€è¦å°†æˆ‘ä»¬çš„ä¸­æ–‡è½¬åŒ–ä¸ºå¯¹åº”çš„</span></span>
<span class="line"><span style="color:#E1E4E8;">    label </span><span style="color:#F97583;">===</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">&#39;èƒŒæ™¯å™ªéŸ³&#39;</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">?</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">&#39;_background_noise_&#39;</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">:</span><span style="color:#E1E4E8;"> label</span></span>
<span class="line"><span style="color:#E1E4E8;">  );</span></span>
<span class="line"><span style="color:#E1E4E8;">  btn.disabled </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">false</span><span style="color:#E1E4E8;">;</span></span>
<span class="line"><span style="color:#E1E4E8;">  document.</span><span style="color:#B392F0;">querySelector</span><span style="color:#E1E4E8;">(</span><span style="color:#9ECBFF;">&#39;#count&#39;</span><span style="color:#E1E4E8;">).innerHTML </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">JSON</span><span style="color:#E1E4E8;">.</span><span style="color:#B392F0;">stringify</span><span style="color:#E1E4E8;">(</span></span>
<span class="line"><span style="color:#E1E4E8;">    transferRecognizer.</span><span style="color:#B392F0;">countExamples</span><span style="color:#E1E4E8;">(),</span></span>
<span class="line"><span style="color:#E1E4E8;">    </span><span style="color:#79B8FF;">null</span><span style="color:#E1E4E8;">,</span></span>
<span class="line"><span style="color:#E1E4E8;">    </span><span style="color:#79B8FF;">2</span></span>
<span class="line"><span style="color:#E1E4E8;">  );</span></span>
<span class="line"><span style="color:#E1E4E8;">};</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#D73A49;">import</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">*</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">as</span><span style="color:#24292E;"> speechCommands </span><span style="color:#D73A49;">from</span><span style="color:#24292E;"> </span><span style="color:#032F62;">&#39;@tensorflow-models/speech-commands&#39;</span><span style="color:#24292E;">;</span></span>
<span class="line"><span style="color:#D73A49;">import</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">*</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">as</span><span style="color:#24292E;"> tfvis </span><span style="color:#D73A49;">from</span><span style="color:#24292E;"> </span><span style="color:#032F62;">&#39;@tensorflow/tfjs-vis&#39;</span><span style="color:#24292E;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#D73A49;">const</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">MODEL_PATH</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">=</span><span style="color:#24292E;"> </span><span style="color:#032F62;">&#39;http://127.0.0.1:8080&#39;</span><span style="color:#24292E;">;</span></span>
<span class="line"><span style="color:#6A737D;">// è¿ç§»å­¦ä¹ è¯†åˆ«å™¨</span></span>
<span class="line"><span style="color:#D73A49;">let</span><span style="color:#24292E;"> transferRecognizer;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D;">/**</span></span>
<span class="line"><span style="color:#6A737D;"> * åŠ è½½è¯­éŸ³è¯†åˆ«æ•°æ®</span></span>
<span class="line"><span style="color:#6A737D;"> */</span></span>
<span class="line"><span style="color:#24292E;">window.</span><span style="color:#6F42C1;">onload</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">=</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">async</span><span style="color:#24292E;"> () </span><span style="color:#D73A49;">=&gt;</span><span style="color:#24292E;"> {</span></span>
<span class="line"><span style="color:#24292E;">  </span><span style="color:#D73A49;">const</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">recognizer</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">=</span><span style="color:#24292E;"> speechCommands.</span><span style="color:#6F42C1;">create</span><span style="color:#24292E;">(</span></span>
<span class="line"><span style="color:#24292E;">    </span><span style="color:#032F62;">&#39;BROWSER_FFT&#39;</span><span style="color:#24292E;">,</span></span>
<span class="line"><span style="color:#24292E;">    </span><span style="color:#005CC5;">null</span><span style="color:#24292E;">,</span></span>
<span class="line"><span style="color:#24292E;">    </span><span style="color:#005CC5;">MODEL_PATH</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">+</span><span style="color:#24292E;"> </span><span style="color:#032F62;">&#39;/speech/model.json&#39;</span><span style="color:#24292E;">,</span></span>
<span class="line"><span style="color:#24292E;">    </span><span style="color:#005CC5;">MODEL_PATH</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">+</span><span style="color:#24292E;"> </span><span style="color:#032F62;">&#39;/speech/metadata.json&#39;</span></span>
<span class="line"><span style="color:#24292E;">  );</span></span>
<span class="line"><span style="color:#24292E;">  </span><span style="color:#D73A49;">await</span><span style="color:#24292E;"> recognizer.</span><span style="color:#6F42C1;">ensureModelLoaded</span><span style="color:#24292E;">();</span></span>
<span class="line"><span style="color:#24292E;">  transferRecognizer </span><span style="color:#D73A49;">=</span><span style="color:#24292E;"> recognizer.</span><span style="color:#6F42C1;">createTransfer</span><span style="color:#24292E;">(</span><span style="color:#032F62;">&#39;è½®æ’­å›¾&#39;</span><span style="color:#24292E;">);</span></span>
<span class="line"><span style="color:#24292E;">};</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D;">/**</span></span>
<span class="line"><span style="color:#6A737D;"> * æ”¶é›†ä¸­æ–‡è¯­éŸ³è®­ç»ƒæ•°æ®</span></span>
<span class="line"><span style="color:#6A737D;"> */</span></span>
<span class="line"><span style="color:#24292E;">window.</span><span style="color:#6F42C1;">collect</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">=</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">async</span><span style="color:#24292E;"> (</span><span style="color:#E36209;">btn</span><span style="color:#24292E;">) </span><span style="color:#D73A49;">=&gt;</span><span style="color:#24292E;"> {</span></span>
<span class="line"><span style="color:#24292E;">  </span><span style="color:#6A737D;">// ç‚¹å‡»ä¹‹åï¼Œè¦æŠŠå½“å‰æŒ‰é’®ç¦ç”¨æ‰</span></span>
<span class="line"><span style="color:#24292E;">  btn.disabled </span><span style="color:#D73A49;">=</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">true</span><span style="color:#24292E;">;</span></span>
<span class="line"><span style="color:#24292E;">  </span><span style="color:#D73A49;">const</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">label</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">=</span><span style="color:#24292E;"> btn.innerText;</span></span>
<span class="line"><span style="color:#24292E;">  </span><span style="color:#6A737D;">// è°ƒç”¨è¿ç§»å­¦ä¹ å™¨çš„collectExampleæ–¹æ³•ï¼Œå“¦çˆ±æ”¶é›†è¯­éŸ³çš„æ•°æ®</span></span>
<span class="line"><span style="color:#24292E;">  </span><span style="color:#D73A49;">await</span><span style="color:#24292E;"> transferRecognizer.</span><span style="color:#6F42C1;">collectExample</span><span style="color:#24292E;">(</span></span>
<span class="line"><span style="color:#24292E;">    </span><span style="color:#6A737D;">// speech-commandé‡Œé¢æœ‰ä¸€ä¸ªèƒŒæ™¯å™ªéŸ³çš„å­—æ®µï¼Œè¿™é‡Œéœ€è¦å°†æˆ‘ä»¬çš„ä¸­æ–‡è½¬åŒ–ä¸ºå¯¹åº”çš„</span></span>
<span class="line"><span style="color:#24292E;">    label </span><span style="color:#D73A49;">===</span><span style="color:#24292E;"> </span><span style="color:#032F62;">&#39;èƒŒæ™¯å™ªéŸ³&#39;</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">?</span><span style="color:#24292E;"> </span><span style="color:#032F62;">&#39;_background_noise_&#39;</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">:</span><span style="color:#24292E;"> label</span></span>
<span class="line"><span style="color:#24292E;">  );</span></span>
<span class="line"><span style="color:#24292E;">  btn.disabled </span><span style="color:#D73A49;">=</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">false</span><span style="color:#24292E;">;</span></span>
<span class="line"><span style="color:#24292E;">  document.</span><span style="color:#6F42C1;">querySelector</span><span style="color:#24292E;">(</span><span style="color:#032F62;">&#39;#count&#39;</span><span style="color:#24292E;">).innerHTML </span><span style="color:#D73A49;">=</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">JSON</span><span style="color:#24292E;">.</span><span style="color:#6F42C1;">stringify</span><span style="color:#24292E;">(</span></span>
<span class="line"><span style="color:#24292E;">    transferRecognizer.</span><span style="color:#6F42C1;">countExamples</span><span style="color:#24292E;">(),</span></span>
<span class="line"><span style="color:#24292E;">    </span><span style="color:#005CC5;">null</span><span style="color:#24292E;">,</span></span>
<span class="line"><span style="color:#24292E;">    </span><span style="color:#005CC5;">2</span></span>
<span class="line"><span style="color:#24292E;">  );</span></span>
<span class="line"><span style="color:#24292E;">};</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br><span class="line-number">40</span><br></div></div><p>ä¸‹é¢ï¼Œæˆ‘ä»¬æ¥çœ‹ä¸‹æ”¶é›†è¯­éŸ³çš„è¿‡ç¨‹ï¼š</p><p><img src="https://mondaylab-1309616765.cos.ap-shanghai.myqcloud.com/images/202407132228430.gif" alt="img"></p><p>ç‚¹å‡»æ¯ä¸ªæŒ‰é’®ï¼Œæµè§ˆå™¨ä¸Šé¢å°±ä¼šæœ‰ä¸€ä¸ª<strong>çº¢ç‚¹</strong>ç­‰å¾…æˆ‘ä»¬å»å½•åˆ¶å£°éŸ³ï¼Œç„¶åå½•åˆ¶å®Œæˆåï¼Œä¸‹é¢çš„<code>json</code>å°±ä¼šå¯¹åº”<code>+1</code>ã€‚ä¸€èˆ¬æ¥è¯´ï¼Œè¦æ¯ä¸€ç§æ”¶é›†å¤Ÿ<strong>30å¼ å·¦å³</strong>ï¼Œæœ€ç»ˆè¯†åˆ«çš„ç»“æœæ‰ä¼šç›¸å¯¹ç²¾ç¡®ä¸€äº›ã€‚</p><h1 id="ä¸‰ã€è¯­éŸ³ä¸–ç•Œè¿ç§»å­¦ä¹ çš„è®­ç»ƒå’Œé¢„æµ‹" tabindex="-1">ä¸‰ã€è¯­éŸ³ä¸–ç•Œè¿ç§»å­¦ä¹ çš„è®­ç»ƒå’Œé¢„æµ‹ <a class="header-anchor" href="#ä¸‰ã€è¯­éŸ³ä¸–ç•Œè¿ç§»å­¦ä¹ çš„è®­ç»ƒå’Œé¢„æµ‹" aria-label="Permalink to &quot;ä¸‰ã€è¯­éŸ³ä¸–ç•Œè¿ç§»å­¦ä¹ çš„è®­ç»ƒå’Œé¢„æµ‹&quot;">â€‹</a></h1><h2 id="_1ã€æ“ä½œæ­¥éª¤-1" tabindex="-1">1ã€æ“ä½œæ­¥éª¤ <a class="header-anchor" href="#_1ã€æ“ä½œæ­¥éª¤-1" aria-label="Permalink to &quot;1ã€æ“ä½œæ­¥éª¤&quot;">â€‹</a></h2><ul><li>ç¼–å†™ç•Œé¢ï¼Œç‚¹å‡»è®­ç»ƒæŒ‰é’®ï¼Œè°ƒç”¨è¿ç§»å­¦ä¹ å™¨çš„<strong>trainæ–¹æ³•</strong>è¿›è¡Œè¿ç§»å­¦ä¹ è®­ç»ƒ</li><li>ç¼–å†™ç•Œé¢ï¼Œç‚¹å‡»æ§ä»¶ï¼ˆæŒ‰é’®/å‹¾é€‰æ¡†/â€¦ï¼‰ï¼Œè°ƒç”¨<strong>listenæ–¹æ³•</strong>ä»æµè§ˆå™¨ç›‘å¬éº¦å…‹é£é¢„æµ‹</li><li>ç¼–å†™ç•Œé¢ï¼Œè°ƒç”¨<strong>stopListeningæ–¹æ³•</strong>æ¥åœæ­¢ç›‘å¬ï¼ˆä¸èƒ½è®©éº¦å…‹é£ä¸€ç›´å¼€ç€ï¼Œå£°éŸ³ç›‘å¬å®Œäº†å°±å¾—åœæ­¢æ‰ï¼‰</li></ul><h2 id="_2ã€è®­ç»ƒè¿‡ç¨‹-1" tabindex="-1">2ã€è®­ç»ƒè¿‡ç¨‹ <a class="header-anchor" href="#_2ã€è®­ç»ƒè¿‡ç¨‹-1" aria-label="Permalink to &quot;2ã€è®­ç»ƒè¿‡ç¨‹&quot;">â€‹</a></h2><p>ç»§ç»­å®Œå–„ä¸Šé¢çš„ä»£ç ï¼Œé¦–å…ˆæ˜¯<code>index.html</code>æ–‡ä»¶ï¼š</p><div class="language-HTML vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">HTML</span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#E1E4E8;">&lt;</span><span style="color:#85E89D;">script</span><span style="color:#E1E4E8;"> </span><span style="color:#B392F0;">src</span><span style="color:#E1E4E8;">=</span><span style="color:#9ECBFF;">&quot;script.js&quot;</span><span style="color:#E1E4E8;">&gt;&lt;/</span><span style="color:#85E89D;">script</span><span style="color:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="color:#E1E4E8;">&lt;</span><span style="color:#85E89D;">button</span><span style="color:#E1E4E8;"> </span><span style="color:#B392F0;">onclick</span><span style="color:#E1E4E8;">=</span><span style="color:#9ECBFF;">&quot;</span><span style="color:#B392F0;">collect</span><span style="color:#9ECBFF;">(</span><span style="color:#79B8FF;">this</span><span style="color:#9ECBFF;">)&quot;</span><span style="color:#E1E4E8;">&gt;ä¸Šä¸€å¼ &lt;/</span><span style="color:#85E89D;">button</span><span style="color:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="color:#E1E4E8;">&lt;</span><span style="color:#85E89D;">button</span><span style="color:#E1E4E8;"> </span><span style="color:#B392F0;">onclick</span><span style="color:#E1E4E8;">=</span><span style="color:#9ECBFF;">&quot;</span><span style="color:#B392F0;">collect</span><span style="color:#9ECBFF;">(</span><span style="color:#79B8FF;">this</span><span style="color:#9ECBFF;">)&quot;</span><span style="color:#E1E4E8;">&gt;ä¸‹ä¸€å¼ &lt;/</span><span style="color:#85E89D;">button</span><span style="color:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="color:#E1E4E8;">&lt;</span><span style="color:#85E89D;">button</span><span style="color:#E1E4E8;"> </span><span style="color:#B392F0;">onclick</span><span style="color:#E1E4E8;">=</span><span style="color:#9ECBFF;">&quot;</span><span style="color:#B392F0;">collect</span><span style="color:#9ECBFF;">(</span><span style="color:#79B8FF;">this</span><span style="color:#9ECBFF;">)&quot;</span><span style="color:#E1E4E8;">&gt;èƒŒæ™¯å™ªéŸ³&lt;/</span><span style="color:#85E89D;">button</span><span style="color:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="color:#E1E4E8;">&lt;</span><span style="color:#85E89D;">pre</span><span style="color:#E1E4E8;"> </span><span style="color:#B392F0;">id</span><span style="color:#E1E4E8;">=</span><span style="color:#9ECBFF;">&quot;count&quot;</span><span style="color:#E1E4E8;">&gt;&lt;/</span><span style="color:#85E89D;">pre</span><span style="color:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="color:#E1E4E8;">&lt;</span><span style="color:#85E89D;">button</span><span style="color:#E1E4E8;"> </span><span style="color:#B392F0;">onclick</span><span style="color:#E1E4E8;">=</span><span style="color:#9ECBFF;">&quot;</span><span style="color:#B392F0;">train</span><span style="color:#9ECBFF;">()&quot;</span><span style="color:#E1E4E8;">&gt;è®­ç»ƒ&lt;/</span><span style="color:#85E89D;">button</span><span style="color:#E1E4E8;">&gt;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#E1E4E8;">&lt;</span><span style="color:#85E89D;">br</span><span style="color:#E1E4E8;">&gt;&lt;</span><span style="color:#85E89D;">br</span><span style="color:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="color:#E1E4E8;">ç›‘å¬å¼€å…³ï¼š&lt;</span><span style="color:#85E89D;">input</span><span style="color:#E1E4E8;"> </span><span style="color:#B392F0;">type</span><span style="color:#E1E4E8;">=</span><span style="color:#9ECBFF;">&quot;checkbox&quot;</span><span style="color:#E1E4E8;"> </span><span style="color:#B392F0;">onchange</span><span style="color:#E1E4E8;">=</span><span style="color:#9ECBFF;">&quot;</span><span style="color:#B392F0;">toggle</span><span style="color:#9ECBFF;">(</span><span style="color:#79B8FF;">this</span><span style="color:#9ECBFF;">.</span><span style="color:#E1E4E8;">checked</span><span style="color:#9ECBFF;">)&quot;</span><span style="color:#E1E4E8;">&gt;</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#24292E;">&lt;</span><span style="color:#22863A;">script</span><span style="color:#24292E;"> </span><span style="color:#6F42C1;">src</span><span style="color:#24292E;">=</span><span style="color:#032F62;">&quot;script.js&quot;</span><span style="color:#24292E;">&gt;&lt;/</span><span style="color:#22863A;">script</span><span style="color:#24292E;">&gt;</span></span>
<span class="line"><span style="color:#24292E;">&lt;</span><span style="color:#22863A;">button</span><span style="color:#24292E;"> </span><span style="color:#6F42C1;">onclick</span><span style="color:#24292E;">=</span><span style="color:#032F62;">&quot;</span><span style="color:#6F42C1;">collect</span><span style="color:#032F62;">(</span><span style="color:#005CC5;">this</span><span style="color:#032F62;">)&quot;</span><span style="color:#24292E;">&gt;ä¸Šä¸€å¼ &lt;/</span><span style="color:#22863A;">button</span><span style="color:#24292E;">&gt;</span></span>
<span class="line"><span style="color:#24292E;">&lt;</span><span style="color:#22863A;">button</span><span style="color:#24292E;"> </span><span style="color:#6F42C1;">onclick</span><span style="color:#24292E;">=</span><span style="color:#032F62;">&quot;</span><span style="color:#6F42C1;">collect</span><span style="color:#032F62;">(</span><span style="color:#005CC5;">this</span><span style="color:#032F62;">)&quot;</span><span style="color:#24292E;">&gt;ä¸‹ä¸€å¼ &lt;/</span><span style="color:#22863A;">button</span><span style="color:#24292E;">&gt;</span></span>
<span class="line"><span style="color:#24292E;">&lt;</span><span style="color:#22863A;">button</span><span style="color:#24292E;"> </span><span style="color:#6F42C1;">onclick</span><span style="color:#24292E;">=</span><span style="color:#032F62;">&quot;</span><span style="color:#6F42C1;">collect</span><span style="color:#032F62;">(</span><span style="color:#005CC5;">this</span><span style="color:#032F62;">)&quot;</span><span style="color:#24292E;">&gt;èƒŒæ™¯å™ªéŸ³&lt;/</span><span style="color:#22863A;">button</span><span style="color:#24292E;">&gt;</span></span>
<span class="line"><span style="color:#24292E;">&lt;</span><span style="color:#22863A;">pre</span><span style="color:#24292E;"> </span><span style="color:#6F42C1;">id</span><span style="color:#24292E;">=</span><span style="color:#032F62;">&quot;count&quot;</span><span style="color:#24292E;">&gt;&lt;/</span><span style="color:#22863A;">pre</span><span style="color:#24292E;">&gt;</span></span>
<span class="line"><span style="color:#24292E;">&lt;</span><span style="color:#22863A;">button</span><span style="color:#24292E;"> </span><span style="color:#6F42C1;">onclick</span><span style="color:#24292E;">=</span><span style="color:#032F62;">&quot;</span><span style="color:#6F42C1;">train</span><span style="color:#032F62;">()&quot;</span><span style="color:#24292E;">&gt;è®­ç»ƒ&lt;/</span><span style="color:#22863A;">button</span><span style="color:#24292E;">&gt;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#24292E;">&lt;</span><span style="color:#22863A;">br</span><span style="color:#24292E;">&gt;&lt;</span><span style="color:#22863A;">br</span><span style="color:#24292E;">&gt;</span></span>
<span class="line"><span style="color:#24292E;">ç›‘å¬å¼€å…³ï¼š&lt;</span><span style="color:#22863A;">input</span><span style="color:#24292E;"> </span><span style="color:#6F42C1;">type</span><span style="color:#24292E;">=</span><span style="color:#032F62;">&quot;checkbox&quot;</span><span style="color:#24292E;"> </span><span style="color:#6F42C1;">onchange</span><span style="color:#24292E;">=</span><span style="color:#032F62;">&quot;</span><span style="color:#6F42C1;">toggle</span><span style="color:#032F62;">(</span><span style="color:#005CC5;">this</span><span style="color:#032F62;">.</span><span style="color:#24292E;">checked</span><span style="color:#032F62;">)&quot;</span><span style="color:#24292E;">&gt;</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br></div></div><p>ç„¶åå®Œå–„<code>script.js</code>çš„é€»è¾‘ï¼š</p><div class="language-JavaScript vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">JavaScript</span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#F97583;">import</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">*</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">as</span><span style="color:#E1E4E8;"> speechCommands </span><span style="color:#F97583;">from</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">&#39;@tensorflow-models/speech-commands&#39;</span><span style="color:#E1E4E8;">;</span></span>
<span class="line"><span style="color:#F97583;">import</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">*</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">as</span><span style="color:#E1E4E8;"> tfvis </span><span style="color:#F97583;">from</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">&#39;@tensorflow/tfjs-vis&#39;</span><span style="color:#E1E4E8;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F97583;">const</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">MODEL_PATH</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">&#39;http://127.0.0.1:8080&#39;</span><span style="color:#E1E4E8;">;</span></span>
<span class="line"><span style="color:#6A737D;">// è¿ç§»å­¦ä¹ è¯†åˆ«å™¨</span></span>
<span class="line"><span style="color:#F97583;">let</span><span style="color:#E1E4E8;"> transferRecognizer;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D;">/**</span></span>
<span class="line"><span style="color:#6A737D;"> * åŠ è½½è¯­éŸ³è¯†åˆ«æ•°æ®</span></span>
<span class="line"><span style="color:#6A737D;"> */</span></span>
<span class="line"><span style="color:#E1E4E8;">â€¦â€¦</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D;">/**</span></span>
<span class="line"><span style="color:#6A737D;"> * æ”¶é›†ä¸­æ–‡è¯­éŸ³è®­ç»ƒæ•°æ®</span></span>
<span class="line"><span style="color:#6A737D;"> */</span></span>
<span class="line"><span style="color:#E1E4E8;">â€¦â€¦</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D;">/**</span></span>
<span class="line"><span style="color:#6A737D;"> * è¯­éŸ³è¯†åˆ«è¿ç§»å­¦ä¹ çš„è®­ç»ƒ</span></span>
<span class="line"><span style="color:#6A737D;"> */</span></span>
<span class="line"><span style="color:#E1E4E8;">window.</span><span style="color:#B392F0;">train</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">async</span><span style="color:#E1E4E8;"> () </span><span style="color:#F97583;">=&gt;</span><span style="color:#E1E4E8;"> {</span></span>
<span class="line"><span style="color:#E1E4E8;">  </span><span style="color:#F97583;">await</span><span style="color:#E1E4E8;"> transferRecognizer.</span><span style="color:#B392F0;">train</span><span style="color:#E1E4E8;">({</span></span>
<span class="line"><span style="color:#E1E4E8;">    epochs: </span><span style="color:#79B8FF;">30</span><span style="color:#E1E4E8;">,</span></span>
<span class="line"><span style="color:#E1E4E8;">    callback: tfvis.show.</span><span style="color:#B392F0;">fitCallbacks</span><span style="color:#E1E4E8;">(</span></span>
<span class="line"><span style="color:#E1E4E8;">      { name: </span><span style="color:#9ECBFF;">&#39;è®­ç»ƒæ•ˆæœ&#39;</span><span style="color:#E1E4E8;"> },</span></span>
<span class="line"><span style="color:#E1E4E8;">      [</span><span style="color:#9ECBFF;">&#39;loss&#39;</span><span style="color:#E1E4E8;">, </span><span style="color:#9ECBFF;">&#39;acc&#39;</span><span style="color:#E1E4E8;">], </span><span style="color:#6A737D;">// æŸå¤±ç‡å’Œç²¾ç¡®ç‡</span></span>
<span class="line"><span style="color:#E1E4E8;">      {</span></span>
<span class="line"><span style="color:#E1E4E8;">        callbacks: [</span><span style="color:#9ECBFF;">&#39;onEpochEnd&#39;</span><span style="color:#E1E4E8;">]</span></span>
<span class="line"><span style="color:#E1E4E8;">      }</span></span>
<span class="line"><span style="color:#E1E4E8;">    )</span></span>
<span class="line"><span style="color:#E1E4E8;">  });</span></span>
<span class="line"><span style="color:#E1E4E8;">};</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D;">/**</span></span>
<span class="line"><span style="color:#6A737D;"> * ç›‘å¬è¿‡ç¨‹</span></span>
<span class="line"><span style="color:#6A737D;"> * </span><span style="color:#F97583;">@param</span><span style="color:#6A737D;"> </span><span style="color:#B392F0;">{*}</span><span style="color:#6A737D;"> </span><span style="color:#E1E4E8;">checked</span></span>
<span class="line"><span style="color:#6A737D;"> */</span></span>
<span class="line"><span style="color:#E1E4E8;">window.</span><span style="color:#B392F0;">toggle</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">async</span><span style="color:#E1E4E8;"> (</span><span style="color:#FFAB70;">checked</span><span style="color:#E1E4E8;">) </span><span style="color:#F97583;">=&gt;</span><span style="color:#E1E4E8;"> {</span></span>
<span class="line"><span style="color:#E1E4E8;">  </span><span style="color:#6A737D;">// å¼€å§‹ç›‘å¬</span></span>
<span class="line"><span style="color:#E1E4E8;">  </span><span style="color:#F97583;">if</span><span style="color:#E1E4E8;"> (checked) {</span></span>
<span class="line"><span style="color:#E1E4E8;">    </span><span style="color:#F97583;">await</span><span style="color:#E1E4E8;"> transferRecognizer.</span><span style="color:#B392F0;">listen</span><span style="color:#E1E4E8;">(</span></span>
<span class="line"><span style="color:#E1E4E8;">      (</span><span style="color:#FFAB70;">result</span><span style="color:#E1E4E8;">) </span><span style="color:#F97583;">=&gt;</span><span style="color:#E1E4E8;"> {</span></span>
<span class="line"><span style="color:#E1E4E8;">        </span><span style="color:#F97583;">const</span><span style="color:#E1E4E8;"> { </span><span style="color:#79B8FF;">scores</span><span style="color:#E1E4E8;"> } </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> result;</span></span>
<span class="line"><span style="color:#E1E4E8;">        </span><span style="color:#F97583;">const</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">labels</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> transferRecognizer.</span><span style="color:#B392F0;">wordLabels</span><span style="color:#E1E4E8;">();</span></span>
<span class="line"><span style="color:#E1E4E8;">        </span><span style="color:#F97583;">const</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">index</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> scores.</span><span style="color:#B392F0;">indexOf</span><span style="color:#E1E4E8;">(Math.</span><span style="color:#B392F0;">max</span><span style="color:#E1E4E8;">(</span><span style="color:#F97583;">...</span><span style="color:#E1E4E8;">scores));</span></span>
<span class="line"><span style="color:#E1E4E8;">        console.</span><span style="color:#B392F0;">log</span><span style="color:#E1E4E8;">(labels[index]);</span></span>
<span class="line"><span style="color:#E1E4E8;">      },</span></span>
<span class="line"><span style="color:#E1E4E8;">      {</span></span>
<span class="line"><span style="color:#E1E4E8;">        overlapFactor: </span><span style="color:#79B8FF;">0</span><span style="color:#E1E4E8;">, </span><span style="color:#6A737D;">// æ§åˆ¶è¯†åˆ«é¢‘ç‡ 0-1 ï¼ˆ0è¡¨ç¤ºä¸è¦è¯†åˆ«çš„å¤ªé¢‘ç¹ï¼‰</span></span>
<span class="line"><span style="color:#E1E4E8;">        probabilityThreshold: </span><span style="color:#79B8FF;">0.75</span><span style="color:#E1E4E8;"> </span><span style="color:#6A737D;">// å¯èƒ½æ€§é˜ˆå€¼</span></span>
<span class="line"><span style="color:#E1E4E8;">      }</span></span>
<span class="line"><span style="color:#E1E4E8;">    );</span></span>
<span class="line"><span style="color:#E1E4E8;">  }</span></span>
<span class="line"><span style="color:#E1E4E8;">  </span><span style="color:#6A737D;">// åœæ­¢ç›‘å¬â¹</span></span>
<span class="line"><span style="color:#E1E4E8;">  </span><span style="color:#F97583;">else</span><span style="color:#E1E4E8;"> {</span></span>
<span class="line"><span style="color:#E1E4E8;">    transferRecognizer.</span><span style="color:#B392F0;">stopListening</span><span style="color:#E1E4E8;">();</span></span>
<span class="line"><span style="color:#E1E4E8;">  }</span></span>
<span class="line"><span style="color:#E1E4E8;">};</span></span>
<span class="line"></span>
<span class="line"></span>
<span class="line"><span style="color:#E1E4E8;">};</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#D73A49;">import</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">*</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">as</span><span style="color:#24292E;"> speechCommands </span><span style="color:#D73A49;">from</span><span style="color:#24292E;"> </span><span style="color:#032F62;">&#39;@tensorflow-models/speech-commands&#39;</span><span style="color:#24292E;">;</span></span>
<span class="line"><span style="color:#D73A49;">import</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">*</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">as</span><span style="color:#24292E;"> tfvis </span><span style="color:#D73A49;">from</span><span style="color:#24292E;"> </span><span style="color:#032F62;">&#39;@tensorflow/tfjs-vis&#39;</span><span style="color:#24292E;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#D73A49;">const</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">MODEL_PATH</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">=</span><span style="color:#24292E;"> </span><span style="color:#032F62;">&#39;http://127.0.0.1:8080&#39;</span><span style="color:#24292E;">;</span></span>
<span class="line"><span style="color:#6A737D;">// è¿ç§»å­¦ä¹ è¯†åˆ«å™¨</span></span>
<span class="line"><span style="color:#D73A49;">let</span><span style="color:#24292E;"> transferRecognizer;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D;">/**</span></span>
<span class="line"><span style="color:#6A737D;"> * åŠ è½½è¯­éŸ³è¯†åˆ«æ•°æ®</span></span>
<span class="line"><span style="color:#6A737D;"> */</span></span>
<span class="line"><span style="color:#24292E;">â€¦â€¦</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D;">/**</span></span>
<span class="line"><span style="color:#6A737D;"> * æ”¶é›†ä¸­æ–‡è¯­éŸ³è®­ç»ƒæ•°æ®</span></span>
<span class="line"><span style="color:#6A737D;"> */</span></span>
<span class="line"><span style="color:#24292E;">â€¦â€¦</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D;">/**</span></span>
<span class="line"><span style="color:#6A737D;"> * è¯­éŸ³è¯†åˆ«è¿ç§»å­¦ä¹ çš„è®­ç»ƒ</span></span>
<span class="line"><span style="color:#6A737D;"> */</span></span>
<span class="line"><span style="color:#24292E;">window.</span><span style="color:#6F42C1;">train</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">=</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">async</span><span style="color:#24292E;"> () </span><span style="color:#D73A49;">=&gt;</span><span style="color:#24292E;"> {</span></span>
<span class="line"><span style="color:#24292E;">  </span><span style="color:#D73A49;">await</span><span style="color:#24292E;"> transferRecognizer.</span><span style="color:#6F42C1;">train</span><span style="color:#24292E;">({</span></span>
<span class="line"><span style="color:#24292E;">    epochs: </span><span style="color:#005CC5;">30</span><span style="color:#24292E;">,</span></span>
<span class="line"><span style="color:#24292E;">    callback: tfvis.show.</span><span style="color:#6F42C1;">fitCallbacks</span><span style="color:#24292E;">(</span></span>
<span class="line"><span style="color:#24292E;">      { name: </span><span style="color:#032F62;">&#39;è®­ç»ƒæ•ˆæœ&#39;</span><span style="color:#24292E;"> },</span></span>
<span class="line"><span style="color:#24292E;">      [</span><span style="color:#032F62;">&#39;loss&#39;</span><span style="color:#24292E;">, </span><span style="color:#032F62;">&#39;acc&#39;</span><span style="color:#24292E;">], </span><span style="color:#6A737D;">// æŸå¤±ç‡å’Œç²¾ç¡®ç‡</span></span>
<span class="line"><span style="color:#24292E;">      {</span></span>
<span class="line"><span style="color:#24292E;">        callbacks: [</span><span style="color:#032F62;">&#39;onEpochEnd&#39;</span><span style="color:#24292E;">]</span></span>
<span class="line"><span style="color:#24292E;">      }</span></span>
<span class="line"><span style="color:#24292E;">    )</span></span>
<span class="line"><span style="color:#24292E;">  });</span></span>
<span class="line"><span style="color:#24292E;">};</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D;">/**</span></span>
<span class="line"><span style="color:#6A737D;"> * ç›‘å¬è¿‡ç¨‹</span></span>
<span class="line"><span style="color:#6A737D;"> * </span><span style="color:#D73A49;">@param</span><span style="color:#6A737D;"> </span><span style="color:#6F42C1;">{*}</span><span style="color:#6A737D;"> </span><span style="color:#24292E;">checked</span></span>
<span class="line"><span style="color:#6A737D;"> */</span></span>
<span class="line"><span style="color:#24292E;">window.</span><span style="color:#6F42C1;">toggle</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">=</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">async</span><span style="color:#24292E;"> (</span><span style="color:#E36209;">checked</span><span style="color:#24292E;">) </span><span style="color:#D73A49;">=&gt;</span><span style="color:#24292E;"> {</span></span>
<span class="line"><span style="color:#24292E;">  </span><span style="color:#6A737D;">// å¼€å§‹ç›‘å¬</span></span>
<span class="line"><span style="color:#24292E;">  </span><span style="color:#D73A49;">if</span><span style="color:#24292E;"> (checked) {</span></span>
<span class="line"><span style="color:#24292E;">    </span><span style="color:#D73A49;">await</span><span style="color:#24292E;"> transferRecognizer.</span><span style="color:#6F42C1;">listen</span><span style="color:#24292E;">(</span></span>
<span class="line"><span style="color:#24292E;">      (</span><span style="color:#E36209;">result</span><span style="color:#24292E;">) </span><span style="color:#D73A49;">=&gt;</span><span style="color:#24292E;"> {</span></span>
<span class="line"><span style="color:#24292E;">        </span><span style="color:#D73A49;">const</span><span style="color:#24292E;"> { </span><span style="color:#005CC5;">scores</span><span style="color:#24292E;"> } </span><span style="color:#D73A49;">=</span><span style="color:#24292E;"> result;</span></span>
<span class="line"><span style="color:#24292E;">        </span><span style="color:#D73A49;">const</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">labels</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">=</span><span style="color:#24292E;"> transferRecognizer.</span><span style="color:#6F42C1;">wordLabels</span><span style="color:#24292E;">();</span></span>
<span class="line"><span style="color:#24292E;">        </span><span style="color:#D73A49;">const</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">index</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">=</span><span style="color:#24292E;"> scores.</span><span style="color:#6F42C1;">indexOf</span><span style="color:#24292E;">(Math.</span><span style="color:#6F42C1;">max</span><span style="color:#24292E;">(</span><span style="color:#D73A49;">...</span><span style="color:#24292E;">scores));</span></span>
<span class="line"><span style="color:#24292E;">        console.</span><span style="color:#6F42C1;">log</span><span style="color:#24292E;">(labels[index]);</span></span>
<span class="line"><span style="color:#24292E;">      },</span></span>
<span class="line"><span style="color:#24292E;">      {</span></span>
<span class="line"><span style="color:#24292E;">        overlapFactor: </span><span style="color:#005CC5;">0</span><span style="color:#24292E;">, </span><span style="color:#6A737D;">// æ§åˆ¶è¯†åˆ«é¢‘ç‡ 0-1 ï¼ˆ0è¡¨ç¤ºä¸è¦è¯†åˆ«çš„å¤ªé¢‘ç¹ï¼‰</span></span>
<span class="line"><span style="color:#24292E;">        probabilityThreshold: </span><span style="color:#005CC5;">0.75</span><span style="color:#24292E;"> </span><span style="color:#6A737D;">// å¯èƒ½æ€§é˜ˆå€¼</span></span>
<span class="line"><span style="color:#24292E;">      }</span></span>
<span class="line"><span style="color:#24292E;">    );</span></span>
<span class="line"><span style="color:#24292E;">  }</span></span>
<span class="line"><span style="color:#24292E;">  </span><span style="color:#6A737D;">// åœæ­¢ç›‘å¬â¹</span></span>
<span class="line"><span style="color:#24292E;">  </span><span style="color:#D73A49;">else</span><span style="color:#24292E;"> {</span></span>
<span class="line"><span style="color:#24292E;">    transferRecognizer.</span><span style="color:#6F42C1;">stopListening</span><span style="color:#24292E;">();</span></span>
<span class="line"><span style="color:#24292E;">  }</span></span>
<span class="line"><span style="color:#24292E;">};</span></span>
<span class="line"></span>
<span class="line"></span>
<span class="line"><span style="color:#24292E;">};</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br><span class="line-number">40</span><br><span class="line-number">41</span><br><span class="line-number">42</span><br><span class="line-number">43</span><br><span class="line-number">44</span><br><span class="line-number">45</span><br><span class="line-number">46</span><br><span class="line-number">47</span><br><span class="line-number">48</span><br><span class="line-number">49</span><br><span class="line-number">50</span><br><span class="line-number">51</span><br><span class="line-number">52</span><br><span class="line-number">53</span><br><span class="line-number">54</span><br><span class="line-number">55</span><br><span class="line-number">56</span><br><span class="line-number">57</span><br><span class="line-number">58</span><br><span class="line-number">59</span><br><span class="line-number">60</span><br><span class="line-number">61</span><br></div></div><p>åœ¨ä¸Šé¢çš„ä»£ç ä¸­ï¼Œæˆ‘ä»¬è®¾ç½®äº†ä¸€ä¸ªè®­ç»ƒæŒ‰é’®ï¼Œæ¥è§¦å‘<code>train</code>æ–¹æ³•ï¼Œä»¥æ­¤å®Œæˆè®­ç»ƒã€‚<strong>å¦‚ä¸‹å›¾æ‰€ç¤ºï¼š</strong></p><p><img src="https://mondaylab-1309616765.cos.ap-shanghai.myqcloud.com/images/202407132229592.png" alt="img"></p><p>ä¹‹åï¼Œæˆ‘ä»¬æ¥å†™äº†ä¸€ä¸ªå‹¾é€‰æ¡†<code>checkbox</code>ï¼Œæ¥æ§åˆ¶<strong>ç›‘å¬èŒƒå›´</strong>ã€‚å‹¾é€‰çš„æ—¶å€™å¼€å§‹ç›‘å¬ï¼Œä¸å‹¾é€‰çš„æ—¶å€™å°±åœæ­¢ç›‘å¬ã€‚<strong>å¦‚ä¸‹å›¾æ‰€ç¤ºï¼š</strong></p><p><img src="https://mondaylab-1309616765.cos.ap-shanghai.myqcloud.com/images/202407132229319.png" alt="img"></p><p>è‡³æ­¤ï¼Œæˆ‘ä»¬å°±å®Œæˆäº†åœ¨è¿ç§»å­¦ä¹ ä¸‹ï¼Œè¯­éŸ³çš„<strong>è®­ç»ƒ</strong>å’Œ<strong>é¢„æµ‹</strong>ã€‚</p><h1 id="å››ã€è¯­éŸ³è®­ç»ƒæ•°æ®çš„ä¿å­˜å’ŒåŠ è½½" tabindex="-1">å››ã€è¯­éŸ³è®­ç»ƒæ•°æ®çš„ä¿å­˜å’ŒåŠ è½½ <a class="header-anchor" href="#å››ã€è¯­éŸ³è®­ç»ƒæ•°æ®çš„ä¿å­˜å’ŒåŠ è½½" aria-label="Permalink to &quot;å››ã€è¯­éŸ³è®­ç»ƒæ•°æ®çš„ä¿å­˜å’ŒåŠ è½½&quot;">â€‹</a></h1><h2 id="_1ã€æ“ä½œæ­¥éª¤-2" tabindex="-1">1ã€æ“ä½œæ­¥éª¤ <a class="header-anchor" href="#_1ã€æ“ä½œæ­¥éª¤-2" aria-label="Permalink to &quot;1ã€æ“ä½œæ­¥éª¤&quot;">â€‹</a></h2><ul><li>ä¿å­˜è¯­éŸ³è®­ç»ƒæ•°æ®åˆ°æ–‡ä»¶ â€”â€” <code>speech command</code>åŒ…æä¾›äº†ç›¸å…³çš„æ–¹æ³•ï¼Œå¯ä»¥æŠŠä¸€äº›è®­ç»ƒæ•°æ®ï¼Œæ¯”å¦‚é‡‡é›†å¥½çš„è®­ç»ƒæ•°æ®ï¼Œç»™åºåˆ—åŒ–æˆäºŒè¿›åˆ¶çš„æ•°æ®ï¼Œè€Œè¿™ä¸ªäºŒè¿›åˆ¶çš„æ•°æ®æ˜¯<code>JS</code>ä¸­<code>ArrayBuffer</code>æ ¼å¼çš„æ•°æ®ã€‚</li><li>åŠ è½½è¯­éŸ³è®­ç»ƒæ•°æ®åˆ°æ¨¡å‹ â€”â€” æŠŠä¸Šé¢<strong>äºŒè¿›åˆ¶çš„æ•°æ®</strong>ä¿å­˜æˆä¸€ä¸ª<strong>äºŒè¿›åˆ¶æ–‡ä»¶</strong>ï¼Œç„¶åå°†è¿™ä¸ªæ–‡ä»¶ä¸¢åˆ°æˆ‘ä»¬çš„é™æ€æœåŠ¡å™¨é‡Œé¢ã€‚ä¹‹åé€šè¿‡<code>fetch</code>æ–¹æ³•ï¼Œæ¥è·å–è¯·æ±‚åå“åº”çš„ç»“æœã€‚</li><li>é€šè¿‡åŠ è½½çš„è¯­éŸ³æ•°æ®è¿›è¡Œè®­ç»ƒå’Œé¢„æµ‹ â€”â€” ä¿å­˜åçš„æ•°æ®å°±å¯ä»¥ä¸ç”¨æ¯æ¬¡éƒ½å½•å…¥äº†ï¼Œç„¶åæˆ‘ä»¬å°±å¯ä»¥å¯¹è¿™äº›æ•°æ®è¿›è¡Œè®­ç»ƒå’Œé¢„æµ‹ã€‚</li></ul><h2 id="_2ã€è®­ç»ƒè¿‡ç¨‹-2" tabindex="-1">2ã€è®­ç»ƒè¿‡ç¨‹ <a class="header-anchor" href="#_2ã€è®­ç»ƒè¿‡ç¨‹-2" aria-label="Permalink to &quot;2ã€è®­ç»ƒè¿‡ç¨‹&quot;">â€‹</a></h2><h3 id="_1-ä¿å­˜è¯­éŸ³è®­ç»ƒæ•°æ®" tabindex="-1">ï¼ˆ1ï¼‰ä¿å­˜è¯­éŸ³è®­ç»ƒæ•°æ® <a class="header-anchor" href="#_1-ä¿å­˜è¯­éŸ³è®­ç»ƒæ•°æ®" aria-label="Permalink to &quot;ï¼ˆ1ï¼‰ä¿å­˜è¯­éŸ³è®­ç»ƒæ•°æ®&quot;">â€‹</a></h3><p>ç»§ç»­å®Œå–„ä¸Šé¢çš„ä»£ç ï¼Œé¦–å…ˆæ˜¯<code>index.html</code>æ–‡ä»¶ï¼ŒåŠ ä¸ªä¿å­˜æŒ‰é’®ã€‚å¦‚ä¸‹ä»£ç æ‰€ç¤ºï¼š</p><div class="language-HTML vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">HTML</span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#E1E4E8;">&lt;</span><span style="color:#85E89D;">script</span><span style="color:#E1E4E8;"> </span><span style="color:#B392F0;">src</span><span style="color:#E1E4E8;">=</span><span style="color:#9ECBFF;">&quot;script.js&quot;</span><span style="color:#E1E4E8;">&gt;&lt;/</span><span style="color:#85E89D;">script</span><span style="color:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="color:#E1E4E8;">&lt;</span><span style="color:#85E89D;">button</span><span style="color:#E1E4E8;"> </span><span style="color:#B392F0;">onclick</span><span style="color:#E1E4E8;">=</span><span style="color:#9ECBFF;">&quot;</span><span style="color:#B392F0;">collect</span><span style="color:#9ECBFF;">(</span><span style="color:#79B8FF;">this</span><span style="color:#9ECBFF;">)&quot;</span><span style="color:#E1E4E8;">&gt;ä¸Šä¸€å¼ &lt;/</span><span style="color:#85E89D;">button</span><span style="color:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="color:#E1E4E8;">&lt;</span><span style="color:#85E89D;">button</span><span style="color:#E1E4E8;"> </span><span style="color:#B392F0;">onclick</span><span style="color:#E1E4E8;">=</span><span style="color:#9ECBFF;">&quot;</span><span style="color:#B392F0;">collect</span><span style="color:#9ECBFF;">(</span><span style="color:#79B8FF;">this</span><span style="color:#9ECBFF;">)&quot;</span><span style="color:#E1E4E8;">&gt;ä¸‹ä¸€å¼ &lt;/</span><span style="color:#85E89D;">button</span><span style="color:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="color:#E1E4E8;">&lt;</span><span style="color:#85E89D;">button</span><span style="color:#E1E4E8;"> </span><span style="color:#B392F0;">onclick</span><span style="color:#E1E4E8;">=</span><span style="color:#9ECBFF;">&quot;</span><span style="color:#B392F0;">collect</span><span style="color:#9ECBFF;">(</span><span style="color:#79B8FF;">this</span><span style="color:#9ECBFF;">)&quot;</span><span style="color:#E1E4E8;">&gt;èƒŒæ™¯å™ªéŸ³&lt;/</span><span style="color:#85E89D;">button</span><span style="color:#E1E4E8;">&gt;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D;">&lt;!-- åŠ åœ¨è¿™é‡Œ --&gt;</span></span>
<span class="line"><span style="color:#E1E4E8;">&lt;</span><span style="color:#85E89D;">button</span><span style="color:#E1E4E8;"> </span><span style="color:#B392F0;">onclick</span><span style="color:#E1E4E8;">=</span><span style="color:#9ECBFF;">&quot;</span><span style="color:#B392F0;">save</span><span style="color:#9ECBFF;">()&quot;</span><span style="color:#E1E4E8;">&gt;ä¿å­˜&lt;/</span><span style="color:#85E89D;">button</span><span style="color:#E1E4E8;">&gt;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#E1E4E8;">&lt;</span><span style="color:#85E89D;">pre</span><span style="color:#E1E4E8;"> </span><span style="color:#B392F0;">id</span><span style="color:#E1E4E8;">=</span><span style="color:#9ECBFF;">&quot;count&quot;</span><span style="color:#E1E4E8;">&gt;&lt;/</span><span style="color:#85E89D;">pre</span><span style="color:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="color:#E1E4E8;">&lt;</span><span style="color:#85E89D;">button</span><span style="color:#E1E4E8;"> </span><span style="color:#B392F0;">onclick</span><span style="color:#E1E4E8;">=</span><span style="color:#9ECBFF;">&quot;</span><span style="color:#B392F0;">train</span><span style="color:#9ECBFF;">()&quot;</span><span style="color:#E1E4E8;">&gt;è®­ç»ƒ&lt;/</span><span style="color:#85E89D;">button</span><span style="color:#E1E4E8;">&gt;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#E1E4E8;">&lt;</span><span style="color:#85E89D;">br</span><span style="color:#E1E4E8;">&gt;&lt;</span><span style="color:#85E89D;">br</span><span style="color:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="color:#E1E4E8;">ç›‘å¬å¼€å…³ï¼š&lt;</span><span style="color:#85E89D;">input</span><span style="color:#E1E4E8;"> </span><span style="color:#B392F0;">type</span><span style="color:#E1E4E8;">=</span><span style="color:#9ECBFF;">&quot;checkbox&quot;</span><span style="color:#E1E4E8;"> </span><span style="color:#B392F0;">onchange</span><span style="color:#E1E4E8;">=</span><span style="color:#9ECBFF;">&quot;</span><span style="color:#B392F0;">toggle</span><span style="color:#9ECBFF;">(</span><span style="color:#79B8FF;">this</span><span style="color:#9ECBFF;">.</span><span style="color:#E1E4E8;">checked</span><span style="color:#9ECBFF;">)&quot;</span><span style="color:#E1E4E8;">&gt;</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#24292E;">&lt;</span><span style="color:#22863A;">script</span><span style="color:#24292E;"> </span><span style="color:#6F42C1;">src</span><span style="color:#24292E;">=</span><span style="color:#032F62;">&quot;script.js&quot;</span><span style="color:#24292E;">&gt;&lt;/</span><span style="color:#22863A;">script</span><span style="color:#24292E;">&gt;</span></span>
<span class="line"><span style="color:#24292E;">&lt;</span><span style="color:#22863A;">button</span><span style="color:#24292E;"> </span><span style="color:#6F42C1;">onclick</span><span style="color:#24292E;">=</span><span style="color:#032F62;">&quot;</span><span style="color:#6F42C1;">collect</span><span style="color:#032F62;">(</span><span style="color:#005CC5;">this</span><span style="color:#032F62;">)&quot;</span><span style="color:#24292E;">&gt;ä¸Šä¸€å¼ &lt;/</span><span style="color:#22863A;">button</span><span style="color:#24292E;">&gt;</span></span>
<span class="line"><span style="color:#24292E;">&lt;</span><span style="color:#22863A;">button</span><span style="color:#24292E;"> </span><span style="color:#6F42C1;">onclick</span><span style="color:#24292E;">=</span><span style="color:#032F62;">&quot;</span><span style="color:#6F42C1;">collect</span><span style="color:#032F62;">(</span><span style="color:#005CC5;">this</span><span style="color:#032F62;">)&quot;</span><span style="color:#24292E;">&gt;ä¸‹ä¸€å¼ &lt;/</span><span style="color:#22863A;">button</span><span style="color:#24292E;">&gt;</span></span>
<span class="line"><span style="color:#24292E;">&lt;</span><span style="color:#22863A;">button</span><span style="color:#24292E;"> </span><span style="color:#6F42C1;">onclick</span><span style="color:#24292E;">=</span><span style="color:#032F62;">&quot;</span><span style="color:#6F42C1;">collect</span><span style="color:#032F62;">(</span><span style="color:#005CC5;">this</span><span style="color:#032F62;">)&quot;</span><span style="color:#24292E;">&gt;èƒŒæ™¯å™ªéŸ³&lt;/</span><span style="color:#22863A;">button</span><span style="color:#24292E;">&gt;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D;">&lt;!-- åŠ åœ¨è¿™é‡Œ --&gt;</span></span>
<span class="line"><span style="color:#24292E;">&lt;</span><span style="color:#22863A;">button</span><span style="color:#24292E;"> </span><span style="color:#6F42C1;">onclick</span><span style="color:#24292E;">=</span><span style="color:#032F62;">&quot;</span><span style="color:#6F42C1;">save</span><span style="color:#032F62;">()&quot;</span><span style="color:#24292E;">&gt;ä¿å­˜&lt;/</span><span style="color:#22863A;">button</span><span style="color:#24292E;">&gt;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#24292E;">&lt;</span><span style="color:#22863A;">pre</span><span style="color:#24292E;"> </span><span style="color:#6F42C1;">id</span><span style="color:#24292E;">=</span><span style="color:#032F62;">&quot;count&quot;</span><span style="color:#24292E;">&gt;&lt;/</span><span style="color:#22863A;">pre</span><span style="color:#24292E;">&gt;</span></span>
<span class="line"><span style="color:#24292E;">&lt;</span><span style="color:#22863A;">button</span><span style="color:#24292E;"> </span><span style="color:#6F42C1;">onclick</span><span style="color:#24292E;">=</span><span style="color:#032F62;">&quot;</span><span style="color:#6F42C1;">train</span><span style="color:#032F62;">()&quot;</span><span style="color:#24292E;">&gt;è®­ç»ƒ&lt;/</span><span style="color:#22863A;">button</span><span style="color:#24292E;">&gt;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#24292E;">&lt;</span><span style="color:#22863A;">br</span><span style="color:#24292E;">&gt;&lt;</span><span style="color:#22863A;">br</span><span style="color:#24292E;">&gt;</span></span>
<span class="line"><span style="color:#24292E;">ç›‘å¬å¼€å…³ï¼š&lt;</span><span style="color:#22863A;">input</span><span style="color:#24292E;"> </span><span style="color:#6F42C1;">type</span><span style="color:#24292E;">=</span><span style="color:#032F62;">&quot;checkbox&quot;</span><span style="color:#24292E;"> </span><span style="color:#6F42C1;">onchange</span><span style="color:#24292E;">=</span><span style="color:#032F62;">&quot;</span><span style="color:#6F42C1;">toggle</span><span style="color:#032F62;">(</span><span style="color:#005CC5;">this</span><span style="color:#032F62;">.</span><span style="color:#24292E;">checked</span><span style="color:#032F62;">)&quot;</span><span style="color:#24292E;">&gt;</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br></div></div><p>ç„¶åå®Œå–„<code>script.js</code>çš„é€»è¾‘ï¼Œå¢åŠ ä¿å­˜é€»è¾‘ã€‚å¦‚ä¸‹ä»£ç æ‰€ç¤ºï¼š</p><div class="language-JavaScript vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">JavaScript</span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#E1E4E8;">window.</span><span style="color:#B392F0;">save</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> () </span><span style="color:#F97583;">=&gt;</span><span style="color:#E1E4E8;"> {</span></span>
<span class="line"><span style="color:#E1E4E8;">  </span><span style="color:#6A737D;">// æŠŠé‡‡é›†å¥½çš„æ•°æ®åºåˆ—åŒ–ä¸ºäºŒè¿›åˆ¶æ•°æ®ï¼ˆArrayBufferæ ¼å¼ï¼‰</span></span>
<span class="line"><span style="color:#E1E4E8;">  </span><span style="color:#F97583;">const</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">arrayBuffer</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> transferRecognizer.</span><span style="color:#B392F0;">serializeExamples</span><span style="color:#E1E4E8;">();</span></span>
<span class="line"><span style="color:#E1E4E8;">  </span><span style="color:#6A737D;">// å…ˆè½¬ä¸ºblobæ ¼å¼ï¼ˆè¿™ç§æ ¼å¼ä¸»è¦ä¸ºä¸‹è½½åšå‡†å¤‡ï¼‰</span></span>
<span class="line"><span style="color:#E1E4E8;">  </span><span style="color:#F97583;">const</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">blob</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">new</span><span style="color:#E1E4E8;"> </span><span style="color:#B392F0;">Blob</span><span style="color:#E1E4E8;">([arrayBuffer]);</span></span>
<span class="line"><span style="color:#E1E4E8;">  </span><span style="color:#6A737D;">// åœ¨JSé‡Œé¢åˆ›å»ºaæ ‡ç­¾ï¼Œæ¥æ¨¡æ‹Ÿç‚¹å‡»aæ ‡ç­¾ä¹‹åä¸‹è½½çš„åŠŸèƒ½</span></span>
<span class="line"><span style="color:#E1E4E8;">  </span><span style="color:#F97583;">const</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">link</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> document.</span><span style="color:#B392F0;">createElement</span><span style="color:#E1E4E8;">(</span><span style="color:#9ECBFF;">&#39;a&#39;</span><span style="color:#E1E4E8;">);</span></span>
<span class="line"><span style="color:#E1E4E8;">  link.href </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> window.</span><span style="color:#79B8FF;">URL</span><span style="color:#E1E4E8;">.</span><span style="color:#B392F0;">createObjectURL</span><span style="color:#E1E4E8;">(blob);</span></span>
<span class="line"><span style="color:#E1E4E8;">  </span><span style="color:#6A737D;">// binåç¼€ä¸»è¦æ˜¯ä¸ºäº†ä½“ç°å…¶æ˜¯äºŒè¿›åˆ¶æ ¼å¼</span></span>
<span class="line"><span style="color:#E1E4E8;">  link.download </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">&#39;data.bin&#39;</span><span style="color:#E1E4E8;">;</span></span>
<span class="line"><span style="color:#E1E4E8;">  link.</span><span style="color:#B392F0;">click</span><span style="color:#E1E4E8;">();</span></span>
<span class="line"><span style="color:#E1E4E8;">};</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#24292E;">window.</span><span style="color:#6F42C1;">save</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">=</span><span style="color:#24292E;"> () </span><span style="color:#D73A49;">=&gt;</span><span style="color:#24292E;"> {</span></span>
<span class="line"><span style="color:#24292E;">  </span><span style="color:#6A737D;">// æŠŠé‡‡é›†å¥½çš„æ•°æ®åºåˆ—åŒ–ä¸ºäºŒè¿›åˆ¶æ•°æ®ï¼ˆArrayBufferæ ¼å¼ï¼‰</span></span>
<span class="line"><span style="color:#24292E;">  </span><span style="color:#D73A49;">const</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">arrayBuffer</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">=</span><span style="color:#24292E;"> transferRecognizer.</span><span style="color:#6F42C1;">serializeExamples</span><span style="color:#24292E;">();</span></span>
<span class="line"><span style="color:#24292E;">  </span><span style="color:#6A737D;">// å…ˆè½¬ä¸ºblobæ ¼å¼ï¼ˆè¿™ç§æ ¼å¼ä¸»è¦ä¸ºä¸‹è½½åšå‡†å¤‡ï¼‰</span></span>
<span class="line"><span style="color:#24292E;">  </span><span style="color:#D73A49;">const</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">blob</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">=</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">new</span><span style="color:#24292E;"> </span><span style="color:#6F42C1;">Blob</span><span style="color:#24292E;">([arrayBuffer]);</span></span>
<span class="line"><span style="color:#24292E;">  </span><span style="color:#6A737D;">// åœ¨JSé‡Œé¢åˆ›å»ºaæ ‡ç­¾ï¼Œæ¥æ¨¡æ‹Ÿç‚¹å‡»aæ ‡ç­¾ä¹‹åä¸‹è½½çš„åŠŸèƒ½</span></span>
<span class="line"><span style="color:#24292E;">  </span><span style="color:#D73A49;">const</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">link</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">=</span><span style="color:#24292E;"> document.</span><span style="color:#6F42C1;">createElement</span><span style="color:#24292E;">(</span><span style="color:#032F62;">&#39;a&#39;</span><span style="color:#24292E;">);</span></span>
<span class="line"><span style="color:#24292E;">  link.href </span><span style="color:#D73A49;">=</span><span style="color:#24292E;"> window.</span><span style="color:#005CC5;">URL</span><span style="color:#24292E;">.</span><span style="color:#6F42C1;">createObjectURL</span><span style="color:#24292E;">(blob);</span></span>
<span class="line"><span style="color:#24292E;">  </span><span style="color:#6A737D;">// binåç¼€ä¸»è¦æ˜¯ä¸ºäº†ä½“ç°å…¶æ˜¯äºŒè¿›åˆ¶æ ¼å¼</span></span>
<span class="line"><span style="color:#24292E;">  link.download </span><span style="color:#D73A49;">=</span><span style="color:#24292E;"> </span><span style="color:#032F62;">&#39;data.bin&#39;</span><span style="color:#24292E;">;</span></span>
<span class="line"><span style="color:#24292E;">  link.</span><span style="color:#6F42C1;">click</span><span style="color:#24292E;">();</span></span>
<span class="line"><span style="color:#24292E;">};</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br></div></div><p>æˆ‘ä»¬æ¥çœ‹ä¸‹ä¿å­˜åçš„æ–‡ä»¶ï¼š</p><p><img src="https://mondaylab-1309616765.cos.ap-shanghai.myqcloud.com/images/202407132229705.gif" alt="img"></p><p>ç°åœ¨ï¼Œæˆ‘ä»¬å°†å¯¼å‡ºçš„è¿™ä¸ªäºŒè¿›åˆ¶æ–‡ä»¶ï¼Œç»™ç”¨æ¥è®­ç»ƒå£°æ§è½®æ’­å›¾ã€‚</p><h3 id="_2-åŠ è½½è¯­éŸ³è®­ç»ƒæ•°æ®" tabindex="-1">ï¼ˆ2ï¼‰åŠ è½½è¯­éŸ³è®­ç»ƒæ•°æ® <a class="header-anchor" href="#_2-åŠ è½½è¯­éŸ³è®­ç»ƒæ•°æ®" aria-label="Permalink to &quot;ï¼ˆ2ï¼‰åŠ è½½è¯­éŸ³è®­ç»ƒæ•°æ®&quot;">â€‹</a></h3><p>æˆ‘ä»¬åœ¨æ ¹ç›®å½•ä¸‹æ–°å»ºä¸€ä¸ªæ–‡ä»¶å¤¹<code>data/slider</code>ï¼Œç„¶åæŠŠä¸Šé¢çš„<strong>äºŒè¿›åˆ¶æ–‡ä»¶</strong>ç»™ä¸¢åˆ°è¿™ä¸ªæ•°æ®æ–‡ä»¶å¤¹é‡Œã€‚ç„¶åå°†è¿™ä»½æ•°æ®å¼€å¯ä¸€ä¸ªé™æ€æœåŠ¡ï¼Œæ–¹ä¾¿æˆ‘ä»¬ä¹‹åå»åŠ è½½å®ƒã€‚</p><h3 id="_3-è®­ç»ƒå’Œé¢„æµ‹" tabindex="-1">ï¼ˆ3ï¼‰è®­ç»ƒå’Œé¢„æµ‹ <a class="header-anchor" href="#_3-è®­ç»ƒå’Œé¢„æµ‹" aria-label="Permalink to &quot;ï¼ˆ3ï¼‰è®­ç»ƒå’Œé¢„æµ‹&quot;">â€‹</a></h3><p>æ¥ç€ï¼Œæ ¹ç›®å½•å†åˆ›å»ºä¸€ä¸ªæ–°çš„æ–‡ä»¶å¤¹ï¼Œå‘½åä¸º<code>slider</code>ã€‚ä¹‹ååœ¨è¿™ä¸ªæ–‡ä»¶å¤¹ä¸‹ï¼Œåˆ›å»º<code>index.html</code>æ–‡ä»¶ã€‚ä»£ç å¦‚ä¸‹æ‰€ç¤ºï¼š</p><div class="language-HTML vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">HTML</span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#E1E4E8;">&lt;</span><span style="color:#85E89D;">script</span><span style="color:#E1E4E8;"> </span><span style="color:#B392F0;">src</span><span style="color:#E1E4E8;">=</span><span style="color:#9ECBFF;">&quot;script.js&quot;</span><span style="color:#E1E4E8;">&gt;&lt;/</span><span style="color:#85E89D;">script</span><span style="color:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="color:#E1E4E8;">ç›‘å¬å¼€å…³ï¼š&lt;</span><span style="color:#85E89D;">input</span><span style="color:#E1E4E8;"> </span><span style="color:#B392F0;">type</span><span style="color:#E1E4E8;">=</span><span style="color:#9ECBFF;">&quot;checkbox&quot;</span><span style="color:#E1E4E8;"> </span><span style="color:#B392F0;">onchange</span><span style="color:#E1E4E8;">=</span><span style="color:#9ECBFF;">&quot;</span><span style="color:#B392F0;">toggle</span><span style="color:#9ECBFF;">(</span><span style="color:#79B8FF;">this</span><span style="color:#9ECBFF;">.</span><span style="color:#E1E4E8;">checked</span><span style="color:#9ECBFF;">)&quot;</span><span style="color:#E1E4E8;">&gt;</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#24292E;">&lt;</span><span style="color:#22863A;">script</span><span style="color:#24292E;"> </span><span style="color:#6F42C1;">src</span><span style="color:#24292E;">=</span><span style="color:#032F62;">&quot;script.js&quot;</span><span style="color:#24292E;">&gt;&lt;/</span><span style="color:#22863A;">script</span><span style="color:#24292E;">&gt;</span></span>
<span class="line"><span style="color:#24292E;">ç›‘å¬å¼€å…³ï¼š&lt;</span><span style="color:#22863A;">input</span><span style="color:#24292E;"> </span><span style="color:#6F42C1;">type</span><span style="color:#24292E;">=</span><span style="color:#032F62;">&quot;checkbox&quot;</span><span style="color:#24292E;"> </span><span style="color:#6F42C1;">onchange</span><span style="color:#24292E;">=</span><span style="color:#032F62;">&quot;</span><span style="color:#6F42C1;">toggle</span><span style="color:#032F62;">(</span><span style="color:#005CC5;">this</span><span style="color:#032F62;">.</span><span style="color:#24292E;">checked</span><span style="color:#032F62;">)&quot;</span><span style="color:#24292E;">&gt;</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><p>æ¥ç€ï¼Œåœ¨<code>slide</code>æ–‡ä»¶å¤¹ä¸‹åˆ›å»º<code>script.js</code>æ–‡ä»¶ï¼Œä»£ç å¦‚ä¸‹æ‰€ç¤ºï¼š</p><div class="language-JavaScript vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">JavaScript</span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#F97583;">import</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">*</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">as</span><span style="color:#E1E4E8;"> speechCommands </span><span style="color:#F97583;">from</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">&#39;@tensorflow-models/speech-commands&#39;</span><span style="color:#E1E4E8;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F97583;">const</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">MODEL_PATH</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">&#39;http://127.0.0.1:8080&#39;</span><span style="color:#E1E4E8;">;</span></span>
<span class="line"><span style="color:#F97583;">let</span><span style="color:#E1E4E8;"> transferRecognizer;</span></span>
<span class="line"><span style="color:#F97583;">let</span><span style="color:#E1E4E8;"> curIndex </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">0</span><span style="color:#E1E4E8;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D;">/**</span></span>
<span class="line"><span style="color:#6A737D;"> * åˆ›å»ºä¸€ä¸ªè¿ç§»å­¦ä¹ å™¨</span></span>
<span class="line"><span style="color:#6A737D;"> */</span></span>
<span class="line"><span style="color:#E1E4E8;">window.</span><span style="color:#B392F0;">onload</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">async</span><span style="color:#E1E4E8;"> () </span><span style="color:#F97583;">=&gt;</span><span style="color:#E1E4E8;"> {</span></span>
<span class="line"><span style="color:#E1E4E8;">  </span><span style="color:#F97583;">const</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">recognizer</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> speechCommands.</span><span style="color:#B392F0;">create</span><span style="color:#E1E4E8;">(</span></span>
<span class="line"><span style="color:#E1E4E8;">    </span><span style="color:#9ECBFF;">&#39;BROWSER_FFT&#39;</span><span style="color:#E1E4E8;">,</span></span>
<span class="line"><span style="color:#E1E4E8;">    </span><span style="color:#79B8FF;">null</span><span style="color:#E1E4E8;">,</span></span>
<span class="line"><span style="color:#E1E4E8;">    </span><span style="color:#79B8FF;">MODEL_PATH</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">+</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">&#39;/speech/model.json&#39;</span><span style="color:#E1E4E8;">,</span></span>
<span class="line"><span style="color:#E1E4E8;">    </span><span style="color:#79B8FF;">MODEL_PATH</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">+</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">&#39;/speech/metadata.json&#39;</span></span>
<span class="line"><span style="color:#E1E4E8;">  );</span></span>
<span class="line"><span style="color:#E1E4E8;">  </span><span style="color:#F97583;">await</span><span style="color:#E1E4E8;"> recognizer.</span><span style="color:#B392F0;">ensureModelLoaded</span><span style="color:#E1E4E8;">();</span></span>
<span class="line"><span style="color:#E1E4E8;">  transferRecognizer </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> recognizer.</span><span style="color:#B392F0;">createTransfer</span><span style="color:#E1E4E8;">(</span><span style="color:#9ECBFF;">&#39;è½®æ’­å›¾&#39;</span><span style="color:#E1E4E8;">);</span></span>
<span class="line"><span style="color:#E1E4E8;">  </span><span style="color:#F97583;">const</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">res</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">await</span><span style="color:#E1E4E8;"> </span><span style="color:#B392F0;">fetch</span><span style="color:#E1E4E8;">(</span><span style="color:#79B8FF;">MODEL_PATH</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">+</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">&#39;/slider/data.bin&#39;</span><span style="color:#E1E4E8;">);</span></span>
<span class="line"><span style="color:#E1E4E8;">  </span><span style="color:#F97583;">const</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">arrayBuffer</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">await</span><span style="color:#E1E4E8;"> res.</span><span style="color:#B392F0;">arrayBuffer</span><span style="color:#E1E4E8;">();</span></span>
<span class="line"><span style="color:#E1E4E8;">  </span><span style="color:#6A737D;">// ç”¨loadExamplesæ–¹æ³•ï¼ŒæŠŠäºŒè¿›åˆ¶æ•°æ®ï¼ŒåŠ è½½åˆ°æ¨¡å‹é‡Œ</span></span>
<span class="line"><span style="color:#E1E4E8;">  transferRecognizer.</span><span style="color:#B392F0;">loadExamples</span><span style="color:#E1E4E8;">(arrayBuffer);</span></span>
<span class="line"><span style="color:#E1E4E8;">  </span><span style="color:#F97583;">await</span><span style="color:#E1E4E8;"> transferRecognizer.</span><span style="color:#B392F0;">train</span><span style="color:#E1E4E8;">({ epochs: </span><span style="color:#79B8FF;">30</span><span style="color:#E1E4E8;"> });</span></span>
<span class="line"><span style="color:#E1E4E8;">  console.</span><span style="color:#B392F0;">log</span><span style="color:#E1E4E8;">(</span><span style="color:#9ECBFF;">&#39;done&#39;</span><span style="color:#E1E4E8;">);</span></span>
<span class="line"><span style="color:#E1E4E8;">};</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D;">/**</span></span>
<span class="line"><span style="color:#6A737D;"> * ç›‘å¬å¼€å…³</span></span>
<span class="line"><span style="color:#6A737D;"> */</span></span>
<span class="line"><span style="color:#E1E4E8;">window.</span><span style="color:#B392F0;">toggle</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">async</span><span style="color:#E1E4E8;"> (</span><span style="color:#FFAB70;">checked</span><span style="color:#E1E4E8;">) </span><span style="color:#F97583;">=&gt;</span><span style="color:#E1E4E8;"> {</span></span>
<span class="line"><span style="color:#E1E4E8;">  </span><span style="color:#F97583;">if</span><span style="color:#E1E4E8;"> (checked) {</span></span>
<span class="line"><span style="color:#E1E4E8;">    </span><span style="color:#F97583;">await</span><span style="color:#E1E4E8;"> transferRecognizer.</span><span style="color:#B392F0;">listen</span><span style="color:#E1E4E8;">(</span></span>
<span class="line"><span style="color:#E1E4E8;">      (</span><span style="color:#FFAB70;">result</span><span style="color:#E1E4E8;">) </span><span style="color:#F97583;">=&gt;</span><span style="color:#E1E4E8;"> {</span></span>
<span class="line"><span style="color:#E1E4E8;">        </span><span style="color:#F97583;">const</span><span style="color:#E1E4E8;"> { </span><span style="color:#79B8FF;">scores</span><span style="color:#E1E4E8;"> } </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> result;</span></span>
<span class="line"><span style="color:#E1E4E8;">        </span><span style="color:#F97583;">const</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">labels</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> transferRecognizer.</span><span style="color:#B392F0;">wordLabels</span><span style="color:#E1E4E8;">();</span></span>
<span class="line"><span style="color:#E1E4E8;">        </span><span style="color:#F97583;">const</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">index</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> scores.</span><span style="color:#B392F0;">indexOf</span><span style="color:#E1E4E8;">(Math.</span><span style="color:#B392F0;">max</span><span style="color:#E1E4E8;">(</span><span style="color:#F97583;">...</span><span style="color:#E1E4E8;">scores));</span></span>
<span class="line"><span style="color:#E1E4E8;">        window.</span><span style="color:#B392F0;">play</span><span style="color:#E1E4E8;">(labels[index]);</span></span>
<span class="line"><span style="color:#E1E4E8;">      },</span></span>
<span class="line"><span style="color:#E1E4E8;">      {</span></span>
<span class="line"><span style="color:#E1E4E8;">        overlapFactor: </span><span style="color:#79B8FF;">0</span><span style="color:#E1E4E8;">,</span></span>
<span class="line"><span style="color:#E1E4E8;">        probabilityThreshold: </span><span style="color:#79B8FF;">0.5</span></span>
<span class="line"><span style="color:#E1E4E8;">      }</span></span>
<span class="line"><span style="color:#E1E4E8;">    );</span></span>
<span class="line"><span style="color:#E1E4E8;">  } </span><span style="color:#F97583;">else</span><span style="color:#E1E4E8;"> {</span></span>
<span class="line"><span style="color:#E1E4E8;">    transferRecognizer.</span><span style="color:#B392F0;">stopListening</span><span style="color:#E1E4E8;">();</span></span>
<span class="line"><span style="color:#E1E4E8;">  }</span></span>
<span class="line"><span style="color:#E1E4E8;">};</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#D73A49;">import</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">*</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">as</span><span style="color:#24292E;"> speechCommands </span><span style="color:#D73A49;">from</span><span style="color:#24292E;"> </span><span style="color:#032F62;">&#39;@tensorflow-models/speech-commands&#39;</span><span style="color:#24292E;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#D73A49;">const</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">MODEL_PATH</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">=</span><span style="color:#24292E;"> </span><span style="color:#032F62;">&#39;http://127.0.0.1:8080&#39;</span><span style="color:#24292E;">;</span></span>
<span class="line"><span style="color:#D73A49;">let</span><span style="color:#24292E;"> transferRecognizer;</span></span>
<span class="line"><span style="color:#D73A49;">let</span><span style="color:#24292E;"> curIndex </span><span style="color:#D73A49;">=</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">0</span><span style="color:#24292E;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D;">/**</span></span>
<span class="line"><span style="color:#6A737D;"> * åˆ›å»ºä¸€ä¸ªè¿ç§»å­¦ä¹ å™¨</span></span>
<span class="line"><span style="color:#6A737D;"> */</span></span>
<span class="line"><span style="color:#24292E;">window.</span><span style="color:#6F42C1;">onload</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">=</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">async</span><span style="color:#24292E;"> () </span><span style="color:#D73A49;">=&gt;</span><span style="color:#24292E;"> {</span></span>
<span class="line"><span style="color:#24292E;">  </span><span style="color:#D73A49;">const</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">recognizer</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">=</span><span style="color:#24292E;"> speechCommands.</span><span style="color:#6F42C1;">create</span><span style="color:#24292E;">(</span></span>
<span class="line"><span style="color:#24292E;">    </span><span style="color:#032F62;">&#39;BROWSER_FFT&#39;</span><span style="color:#24292E;">,</span></span>
<span class="line"><span style="color:#24292E;">    </span><span style="color:#005CC5;">null</span><span style="color:#24292E;">,</span></span>
<span class="line"><span style="color:#24292E;">    </span><span style="color:#005CC5;">MODEL_PATH</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">+</span><span style="color:#24292E;"> </span><span style="color:#032F62;">&#39;/speech/model.json&#39;</span><span style="color:#24292E;">,</span></span>
<span class="line"><span style="color:#24292E;">    </span><span style="color:#005CC5;">MODEL_PATH</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">+</span><span style="color:#24292E;"> </span><span style="color:#032F62;">&#39;/speech/metadata.json&#39;</span></span>
<span class="line"><span style="color:#24292E;">  );</span></span>
<span class="line"><span style="color:#24292E;">  </span><span style="color:#D73A49;">await</span><span style="color:#24292E;"> recognizer.</span><span style="color:#6F42C1;">ensureModelLoaded</span><span style="color:#24292E;">();</span></span>
<span class="line"><span style="color:#24292E;">  transferRecognizer </span><span style="color:#D73A49;">=</span><span style="color:#24292E;"> recognizer.</span><span style="color:#6F42C1;">createTransfer</span><span style="color:#24292E;">(</span><span style="color:#032F62;">&#39;è½®æ’­å›¾&#39;</span><span style="color:#24292E;">);</span></span>
<span class="line"><span style="color:#24292E;">  </span><span style="color:#D73A49;">const</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">res</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">=</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">await</span><span style="color:#24292E;"> </span><span style="color:#6F42C1;">fetch</span><span style="color:#24292E;">(</span><span style="color:#005CC5;">MODEL_PATH</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">+</span><span style="color:#24292E;"> </span><span style="color:#032F62;">&#39;/slider/data.bin&#39;</span><span style="color:#24292E;">);</span></span>
<span class="line"><span style="color:#24292E;">  </span><span style="color:#D73A49;">const</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">arrayBuffer</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">=</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">await</span><span style="color:#24292E;"> res.</span><span style="color:#6F42C1;">arrayBuffer</span><span style="color:#24292E;">();</span></span>
<span class="line"><span style="color:#24292E;">  </span><span style="color:#6A737D;">// ç”¨loadExamplesæ–¹æ³•ï¼ŒæŠŠäºŒè¿›åˆ¶æ•°æ®ï¼ŒåŠ è½½åˆ°æ¨¡å‹é‡Œ</span></span>
<span class="line"><span style="color:#24292E;">  transferRecognizer.</span><span style="color:#6F42C1;">loadExamples</span><span style="color:#24292E;">(arrayBuffer);</span></span>
<span class="line"><span style="color:#24292E;">  </span><span style="color:#D73A49;">await</span><span style="color:#24292E;"> transferRecognizer.</span><span style="color:#6F42C1;">train</span><span style="color:#24292E;">({ epochs: </span><span style="color:#005CC5;">30</span><span style="color:#24292E;"> });</span></span>
<span class="line"><span style="color:#24292E;">  console.</span><span style="color:#6F42C1;">log</span><span style="color:#24292E;">(</span><span style="color:#032F62;">&#39;done&#39;</span><span style="color:#24292E;">);</span></span>
<span class="line"><span style="color:#24292E;">};</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D;">/**</span></span>
<span class="line"><span style="color:#6A737D;"> * ç›‘å¬å¼€å…³</span></span>
<span class="line"><span style="color:#6A737D;"> */</span></span>
<span class="line"><span style="color:#24292E;">window.</span><span style="color:#6F42C1;">toggle</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">=</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">async</span><span style="color:#24292E;"> (</span><span style="color:#E36209;">checked</span><span style="color:#24292E;">) </span><span style="color:#D73A49;">=&gt;</span><span style="color:#24292E;"> {</span></span>
<span class="line"><span style="color:#24292E;">  </span><span style="color:#D73A49;">if</span><span style="color:#24292E;"> (checked) {</span></span>
<span class="line"><span style="color:#24292E;">    </span><span style="color:#D73A49;">await</span><span style="color:#24292E;"> transferRecognizer.</span><span style="color:#6F42C1;">listen</span><span style="color:#24292E;">(</span></span>
<span class="line"><span style="color:#24292E;">      (</span><span style="color:#E36209;">result</span><span style="color:#24292E;">) </span><span style="color:#D73A49;">=&gt;</span><span style="color:#24292E;"> {</span></span>
<span class="line"><span style="color:#24292E;">        </span><span style="color:#D73A49;">const</span><span style="color:#24292E;"> { </span><span style="color:#005CC5;">scores</span><span style="color:#24292E;"> } </span><span style="color:#D73A49;">=</span><span style="color:#24292E;"> result;</span></span>
<span class="line"><span style="color:#24292E;">        </span><span style="color:#D73A49;">const</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">labels</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">=</span><span style="color:#24292E;"> transferRecognizer.</span><span style="color:#6F42C1;">wordLabels</span><span style="color:#24292E;">();</span></span>
<span class="line"><span style="color:#24292E;">        </span><span style="color:#D73A49;">const</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">index</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">=</span><span style="color:#24292E;"> scores.</span><span style="color:#6F42C1;">indexOf</span><span style="color:#24292E;">(Math.</span><span style="color:#6F42C1;">max</span><span style="color:#24292E;">(</span><span style="color:#D73A49;">...</span><span style="color:#24292E;">scores));</span></span>
<span class="line"><span style="color:#24292E;">        window.</span><span style="color:#6F42C1;">play</span><span style="color:#24292E;">(labels[index]);</span></span>
<span class="line"><span style="color:#24292E;">      },</span></span>
<span class="line"><span style="color:#24292E;">      {</span></span>
<span class="line"><span style="color:#24292E;">        overlapFactor: </span><span style="color:#005CC5;">0</span><span style="color:#24292E;">,</span></span>
<span class="line"><span style="color:#24292E;">        probabilityThreshold: </span><span style="color:#005CC5;">0.5</span></span>
<span class="line"><span style="color:#24292E;">      }</span></span>
<span class="line"><span style="color:#24292E;">    );</span></span>
<span class="line"><span style="color:#24292E;">  } </span><span style="color:#D73A49;">else</span><span style="color:#24292E;"> {</span></span>
<span class="line"><span style="color:#24292E;">    transferRecognizer.</span><span style="color:#6F42C1;">stopListening</span><span style="color:#24292E;">();</span></span>
<span class="line"><span style="color:#24292E;">  }</span></span>
<span class="line"><span style="color:#24292E;">};</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br><span class="line-number">40</span><br><span class="line-number">41</span><br><span class="line-number">42</span><br><span class="line-number">43</span><br><span class="line-number">44</span><br><span class="line-number">45</span><br><span class="line-number">46</span><br><span class="line-number">47</span><br></div></div><p>è¿™æ ·ï¼Œæˆ‘ä»¬å°±æˆåŠŸç”¨ä¿å­˜çš„é‚£ä»½æ•°æ®ï¼Œæ¥è®­ç»ƒå’Œé¢„æµ‹æœ€ç»ˆè¦ä½¿ç”¨çš„æ¨¡å‹ã€‚ç„¶åä¸‹é¢ï¼Œæˆ‘ä»¬å°±å¯ä»¥ç”¨è¿™ä¸ªæ¨¡å‹ï¼Œå»åš<strong>å£°æ§è½®æ’­</strong>äº†ã€‚</p><h1 id="äº”ã€å£°æ§è½®æ’­å›¾" tabindex="-1">äº”ã€å£°æ§è½®æ’­å›¾ <a class="header-anchor" href="#äº”ã€å£°æ§è½®æ’­å›¾" aria-label="Permalink to &quot;äº”ã€å£°æ§è½®æ’­å›¾&quot;">â€‹</a></h1><h2 id="_1ã€æ“ä½œæ­¥éª¤-3" tabindex="-1">1ã€æ“ä½œæ­¥éª¤ <a class="header-anchor" href="#_1ã€æ“ä½œæ­¥éª¤-3" aria-label="Permalink to &quot;1ã€æ“ä½œæ­¥éª¤&quot;">â€‹</a></h2><ul><li>ç¼–å†™è½®æ’­å›¾åº”ç”¨ â€”â€” å®Œæˆè½®æ’­å›¾çš„è§†å›¾ï¼Œæ¯æ¬¡åªæ˜¾ç¤ºä¸€å¼ ã€‚</li><li>ç¼–å†™å£°æ§é€»è¾‘ â€”â€” ç”¨æˆ·è¯´ã€Œä¸Šä¸€å¼ ã€æˆ–ã€Œä¸‹ä¸€å¼ ã€æ—¶ï¼Œå±•ç¤ºå¯¹åº”çš„å›¾ç‰‡ã€‚</li><li>æ¼”ç¤ºå£°æ§è½®æ’­å›¾çš„æ•ˆæœ</li></ul><h2 id="_2ã€è®­ç»ƒè¿‡ç¨‹-3" tabindex="-1">2ã€è®­ç»ƒè¿‡ç¨‹ <a class="header-anchor" href="#_2ã€è®­ç»ƒè¿‡ç¨‹-3" aria-label="Permalink to &quot;2ã€è®­ç»ƒè¿‡ç¨‹&quot;">â€‹</a></h2><p>ç»§ç»­å®Œå–„<code>index.html</code>çš„ä»£ç ï¼Œå¦‚ä¸‹æ‰€ç¤ºï¼š</p><div class="language-HTML vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">HTML</span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#E1E4E8;">&lt;</span><span style="color:#85E89D;">script</span><span style="color:#E1E4E8;"> </span><span style="color:#B392F0;">src</span><span style="color:#E1E4E8;">=</span><span style="color:#9ECBFF;">&quot;script.js&quot;</span><span style="color:#E1E4E8;">&gt;&lt;/</span><span style="color:#85E89D;">script</span><span style="color:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="color:#E1E4E8;">ç›‘å¬å¼€å…³ï¼š&lt;</span><span style="color:#85E89D;">input</span><span style="color:#E1E4E8;"> </span><span style="color:#B392F0;">type</span><span style="color:#E1E4E8;">=</span><span style="color:#9ECBFF;">&quot;checkbox&quot;</span><span style="color:#E1E4E8;"> </span><span style="color:#B392F0;">onchange</span><span style="color:#E1E4E8;">=</span><span style="color:#9ECBFF;">&quot;</span><span style="color:#B392F0;">toggle</span><span style="color:#9ECBFF;">(</span><span style="color:#79B8FF;">this</span><span style="color:#9ECBFF;">.</span><span style="color:#E1E4E8;">checked</span><span style="color:#9ECBFF;">)&quot;</span><span style="color:#E1E4E8;">&gt;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#E1E4E8;">&lt;</span><span style="color:#85E89D;">style</span><span style="color:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="color:#E1E4E8;">    </span><span style="color:#B392F0;">.slider</span><span style="color:#E1E4E8;"> {</span></span>
<span class="line"><span style="color:#E1E4E8;">        </span><span style="color:#79B8FF;">width</span><span style="color:#E1E4E8;">: </span><span style="color:#79B8FF;">600</span><span style="color:#F97583;">px</span><span style="color:#E1E4E8;">;</span></span>
<span class="line"><span style="color:#E1E4E8;">        </span><span style="color:#79B8FF;">overflow</span><span style="color:#E1E4E8;">: </span><span style="color:#79B8FF;">hidden</span><span style="color:#E1E4E8;">;</span></span>
<span class="line"><span style="color:#E1E4E8;">        </span><span style="color:#79B8FF;">margin</span><span style="color:#E1E4E8;">: </span><span style="color:#79B8FF;">10</span><span style="color:#F97583;">px</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">auto</span><span style="color:#E1E4E8;">;</span></span>
<span class="line"><span style="color:#E1E4E8;">    }</span></span>
<span class="line"><span style="color:#E1E4E8;">    </span><span style="color:#B392F0;">.slider</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">&gt;</span><span style="color:#E1E4E8;"> </span><span style="color:#85E89D;">div</span><span style="color:#E1E4E8;">{</span></span>
<span class="line"><span style="color:#E1E4E8;">        </span><span style="color:#79B8FF;">display</span><span style="color:#E1E4E8;">: </span><span style="color:#79B8FF;">flex</span><span style="color:#E1E4E8;">;</span></span>
<span class="line"><span style="color:#E1E4E8;">        </span><span style="color:#79B8FF;">align-items</span><span style="color:#E1E4E8;">: </span><span style="color:#79B8FF;">center</span><span style="color:#E1E4E8;">;</span></span>
<span class="line"><span style="color:#E1E4E8;">    }</span></span>
<span class="line"><span style="color:#E1E4E8;">&lt;/</span><span style="color:#85E89D;">style</span><span style="color:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="color:#6A737D;">&lt;!-- æœ€å¤–å±‚çª—å£ --&gt;</span></span>
<span class="line"><span style="color:#E1E4E8;">&lt;</span><span style="color:#85E89D;">div</span><span style="color:#E1E4E8;"> </span><span style="color:#B392F0;">class</span><span style="color:#E1E4E8;">=</span><span style="color:#9ECBFF;">&quot;slider&quot;</span><span style="color:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="color:#E1E4E8;">    </span><span style="color:#6A737D;">&lt;!-- ç§»åŠ¨çš„div --&gt;</span></span>
<span class="line"><span style="color:#E1E4E8;">    &lt;</span><span style="color:#85E89D;">div</span><span style="color:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="color:#E1E4E8;">        &lt;</span><span style="color:#85E89D;">img</span><span style="color:#E1E4E8;"> </span><span style="color:#B392F0;">src</span><span style="color:#E1E4E8;">=</span><span style="color:#9ECBFF;">&quot;https://cdn.pixabay.com/photo/2019/10/29/15/57/vancouver-4587302__480.jpg&quot;</span><span style="color:#E1E4E8;"> </span><span style="color:#B392F0;">alt</span><span style="color:#E1E4E8;">=</span><span style="color:#9ECBFF;">&quot;&quot;</span><span style="color:#E1E4E8;"> </span><span style="color:#B392F0;">width</span><span style="color:#E1E4E8;">=</span><span style="color:#9ECBFF;">&quot;600&quot;</span><span style="color:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="color:#E1E4E8;">        &lt;</span><span style="color:#85E89D;">img</span><span style="color:#E1E4E8;"> </span><span style="color:#B392F0;">src</span><span style="color:#E1E4E8;">=</span><span style="color:#9ECBFF;">&quot;https://cdn.pixabay.com/photo/2019/10/31/07/14/coffee-4591159__480.jpg&quot;</span><span style="color:#E1E4E8;"> </span><span style="color:#B392F0;">alt</span><span style="color:#E1E4E8;">=</span><span style="color:#9ECBFF;">&quot;&quot;</span><span style="color:#E1E4E8;"> </span><span style="color:#B392F0;">width</span><span style="color:#E1E4E8;">=</span><span style="color:#9ECBFF;">&quot;600&quot;</span><span style="color:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="color:#E1E4E8;">        &lt;</span><span style="color:#85E89D;">img</span><span style="color:#E1E4E8;"> </span><span style="color:#B392F0;">src</span><span style="color:#E1E4E8;">=</span><span style="color:#9ECBFF;">&quot;https://cdn.pixabay.com/photo/2019/11/01/11/08/landscape-4593909__480.jpg&quot;</span><span style="color:#E1E4E8;"> </span><span style="color:#B392F0;">alt</span><span style="color:#E1E4E8;">=</span><span style="color:#9ECBFF;">&quot;&quot;</span><span style="color:#E1E4E8;"> </span><span style="color:#B392F0;">width</span><span style="color:#E1E4E8;">=</span><span style="color:#9ECBFF;">&quot;600&quot;</span><span style="color:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="color:#E1E4E8;">        &lt;</span><span style="color:#85E89D;">img</span><span style="color:#E1E4E8;"> </span><span style="color:#B392F0;">src</span><span style="color:#E1E4E8;">=</span><span style="color:#9ECBFF;">&quot;https://cdn.pixabay.com/photo/2019/11/02/21/45/maple-leaf-4597501__480.jpg&quot;</span><span style="color:#E1E4E8;"> </span><span style="color:#B392F0;">alt</span><span style="color:#E1E4E8;">=</span><span style="color:#9ECBFF;">&quot;&quot;</span><span style="color:#E1E4E8;"> </span><span style="color:#B392F0;">width</span><span style="color:#E1E4E8;">=</span><span style="color:#9ECBFF;">&quot;600&quot;</span><span style="color:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="color:#E1E4E8;">        &lt;</span><span style="color:#85E89D;">img</span><span style="color:#E1E4E8;"> </span><span style="color:#B392F0;">src</span><span style="color:#E1E4E8;">=</span><span style="color:#9ECBFF;">&quot;https://cdn.pixabay.com/photo/2019/11/02/03/13/in-xinjiang-4595560__480.jpg&quot;</span><span style="color:#E1E4E8;"> </span><span style="color:#B392F0;">alt</span><span style="color:#E1E4E8;">=</span><span style="color:#9ECBFF;">&quot;&quot;</span><span style="color:#E1E4E8;"> </span><span style="color:#B392F0;">width</span><span style="color:#E1E4E8;">=</span><span style="color:#9ECBFF;">&quot;600&quot;</span><span style="color:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="color:#E1E4E8;">        &lt;</span><span style="color:#85E89D;">img</span><span style="color:#E1E4E8;"> </span><span style="color:#B392F0;">src</span><span style="color:#E1E4E8;">=</span><span style="color:#9ECBFF;">&quot;https://cdn.pixabay.com/photo/2019/11/01/22/45/reschensee-4595385__480.jpg&quot;</span><span style="color:#E1E4E8;"> </span><span style="color:#B392F0;">alt</span><span style="color:#E1E4E8;">=</span><span style="color:#9ECBFF;">&quot;&quot;</span><span style="color:#E1E4E8;"> </span><span style="color:#B392F0;">width</span><span style="color:#E1E4E8;">=</span><span style="color:#9ECBFF;">&quot;600&quot;</span><span style="color:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="color:#E1E4E8;">    &lt;/</span><span style="color:#85E89D;">div</span><span style="color:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="color:#E1E4E8;">&lt;/</span><span style="color:#85E89D;">div</span><span style="color:#E1E4E8;">&gt;</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#24292E;">&lt;</span><span style="color:#22863A;">script</span><span style="color:#24292E;"> </span><span style="color:#6F42C1;">src</span><span style="color:#24292E;">=</span><span style="color:#032F62;">&quot;script.js&quot;</span><span style="color:#24292E;">&gt;&lt;/</span><span style="color:#22863A;">script</span><span style="color:#24292E;">&gt;</span></span>
<span class="line"><span style="color:#24292E;">ç›‘å¬å¼€å…³ï¼š&lt;</span><span style="color:#22863A;">input</span><span style="color:#24292E;"> </span><span style="color:#6F42C1;">type</span><span style="color:#24292E;">=</span><span style="color:#032F62;">&quot;checkbox&quot;</span><span style="color:#24292E;"> </span><span style="color:#6F42C1;">onchange</span><span style="color:#24292E;">=</span><span style="color:#032F62;">&quot;</span><span style="color:#6F42C1;">toggle</span><span style="color:#032F62;">(</span><span style="color:#005CC5;">this</span><span style="color:#032F62;">.</span><span style="color:#24292E;">checked</span><span style="color:#032F62;">)&quot;</span><span style="color:#24292E;">&gt;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#24292E;">&lt;</span><span style="color:#22863A;">style</span><span style="color:#24292E;">&gt;</span></span>
<span class="line"><span style="color:#24292E;">    </span><span style="color:#6F42C1;">.slider</span><span style="color:#24292E;"> {</span></span>
<span class="line"><span style="color:#24292E;">        </span><span style="color:#005CC5;">width</span><span style="color:#24292E;">: </span><span style="color:#005CC5;">600</span><span style="color:#D73A49;">px</span><span style="color:#24292E;">;</span></span>
<span class="line"><span style="color:#24292E;">        </span><span style="color:#005CC5;">overflow</span><span style="color:#24292E;">: </span><span style="color:#005CC5;">hidden</span><span style="color:#24292E;">;</span></span>
<span class="line"><span style="color:#24292E;">        </span><span style="color:#005CC5;">margin</span><span style="color:#24292E;">: </span><span style="color:#005CC5;">10</span><span style="color:#D73A49;">px</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">auto</span><span style="color:#24292E;">;</span></span>
<span class="line"><span style="color:#24292E;">    }</span></span>
<span class="line"><span style="color:#24292E;">    </span><span style="color:#6F42C1;">.slider</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">&gt;</span><span style="color:#24292E;"> </span><span style="color:#22863A;">div</span><span style="color:#24292E;">{</span></span>
<span class="line"><span style="color:#24292E;">        </span><span style="color:#005CC5;">display</span><span style="color:#24292E;">: </span><span style="color:#005CC5;">flex</span><span style="color:#24292E;">;</span></span>
<span class="line"><span style="color:#24292E;">        </span><span style="color:#005CC5;">align-items</span><span style="color:#24292E;">: </span><span style="color:#005CC5;">center</span><span style="color:#24292E;">;</span></span>
<span class="line"><span style="color:#24292E;">    }</span></span>
<span class="line"><span style="color:#24292E;">&lt;/</span><span style="color:#22863A;">style</span><span style="color:#24292E;">&gt;</span></span>
<span class="line"><span style="color:#6A737D;">&lt;!-- æœ€å¤–å±‚çª—å£ --&gt;</span></span>
<span class="line"><span style="color:#24292E;">&lt;</span><span style="color:#22863A;">div</span><span style="color:#24292E;"> </span><span style="color:#6F42C1;">class</span><span style="color:#24292E;">=</span><span style="color:#032F62;">&quot;slider&quot;</span><span style="color:#24292E;">&gt;</span></span>
<span class="line"><span style="color:#24292E;">    </span><span style="color:#6A737D;">&lt;!-- ç§»åŠ¨çš„div --&gt;</span></span>
<span class="line"><span style="color:#24292E;">    &lt;</span><span style="color:#22863A;">div</span><span style="color:#24292E;">&gt;</span></span>
<span class="line"><span style="color:#24292E;">        &lt;</span><span style="color:#22863A;">img</span><span style="color:#24292E;"> </span><span style="color:#6F42C1;">src</span><span style="color:#24292E;">=</span><span style="color:#032F62;">&quot;https://cdn.pixabay.com/photo/2019/10/29/15/57/vancouver-4587302__480.jpg&quot;</span><span style="color:#24292E;"> </span><span style="color:#6F42C1;">alt</span><span style="color:#24292E;">=</span><span style="color:#032F62;">&quot;&quot;</span><span style="color:#24292E;"> </span><span style="color:#6F42C1;">width</span><span style="color:#24292E;">=</span><span style="color:#032F62;">&quot;600&quot;</span><span style="color:#24292E;">&gt;</span></span>
<span class="line"><span style="color:#24292E;">        &lt;</span><span style="color:#22863A;">img</span><span style="color:#24292E;"> </span><span style="color:#6F42C1;">src</span><span style="color:#24292E;">=</span><span style="color:#032F62;">&quot;https://cdn.pixabay.com/photo/2019/10/31/07/14/coffee-4591159__480.jpg&quot;</span><span style="color:#24292E;"> </span><span style="color:#6F42C1;">alt</span><span style="color:#24292E;">=</span><span style="color:#032F62;">&quot;&quot;</span><span style="color:#24292E;"> </span><span style="color:#6F42C1;">width</span><span style="color:#24292E;">=</span><span style="color:#032F62;">&quot;600&quot;</span><span style="color:#24292E;">&gt;</span></span>
<span class="line"><span style="color:#24292E;">        &lt;</span><span style="color:#22863A;">img</span><span style="color:#24292E;"> </span><span style="color:#6F42C1;">src</span><span style="color:#24292E;">=</span><span style="color:#032F62;">&quot;https://cdn.pixabay.com/photo/2019/11/01/11/08/landscape-4593909__480.jpg&quot;</span><span style="color:#24292E;"> </span><span style="color:#6F42C1;">alt</span><span style="color:#24292E;">=</span><span style="color:#032F62;">&quot;&quot;</span><span style="color:#24292E;"> </span><span style="color:#6F42C1;">width</span><span style="color:#24292E;">=</span><span style="color:#032F62;">&quot;600&quot;</span><span style="color:#24292E;">&gt;</span></span>
<span class="line"><span style="color:#24292E;">        &lt;</span><span style="color:#22863A;">img</span><span style="color:#24292E;"> </span><span style="color:#6F42C1;">src</span><span style="color:#24292E;">=</span><span style="color:#032F62;">&quot;https://cdn.pixabay.com/photo/2019/11/02/21/45/maple-leaf-4597501__480.jpg&quot;</span><span style="color:#24292E;"> </span><span style="color:#6F42C1;">alt</span><span style="color:#24292E;">=</span><span style="color:#032F62;">&quot;&quot;</span><span style="color:#24292E;"> </span><span style="color:#6F42C1;">width</span><span style="color:#24292E;">=</span><span style="color:#032F62;">&quot;600&quot;</span><span style="color:#24292E;">&gt;</span></span>
<span class="line"><span style="color:#24292E;">        &lt;</span><span style="color:#22863A;">img</span><span style="color:#24292E;"> </span><span style="color:#6F42C1;">src</span><span style="color:#24292E;">=</span><span style="color:#032F62;">&quot;https://cdn.pixabay.com/photo/2019/11/02/03/13/in-xinjiang-4595560__480.jpg&quot;</span><span style="color:#24292E;"> </span><span style="color:#6F42C1;">alt</span><span style="color:#24292E;">=</span><span style="color:#032F62;">&quot;&quot;</span><span style="color:#24292E;"> </span><span style="color:#6F42C1;">width</span><span style="color:#24292E;">=</span><span style="color:#032F62;">&quot;600&quot;</span><span style="color:#24292E;">&gt;</span></span>
<span class="line"><span style="color:#24292E;">        &lt;</span><span style="color:#22863A;">img</span><span style="color:#24292E;"> </span><span style="color:#6F42C1;">src</span><span style="color:#24292E;">=</span><span style="color:#032F62;">&quot;https://cdn.pixabay.com/photo/2019/11/01/22/45/reschensee-4595385__480.jpg&quot;</span><span style="color:#24292E;"> </span><span style="color:#6F42C1;">alt</span><span style="color:#24292E;">=</span><span style="color:#032F62;">&quot;&quot;</span><span style="color:#24292E;"> </span><span style="color:#6F42C1;">width</span><span style="color:#24292E;">=</span><span style="color:#032F62;">&quot;600&quot;</span><span style="color:#24292E;">&gt;</span></span>
<span class="line"><span style="color:#24292E;">    &lt;/</span><span style="color:#22863A;">div</span><span style="color:#24292E;">&gt;</span></span>
<span class="line"><span style="color:#24292E;">&lt;/</span><span style="color:#22863A;">div</span><span style="color:#24292E;">&gt;</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br></div></div><p>ç„¶åå®Œå–„<code>script.js</code>çš„é€»è¾‘ï¼Œå¢åŠ <strong>å£°æ§è½®æ’­</strong>çš„é€»è¾‘ã€‚å¦‚ä¸‹ä»£ç æ‰€ç¤ºï¼š</p><div class="language-JavaScript vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">JavaScript</span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#6A737D;">// æ­¤å¤„çœç•¥å¾ˆå¤šä¹‹å‰å†™è¿‡çš„ä»£ç </span></span>
<span class="line"><span style="color:#E1E4E8;">â€¦â€¦</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D;">/**</span></span>
<span class="line"><span style="color:#6A737D;"> * å£°æ§è½®æ’­</span></span>
<span class="line"><span style="color:#6A737D;"> * </span><span style="color:#F97583;">@param</span><span style="color:#6A737D;"> </span><span style="color:#B392F0;">{*}</span><span style="color:#6A737D;"> </span><span style="color:#E1E4E8;">label</span></span>
<span class="line"><span style="color:#6A737D;"> * </span><span style="color:#F97583;">@returns</span></span>
<span class="line"><span style="color:#6A737D;"> */</span></span>
<span class="line"><span style="color:#E1E4E8;">window.</span><span style="color:#B392F0;">play</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> (</span><span style="color:#FFAB70;">label</span><span style="color:#E1E4E8;">) </span><span style="color:#F97583;">=&gt;</span><span style="color:#E1E4E8;"> {</span></span>
<span class="line"><span style="color:#E1E4E8;">  </span><span style="color:#6A737D;">// è·å–è½®æ’­å›¾çš„domä½ç½®</span></span>
<span class="line"><span style="color:#E1E4E8;">  </span><span style="color:#F97583;">const</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">div</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> document.</span><span style="color:#B392F0;">querySelector</span><span style="color:#E1E4E8;">(</span><span style="color:#9ECBFF;">&#39;.slider&gt;div&#39;</span><span style="color:#E1E4E8;">);</span></span>
<span class="line"><span style="color:#E1E4E8;">  </span><span style="color:#6A737D;">// å½“ç”¨æˆ·è¯´äº†ä¸Šä¸€å¼ æ—¶</span></span>
<span class="line"><span style="color:#E1E4E8;">  </span><span style="color:#F97583;">if</span><span style="color:#E1E4E8;"> (label </span><span style="color:#F97583;">===</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">&#39;ä¸Šä¸€å¼ &#39;</span><span style="color:#E1E4E8;">) {</span></span>
<span class="line"><span style="color:#E1E4E8;">    </span><span style="color:#F97583;">if</span><span style="color:#E1E4E8;"> (curIndex </span><span style="color:#F97583;">===</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">0</span><span style="color:#E1E4E8;">) {</span></span>
<span class="line"><span style="color:#E1E4E8;">      </span><span style="color:#F97583;">return</span><span style="color:#E1E4E8;">;</span></span>
<span class="line"><span style="color:#E1E4E8;">    }</span></span>
<span class="line"><span style="color:#E1E4E8;">    curIndex </span><span style="color:#F97583;">-=</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">1</span><span style="color:#E1E4E8;">;</span></span>
<span class="line"><span style="color:#E1E4E8;">  } </span><span style="color:#F97583;">else</span><span style="color:#E1E4E8;"> {</span></span>
<span class="line"><span style="color:#E1E4E8;">    </span><span style="color:#F97583;">if</span><span style="color:#E1E4E8;"> (curIndex </span><span style="color:#F97583;">===</span><span style="color:#E1E4E8;"> document.</span><span style="color:#B392F0;">querySelectorAll</span><span style="color:#E1E4E8;">(</span><span style="color:#9ECBFF;">&#39;img&#39;</span><span style="color:#E1E4E8;">).</span><span style="color:#79B8FF;">length</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">-</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">1</span><span style="color:#E1E4E8;">) {</span></span>
<span class="line"><span style="color:#E1E4E8;">      </span><span style="color:#F97583;">return</span><span style="color:#E1E4E8;">;</span></span>
<span class="line"><span style="color:#E1E4E8;">    }</span></span>
<span class="line"><span style="color:#E1E4E8;">    curIndex </span><span style="color:#F97583;">+=</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">1</span><span style="color:#E1E4E8;">;</span></span>
<span class="line"><span style="color:#E1E4E8;">  }</span></span>
<span class="line"><span style="color:#E1E4E8;">  div.style.transition </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">&#39;transform 1s&#39;</span><span style="color:#E1E4E8;">;</span></span>
<span class="line"><span style="color:#E1E4E8;">  </span><span style="color:#6A737D;">// æ•´ä¸ªdivå¾€å·¦å¹³ç§»ä¸€å¼ å›¾ç‰‡çš„å®½åº¦</span></span>
<span class="line"><span style="color:#E1E4E8;">  div.style.transform </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">\`translateX(-\${</span><span style="color:#79B8FF;">100</span><span style="color:#9ECBFF;"> </span><span style="color:#F97583;">*</span><span style="color:#9ECBFF;"> </span><span style="color:#E1E4E8;">curIndex</span><span style="color:#9ECBFF;">}%)\`</span><span style="color:#E1E4E8;">;</span></span>
<span class="line"><span style="color:#E1E4E8;">};</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#6A737D;">// æ­¤å¤„çœç•¥å¾ˆå¤šä¹‹å‰å†™è¿‡çš„ä»£ç </span></span>
<span class="line"><span style="color:#24292E;">â€¦â€¦</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D;">/**</span></span>
<span class="line"><span style="color:#6A737D;"> * å£°æ§è½®æ’­</span></span>
<span class="line"><span style="color:#6A737D;"> * </span><span style="color:#D73A49;">@param</span><span style="color:#6A737D;"> </span><span style="color:#6F42C1;">{*}</span><span style="color:#6A737D;"> </span><span style="color:#24292E;">label</span></span>
<span class="line"><span style="color:#6A737D;"> * </span><span style="color:#D73A49;">@returns</span></span>
<span class="line"><span style="color:#6A737D;"> */</span></span>
<span class="line"><span style="color:#24292E;">window.</span><span style="color:#6F42C1;">play</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">=</span><span style="color:#24292E;"> (</span><span style="color:#E36209;">label</span><span style="color:#24292E;">) </span><span style="color:#D73A49;">=&gt;</span><span style="color:#24292E;"> {</span></span>
<span class="line"><span style="color:#24292E;">  </span><span style="color:#6A737D;">// è·å–è½®æ’­å›¾çš„domä½ç½®</span></span>
<span class="line"><span style="color:#24292E;">  </span><span style="color:#D73A49;">const</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">div</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">=</span><span style="color:#24292E;"> document.</span><span style="color:#6F42C1;">querySelector</span><span style="color:#24292E;">(</span><span style="color:#032F62;">&#39;.slider&gt;div&#39;</span><span style="color:#24292E;">);</span></span>
<span class="line"><span style="color:#24292E;">  </span><span style="color:#6A737D;">// å½“ç”¨æˆ·è¯´äº†ä¸Šä¸€å¼ æ—¶</span></span>
<span class="line"><span style="color:#24292E;">  </span><span style="color:#D73A49;">if</span><span style="color:#24292E;"> (label </span><span style="color:#D73A49;">===</span><span style="color:#24292E;"> </span><span style="color:#032F62;">&#39;ä¸Šä¸€å¼ &#39;</span><span style="color:#24292E;">) {</span></span>
<span class="line"><span style="color:#24292E;">    </span><span style="color:#D73A49;">if</span><span style="color:#24292E;"> (curIndex </span><span style="color:#D73A49;">===</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">0</span><span style="color:#24292E;">) {</span></span>
<span class="line"><span style="color:#24292E;">      </span><span style="color:#D73A49;">return</span><span style="color:#24292E;">;</span></span>
<span class="line"><span style="color:#24292E;">    }</span></span>
<span class="line"><span style="color:#24292E;">    curIndex </span><span style="color:#D73A49;">-=</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">1</span><span style="color:#24292E;">;</span></span>
<span class="line"><span style="color:#24292E;">  } </span><span style="color:#D73A49;">else</span><span style="color:#24292E;"> {</span></span>
<span class="line"><span style="color:#24292E;">    </span><span style="color:#D73A49;">if</span><span style="color:#24292E;"> (curIndex </span><span style="color:#D73A49;">===</span><span style="color:#24292E;"> document.</span><span style="color:#6F42C1;">querySelectorAll</span><span style="color:#24292E;">(</span><span style="color:#032F62;">&#39;img&#39;</span><span style="color:#24292E;">).</span><span style="color:#005CC5;">length</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">-</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">1</span><span style="color:#24292E;">) {</span></span>
<span class="line"><span style="color:#24292E;">      </span><span style="color:#D73A49;">return</span><span style="color:#24292E;">;</span></span>
<span class="line"><span style="color:#24292E;">    }</span></span>
<span class="line"><span style="color:#24292E;">    curIndex </span><span style="color:#D73A49;">+=</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">1</span><span style="color:#24292E;">;</span></span>
<span class="line"><span style="color:#24292E;">  }</span></span>
<span class="line"><span style="color:#24292E;">  div.style.transition </span><span style="color:#D73A49;">=</span><span style="color:#24292E;"> </span><span style="color:#032F62;">&#39;transform 1s&#39;</span><span style="color:#24292E;">;</span></span>
<span class="line"><span style="color:#24292E;">  </span><span style="color:#6A737D;">// æ•´ä¸ªdivå¾€å·¦å¹³ç§»ä¸€å¼ å›¾ç‰‡çš„å®½åº¦</span></span>
<span class="line"><span style="color:#24292E;">  div.style.transform </span><span style="color:#D73A49;">=</span><span style="color:#24292E;"> </span><span style="color:#032F62;">\`translateX(-\${</span><span style="color:#005CC5;">100</span><span style="color:#032F62;"> </span><span style="color:#D73A49;">*</span><span style="color:#032F62;"> </span><span style="color:#24292E;">curIndex</span><span style="color:#032F62;">}%)\`</span><span style="color:#24292E;">;</span></span>
<span class="line"><span style="color:#24292E;">};</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br></div></div><p>æ¥çœ‹ä¸‹æœ€åçš„æ•ˆæœï¼š</p><p><img src="https://mondaylab-1309616765.cos.ap-shanghai.myqcloud.com/images/202407132229539.gif" alt="img"></p><p>è‡³æ­¤ï¼Œæˆ‘ä»¬å°±å®Œæˆäº†ä¸€ä¸ªç®€æ´ç‰ˆçš„å£°æ§è½®æ’­å›¾ã€‚</p>`,68),e=[o];function c(t,r,E,y,i,F){return n(),a("div",null,e)}const d=s(p,[["render",c]]);export{u as __pageData,d as default};
