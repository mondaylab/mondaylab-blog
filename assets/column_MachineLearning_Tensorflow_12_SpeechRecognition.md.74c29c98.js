import{_ as s,o as n,c as a,Q as l}from"./chunks/framework.98c15f2e.js";const b=JSON.parse('{"title":"ä½¿ç”¨é¢„è®­ç»ƒæ¨¡å‹è¿›è¡Œè¯­éŸ³è¯†åˆ«","description":"","frontmatter":{"title":"ä½¿ç”¨é¢„è®­ç»ƒæ¨¡å‹è¿›è¡Œè¯­éŸ³è¯†åˆ«","author":"å‘¨ä¸€","date":"2023-08-05","categories":["äººå·¥æ™ºèƒ½"],"tags":["æœºå™¨å­¦ä¹ "],"sidebar":"auto"},"headers":[{"level":1,"title":"ä¸€ã€ä»»åŠ¡ç®€ä»‹","slug":"ä¸€ã€ä»»åŠ¡ç®€ä»‹","link":"#ä¸€ã€ä»»åŠ¡ç®€ä»‹","children":[{"level":2,"title":"1ã€ä»€ä¹ˆæ˜¯è¯­éŸ³è¯†åˆ«","slug":"_1ã€ä»€ä¹ˆæ˜¯è¯­éŸ³è¯†åˆ«","link":"#_1ã€ä»€ä¹ˆæ˜¯è¯­éŸ³è¯†åˆ«","children":[]},{"level":2,"title":"2ã€æ“ä½œæ­¥éª¤","slug":"_2ã€æ“ä½œæ­¥éª¤","link":"#_2ã€æ“ä½œæ­¥éª¤","children":[]}]},{"level":1,"title":"äºŒã€åŠ è½½é¢„è®­ç»ƒè¯­éŸ³è¯†åˆ«æ¨¡å‹","slug":"äºŒã€åŠ è½½é¢„è®­ç»ƒè¯­éŸ³è¯†åˆ«æ¨¡å‹","link":"#äºŒã€åŠ è½½é¢„è®­ç»ƒè¯­éŸ³è¯†åˆ«æ¨¡å‹","children":[{"level":2,"title":"1ã€æ“ä½œæ­¥éª¤","slug":"_1ã€æ“ä½œæ­¥éª¤","link":"#_1ã€æ“ä½œæ­¥éª¤","children":[]},{"level":2,"title":"2ã€è®­ç»ƒè¿‡ç¨‹","slug":"_2ã€è®­ç»ƒè¿‡ç¨‹","link":"#_2ã€è®­ç»ƒè¿‡ç¨‹","children":[{"level":3,"title":"ï¼ˆ1ï¼‰å‡†å¤‡æ•°æ®","slug":"_1-å‡†å¤‡æ•°æ®","link":"#_1-å‡†å¤‡æ•°æ®","children":[]},{"level":3,"title":"ï¼ˆ2ï¼‰åŠ è½½æ¨¡å‹","slug":"_2-åŠ è½½æ¨¡å‹","link":"#_2-åŠ è½½æ¨¡å‹","children":[]}]}]},{"level":1,"title":"ä¸‰ã€è¿›è¡Œè¯­éŸ³è¯†åˆ«","slug":"ä¸‰ã€è¿›è¡Œè¯­éŸ³è¯†åˆ«","link":"#ä¸‰ã€è¿›è¡Œè¯­éŸ³è¯†åˆ«","children":[{"level":2,"title":"1ã€æ“ä½œæ­¥éª¤","slug":"_1ã€æ“ä½œæ­¥éª¤-1","link":"#_1ã€æ“ä½œæ­¥éª¤-1","children":[]},{"level":2,"title":"2ã€è®­ç»ƒè¿‡ç¨‹","slug":"_2ã€è®­ç»ƒè¿‡ç¨‹-1","link":"#_2ã€è®­ç»ƒè¿‡ç¨‹-1","children":[]}]}],"relativePath":"column/MachineLearning/Tensorflow/12_SpeechRecognition.md","filePath":"column/MachineLearning/Tensorflow/12_SpeechRecognition.md","lastUpdated":1720881464000}'),p={name:"column/MachineLearning/Tensorflow/12_SpeechRecognition.md"},o=l(`<h1 id="ä¸€ã€ä»»åŠ¡ç®€ä»‹" tabindex="-1">ä¸€ã€ä»»åŠ¡ç®€ä»‹ <a class="header-anchor" href="#ä¸€ã€ä»»åŠ¡ç®€ä»‹" aria-label="Permalink to &quot;ä¸€ã€ä»»åŠ¡ç®€ä»‹&quot;">â€‹</a></h1><h2 id="_1ã€ä»€ä¹ˆæ˜¯è¯­éŸ³è¯†åˆ«" tabindex="-1">1ã€ä»€ä¹ˆæ˜¯è¯­éŸ³è¯†åˆ« <a class="header-anchor" href="#_1ã€ä»€ä¹ˆæ˜¯è¯­éŸ³è¯†åˆ«" aria-label="Permalink to &quot;1ã€ä»€ä¹ˆæ˜¯è¯­éŸ³è¯†åˆ«&quot;">â€‹</a></h2><ul><li>è¯­éŸ³è¯†åˆ«åœ¨ç”Ÿæ´»ä¸­éå¸¸å¸¸è§ï¼Œæ¯”å¦‚è¯´è®¯é£è¯­éŸ³è¾“å…¥æ³•ï¼Œè¿˜æœ‰è‹¹æœçš„ Siri ç­‰ç­‰ã€‚</li><li>è¯­éŸ³è¯†åˆ«å…¶å®å°±æ˜¯æ¨¡å‹<strong>æ¥å—å£°éŸ³ä¿¡æ¯</strong>ï¼Œç„¶å<strong>è¾“å‡ºåˆ†ç±»ä¿¡æ¯</strong>ã€‚</li><li>ä¸ºä»€ä¹ˆæ˜¯è¾“å‡ºåˆ†ç±»ä¿¡æ¯å‘¢ï¼Ÿå…¶å®è¯­éŸ³è¯†åˆ«çš„æœ¬è´¨ä¹Ÿæ˜¯ä¸€ç§åˆ†ç±»ï¼Œæ¯”å¦‚ä½ ç»™æ¨¡å‹ä¸€æ®µå£°éŸ³ï¼Œå®ƒå¸®ä½ åˆ†è¾¨å‡ºè¿™æ˜¯å“ªå‡ ä¸ªå•è¯ã€‚æ‰€ä»¥è¯´æˆ‘ä»¬è¿™æ¬¡ä»»åŠ¡æ‰€è¯´çš„è¯­éŸ³è¯†åˆ«ï¼Œå…¶å®å°±æ˜¯å£°éŸ³åˆ†ç±»æˆ–è€…è¯­éŸ³åˆ†ç±»ã€‚</li><li>é‚£å£°éŸ³åˆ†ç±»æ˜¯æ€ä¹ˆå®ç°çš„å‘¢ï¼Ÿå…¶å®ï¼Œå£°éŸ³åœ¨è®¡ç®—æœºé‡Œæ˜¯<strong>å£°è°±å›¾</strong>ï¼Œæˆ‘ä»¬ç»å¸¸ä¼šçœ‹åˆ°è®¡ç®—æœºé‡Œå„ç§éŸ³é¢‘å¯è§†åŒ–çš„ä¸€äº›æ ·å­ï¼Œä¹Ÿå°±æ˜¯ä¸€ç§<strong>å›¾åƒ</strong>ã€‚å› æ­¤ï¼Œæ—¢ç„¶æ˜¯å›¾åƒï¼Œé‚£ä¹ˆå…¶å®å£°éŸ³çš„è¯†åˆ«ä¹Ÿå¯ä»¥ä½¿ç”¨å·ç§¯ç¥ç»ç½‘ç»œï¼Œå› ä¸ºå·ç§¯ç¥ç»ç½‘ç»œçš„æœ¬è´¨å°±æ˜¯<strong>å¤„ç†å›¾åƒ</strong>ã€‚</li></ul><h2 id="_2ã€æ“ä½œæ­¥éª¤" tabindex="-1">2ã€æ“ä½œæ­¥éª¤ <a class="header-anchor" href="#_2ã€æ“ä½œæ­¥éª¤" aria-label="Permalink to &quot;2ã€æ“ä½œæ­¥éª¤&quot;">â€‹</a></h2><ul><li><strong>åŠ è½½é¢„è®­ç»ƒè¯­éŸ³è¯†åˆ«æ¨¡å‹</strong> â€”â€” è¿™ä¸ªé¢„è®­ç»ƒæ¨¡å‹æ˜¯<code>Tensorflow</code>å®˜æ–¹çš„ä¸€ä¸ªæ¨¡å‹ï¼Œä»–ä»¬å»ºç«‹äº†ä¸€ä¸ª<strong>è¯­éŸ³å‘½ä»¤æ•°æ®é›†</strong>ï¼Œè¿™ä¸ªæ•°æ®é›†åªæœ‰å¾ˆæœ‰é™çš„å‡ ä¸ªå•è¯ã€‚ç„¶åå®˜æ–¹ä½¿ç”¨ <code>Python</code> ç‰ˆçš„ <code>Tensorflow</code> è®­ç»ƒäº†å¾ˆé•¿å¾ˆé•¿æ—¶é—´ï¼Œå‡†ç¡®åº¦è®­ç»ƒçš„å¾ˆé«˜ï¼Œæœ€åè½¬åŒ–ä¸ºäº†æˆ‘ä»¬ <code>Tensorflow. js</code> å¯ä»¥åŠ è½½çš„æ¨¡å‹æ ¼å¼ï¼Œè€Œæˆ‘ä»¬è¦åŠ è½½çš„å°±æ˜¯ <code>Tensorflow.js</code> ä½¿ç”¨çš„<strong>æ¨¡å‹æ ¼å¼</strong>ã€‚</li><li><strong>è¿›è¡Œè¯­éŸ³è¯†åˆ«</strong> â€”â€” ä½¿ç”¨<code>Tensorflow.js</code>å®˜æ–¹çš„ä¸€ä¸ª<strong>è¯­éŸ³å‘½ä»¤åŒ…</strong>ï¼Œå®ƒé‡Œé¢å°è£…äº†ä¸€äº›æ“ä½œï¼Œç„¶åæˆ‘ä»¬ç›´æ¥è°ƒç”¨è¿™ä¸ªåŒ…å°±å¯ä»¥è¿›è¡Œæ¨¡å‹åŠ è½½ä»¥åŠè¯­éŸ³è¯†åˆ«çš„ç›¸å…³æ“ä½œäº†ã€‚</li></ul><h1 id="äºŒã€åŠ è½½é¢„è®­ç»ƒè¯­éŸ³è¯†åˆ«æ¨¡å‹" tabindex="-1">äºŒã€åŠ è½½é¢„è®­ç»ƒè¯­éŸ³è¯†åˆ«æ¨¡å‹ <a class="header-anchor" href="#äºŒã€åŠ è½½é¢„è®­ç»ƒè¯­éŸ³è¯†åˆ«æ¨¡å‹" aria-label="Permalink to &quot;äºŒã€åŠ è½½é¢„è®­ç»ƒè¯­éŸ³è¯†åˆ«æ¨¡å‹&quot;">â€‹</a></h1><h2 id="_1ã€æ“ä½œæ­¥éª¤" tabindex="-1">1ã€æ“ä½œæ­¥éª¤ <a class="header-anchor" href="#_1ã€æ“ä½œæ­¥éª¤" aria-label="Permalink to &quot;1ã€æ“ä½œæ­¥éª¤&quot;">â€‹</a></h2><ul><li>ä¸‹è½½è¯­éŸ³è¯†åˆ«æ¨¡å‹æ–‡ä»¶</li><li>åœ¨æœ¬åœ°å¼€å¯é™æ€æ–‡ä»¶æœåŠ¡å™¨</li><li>ä½¿ç”¨<code>tfjs-models</code>çš„<code>speech-commands</code>åŒ…åŠ è½½æ¨¡å‹ â€”â€” <code>tfjs-models</code>æ˜¯<code>Tensorflow</code>å®˜æ–¹çš„ä¸€ä¸ªæ¨¡å‹åº“ï¼Œé‡Œé¢æœ‰å„ç§å„æ ·çš„æ¨¡å‹ï¼Œä¸æ­¤åŒæ—¶ï¼Œè¿™äº›æ¨¡å‹åº“å·²ç»å¸®åŠ©æˆ‘ä»¬å†™å¥½äº†<strong>æ¨¡å‹åŠ è½½ä»¥åŠé¢„æµ‹</strong>ç›¸å…³çš„<code>TFJS</code>çš„ä»£ç ã€‚</li></ul><h2 id="_2ã€è®­ç»ƒè¿‡ç¨‹" tabindex="-1">2ã€è®­ç»ƒè¿‡ç¨‹ <a class="header-anchor" href="#_2ã€è®­ç»ƒè¿‡ç¨‹" aria-label="Permalink to &quot;2ã€è®­ç»ƒè¿‡ç¨‹&quot;">â€‹</a></h2><h3 id="_1-å‡†å¤‡æ•°æ®" tabindex="-1">ï¼ˆ1ï¼‰å‡†å¤‡æ•°æ® <a class="header-anchor" href="#_1-å‡†å¤‡æ•°æ®" aria-label="Permalink to &quot;ï¼ˆ1ï¼‰å‡†å¤‡æ•°æ®&quot;">â€‹</a></h3><p>é¦–å…ˆåˆ›å»ºæ–‡ä»¶å¤¹<code>data/speech</code>ï¼Œç„¶ååœ¨<code>speech</code>ä¸‹ï¼Œå­˜æ”¾è¿™äº›å†…å®¹ã€‚<strong>å¦‚ä¸‹å›¾æ‰€ç¤ºï¼š</strong></p><p><img src="https://mondaylab-1309616765.cos.ap-shanghai.myqcloud.com/images/202407132158697.png" alt="img"></p><p>å…¶ä¸­ï¼Œ<code>group1</code>å¼€å¤´çš„æ˜¯<strong>ä¸¤ä¸ªæƒé‡æ–‡ä»¶</strong>ï¼Œ<code>metadata.json</code>æ˜¯å…ƒä¿¡æ¯çš„<code>json</code>ï¼Œ<code>model.json</code>æ˜¯æ¨¡å‹çš„<code>json</code>ã€‚</p><p>ä¸‹é¢é™„ä¸Šæ•°æ®æ–‡ä»¶ğŸ‘‡ğŸ»ï¼š</p><p>æš‚æ—¶æ— æ³•åœ¨é£ä¹¦æ–‡æ¡£å¤–å±•ç¤ºæ­¤å†…å®¹</p><h3 id="_2-åŠ è½½æ¨¡å‹" tabindex="-1">ï¼ˆ2ï¼‰åŠ è½½æ¨¡å‹ <a class="header-anchor" href="#_2-åŠ è½½æ¨¡å‹" aria-label="Permalink to &quot;ï¼ˆ2ï¼‰åŠ è½½æ¨¡å‹&quot;">â€‹</a></h3><p>æ¥ç€ï¼Œæ ¹ç›®å½•åˆ›å»ºä¸€ä¸ªæ–°çš„æ–‡ä»¶å¤¹<code>speech</code>ï¼Œç„¶ååœ¨è¿™ä¸ªæ–‡ä»¶å¤¹ä¸‹é¢åˆ›å»ºä¸¤ä¸ªæ–‡ä»¶ï¼Œåˆ†åˆ«ä¸º<code>index.html</code>å’Œ<code>script.js</code>ã€‚</p><p><code>index.html</code>ä»£ç å¦‚ä¸‹ï¼š</p><div class="language-JavaScript vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">JavaScript</span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#E1E4E8;">&lt;</span><span style="color:#85E89D;">script</span><span style="color:#E1E4E8;"> </span><span style="color:#B392F0;">src</span><span style="color:#F97583;">=</span><span style="color:#9ECBFF;">&quot;script.js&quot;</span><span style="color:#E1E4E8;">&gt;&lt;/</span><span style="color:#85E89D;">script</span><span style="color:#E1E4E8;">&gt;</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#24292E;">&lt;</span><span style="color:#22863A;">script</span><span style="color:#24292E;"> </span><span style="color:#6F42C1;">src</span><span style="color:#D73A49;">=</span><span style="color:#032F62;">&quot;script.js&quot;</span><span style="color:#24292E;">&gt;&lt;/</span><span style="color:#22863A;">script</span><span style="color:#24292E;">&gt;</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br></div></div><p><code>script.js</code>ä»£ç å¦‚ä¸‹ï¼š</p><div class="language-JavaScript vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">JavaScript</span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#F97583;">import</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">*</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">as</span><span style="color:#E1E4E8;"> speechCommands </span><span style="color:#F97583;">from</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">&#39;@tensorflow-models/speech-commands&#39;</span><span style="color:#E1E4E8;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F97583;">const</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">MODEL_PATH</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">&#39;http://127.0.0.1:8080/speech&#39;</span><span style="color:#E1E4E8;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#E1E4E8;">window.</span><span style="color:#B392F0;">onload</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">async</span><span style="color:#E1E4E8;"> () </span><span style="color:#F97583;">=&gt;</span><span style="color:#E1E4E8;"> {</span></span>
<span class="line"><span style="color:#E1E4E8;">  </span><span style="color:#6A737D;">/**</span></span>
<span class="line"><span style="color:#6A737D;">   * åŠ è½½é¢„è®­ç»ƒè¯­éŸ³è¯†åˆ«æ¨¡å‹</span></span>
<span class="line"><span style="color:#6A737D;">   */</span></span>
<span class="line"><span style="color:#E1E4E8;">  </span><span style="color:#F97583;">const</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">recognizer</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> speechCommands.</span><span style="color:#B392F0;">create</span><span style="color:#E1E4E8;">(</span></span>
<span class="line"><span style="color:#E1E4E8;">    </span><span style="color:#9ECBFF;">&#39;BROWSER_FFT&#39;</span><span style="color:#E1E4E8;">, </span><span style="color:#6A737D;">// å‚…é‡Œå¶çš„å˜æ¢ï¼Œè¿™é‡Œé€‰æ‹©æµè§ˆå™¨è‡ªå¸¦çš„åŸç”Ÿçš„å‚…é‡Œå¶</span></span>
<span class="line"><span style="color:#E1E4E8;">    </span><span style="color:#79B8FF;">null</span><span style="color:#E1E4E8;">, </span><span style="color:#6A737D;">// åˆå§‹åŒ–è¦è¯†åˆ«çš„å•è¯</span></span>
<span class="line"><span style="color:#E1E4E8;">    </span><span style="color:#79B8FF;">MODEL_PATH</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">+</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">&#39;/model.json&#39;</span><span style="color:#E1E4E8;">, </span><span style="color:#6A737D;">// è‡ªå¸¦çš„æ¨¡å‹URL</span></span>
<span class="line"><span style="color:#E1E4E8;">    </span><span style="color:#79B8FF;">MODEL_PATH</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">+</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">&#39;/metadata.json&#39;</span><span style="color:#E1E4E8;"> </span><span style="color:#6A737D;">// è‡ªå®šä¹‰å…ƒä¿¡æ¯çš„url</span></span>
<span class="line"><span style="color:#E1E4E8;">  );</span></span>
<span class="line"></span>
<span class="line"><span style="color:#E1E4E8;">  </span><span style="color:#6A737D;">// ç¡®ä¿æ¨¡å‹åŠ è½½ï¼Œè°ƒç”¨æ¨¡å‹çš„ensureModelLoadedï¼ˆå¯ä»¥åœ¨æµè§ˆå™¨çš„networké‡Œé¢çœ‹åˆ°ï¼‰</span></span>
<span class="line"><span style="color:#E1E4E8;">  </span><span style="color:#F97583;">await</span><span style="color:#E1E4E8;"> recognizer.</span><span style="color:#B392F0;">ensureModelLoaded</span><span style="color:#E1E4E8;">();</span></span>
<span class="line"></span>
<span class="line"><span style="color:#E1E4E8;">};</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#D73A49;">import</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">*</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">as</span><span style="color:#24292E;"> speechCommands </span><span style="color:#D73A49;">from</span><span style="color:#24292E;"> </span><span style="color:#032F62;">&#39;@tensorflow-models/speech-commands&#39;</span><span style="color:#24292E;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#D73A49;">const</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">MODEL_PATH</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">=</span><span style="color:#24292E;"> </span><span style="color:#032F62;">&#39;http://127.0.0.1:8080/speech&#39;</span><span style="color:#24292E;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#24292E;">window.</span><span style="color:#6F42C1;">onload</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">=</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">async</span><span style="color:#24292E;"> () </span><span style="color:#D73A49;">=&gt;</span><span style="color:#24292E;"> {</span></span>
<span class="line"><span style="color:#24292E;">  </span><span style="color:#6A737D;">/**</span></span>
<span class="line"><span style="color:#6A737D;">   * åŠ è½½é¢„è®­ç»ƒè¯­éŸ³è¯†åˆ«æ¨¡å‹</span></span>
<span class="line"><span style="color:#6A737D;">   */</span></span>
<span class="line"><span style="color:#24292E;">  </span><span style="color:#D73A49;">const</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">recognizer</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">=</span><span style="color:#24292E;"> speechCommands.</span><span style="color:#6F42C1;">create</span><span style="color:#24292E;">(</span></span>
<span class="line"><span style="color:#24292E;">    </span><span style="color:#032F62;">&#39;BROWSER_FFT&#39;</span><span style="color:#24292E;">, </span><span style="color:#6A737D;">// å‚…é‡Œå¶çš„å˜æ¢ï¼Œè¿™é‡Œé€‰æ‹©æµè§ˆå™¨è‡ªå¸¦çš„åŸç”Ÿçš„å‚…é‡Œå¶</span></span>
<span class="line"><span style="color:#24292E;">    </span><span style="color:#005CC5;">null</span><span style="color:#24292E;">, </span><span style="color:#6A737D;">// åˆå§‹åŒ–è¦è¯†åˆ«çš„å•è¯</span></span>
<span class="line"><span style="color:#24292E;">    </span><span style="color:#005CC5;">MODEL_PATH</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">+</span><span style="color:#24292E;"> </span><span style="color:#032F62;">&#39;/model.json&#39;</span><span style="color:#24292E;">, </span><span style="color:#6A737D;">// è‡ªå¸¦çš„æ¨¡å‹URL</span></span>
<span class="line"><span style="color:#24292E;">    </span><span style="color:#005CC5;">MODEL_PATH</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">+</span><span style="color:#24292E;"> </span><span style="color:#032F62;">&#39;/metadata.json&#39;</span><span style="color:#24292E;"> </span><span style="color:#6A737D;">// è‡ªå®šä¹‰å…ƒä¿¡æ¯çš„url</span></span>
<span class="line"><span style="color:#24292E;">  );</span></span>
<span class="line"></span>
<span class="line"><span style="color:#24292E;">  </span><span style="color:#6A737D;">// ç¡®ä¿æ¨¡å‹åŠ è½½ï¼Œè°ƒç”¨æ¨¡å‹çš„ensureModelLoadedï¼ˆå¯ä»¥åœ¨æµè§ˆå™¨çš„networké‡Œé¢çœ‹åˆ°ï¼‰</span></span>
<span class="line"><span style="color:#24292E;">  </span><span style="color:#D73A49;">await</span><span style="color:#24292E;"> recognizer.</span><span style="color:#6F42C1;">ensureModelLoaded</span><span style="color:#24292E;">();</span></span>
<span class="line"></span>
<span class="line"><span style="color:#24292E;">};</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br></div></div><p>è‡³æ­¤ï¼Œæˆ‘ä»¬å°±å®Œæˆäº†æ¨¡å‹åŠ è½½ï¼</p><h1 id="ä¸‰ã€è¿›è¡Œè¯­éŸ³è¯†åˆ«" tabindex="-1">ä¸‰ã€è¿›è¡Œè¯­éŸ³è¯†åˆ« <a class="header-anchor" href="#ä¸‰ã€è¿›è¡Œè¯­éŸ³è¯†åˆ«" aria-label="Permalink to &quot;ä¸‰ã€è¿›è¡Œè¯­éŸ³è¯†åˆ«&quot;">â€‹</a></h1><h2 id="_1ã€æ“ä½œæ­¥éª¤-1" tabindex="-1">1ã€æ“ä½œæ­¥éª¤ <a class="header-anchor" href="#_1ã€æ“ä½œæ­¥éª¤-1" aria-label="Permalink to &quot;1ã€æ“ä½œæ­¥éª¤&quot;">â€‹</a></h2><ul><li><strong>ä»æµè§ˆå™¨ç›‘å¬éº¦å…‹é£è¾“å…¥</strong> â€”â€” è¯­éŸ³å‘½ä»¤åŒ…å·²ç»å¸®æˆ‘ä»¬å®ç°å¥½äº†ç›¸å…³çš„åŠŸèƒ½ï¼Œæˆ‘ä»¬åªéœ€è¦è°ƒç”¨è¯­éŸ³å‘½ä»¤çš„listenæ–¹æ³•ï¼Œå³å¯å®Œæˆæ­¤é¡¹æ“ä½œã€‚</li><li><strong>è¿›è¡Œè¯­éŸ³è¯†åˆ«</strong> â€”â€” å¯¹ç€ç”µè„‘çš„éº¦å…‹é£è¯´å‡ ä¸ªå•è¯ï¼Œè®©ç”µè„‘æ¥è¯†åˆ«å‡ºå…·ä½“æ‰€è¯´çš„è¯ã€‚</li><li><strong>æ˜¾ç¤ºè¯­éŸ³è¯†åˆ«ç»“æœ</strong> â€”â€” ç¼–å†™ç›¸åº”çš„å‰ç«¯ç•Œé¢ï¼Œæ¥æ˜¾ç¤ºæœ€åçš„ç»“æœ</li></ul><h2 id="_2ã€è®­ç»ƒè¿‡ç¨‹-1" tabindex="-1">2ã€è®­ç»ƒè¿‡ç¨‹ <a class="header-anchor" href="#_2ã€è®­ç»ƒè¿‡ç¨‹-1" aria-label="Permalink to &quot;2ã€è®­ç»ƒè¿‡ç¨‹&quot;">â€‹</a></h2><p>ç»§ç»­å®Œå–„ä¸Šé¢çš„ä»£ç ï¼Œé¦–å…ˆæ˜¯<code>index.html</code>çš„ä»£ç ï¼š</p><div class="language-JavaScript vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">JavaScript</span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#E1E4E8;">&lt;</span><span style="color:#85E89D;">script</span><span style="color:#E1E4E8;"> </span><span style="color:#B392F0;">src</span><span style="color:#F97583;">=</span><span style="color:#9ECBFF;">&quot;script.js&quot;</span><span style="color:#E1E4E8;">&gt;&lt;/</span><span style="color:#85E89D;">script</span><span style="color:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="color:#E1E4E8;">&lt;</span><span style="color:#85E89D;">style</span><span style="color:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="color:#E1E4E8;">    #result&gt;div {</span></span>
<span class="line"><span style="color:#E1E4E8;">        float: left;</span></span>
<span class="line"><span style="color:#E1E4E8;">        padding: 20px;</span></span>
<span class="line"><span style="color:#E1E4E8;">    }</span></span>
<span class="line"><span style="color:#E1E4E8;">&lt;/</span><span style="color:#85E89D;">style</span><span style="color:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="color:#E1E4E8;">&lt;</span><span style="color:#85E89D;">div</span><span style="color:#E1E4E8;"> </span><span style="color:#B392F0;">id</span><span style="color:#F97583;">=</span><span style="color:#9ECBFF;">&quot;result&quot;</span><span style="color:#E1E4E8;">&gt;&lt;/</span><span style="color:#85E89D;">div</span><span style="color:#E1E4E8;">&gt;</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#24292E;">&lt;</span><span style="color:#22863A;">script</span><span style="color:#24292E;"> </span><span style="color:#6F42C1;">src</span><span style="color:#D73A49;">=</span><span style="color:#032F62;">&quot;script.js&quot;</span><span style="color:#24292E;">&gt;&lt;/</span><span style="color:#22863A;">script</span><span style="color:#24292E;">&gt;</span></span>
<span class="line"><span style="color:#24292E;">&lt;</span><span style="color:#22863A;">style</span><span style="color:#24292E;">&gt;</span></span>
<span class="line"><span style="color:#24292E;">    #result&gt;div {</span></span>
<span class="line"><span style="color:#24292E;">        float: left;</span></span>
<span class="line"><span style="color:#24292E;">        padding: 20px;</span></span>
<span class="line"><span style="color:#24292E;">    }</span></span>
<span class="line"><span style="color:#24292E;">&lt;/</span><span style="color:#22863A;">style</span><span style="color:#24292E;">&gt;</span></span>
<span class="line"><span style="color:#24292E;">&lt;</span><span style="color:#22863A;">div</span><span style="color:#24292E;"> </span><span style="color:#6F42C1;">id</span><span style="color:#D73A49;">=</span><span style="color:#032F62;">&quot;result&quot;</span><span style="color:#24292E;">&gt;&lt;/</span><span style="color:#22863A;">div</span><span style="color:#24292E;">&gt;</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br></div></div><p>æ¥ç€æ˜¯<code>script.js</code>çš„ä»£ç ï¼š</p><div class="language-JavaScript vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">JavaScript</span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#F97583;">import</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">*</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">as</span><span style="color:#E1E4E8;"> speechCommands </span><span style="color:#F97583;">from</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">&#39;@tensorflow-models/speech-commands&#39;</span><span style="color:#E1E4E8;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F97583;">const</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">MODEL_PATH</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">&#39;http://127.0.0.1:8080/speech&#39;</span><span style="color:#E1E4E8;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#E1E4E8;">window.</span><span style="color:#B392F0;">onload</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">async</span><span style="color:#E1E4E8;"> () </span><span style="color:#F97583;">=&gt;</span><span style="color:#E1E4E8;"> {</span></span>
<span class="line"><span style="color:#E1E4E8;">  </span><span style="color:#6A737D;">/**</span></span>
<span class="line"><span style="color:#6A737D;">   * åŠ è½½é¢„è®­ç»ƒè¯­éŸ³è¯†åˆ«æ¨¡å‹</span></span>
<span class="line"><span style="color:#6A737D;">   */</span></span>
<span class="line"><span style="color:#E1E4E8;">  </span><span style="color:#F97583;">const</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">recognizer</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> speechCommands.</span><span style="color:#B392F0;">create</span><span style="color:#E1E4E8;">(</span></span>
<span class="line"><span style="color:#E1E4E8;">    </span><span style="color:#9ECBFF;">&#39;BROWSER_FFT&#39;</span><span style="color:#E1E4E8;">, </span><span style="color:#6A737D;">// å‚…é‡Œå¶çš„å˜æ¢ï¼Œè¿™é‡Œé€‰æ‹©æµè§ˆå™¨è‡ªå¸¦çš„åŸç”Ÿçš„å‚…é‡Œå¶</span></span>
<span class="line"><span style="color:#E1E4E8;">    </span><span style="color:#79B8FF;">null</span><span style="color:#E1E4E8;">, </span><span style="color:#6A737D;">// åˆå§‹åŒ–è¦è¯†åˆ«çš„å•è¯</span></span>
<span class="line"><span style="color:#E1E4E8;">    </span><span style="color:#79B8FF;">MODEL_PATH</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">+</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">&#39;/model.json&#39;</span><span style="color:#E1E4E8;">, </span><span style="color:#6A737D;">// è‡ªå¸¦çš„æ¨¡å‹URL</span></span>
<span class="line"><span style="color:#E1E4E8;">    </span><span style="color:#79B8FF;">MODEL_PATH</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">+</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">&#39;/metadata.json&#39;</span><span style="color:#E1E4E8;"> </span><span style="color:#6A737D;">// è‡ªå®šä¹‰å…ƒä¿¡æ¯çš„url</span></span>
<span class="line"><span style="color:#E1E4E8;">  );</span></span>
<span class="line"></span>
<span class="line"><span style="color:#E1E4E8;">  </span><span style="color:#6A737D;">// ç¡®ä¿æ¨¡å‹åŠ è½½ï¼Œè°ƒç”¨æ¨¡å‹çš„ensureModelLoadedï¼ˆå¯ä»¥åœ¨æµè§ˆå™¨çš„networké‡Œé¢çœ‹åˆ°ï¼‰</span></span>
<span class="line"><span style="color:#E1E4E8;">  </span><span style="color:#F97583;">await</span><span style="color:#E1E4E8;"> recognizer.</span><span style="color:#B392F0;">ensureModelLoaded</span><span style="color:#E1E4E8;">();</span></span>
<span class="line"></span>
<span class="line"><span style="color:#E1E4E8;">  </span><span style="color:#6A737D;">/**</span></span>
<span class="line"><span style="color:#6A737D;">   * è¿›è¡Œè¯­éŸ³è¯†åˆ«</span></span>
<span class="line"><span style="color:#6A737D;">   */</span></span>
<span class="line"><span style="color:#E1E4E8;">  </span><span style="color:#6A737D;">// wordLabels è¯†åˆ«å™¨é‡Œé¢æ‰€é¢„ç½®çš„èƒ½è¯†åˆ«çš„ä¸€äº›å•è¯</span></span>
<span class="line"><span style="color:#E1E4E8;">  </span><span style="color:#F97583;">const</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">labels</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> recognizer.</span><span style="color:#B392F0;">wordLabels</span><span style="color:#E1E4E8;">().</span><span style="color:#B392F0;">slice</span><span style="color:#E1E4E8;">(</span><span style="color:#79B8FF;">2</span><span style="color:#E1E4E8;">);</span></span>
<span class="line"><span style="color:#E1E4E8;">  </span><span style="color:#6A737D;">// è·å–htmlé‡Œé¢çš„domå…ƒç´ </span></span>
<span class="line"><span style="color:#E1E4E8;">  </span><span style="color:#F97583;">const</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">resultEl</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> document.</span><span style="color:#B392F0;">querySelector</span><span style="color:#E1E4E8;">(</span><span style="color:#9ECBFF;">&#39;#result&#39;</span><span style="color:#E1E4E8;">);</span></span>
<span class="line"><span style="color:#E1E4E8;">  resultEl.innerHTML </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> labels</span></span>
<span class="line"><span style="color:#E1E4E8;">    .</span><span style="color:#B392F0;">map</span><span style="color:#E1E4E8;">(</span></span>
<span class="line"><span style="color:#E1E4E8;">      (</span><span style="color:#FFAB70;">l</span><span style="color:#E1E4E8;">) </span><span style="color:#F97583;">=&gt;</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">\`</span></span>
<span class="line"><span style="color:#9ECBFF;">        &lt;div&gt;\${</span><span style="color:#E1E4E8;">l</span><span style="color:#9ECBFF;">}&lt;/div&gt;</span></span>
<span class="line"><span style="color:#9ECBFF;">    \`</span></span>
<span class="line"><span style="color:#E1E4E8;">    )</span></span>
<span class="line"><span style="color:#E1E4E8;">    .</span><span style="color:#B392F0;">join</span><span style="color:#E1E4E8;">(</span><span style="color:#9ECBFF;">&#39;&#39;</span><span style="color:#E1E4E8;">);</span></span>
<span class="line"><span style="color:#E1E4E8;">  recognizer.</span><span style="color:#B392F0;">listen</span><span style="color:#E1E4E8;">(</span></span>
<span class="line"><span style="color:#E1E4E8;">    (</span><span style="color:#FFAB70;">result</span><span style="color:#E1E4E8;">) </span><span style="color:#F97583;">=&gt;</span><span style="color:#E1E4E8;"> {</span></span>
<span class="line"><span style="color:#E1E4E8;">      </span><span style="color:#F97583;">const</span><span style="color:#E1E4E8;"> { </span><span style="color:#79B8FF;">scores</span><span style="color:#E1E4E8;"> } </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> result;</span></span>
<span class="line"><span style="color:#E1E4E8;">      </span><span style="color:#F97583;">const</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">maxValue</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> Math.</span><span style="color:#B392F0;">max</span><span style="color:#E1E4E8;">(</span><span style="color:#F97583;">...</span><span style="color:#E1E4E8;">scores); </span><span style="color:#6A737D;">// å–å‡ºscoresçš„æœ€å¤§å€¼</span></span>
<span class="line"><span style="color:#E1E4E8;">      </span><span style="color:#F97583;">const</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">index</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> scores.</span><span style="color:#B392F0;">indexOf</span><span style="color:#E1E4E8;">(maxValue) </span><span style="color:#F97583;">-</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">2</span><span style="color:#E1E4E8;">; </span><span style="color:#6A737D;">// å–å‡ºè¯­éŸ³åè¾“å‡ºçš„å€¼ï¼Œå‰é¢æˆªå–æ‰äº†2ä¸ªï¼Œè¿™ä¸ªä¹Ÿç›¸åº”è¦å‡æ‰2ä¸ª</span></span>
<span class="line"><span style="color:#E1E4E8;">      </span><span style="color:#6A737D;">// è¯­éŸ³è¯´å‡ºå“ªä¸ªå•è¯ï¼Œå“ªä¸ªå•è¯å°±å˜ç»¿</span></span>
<span class="line"><span style="color:#E1E4E8;">      resultEl.innerHTML </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> labels</span></span>
<span class="line"><span style="color:#E1E4E8;">        .</span><span style="color:#B392F0;">map</span><span style="color:#E1E4E8;">(</span></span>
<span class="line"><span style="color:#E1E4E8;">          (</span><span style="color:#FFAB70;">l</span><span style="color:#E1E4E8;">, </span><span style="color:#FFAB70;">i</span><span style="color:#E1E4E8;">) </span><span style="color:#F97583;">=&gt;</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">\`</span></span>
<span class="line"><span style="color:#9ECBFF;">        &lt;div style=&quot;background: \${</span><span style="color:#E1E4E8;">i</span><span style="color:#9ECBFF;"> </span><span style="color:#F97583;">===</span><span style="color:#9ECBFF;"> </span><span style="color:#E1E4E8;">index</span><span style="color:#9ECBFF;"> </span><span style="color:#F97583;">&amp;&amp;</span><span style="color:#9ECBFF;"> </span><span style="color:#9ECBFF;">&#39;green&#39;}&quot;&gt;\${</span><span style="color:#E1E4E8;">l</span><span style="color:#9ECBFF;">}&lt;/div&gt;</span></span>
<span class="line"><span style="color:#9ECBFF;">        \`</span></span>
<span class="line"><span style="color:#E1E4E8;">        )</span></span>
<span class="line"><span style="color:#E1E4E8;">        .</span><span style="color:#B392F0;">join</span><span style="color:#E1E4E8;">(</span><span style="color:#9ECBFF;">&#39;&#39;</span><span style="color:#E1E4E8;">);</span></span>
<span class="line"><span style="color:#E1E4E8;">    },</span></span>
<span class="line"><span style="color:#E1E4E8;">    {</span></span>
<span class="line"><span style="color:#E1E4E8;">      overlapFactor: </span><span style="color:#79B8FF;">0.3</span><span style="color:#E1E4E8;">, </span><span style="color:#6A737D;">// æ§åˆ¶è¯­éŸ³è¯†åˆ«çš„é¢‘ç‡</span></span>
<span class="line"><span style="color:#E1E4E8;">      probabilityThreshold: </span><span style="color:#79B8FF;">0.9</span><span style="color:#E1E4E8;"> </span><span style="color:#6A737D;">// é…ç½®å¯èƒ½æ€§çš„é˜ˆå€¼ï¼ˆæ¯”å¦‚è¯´ï¼Œæˆ‘è¯´çš„å•è¯è·Ÿæ¨¡å‹è®­ç»ƒçš„å•è¯å¾—æœ‰90%çš„ç›¸ä¼¼åº¦ï¼Œæ¨¡å‹æ‰ä¼šè¿è¡Œï¼‰</span></span>
<span class="line"><span style="color:#E1E4E8;">    }</span></span>
<span class="line"><span style="color:#E1E4E8;">  );</span></span>
<span class="line"><span style="color:#E1E4E8;">};</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#D73A49;">import</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">*</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">as</span><span style="color:#24292E;"> speechCommands </span><span style="color:#D73A49;">from</span><span style="color:#24292E;"> </span><span style="color:#032F62;">&#39;@tensorflow-models/speech-commands&#39;</span><span style="color:#24292E;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#D73A49;">const</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">MODEL_PATH</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">=</span><span style="color:#24292E;"> </span><span style="color:#032F62;">&#39;http://127.0.0.1:8080/speech&#39;</span><span style="color:#24292E;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#24292E;">window.</span><span style="color:#6F42C1;">onload</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">=</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">async</span><span style="color:#24292E;"> () </span><span style="color:#D73A49;">=&gt;</span><span style="color:#24292E;"> {</span></span>
<span class="line"><span style="color:#24292E;">  </span><span style="color:#6A737D;">/**</span></span>
<span class="line"><span style="color:#6A737D;">   * åŠ è½½é¢„è®­ç»ƒè¯­éŸ³è¯†åˆ«æ¨¡å‹</span></span>
<span class="line"><span style="color:#6A737D;">   */</span></span>
<span class="line"><span style="color:#24292E;">  </span><span style="color:#D73A49;">const</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">recognizer</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">=</span><span style="color:#24292E;"> speechCommands.</span><span style="color:#6F42C1;">create</span><span style="color:#24292E;">(</span></span>
<span class="line"><span style="color:#24292E;">    </span><span style="color:#032F62;">&#39;BROWSER_FFT&#39;</span><span style="color:#24292E;">, </span><span style="color:#6A737D;">// å‚…é‡Œå¶çš„å˜æ¢ï¼Œè¿™é‡Œé€‰æ‹©æµè§ˆå™¨è‡ªå¸¦çš„åŸç”Ÿçš„å‚…é‡Œå¶</span></span>
<span class="line"><span style="color:#24292E;">    </span><span style="color:#005CC5;">null</span><span style="color:#24292E;">, </span><span style="color:#6A737D;">// åˆå§‹åŒ–è¦è¯†åˆ«çš„å•è¯</span></span>
<span class="line"><span style="color:#24292E;">    </span><span style="color:#005CC5;">MODEL_PATH</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">+</span><span style="color:#24292E;"> </span><span style="color:#032F62;">&#39;/model.json&#39;</span><span style="color:#24292E;">, </span><span style="color:#6A737D;">// è‡ªå¸¦çš„æ¨¡å‹URL</span></span>
<span class="line"><span style="color:#24292E;">    </span><span style="color:#005CC5;">MODEL_PATH</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">+</span><span style="color:#24292E;"> </span><span style="color:#032F62;">&#39;/metadata.json&#39;</span><span style="color:#24292E;"> </span><span style="color:#6A737D;">// è‡ªå®šä¹‰å…ƒä¿¡æ¯çš„url</span></span>
<span class="line"><span style="color:#24292E;">  );</span></span>
<span class="line"></span>
<span class="line"><span style="color:#24292E;">  </span><span style="color:#6A737D;">// ç¡®ä¿æ¨¡å‹åŠ è½½ï¼Œè°ƒç”¨æ¨¡å‹çš„ensureModelLoadedï¼ˆå¯ä»¥åœ¨æµè§ˆå™¨çš„networké‡Œé¢çœ‹åˆ°ï¼‰</span></span>
<span class="line"><span style="color:#24292E;">  </span><span style="color:#D73A49;">await</span><span style="color:#24292E;"> recognizer.</span><span style="color:#6F42C1;">ensureModelLoaded</span><span style="color:#24292E;">();</span></span>
<span class="line"></span>
<span class="line"><span style="color:#24292E;">  </span><span style="color:#6A737D;">/**</span></span>
<span class="line"><span style="color:#6A737D;">   * è¿›è¡Œè¯­éŸ³è¯†åˆ«</span></span>
<span class="line"><span style="color:#6A737D;">   */</span></span>
<span class="line"><span style="color:#24292E;">  </span><span style="color:#6A737D;">// wordLabels è¯†åˆ«å™¨é‡Œé¢æ‰€é¢„ç½®çš„èƒ½è¯†åˆ«çš„ä¸€äº›å•è¯</span></span>
<span class="line"><span style="color:#24292E;">  </span><span style="color:#D73A49;">const</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">labels</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">=</span><span style="color:#24292E;"> recognizer.</span><span style="color:#6F42C1;">wordLabels</span><span style="color:#24292E;">().</span><span style="color:#6F42C1;">slice</span><span style="color:#24292E;">(</span><span style="color:#005CC5;">2</span><span style="color:#24292E;">);</span></span>
<span class="line"><span style="color:#24292E;">  </span><span style="color:#6A737D;">// è·å–htmlé‡Œé¢çš„domå…ƒç´ </span></span>
<span class="line"><span style="color:#24292E;">  </span><span style="color:#D73A49;">const</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">resultEl</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">=</span><span style="color:#24292E;"> document.</span><span style="color:#6F42C1;">querySelector</span><span style="color:#24292E;">(</span><span style="color:#032F62;">&#39;#result&#39;</span><span style="color:#24292E;">);</span></span>
<span class="line"><span style="color:#24292E;">  resultEl.innerHTML </span><span style="color:#D73A49;">=</span><span style="color:#24292E;"> labels</span></span>
<span class="line"><span style="color:#24292E;">    .</span><span style="color:#6F42C1;">map</span><span style="color:#24292E;">(</span></span>
<span class="line"><span style="color:#24292E;">      (</span><span style="color:#E36209;">l</span><span style="color:#24292E;">) </span><span style="color:#D73A49;">=&gt;</span><span style="color:#24292E;"> </span><span style="color:#032F62;">\`</span></span>
<span class="line"><span style="color:#032F62;">        &lt;div&gt;\${</span><span style="color:#24292E;">l</span><span style="color:#032F62;">}&lt;/div&gt;</span></span>
<span class="line"><span style="color:#032F62;">    \`</span></span>
<span class="line"><span style="color:#24292E;">    )</span></span>
<span class="line"><span style="color:#24292E;">    .</span><span style="color:#6F42C1;">join</span><span style="color:#24292E;">(</span><span style="color:#032F62;">&#39;&#39;</span><span style="color:#24292E;">);</span></span>
<span class="line"><span style="color:#24292E;">  recognizer.</span><span style="color:#6F42C1;">listen</span><span style="color:#24292E;">(</span></span>
<span class="line"><span style="color:#24292E;">    (</span><span style="color:#E36209;">result</span><span style="color:#24292E;">) </span><span style="color:#D73A49;">=&gt;</span><span style="color:#24292E;"> {</span></span>
<span class="line"><span style="color:#24292E;">      </span><span style="color:#D73A49;">const</span><span style="color:#24292E;"> { </span><span style="color:#005CC5;">scores</span><span style="color:#24292E;"> } </span><span style="color:#D73A49;">=</span><span style="color:#24292E;"> result;</span></span>
<span class="line"><span style="color:#24292E;">      </span><span style="color:#D73A49;">const</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">maxValue</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">=</span><span style="color:#24292E;"> Math.</span><span style="color:#6F42C1;">max</span><span style="color:#24292E;">(</span><span style="color:#D73A49;">...</span><span style="color:#24292E;">scores); </span><span style="color:#6A737D;">// å–å‡ºscoresçš„æœ€å¤§å€¼</span></span>
<span class="line"><span style="color:#24292E;">      </span><span style="color:#D73A49;">const</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">index</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">=</span><span style="color:#24292E;"> scores.</span><span style="color:#6F42C1;">indexOf</span><span style="color:#24292E;">(maxValue) </span><span style="color:#D73A49;">-</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">2</span><span style="color:#24292E;">; </span><span style="color:#6A737D;">// å–å‡ºè¯­éŸ³åè¾“å‡ºçš„å€¼ï¼Œå‰é¢æˆªå–æ‰äº†2ä¸ªï¼Œè¿™ä¸ªä¹Ÿç›¸åº”è¦å‡æ‰2ä¸ª</span></span>
<span class="line"><span style="color:#24292E;">      </span><span style="color:#6A737D;">// è¯­éŸ³è¯´å‡ºå“ªä¸ªå•è¯ï¼Œå“ªä¸ªå•è¯å°±å˜ç»¿</span></span>
<span class="line"><span style="color:#24292E;">      resultEl.innerHTML </span><span style="color:#D73A49;">=</span><span style="color:#24292E;"> labels</span></span>
<span class="line"><span style="color:#24292E;">        .</span><span style="color:#6F42C1;">map</span><span style="color:#24292E;">(</span></span>
<span class="line"><span style="color:#24292E;">          (</span><span style="color:#E36209;">l</span><span style="color:#24292E;">, </span><span style="color:#E36209;">i</span><span style="color:#24292E;">) </span><span style="color:#D73A49;">=&gt;</span><span style="color:#24292E;"> </span><span style="color:#032F62;">\`</span></span>
<span class="line"><span style="color:#032F62;">        &lt;div style=&quot;background: \${</span><span style="color:#24292E;">i</span><span style="color:#032F62;"> </span><span style="color:#D73A49;">===</span><span style="color:#032F62;"> </span><span style="color:#24292E;">index</span><span style="color:#032F62;"> </span><span style="color:#D73A49;">&amp;&amp;</span><span style="color:#032F62;"> </span><span style="color:#032F62;">&#39;green&#39;}&quot;&gt;\${</span><span style="color:#24292E;">l</span><span style="color:#032F62;">}&lt;/div&gt;</span></span>
<span class="line"><span style="color:#032F62;">        \`</span></span>
<span class="line"><span style="color:#24292E;">        )</span></span>
<span class="line"><span style="color:#24292E;">        .</span><span style="color:#6F42C1;">join</span><span style="color:#24292E;">(</span><span style="color:#032F62;">&#39;&#39;</span><span style="color:#24292E;">);</span></span>
<span class="line"><span style="color:#24292E;">    },</span></span>
<span class="line"><span style="color:#24292E;">    {</span></span>
<span class="line"><span style="color:#24292E;">      overlapFactor: </span><span style="color:#005CC5;">0.3</span><span style="color:#24292E;">, </span><span style="color:#6A737D;">// æ§åˆ¶è¯­éŸ³è¯†åˆ«çš„é¢‘ç‡</span></span>
<span class="line"><span style="color:#24292E;">      probabilityThreshold: </span><span style="color:#005CC5;">0.9</span><span style="color:#24292E;"> </span><span style="color:#6A737D;">// é…ç½®å¯èƒ½æ€§çš„é˜ˆå€¼ï¼ˆæ¯”å¦‚è¯´ï¼Œæˆ‘è¯´çš„å•è¯è·Ÿæ¨¡å‹è®­ç»ƒçš„å•è¯å¾—æœ‰90%çš„ç›¸ä¼¼åº¦ï¼Œæ¨¡å‹æ‰ä¼šè¿è¡Œï¼‰</span></span>
<span class="line"><span style="color:#24292E;">    }</span></span>
<span class="line"><span style="color:#24292E;">  );</span></span>
<span class="line"><span style="color:#24292E;">};</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br><span class="line-number">40</span><br><span class="line-number">41</span><br><span class="line-number">42</span><br><span class="line-number">43</span><br><span class="line-number">44</span><br><span class="line-number">45</span><br><span class="line-number">46</span><br><span class="line-number">47</span><br><span class="line-number">48</span><br><span class="line-number">49</span><br><span class="line-number">50</span><br><span class="line-number">51</span><br><span class="line-number">52</span><br></div></div><p>æœ€åæˆ‘ä»¬æ¥æµè§ˆå™¨çœ‹ä¸‹è¯†åˆ«æ•ˆæœï¼š</p><p><img src="https://mondaylab-1309616765.cos.ap-shanghai.myqcloud.com/images/202407132158097.gif" alt="img"></p><p>è¿™æ˜¯ä¸€å¼ åŠ¨å›¾ä¸æ˜¯MP4å“ˆå“ˆï¼Œå¯ä»¥æƒ³è±¡ä¸ºå°ç¼–å‘æµè§ˆå™¨è¯´äº†å¯¹åº”çš„å­—æ¯ï¼Œç„¶åå®ƒå˜ç»¿äº†ğŸ‘»ã€‚</p>`,33),e=[o];function c(r,t,E,y,i,d){return n(),a("div",null,e)}const u=s(p,[["render",c]]);export{b as __pageData,u as default};
