import{_ as s,o as n,c as a,Q as l}from"./chunks/framework.98c15f2e.js";const F=JSON.parse('{"title":"Reduxä»å…¥é—¨åˆ°è¿›é˜¶ï¼Œçœ‹è¿™ä¸€ç¯‡å°±å¤Ÿäº†ï¼","description":"","frontmatter":{"title":"Reduxä»å…¥é—¨åˆ°è¿›é˜¶ï¼Œçœ‹è¿™ä¸€ç¯‡å°±å¤Ÿäº†ï¼","author":"å‘¨ä¸€","date":"2021-10-26","categories":["å‰ç«¯å¼€å‘"],"tags":["React.js"],"sidebar":"auto"},"headers":[{"level":1,"title":"ğŸŒ‚ åºè¨€","slug":"ğŸŒ‚-åºè¨€","link":"#ğŸŒ‚-åºè¨€","children":[]},{"level":1,"title":"â˜‚ï¸ ä¸€ã€åŸºç¡€çŸ¥è¯†","slug":"â˜‚ï¸-ä¸€ã€åŸºç¡€çŸ¥è¯†","link":"#â˜‚ï¸-ä¸€ã€åŸºç¡€çŸ¥è¯†","children":[{"level":2,"title":"1ã€Redux æ¦‚å¿µç®€è¿°","slug":"_1ã€redux-æ¦‚å¿µç®€è¿°","link":"#_1ã€redux-æ¦‚å¿µç®€è¿°","children":[]},{"level":2,"title":"2ã€Redux çš„å·¥ä½œæµç¨‹","slug":"_2ã€redux-çš„å·¥ä½œæµç¨‹","link":"#_2ã€redux-çš„å·¥ä½œæµç¨‹","children":[]}]},{"level":1,"title":"ğŸƒ äºŒã€ä½¿ç”¨ Antd å®ç° TodoList é¡µé¢å¸ƒå±€","slug":"ğŸƒ-äºŒã€ä½¿ç”¨-antd-å®ç°-todolist-é¡µé¢å¸ƒå±€","link":"#ğŸƒ-äºŒã€ä½¿ç”¨-antd-å®ç°-todolist-é¡µé¢å¸ƒå±€","children":[{"level":2,"title":"1ã€åœ¨é¡¹ç›®ä¸­ä½¿ç”¨ Antd","slug":"_1ã€åœ¨é¡¹ç›®ä¸­ä½¿ç”¨-antd","link":"#_1ã€åœ¨é¡¹ç›®ä¸­ä½¿ç”¨-antd","children":[]},{"level":2,"title":"2ã€ä½¿ç”¨ Antd å®ç° TodoList çš„åŸºæœ¬å¸ƒå±€","slug":"_2ã€ä½¿ç”¨-antd-å®ç°-todolist-çš„åŸºæœ¬å¸ƒå±€","link":"#_2ã€ä½¿ç”¨-antd-å®ç°-todolist-çš„åŸºæœ¬å¸ƒå±€","children":[]},{"level":2,"title":"3ã€åˆ›å»º redux ä¸­çš„ store","slug":"_3ã€åˆ›å»º-redux-ä¸­çš„-store","link":"#_3ã€åˆ›å»º-redux-ä¸­çš„-store","children":[{"level":3,"title":"ï¼ˆ1ï¼‰åˆ›å»º store","slug":"_1-åˆ›å»º-store","link":"#_1-åˆ›å»º-store","children":[]},{"level":3,"title":"ï¼ˆ2ï¼‰åœ¨é¡¹ç›®ä¸­ä½¿ç”¨ store","slug":"_2-åœ¨é¡¹ç›®ä¸­ä½¿ç”¨-store","link":"#_2-åœ¨é¡¹ç›®ä¸­ä½¿ç”¨-store","children":[]}]}]},{"level":1,"title":"ğŸ§µ ä¸‰ã€Action å’Œ Reducer çš„ç¼–å†™ - å¢æ·»åŠŸèƒ½","slug":"ğŸ§µ-ä¸‰ã€action-å’Œ-reducer-çš„ç¼–å†™-å¢æ·»åŠŸèƒ½","link":"#ğŸ§µ-ä¸‰ã€action-å’Œ-reducer-çš„ç¼–å†™-å¢æ·»åŠŸèƒ½","children":[{"level":2,"title":"1ã€ä¸»ä½“é¡µé¢å†…å®¹æ”¹é€ ","slug":"_1ã€ä¸»ä½“é¡µé¢å†…å®¹æ”¹é€ ","link":"#_1ã€ä¸»ä½“é¡µé¢å†…å®¹æ”¹é€ ","children":[]},{"level":2,"title":"2ã€æ”¹å˜ action ä¸­çš„æ•°æ®","slug":"_2ã€æ”¹å˜-action-ä¸­çš„æ•°æ®","link":"#_2ã€æ”¹å˜-action-ä¸­çš„æ•°æ®","children":[]},{"level":2,"title":"3ã€store æ•°æ®æ”¹é€ ","slug":"_3ã€store-æ•°æ®æ”¹é€ ","link":"#_3ã€store-æ•°æ®æ”¹é€ ","children":[]}]},{"level":1,"title":"ğŸ§¶ å››ã€ä½¿ç”¨ Redux å®ç° TodoList çš„åˆ é™¤åŠŸèƒ½","slug":"ğŸ§¶-å››ã€ä½¿ç”¨-redux-å®ç°-todolist-çš„åˆ é™¤åŠŸèƒ½","link":"#ğŸ§¶-å››ã€ä½¿ç”¨-redux-å®ç°-todolist-çš„åˆ é™¤åŠŸèƒ½","children":[{"level":2,"title":"1ã€å¯¹ç»„ä»¶è¿›è¡Œäº‹ä»¶ç»‘å®š","slug":"_1ã€å¯¹ç»„ä»¶è¿›è¡Œäº‹ä»¶ç»‘å®š","link":"#_1ã€å¯¹ç»„ä»¶è¿›è¡Œäº‹ä»¶ç»‘å®š","children":[]},{"level":2,"title":"2ã€åœ¨ reducer ä¸­è¿›è¡Œæ•°æ®é€šä¿¡","slug":"_2ã€åœ¨-reducer-ä¸­è¿›è¡Œæ•°æ®é€šä¿¡","link":"#_2ã€åœ¨-reducer-ä¸­è¿›è¡Œæ•°æ®é€šä¿¡","children":[]}]},{"level":1,"title":"ğŸ‘“ äº”ã€é€»è¾‘å½’çº³","slug":"ğŸ‘“-äº”ã€é€»è¾‘å½’çº³","link":"#ğŸ‘“-äº”ã€é€»è¾‘å½’çº³","children":[{"level":2,"title":"1ã€ActionTypes çš„æ‹†åˆ†","slug":"_1ã€actiontypes-çš„æ‹†åˆ†","link":"#_1ã€actiontypes-çš„æ‹†åˆ†","children":[]},{"level":2,"title":"2ã€ä½¿ç”¨ actionCreator ç»Ÿä¸€åˆ›å»º action","slug":"_2ã€ä½¿ç”¨-actioncreator-ç»Ÿä¸€åˆ›å»º-action","link":"#_2ã€ä½¿ç”¨-actioncreator-ç»Ÿä¸€åˆ›å»º-action","children":[]}]},{"level":1,"title":"ğŸ‘” å…­ã€Redux çš„ä¸€äº›æ€»ç»“","slug":"ğŸ‘”-å…­ã€redux-çš„ä¸€äº›æ€»ç»“","link":"#ğŸ‘”-å…­ã€redux-çš„ä¸€äº›æ€»ç»“","children":[{"level":2,"title":"1ã€Redux è®¾è®¡å’Œä½¿ç”¨çš„ä¸‰é¡¹åŸåˆ™","slug":"_1ã€redux-è®¾è®¡å’Œä½¿ç”¨çš„ä¸‰é¡¹åŸåˆ™","link":"#_1ã€redux-è®¾è®¡å’Œä½¿ç”¨çš„ä¸‰é¡¹åŸåˆ™","children":[]},{"level":2,"title":"2ã€Redux çš„æ ¸å¿ƒ API","slug":"_2ã€redux-çš„æ ¸å¿ƒ-api","link":"#_2ã€redux-çš„æ ¸å¿ƒ-api","children":[]}]},{"level":1,"title":"ğŸ‘ ä¸ƒã€è¿›é˜¶ç»„ä»¶çš„æ‹†åˆ†","slug":"ğŸ‘-ä¸ƒã€è¿›é˜¶ç»„ä»¶çš„æ‹†åˆ†","link":"#ğŸ‘-ä¸ƒã€è¿›é˜¶ç»„ä»¶çš„æ‹†åˆ†","children":[{"level":2,"title":"1ã€UI ç»„ä»¶å’Œå®¹å™¨ç»„ä»¶çš„æ‹†åˆ†","slug":"_1ã€ui-ç»„ä»¶å’Œå®¹å™¨ç»„ä»¶çš„æ‹†åˆ†","link":"#_1ã€ui-ç»„ä»¶å’Œå®¹å™¨ç»„ä»¶çš„æ‹†åˆ†","children":[]},{"level":2,"title":"2ã€æ— çŠ¶æ€ç»„ä»¶","slug":"_2ã€æ— çŠ¶æ€ç»„ä»¶","link":"#_2ã€æ— çŠ¶æ€ç»„ä»¶","children":[]}]},{"level":1,"title":"ğŸ© å…«ã€Redux å‘èµ·å¼‚æ­¥è¯·æ±‚","slug":"ğŸ©-å…«ã€redux-å‘èµ·å¼‚æ­¥è¯·æ±‚","link":"#ğŸ©-å…«ã€redux-å‘èµ·å¼‚æ­¥è¯·æ±‚","children":[{"level":2,"title":"1ã€Redux ä¸­å‘é€å¼‚æ­¥è¯·æ±‚æ•°æ®","slug":"_1ã€redux-ä¸­å‘é€å¼‚æ­¥è¯·æ±‚æ•°æ®","link":"#_1ã€redux-ä¸­å‘é€å¼‚æ­¥è¯·æ±‚æ•°æ®","children":[]},{"level":2,"title":"2ã€Redux-thunk ä¸­é—´ä»¶","slug":"_2ã€redux-thunk-ä¸­é—´ä»¶","link":"#_2ã€redux-thunk-ä¸­é—´ä»¶","children":[{"level":3,"title":"ï¼ˆ1ï¼‰è§£å†³ä»€ä¹ˆé—®é¢˜","slug":"_1-è§£å†³ä»€ä¹ˆé—®é¢˜","link":"#_1-è§£å†³ä»€ä¹ˆé—®é¢˜","children":[]},{"level":3,"title":"ï¼ˆ2ï¼‰å¦‚ä½•ä½¿ç”¨","slug":"_2-å¦‚ä½•ä½¿ç”¨","link":"#_2-å¦‚ä½•ä½¿ç”¨","children":[]},{"level":3,"title":"ï¼ˆ3ï¼‰ä¸ºä»€ä¹ˆè¦ä½¿ç”¨ redux-thunk ï¼Ÿ","slug":"_3-ä¸ºä»€ä¹ˆè¦ä½¿ç”¨-redux-thunk","link":"#_3-ä¸ºä»€ä¹ˆè¦ä½¿ç”¨-redux-thunk","children":[]},{"level":3,"title":"ï¼ˆ4ï¼‰ä»€ä¹ˆæ˜¯ Redux-thunk ä¸­é—´ä»¶ï¼Ÿ","slug":"_4-ä»€ä¹ˆæ˜¯-redux-thunk-ä¸­é—´ä»¶","link":"#_4-ä»€ä¹ˆæ˜¯-redux-thunk-ä¸­é—´ä»¶","children":[]}]}]},{"level":1,"title":"ğŸ’¼ ä¹ã€Redux çš„å…¶ä»–ä¸­é—´ä»¶","slug":"ğŸ’¼-ä¹ã€redux-çš„å…¶ä»–ä¸­é—´ä»¶","link":"#ğŸ’¼-ä¹ã€redux-çš„å…¶ä»–ä¸­é—´ä»¶","children":[{"level":2,"title":"1ã€Redux-logger","slug":"_1ã€redux-logger","link":"#_1ã€redux-logger","children":[]},{"level":2,"title":"2ã€Redux-saga","slug":"_2ã€redux-saga","link":"#_2ã€redux-saga","children":[{"level":3,"title":"ï¼ˆ1ï¼‰Redux-saga æ˜¯ä»€ä¹ˆ","slug":"_1-redux-saga-æ˜¯ä»€ä¹ˆ","link":"#_1-redux-saga-æ˜¯ä»€ä¹ˆ","children":[]},{"level":3,"title":"ï¼ˆ2ï¼‰Redux-saga å¦‚ä½•ä½¿ç”¨","slug":"_2-redux-saga-å¦‚ä½•ä½¿ç”¨","link":"#_2-redux-saga-å¦‚ä½•ä½¿ç”¨","children":[]}]}]},{"level":1,"title":"ğŸ›µ åã€React-Redux","slug":"ğŸ›µ-åã€react-redux","link":"#ğŸ›µ-åã€react-redux","children":[{"level":2,"title":"1ã€React-Redux æ˜¯ä»€ä¹ˆ","slug":"_1ã€react-redux-æ˜¯ä»€ä¹ˆ","link":"#_1ã€react-redux-æ˜¯ä»€ä¹ˆ","children":[]},{"level":2,"title":"2ã€React-Redux çš„ä½¿ç”¨","slug":"_2ã€react-redux-çš„ä½¿ç”¨","link":"#_2ã€react-redux-çš„ä½¿ç”¨","children":[{"level":3,"title":"ï¼ˆ1ï¼‰å®‰è£… React-Redux","slug":"_1-å®‰è£…-react-redux","link":"#_1-å®‰è£…-react-redux","children":[]},{"level":3,"title":"ï¼ˆ2ï¼‰é¡¹ç›®ç›®å½•","slug":"_2-é¡¹ç›®ç›®å½•","link":"#_2-é¡¹ç›®ç›®å½•","children":[]},{"level":3,"title":"ï¼ˆ3ï¼‰æ ¸å¿ƒå†…å®¹","slug":"_3-æ ¸å¿ƒå†…å®¹","link":"#_3-æ ¸å¿ƒå†…å®¹","children":[]}]}]},{"level":1,"title":"ğŸš¦ åä¸€ã€ç»“æŸè¯­","slug":"ğŸš¦-åä¸€ã€ç»“æŸè¯­","link":"#ğŸš¦-åä¸€ã€ç»“æŸè¯­","children":[]},{"level":1,"title":"ğŸ£ å½©è›‹ One More Thing","slug":"ğŸ£-å½©è›‹-one-more-thing","link":"#ğŸ£-å½©è›‹-one-more-thing","children":[{"level":2,"title":"ï¼ˆï¼šå¾€æœŸæ¨è","slug":"å¾€æœŸæ¨è","link":"#å¾€æœŸæ¨è","children":[]}]}],"relativePath":"column/FrontEnd/React/003.md","filePath":"column/FrontEnd/React/003.md","lastUpdated":1685151998000}'),p={name:"column/FrontEnd/React/003.md"},o=l(`<h1 id="ğŸŒ‚-åºè¨€" tabindex="-1">ğŸŒ‚ åºè¨€ <a class="header-anchor" href="#ğŸŒ‚-åºè¨€" aria-label="Permalink to &quot;ğŸŒ‚ åºè¨€&quot;">â€‹</a></h1><p>å¤§å®¶éƒ½çŸ¥é“ï¼Œ <code>react</code> æ˜¯<strong>å•å‘æ•°æ®æµ</strong>ï¼Œæ‰€ä»¥å®ƒä¼ é€’æ•°æ®ä¹Ÿè¾ƒä¸ºç®€å•ï¼Œçˆ¶å­ä¹‹é—´çš„å…³ç³»ä¹Ÿè¾ƒä¸ºæ˜ç¡®ã€‚ä½†æ˜¯å‘¢ï¼Œå¦‚æœæˆ‘ä»¬è¦åšæ›´å¤šå¤æ‚æ•°æ®çš„ä¼ é€’ï¼Œå•å•ä½¿ç”¨ <code>react</code> æ˜¯å®Œå…¨ä¸å¤Ÿçš„ã€‚å› æ­¤ï¼Œæˆ‘ä»¬éœ€è¦ç”¨åˆ° <code>redux</code> æ¥åšæ›´ä¸ºå¤æ‚çš„æ•°æ®ä¼ é€’ã€‚</p><p>é‚£åœ¨ä¸‹é¢çš„è¿™ç¯‡æ–‡ç« ä¸­ï¼Œå°†ä»å…¥é—¨åˆ°è¿›é˜¶ï¼Œè®²è§£ <code>redux</code> çš„å·¥ä½œæµç¨‹ã€‚</p><p>å®ï¼å¼€å§‹ <code>redux</code> ä¹‹æ—…å§~ğŸ‘</p><h1 id="â˜‚ï¸-ä¸€ã€åŸºç¡€çŸ¥è¯†" tabindex="-1">â˜‚ï¸ ä¸€ã€åŸºç¡€çŸ¥è¯† <a class="header-anchor" href="#â˜‚ï¸-ä¸€ã€åŸºç¡€çŸ¥è¯†" aria-label="Permalink to &quot;â˜‚ï¸ ä¸€ã€åŸºç¡€çŸ¥è¯†&quot;">â€‹</a></h1><h2 id="_1ã€redux-æ¦‚å¿µç®€è¿°" tabindex="-1">1ã€Redux æ¦‚å¿µç®€è¿° <a class="header-anchor" href="#_1ã€redux-æ¦‚å¿µç®€è¿°" aria-label="Permalink to &quot;1ã€Redux æ¦‚å¿µç®€è¿°&quot;">â€‹</a></h2><p>å¯¹äº <code>react</code> æ¥è¯´ï¼Œå®ƒæ˜¯ä¸€ä¸ªéè§†å›¾å±‚çš„è½»é‡çº§æ¡†æ¶ï¼Œå¦‚æœè¦ç”¨å®ƒæ¥ä¼ é€’æ•°æ®çš„è¯ï¼Œåˆ™è¦å…ˆçˆ¶ä¼ å­ï¼Œç„¶åå†æ…¢æ…¢åœ°ä¸€å±‚ä¸€å±‚å¾€ä¸Šä¼ é€’ã€‚</p><p>ä½†å¦‚æœç”¨ <code>redux</code> çš„è¯ï¼Œå‡è®¾æˆ‘ä»¬æƒ³è¦<strong>æŸä¸ªç»„ä»¶çš„æ•°æ®</strong>ï¼Œé‚£è¿™ä¸ªç»„ä»¶çš„æ•°æ®åˆ™ä¼šé€šè¿‡ <code>redux</code> æ¥å­˜æ”¾åˆ° <code>store</code> ä¸­è¿›è¡Œç®¡ç†ã€‚ä¹‹åå‘¢ï¼Œé€šè¿‡ <code>store</code> ï¼Œå†æ¥å°†æ•°æ®ä¸€æ­¥æ­¥åœ°å¾€ä¸‹é¢çš„ç»„ä»¶è¿›è¡Œä¼ é€’ã€‚</p><p>å€¼å¾—æ³¨æ„çš„æ˜¯ï¼Œæˆ‘ä»¬å¯ä»¥è§† <code>Redux</code> ä¸º <code>Reducer</code> å’Œ <code>Flux</code> çš„ç»“åˆã€‚</p><h2 id="_2ã€redux-çš„å·¥ä½œæµç¨‹" tabindex="-1">2ã€Redux çš„å·¥ä½œæµç¨‹ <a class="header-anchor" href="#_2ã€redux-çš„å·¥ä½œæµç¨‹" aria-label="Permalink to &quot;2ã€Redux çš„å·¥ä½œæµç¨‹&quot;">â€‹</a></h2><p><code>Redux</code> ï¼Œå®é™…ä¸Šå°±æ˜¯ä¸€ä¸ª<strong>æ•°æ®å±‚</strong>çš„æ¡†æ¶ï¼Œå®ƒæŠŠæ‰€æœ‰çš„æ•°æ®éƒ½æ”¾åœ¨äº† <code>store</code> ä¹‹ä¸­ã€‚<strong>æˆ‘ä»¬å…ˆæ¥çœ‹ä¸€å¼ å›¾ï¼š</strong></p><p><img src="https://mondaylab-1309616765.cos.ap-shanghai.myqcloud.com/images/202305270715450.png" alt="Reduxçš„å·¥ä½œæµç¨‹"></p><p>å¤§å®¶å¯ä»¥çœ‹åˆ°ä¸­é—´çš„ <code>store</code> ï¼Œå®ƒé‡Œé¢å°±å­˜æ”¾ç€<strong>æ‰€æœ‰çš„æ•°æ®</strong>ã€‚ç»§ç»­çœ‹ <code>store</code> å‘ä¸‹çš„ç®­å¤´ï¼Œç„¶åå‘¢ï¼Œæ¯ä¸ªç»„ä»¶éƒ½è¦å‘ <code>store</code> é‡Œé¢å»æ‹¿æ•°æ®ã€‚</p><p>æˆ‘ä»¬ç”¨ä¸€ä¸ªä¾‹å­æ¥æ¢³ç†æ•´å¼ å›¾ï¼Œ<strong>å…·ä½“å¦‚ä¸‹ï¼š</strong></p><ul><li>â‘  æ•´å¼ å›¾ä¸Šæœ‰ä¸€ä¸ª <code>store</code> ï¼Œå®ƒå­˜æ”¾ç€æ‰€æœ‰çš„æ•°æ®ï¼Œä¹Ÿå°±æ˜¯<strong>å­˜å‚¨æ•°æ®çš„å…¬å…±åŒºåŸŸ</strong>ï¼›</li><li>â‘¡ æ¯ä¸ªç»„ä»¶ï¼Œéƒ½è¦ä» <code>store</code> é‡Œé¢æ‹¿æ•°æ®ï¼›</li><li>â‘¢ å‡è®¾ç°åœ¨æœ‰ä¸€ä¸ªåœºæ™¯ï¼Œæ¨¡æ‹Ÿæˆ‘ä»¬è¦åœ¨å›¾ä¹¦é¦†é‡Œé¢å€Ÿä¹¦ã€‚é‚£ä¹ˆæˆ‘ä»¬å¯ä»¥æŠŠ <code>react Component</code> ç†è§£ä¸ºå€Ÿä¹¦äººï¼Œä¹‹åå‘¢ï¼Œå€Ÿä¹¦äººè¦å»æ‰¾å›¾ä¹¦é¦†ç®¡ç†å‘˜æ‰èƒ½å€Ÿåˆ°è¿™æœ¬ä¹¦ã€‚è€Œå€Ÿä¹¦è¿™ä¸ªè¿‡ç¨‹ä¸­æ•°æ®çš„ä¼ é€’ï¼Œå°±å¯ä»¥æŠŠå®ƒè§†ä¸ºæ˜¯ <code>Action Creators</code> ï¼Œå¯ä»¥ç†è§£ä¸º <strong>â€œä½ æƒ³è¦å€Ÿä»€ä¹ˆä¹¦â€</strong> è¿™å¥è¯ã€‚</li><li>â‘£ <code>Action Creatures</code> å»åˆ° <code>store</code> ã€‚è¿™ä¸ªæ—¶å€™æˆ‘ä»¬æŠŠ <code>store</code> å½“åšæ˜¯<strong>å›¾ä¹¦é¦†ç®¡ç†å‘˜</strong>ï¼Œä½†æ˜¯ï¼Œå›¾ä¹¦é¦†ç®¡ç†å‘˜æ˜¯æ²¡æœ‰åŠæ³•è®°ä½æ‰€æœ‰å›¾ä¹¦çš„æ•°æ®æƒ…å†µçš„ã€‚ä¸€èˆ¬æ¥è¯´ï¼Œå®ƒéƒ½éœ€è¦ä¸€ä¸ªè®°å½•æœ¬ï¼Œä½ æƒ³è¦å€Ÿä»€ä¹ˆæ ·çš„ä¹¦ï¼Œé‚£ä¹ˆå¥¹å°±å…ˆæŸ¥ä¸€ä¸‹ï¼›åˆæˆ–è€…ä½ æƒ³è¦è¿˜ä»€ä¹ˆä¹¦ï¼Œå¥¹ä¹Ÿè¦æŸ¥ä¸€ä¸‹ï¼Œéœ€è¦æ”¾å›ä»€ä¹ˆä½ç½®ä¸Šã€‚</li><li>â‘¤ è¿™ä¸ªæ—¶å€™å°±éœ€è¦è·Ÿ <code>reducers</code> å»é€šä¿¡ï¼Œæˆ‘ä»¬å¯ä»¥æŠŠ <code>reducers</code> è§†ä¸ºæ˜¯ä¸€ä¸ª<strong>è®°å½•æœ¬</strong>ï¼Œå›¾ä¹¦é¦†ç®¡ç†å‘˜ç”¨è¿™ä¸ª<strong>è®°å½•æœ¬</strong>æ¥è®°å½•éœ€è¦çš„æ•°æ®ã€‚ç®¡ç†å‘˜ <code>store</code> é€šè¿‡ <code>reducer</code> çŸ¥é“äº†åº”è¯¥ç»™å€Ÿä¹¦äºº <code>Components</code> ä»€ä¹ˆæ ·çš„æ•°æ®ã€‚</li></ul><h1 id="ğŸƒ-äºŒã€ä½¿ç”¨-antd-å®ç°-todolist-é¡µé¢å¸ƒå±€" tabindex="-1">ğŸƒ äºŒã€ä½¿ç”¨ Antd å®ç° TodoList é¡µé¢å¸ƒå±€ <a class="header-anchor" href="#ğŸƒ-äºŒã€ä½¿ç”¨-antd-å®ç°-todolist-é¡µé¢å¸ƒå±€" aria-label="Permalink to &quot;ğŸƒ äºŒã€ä½¿ç”¨ Antd å®ç° TodoList é¡µé¢å¸ƒå±€&quot;">â€‹</a></h1><h2 id="_1ã€åœ¨é¡¹ç›®ä¸­ä½¿ç”¨-antd" tabindex="-1">1ã€åœ¨é¡¹ç›®ä¸­ä½¿ç”¨ Antd <a class="header-anchor" href="#_1ã€åœ¨é¡¹ç›®ä¸­ä½¿ç”¨-antd" aria-label="Permalink to &quot;1ã€åœ¨é¡¹ç›®ä¸­ä½¿ç”¨ Antd&quot;">â€‹</a></h2><p>æ‰“å¼€ <code>antdesign</code> çš„å®˜ç½‘ ğŸ‘‰<a href="https://ant.design/index-cn" target="_blank" rel="noreferrer">antd å®˜ç½‘ä¼ é€é—¨</a>ï¼Œæˆ‘ä»¬å…ˆæ¥åœ¨é¡¹ç›®ä¸­å¼•å…¥å®ƒã€‚<strong>å…·ä½“æ­¥éª¤å¦‚ä¸‹ï¼š</strong></p><p>ç¬¬ä¸€æ­¥ï¼Œå®‰è£… <code>antd</code> ã€‚<strong>å‘½ä»¤å¦‚ä¸‹ï¼š</strong></p><div class="language-bash vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#B392F0;">npm</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">install</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">antd</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">--save</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#6F42C1;">npm</span><span style="color:#24292E;"> </span><span style="color:#032F62;">install</span><span style="color:#24292E;"> </span><span style="color:#032F62;">antd</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">--save</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br></div></div><p>ç¬¬äºŒæ­¥ï¼Œå¼•å…¥æ ·å¼ã€‚<strong>ä»£ç å¦‚ä¸‹ï¼š</strong></p><div class="language-bash vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#B392F0;">import</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">&#39;antd/dist/antd.css&#39;</span><span style="color:#E1E4E8;">; </span><span style="color:#B392F0;">//</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">or</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">&#39;antd/dist/antd.less&#39;</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#6F42C1;">import</span><span style="color:#24292E;"> </span><span style="color:#032F62;">&#39;antd/dist/antd.css&#39;</span><span style="color:#24292E;">; </span><span style="color:#6F42C1;">//</span><span style="color:#24292E;"> </span><span style="color:#032F62;">or</span><span style="color:#24292E;"> </span><span style="color:#032F62;">&#39;antd/dist/antd.less&#39;</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br></div></div><h2 id="_2ã€ä½¿ç”¨-antd-å®ç°-todolist-çš„åŸºæœ¬å¸ƒå±€" tabindex="-1">2ã€ä½¿ç”¨ Antd å®ç° TodoList çš„åŸºæœ¬å¸ƒå±€ <a class="header-anchor" href="#_2ã€ä½¿ç”¨-antd-å®ç°-todolist-çš„åŸºæœ¬å¸ƒå±€" aria-label="Permalink to &quot;2ã€ä½¿ç”¨ Antd å®ç° TodoList çš„åŸºæœ¬å¸ƒå±€&quot;">â€‹</a></h2><p>é¦–å…ˆï¼Œæˆ‘ä»¬åœ¨é¡¹ç›®çš„ <code>src</code> æ–‡ä»¶å¤¹ä¸‹åˆ›å»ºä¸€ä¸ªæ–°çš„æ–‡ä»¶ï¼Œå‘½åä¸º <code>TodoList.js</code> ã€‚<strong>å…·ä½“ä»£ç å¦‚ä¸‹ï¼š</strong></p><div class="language-js vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#F97583;">import</span><span style="color:#E1E4E8;"> React, { Component } </span><span style="color:#F97583;">from</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">&#39;react&#39;</span><span style="color:#E1E4E8;">;</span></span>
<span class="line"><span style="color:#F97583;">import</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">&#39;antd/dist/antd.css&#39;</span><span style="color:#E1E4E8;">;</span></span>
<span class="line"><span style="color:#F97583;">import</span><span style="color:#E1E4E8;"> { Input, Button, List } </span><span style="color:#F97583;">from</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">&#39;antd&#39;</span><span style="color:#E1E4E8;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F97583;">const</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">data</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> [</span></span>
<span class="line"><span style="color:#E1E4E8;">  </span><span style="color:#9ECBFF;">&#39;Racing car sprays burning fuel into crowd.&#39;</span><span style="color:#E1E4E8;">,</span></span>
<span class="line"><span style="color:#E1E4E8;">  </span><span style="color:#9ECBFF;">&#39;Japanese princess to wed commoner.&#39;</span><span style="color:#E1E4E8;">,</span></span>
<span class="line"><span style="color:#E1E4E8;">  </span><span style="color:#9ECBFF;">&#39;Australian walks 100km after outback crash.&#39;</span><span style="color:#E1E4E8;">,</span></span>
<span class="line"><span style="color:#E1E4E8;">  </span><span style="color:#9ECBFF;">&#39;Man charged over missing wedding girl.&#39;</span><span style="color:#E1E4E8;">,</span></span>
<span class="line"><span style="color:#E1E4E8;">  </span><span style="color:#9ECBFF;">&#39;Los Angeles battles huge wildfires.&#39;</span><span style="color:#E1E4E8;">,</span></span>
<span class="line"><span style="color:#E1E4E8;">];</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F97583;">class</span><span style="color:#E1E4E8;"> </span><span style="color:#B392F0;">TodoList</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">extends</span><span style="color:#E1E4E8;"> </span><span style="color:#B392F0;">Component</span><span style="color:#E1E4E8;"> {</span></span>
<span class="line"><span style="color:#E1E4E8;">  </span><span style="color:#B392F0;">render</span><span style="color:#E1E4E8;">() {</span></span>
<span class="line"><span style="color:#E1E4E8;">    </span><span style="color:#F97583;">return</span><span style="color:#E1E4E8;"> (</span></span>
<span class="line"><span style="color:#E1E4E8;">      &lt;</span><span style="color:#85E89D;">div</span><span style="color:#E1E4E8;"> </span><span style="color:#B392F0;">style</span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;">{{ marginTop: </span><span style="color:#9ECBFF;">&#39;10px&#39;</span><span style="color:#E1E4E8;">, marginLeft: </span><span style="color:#9ECBFF;">&#39;10px&#39;</span><span style="color:#E1E4E8;"> }}&gt;</span></span>
<span class="line"><span style="color:#E1E4E8;">        &lt;</span><span style="color:#85E89D;">div</span><span style="color:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="color:#E1E4E8;">          &lt;</span><span style="color:#79B8FF;">Input</span><span style="color:#E1E4E8;"> </span><span style="color:#B392F0;">placeholder</span><span style="color:#F97583;">=</span><span style="color:#9ECBFF;">&#39;todo info&#39;</span><span style="color:#E1E4E8;"> </span><span style="color:#B392F0;">style</span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;">{{ width: </span><span style="color:#9ECBFF;">&#39;300px&#39;</span><span style="color:#E1E4E8;"> }} /&gt;</span></span>
<span class="line"><span style="color:#E1E4E8;">          &lt;</span><span style="color:#79B8FF;">Button</span><span style="color:#E1E4E8;"> </span><span style="color:#B392F0;">type</span><span style="color:#F97583;">=</span><span style="color:#9ECBFF;">&#39;primary&#39;</span><span style="color:#E1E4E8;">&gt;æäº¤&lt;/</span><span style="color:#79B8FF;">Button</span><span style="color:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="color:#E1E4E8;">        &lt;/</span><span style="color:#85E89D;">div</span><span style="color:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="color:#E1E4E8;">        &lt;</span><span style="color:#79B8FF;">List</span></span>
<span class="line"><span style="color:#E1E4E8;">          </span><span style="color:#B392F0;">bordered</span></span>
<span class="line"><span style="color:#E1E4E8;">          </span><span style="color:#B392F0;">dataSource</span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;">{data}</span></span>
<span class="line"><span style="color:#E1E4E8;">          </span><span style="color:#B392F0;">renderItem</span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;">{(</span><span style="color:#FFAB70;">item</span><span style="color:#E1E4E8;">) </span><span style="color:#F97583;">=&gt;</span><span style="color:#E1E4E8;"> &lt;</span><span style="color:#79B8FF;">List.Item</span><span style="color:#E1E4E8;">&gt;{item}&lt;/</span><span style="color:#79B8FF;">List.Item</span><span style="color:#E1E4E8;">&gt;}</span></span>
<span class="line"><span style="color:#E1E4E8;">        /&gt;</span></span>
<span class="line"><span style="color:#E1E4E8;">      &lt;/</span><span style="color:#85E89D;">div</span><span style="color:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="color:#E1E4E8;">    );</span></span>
<span class="line"><span style="color:#E1E4E8;">  }</span></span>
<span class="line"><span style="color:#E1E4E8;">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F97583;">export</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">default</span><span style="color:#E1E4E8;"> TodoList;</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#D73A49;">import</span><span style="color:#24292E;"> React, { Component } </span><span style="color:#D73A49;">from</span><span style="color:#24292E;"> </span><span style="color:#032F62;">&#39;react&#39;</span><span style="color:#24292E;">;</span></span>
<span class="line"><span style="color:#D73A49;">import</span><span style="color:#24292E;"> </span><span style="color:#032F62;">&#39;antd/dist/antd.css&#39;</span><span style="color:#24292E;">;</span></span>
<span class="line"><span style="color:#D73A49;">import</span><span style="color:#24292E;"> { Input, Button, List } </span><span style="color:#D73A49;">from</span><span style="color:#24292E;"> </span><span style="color:#032F62;">&#39;antd&#39;</span><span style="color:#24292E;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#D73A49;">const</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">data</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">=</span><span style="color:#24292E;"> [</span></span>
<span class="line"><span style="color:#24292E;">  </span><span style="color:#032F62;">&#39;Racing car sprays burning fuel into crowd.&#39;</span><span style="color:#24292E;">,</span></span>
<span class="line"><span style="color:#24292E;">  </span><span style="color:#032F62;">&#39;Japanese princess to wed commoner.&#39;</span><span style="color:#24292E;">,</span></span>
<span class="line"><span style="color:#24292E;">  </span><span style="color:#032F62;">&#39;Australian walks 100km after outback crash.&#39;</span><span style="color:#24292E;">,</span></span>
<span class="line"><span style="color:#24292E;">  </span><span style="color:#032F62;">&#39;Man charged over missing wedding girl.&#39;</span><span style="color:#24292E;">,</span></span>
<span class="line"><span style="color:#24292E;">  </span><span style="color:#032F62;">&#39;Los Angeles battles huge wildfires.&#39;</span><span style="color:#24292E;">,</span></span>
<span class="line"><span style="color:#24292E;">];</span></span>
<span class="line"></span>
<span class="line"><span style="color:#D73A49;">class</span><span style="color:#24292E;"> </span><span style="color:#6F42C1;">TodoList</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">extends</span><span style="color:#24292E;"> </span><span style="color:#6F42C1;">Component</span><span style="color:#24292E;"> {</span></span>
<span class="line"><span style="color:#24292E;">  </span><span style="color:#6F42C1;">render</span><span style="color:#24292E;">() {</span></span>
<span class="line"><span style="color:#24292E;">    </span><span style="color:#D73A49;">return</span><span style="color:#24292E;"> (</span></span>
<span class="line"><span style="color:#24292E;">      &lt;</span><span style="color:#22863A;">div</span><span style="color:#24292E;"> </span><span style="color:#6F42C1;">style</span><span style="color:#D73A49;">=</span><span style="color:#24292E;">{{ marginTop: </span><span style="color:#032F62;">&#39;10px&#39;</span><span style="color:#24292E;">, marginLeft: </span><span style="color:#032F62;">&#39;10px&#39;</span><span style="color:#24292E;"> }}&gt;</span></span>
<span class="line"><span style="color:#24292E;">        &lt;</span><span style="color:#22863A;">div</span><span style="color:#24292E;">&gt;</span></span>
<span class="line"><span style="color:#24292E;">          &lt;</span><span style="color:#005CC5;">Input</span><span style="color:#24292E;"> </span><span style="color:#6F42C1;">placeholder</span><span style="color:#D73A49;">=</span><span style="color:#032F62;">&#39;todo info&#39;</span><span style="color:#24292E;"> </span><span style="color:#6F42C1;">style</span><span style="color:#D73A49;">=</span><span style="color:#24292E;">{{ width: </span><span style="color:#032F62;">&#39;300px&#39;</span><span style="color:#24292E;"> }} /&gt;</span></span>
<span class="line"><span style="color:#24292E;">          &lt;</span><span style="color:#005CC5;">Button</span><span style="color:#24292E;"> </span><span style="color:#6F42C1;">type</span><span style="color:#D73A49;">=</span><span style="color:#032F62;">&#39;primary&#39;</span><span style="color:#24292E;">&gt;æäº¤&lt;/</span><span style="color:#005CC5;">Button</span><span style="color:#24292E;">&gt;</span></span>
<span class="line"><span style="color:#24292E;">        &lt;/</span><span style="color:#22863A;">div</span><span style="color:#24292E;">&gt;</span></span>
<span class="line"><span style="color:#24292E;">        &lt;</span><span style="color:#005CC5;">List</span></span>
<span class="line"><span style="color:#24292E;">          </span><span style="color:#6F42C1;">bordered</span></span>
<span class="line"><span style="color:#24292E;">          </span><span style="color:#6F42C1;">dataSource</span><span style="color:#D73A49;">=</span><span style="color:#24292E;">{data}</span></span>
<span class="line"><span style="color:#24292E;">          </span><span style="color:#6F42C1;">renderItem</span><span style="color:#D73A49;">=</span><span style="color:#24292E;">{(</span><span style="color:#E36209;">item</span><span style="color:#24292E;">) </span><span style="color:#D73A49;">=&gt;</span><span style="color:#24292E;"> &lt;</span><span style="color:#005CC5;">List.Item</span><span style="color:#24292E;">&gt;{item}&lt;/</span><span style="color:#005CC5;">List.Item</span><span style="color:#24292E;">&gt;}</span></span>
<span class="line"><span style="color:#24292E;">        /&gt;</span></span>
<span class="line"><span style="color:#24292E;">      &lt;/</span><span style="color:#22863A;">div</span><span style="color:#24292E;">&gt;</span></span>
<span class="line"><span style="color:#24292E;">    );</span></span>
<span class="line"><span style="color:#24292E;">  }</span></span>
<span class="line"><span style="color:#24292E;">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#D73A49;">export</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">default</span><span style="color:#24292E;"> TodoList;</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br></div></div><p><strong>æ­¤æ—¶æµè§ˆå™¨çš„æ˜¾ç¤ºæ•ˆæœä¸ºï¼š</strong></p><p><img src="https://mondaylab-1309616765.cos.ap-shanghai.myqcloud.com/images/202305270715084.png" alt="antdå¸ƒå±€todoList"></p><h2 id="_3ã€åˆ›å»º-redux-ä¸­çš„-store" tabindex="-1">3ã€åˆ›å»º redux ä¸­çš„ store <a class="header-anchor" href="#_3ã€åˆ›å»º-redux-ä¸­çš„-store" aria-label="Permalink to &quot;3ã€åˆ›å»º redux ä¸­çš„ store&quot;">â€‹</a></h2><h3 id="_1-åˆ›å»º-store" tabindex="-1">ï¼ˆ1ï¼‰åˆ›å»º store <a class="header-anchor" href="#_1-åˆ›å»º-store" aria-label="Permalink to &quot;ï¼ˆ1ï¼‰åˆ›å»º store&quot;">â€‹</a></h3><p>æ¥ä¸‹æ¥æˆ‘ä»¬æ¥åˆ›å»ºé¡¹ç›®ä¸­çš„ <code>store</code> ã€‚é¦–å…ˆåœ¨é¡¹ç›®çš„ <code>src</code> æ–‡ä»¶å¤¹ä¸‹åˆ›å»ºä¸€ä¸ªæ–°çš„æ–‡ä»¶å¤¹ï¼Œå‘½åä¸º <code>store</code> ã€‚æ¥ç€ï¼Œæˆ‘ä»¬åœ¨ <code>store</code> æ–‡ä»¶å¤¹ä¸‹é¢ï¼Œåˆ›å»ºä¸€ä¸ªæ–°çš„æ–‡ä»¶ï¼Œå‘½åä¸º <code>index.js</code> ã€‚<strong>å…·ä½“ä»£ç å¦‚ä¸‹ï¼š</strong></p><div class="language-js vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#F97583;">import</span><span style="color:#E1E4E8;"> { createStore } </span><span style="color:#F97583;">from</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">&#39;redux&#39;</span><span style="color:#E1E4E8;">;</span></span>
<span class="line"><span style="color:#F97583;">import</span><span style="color:#E1E4E8;"> reducer </span><span style="color:#F97583;">from</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">&#39;./reducer&#39;</span><span style="color:#E1E4E8;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F97583;">const</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">store</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> </span><span style="color:#B392F0;">createStore</span><span style="color:#E1E4E8;">(reducer);</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F97583;">export</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">default</span><span style="color:#E1E4E8;"> store;</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#D73A49;">import</span><span style="color:#24292E;"> { createStore } </span><span style="color:#D73A49;">from</span><span style="color:#24292E;"> </span><span style="color:#032F62;">&#39;redux&#39;</span><span style="color:#24292E;">;</span></span>
<span class="line"><span style="color:#D73A49;">import</span><span style="color:#24292E;"> reducer </span><span style="color:#D73A49;">from</span><span style="color:#24292E;"> </span><span style="color:#032F62;">&#39;./reducer&#39;</span><span style="color:#24292E;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#D73A49;">const</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">store</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">=</span><span style="color:#24292E;"> </span><span style="color:#6F42C1;">createStore</span><span style="color:#24292E;">(reducer);</span></span>
<span class="line"></span>
<span class="line"><span style="color:#D73A49;">export</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">default</span><span style="color:#24292E;"> store;</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><p>ç„¶åå‘¢ï¼Œç»§ç»­åœ¨ <code>store</code> æ–‡ä»¶å¤¹ä¸‹é¢åˆ›å»ºä¸€ä¸ªæ–°çš„æ–‡ä»¶ï¼Œå‘½åä¸º <code>reducer.js</code> ã€‚<strong>å…·ä½“ä»£ç å¦‚ä¸‹ï¼š</strong></p><div class="language-js vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#F97583;">const</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">defaultStore</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> {</span></span>
<span class="line"><span style="color:#E1E4E8;">  inputValue: </span><span style="color:#9ECBFF;">&#39;&#39;</span><span style="color:#E1E4E8;">,</span></span>
<span class="line"><span style="color:#E1E4E8;">  list: [],</span></span>
<span class="line"><span style="color:#E1E4E8;">};</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F97583;">export</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">default</span><span style="color:#E1E4E8;"> (</span><span style="color:#FFAB70;">state</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> defaultStore, </span><span style="color:#FFAB70;">action</span><span style="color:#E1E4E8;">) </span><span style="color:#F97583;">=&gt;</span><span style="color:#E1E4E8;"> {</span></span>
<span class="line"><span style="color:#E1E4E8;">  </span><span style="color:#F97583;">return</span><span style="color:#E1E4E8;"> state;</span></span>
<span class="line"><span style="color:#E1E4E8;">};</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#D73A49;">const</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">defaultStore</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">=</span><span style="color:#24292E;"> {</span></span>
<span class="line"><span style="color:#24292E;">  inputValue: </span><span style="color:#032F62;">&#39;&#39;</span><span style="color:#24292E;">,</span></span>
<span class="line"><span style="color:#24292E;">  list: [],</span></span>
<span class="line"><span style="color:#24292E;">};</span></span>
<span class="line"></span>
<span class="line"><span style="color:#D73A49;">export</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">default</span><span style="color:#24292E;"> (</span><span style="color:#E36209;">state</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">=</span><span style="color:#24292E;"> defaultStore, </span><span style="color:#E36209;">action</span><span style="color:#24292E;">) </span><span style="color:#D73A49;">=&gt;</span><span style="color:#24292E;"> {</span></span>
<span class="line"><span style="color:#24292E;">  </span><span style="color:#D73A49;">return</span><span style="color:#24292E;"> state;</span></span>
<span class="line"><span style="color:#24292E;">};</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br></div></div><p>ç”±æ­¤ï¼Œæˆ‘ä»¬å°±åˆ›å»ºå®Œæˆäº†é¡¹ç›®ä¸­çš„ <code>store</code> ã€‚</p><h3 id="_2-åœ¨é¡¹ç›®ä¸­ä½¿ç”¨-store" tabindex="-1">ï¼ˆ2ï¼‰åœ¨é¡¹ç›®ä¸­ä½¿ç”¨ store <a class="header-anchor" href="#_2-åœ¨é¡¹ç›®ä¸­ä½¿ç”¨-store" aria-label="Permalink to &quot;ï¼ˆ2ï¼‰åœ¨é¡¹ç›®ä¸­ä½¿ç”¨ store&quot;">â€‹</a></h3><p>åˆ›å»ºå®Œ <code>store</code> ä¹‹åï¼Œæˆ‘ä»¬å…ˆåˆæ­¥åœ¨é¡¹ç›®ä¸­ä½¿ç”¨è¿™ä¸ª <code>store</code> ï¼Œä»¥ä¾¿äºçœ‹çœ‹æ•ˆæœã€‚å…ˆæ¥æ·»åŠ  <code>store</code> ä¸­çš„æ•°æ®ï¼Œé¦–å…ˆæ”¹é€ åœ¨ <code>store</code> ä¸­çš„ <code>reducer.js</code> æ–‡ä»¶ï¼Œ<strong>å…·ä½“ä»£ç å¦‚ä¸‹ï¼š</strong></p><div class="language-js vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#F97583;">const</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">defaultStore</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> {</span></span>
<span class="line"><span style="color:#E1E4E8;">  inputValue: </span><span style="color:#9ECBFF;">&#39;123&#39;</span><span style="color:#E1E4E8;">,</span></span>
<span class="line"><span style="color:#E1E4E8;">  list: [</span><span style="color:#79B8FF;">1</span><span style="color:#E1E4E8;">, </span><span style="color:#79B8FF;">2</span><span style="color:#E1E4E8;">],</span></span>
<span class="line"><span style="color:#E1E4E8;">};</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F97583;">export</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">default</span><span style="color:#E1E4E8;"> (</span><span style="color:#FFAB70;">state</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> defaultStore, </span><span style="color:#FFAB70;">action</span><span style="color:#E1E4E8;">) </span><span style="color:#F97583;">=&gt;</span><span style="color:#E1E4E8;"> {</span></span>
<span class="line"><span style="color:#E1E4E8;">  </span><span style="color:#F97583;">return</span><span style="color:#E1E4E8;"> state;</span></span>
<span class="line"><span style="color:#E1E4E8;">};</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#D73A49;">const</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">defaultStore</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">=</span><span style="color:#24292E;"> {</span></span>
<span class="line"><span style="color:#24292E;">  inputValue: </span><span style="color:#032F62;">&#39;123&#39;</span><span style="color:#24292E;">,</span></span>
<span class="line"><span style="color:#24292E;">  list: [</span><span style="color:#005CC5;">1</span><span style="color:#24292E;">, </span><span style="color:#005CC5;">2</span><span style="color:#24292E;">],</span></span>
<span class="line"><span style="color:#24292E;">};</span></span>
<span class="line"></span>
<span class="line"><span style="color:#D73A49;">export</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">default</span><span style="color:#24292E;"> (</span><span style="color:#E36209;">state</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">=</span><span style="color:#24292E;"> defaultStore, </span><span style="color:#E36209;">action</span><span style="color:#24292E;">) </span><span style="color:#D73A49;">=&gt;</span><span style="color:#24292E;"> {</span></span>
<span class="line"><span style="color:#24292E;">  </span><span style="color:#D73A49;">return</span><span style="color:#24292E;"> state;</span></span>
<span class="line"><span style="color:#24292E;">};</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br></div></div><p>ä¹‹åæ”¹é€  <code>TodoList.js</code> ã€‚<strong>å…·ä½“ä»£ç å¦‚ä¸‹ï¼š</strong></p><div class="language-js vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#F97583;">import</span><span style="color:#E1E4E8;"> React, { Component } </span><span style="color:#F97583;">from</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">&#39;react&#39;</span><span style="color:#E1E4E8;">;</span></span>
<span class="line"><span style="color:#F97583;">import</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">&#39;antd/dist/antd.css&#39;</span><span style="color:#E1E4E8;">;</span></span>
<span class="line"><span style="color:#F97583;">import</span><span style="color:#E1E4E8;"> { Input, Button, List } </span><span style="color:#F97583;">from</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">&#39;antd&#39;</span><span style="color:#E1E4E8;">;</span></span>
<span class="line"><span style="color:#F97583;">import</span><span style="color:#E1E4E8;"> store </span><span style="color:#F97583;">from</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">&#39;./store&#39;</span><span style="color:#E1E4E8;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F97583;">class</span><span style="color:#E1E4E8;"> </span><span style="color:#B392F0;">TodoList</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">extends</span><span style="color:#E1E4E8;"> </span><span style="color:#B392F0;">Component</span><span style="color:#E1E4E8;"> {</span></span>
<span class="line"><span style="color:#E1E4E8;">  </span><span style="color:#F97583;">constructor</span><span style="color:#E1E4E8;">(</span><span style="color:#FFAB70;">props</span><span style="color:#E1E4E8;">) {</span></span>
<span class="line"><span style="color:#E1E4E8;">    </span><span style="color:#79B8FF;">super</span><span style="color:#E1E4E8;">(props);</span></span>
<span class="line"><span style="color:#E1E4E8;">    </span><span style="color:#79B8FF;">this</span><span style="color:#E1E4E8;">.state </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> store.</span><span style="color:#B392F0;">getState</span><span style="color:#E1E4E8;">();</span></span>
<span class="line"><span style="color:#E1E4E8;">  }</span></span>
<span class="line"><span style="color:#E1E4E8;">  </span><span style="color:#B392F0;">render</span><span style="color:#E1E4E8;">() {</span></span>
<span class="line"><span style="color:#E1E4E8;">    </span><span style="color:#F97583;">return</span><span style="color:#E1E4E8;"> (</span></span>
<span class="line"><span style="color:#E1E4E8;">      &lt;</span><span style="color:#85E89D;">div</span><span style="color:#E1E4E8;"> </span><span style="color:#B392F0;">style</span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;">{{ marginTop: </span><span style="color:#9ECBFF;">&#39;10px&#39;</span><span style="color:#E1E4E8;">, marginLeft: </span><span style="color:#9ECBFF;">&#39;10px&#39;</span><span style="color:#E1E4E8;"> }}&gt;</span></span>
<span class="line"><span style="color:#E1E4E8;">        &lt;</span><span style="color:#85E89D;">div</span><span style="color:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="color:#E1E4E8;">          &lt;</span><span style="color:#79B8FF;">Input</span></span>
<span class="line"><span style="color:#E1E4E8;">            </span><span style="color:#B392F0;">placeholder</span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;">{</span><span style="color:#79B8FF;">this</span><span style="color:#E1E4E8;">.state.inputValue}</span></span>
<span class="line"><span style="color:#E1E4E8;">            </span><span style="color:#B392F0;">style</span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;">{{ width: </span><span style="color:#9ECBFF;">&#39;300px&#39;</span><span style="color:#E1E4E8;"> }}</span></span>
<span class="line"><span style="color:#E1E4E8;">          /&gt;</span></span>
<span class="line"><span style="color:#E1E4E8;">          &lt;</span><span style="color:#79B8FF;">Button</span><span style="color:#E1E4E8;"> </span><span style="color:#B392F0;">type</span><span style="color:#F97583;">=</span><span style="color:#9ECBFF;">&#39;primary&#39;</span><span style="color:#E1E4E8;">&gt;æäº¤&lt;/</span><span style="color:#79B8FF;">Button</span><span style="color:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="color:#E1E4E8;">        &lt;/</span><span style="color:#85E89D;">div</span><span style="color:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="color:#E1E4E8;">        &lt;</span><span style="color:#79B8FF;">List</span></span>
<span class="line"><span style="color:#E1E4E8;">          </span><span style="color:#B392F0;">bordered</span></span>
<span class="line"><span style="color:#E1E4E8;">          </span><span style="color:#B392F0;">dataSource</span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;">{</span><span style="color:#79B8FF;">this</span><span style="color:#E1E4E8;">.state.list}</span></span>
<span class="line"><span style="color:#E1E4E8;">          </span><span style="color:#B392F0;">renderItem</span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;">{(</span><span style="color:#FFAB70;">item</span><span style="color:#E1E4E8;">) </span><span style="color:#F97583;">=&gt;</span><span style="color:#E1E4E8;"> &lt;</span><span style="color:#79B8FF;">List.Item</span><span style="color:#E1E4E8;">&gt;{item}&lt;/</span><span style="color:#79B8FF;">List.Item</span><span style="color:#E1E4E8;">&gt;}</span></span>
<span class="line"><span style="color:#E1E4E8;">        /&gt;</span></span>
<span class="line"><span style="color:#E1E4E8;">      &lt;/</span><span style="color:#85E89D;">div</span><span style="color:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="color:#E1E4E8;">    );</span></span>
<span class="line"><span style="color:#E1E4E8;">  }</span></span>
<span class="line"><span style="color:#E1E4E8;">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F97583;">export</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">default</span><span style="color:#E1E4E8;"> TodoList;</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#D73A49;">import</span><span style="color:#24292E;"> React, { Component } </span><span style="color:#D73A49;">from</span><span style="color:#24292E;"> </span><span style="color:#032F62;">&#39;react&#39;</span><span style="color:#24292E;">;</span></span>
<span class="line"><span style="color:#D73A49;">import</span><span style="color:#24292E;"> </span><span style="color:#032F62;">&#39;antd/dist/antd.css&#39;</span><span style="color:#24292E;">;</span></span>
<span class="line"><span style="color:#D73A49;">import</span><span style="color:#24292E;"> { Input, Button, List } </span><span style="color:#D73A49;">from</span><span style="color:#24292E;"> </span><span style="color:#032F62;">&#39;antd&#39;</span><span style="color:#24292E;">;</span></span>
<span class="line"><span style="color:#D73A49;">import</span><span style="color:#24292E;"> store </span><span style="color:#D73A49;">from</span><span style="color:#24292E;"> </span><span style="color:#032F62;">&#39;./store&#39;</span><span style="color:#24292E;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#D73A49;">class</span><span style="color:#24292E;"> </span><span style="color:#6F42C1;">TodoList</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">extends</span><span style="color:#24292E;"> </span><span style="color:#6F42C1;">Component</span><span style="color:#24292E;"> {</span></span>
<span class="line"><span style="color:#24292E;">  </span><span style="color:#D73A49;">constructor</span><span style="color:#24292E;">(</span><span style="color:#E36209;">props</span><span style="color:#24292E;">) {</span></span>
<span class="line"><span style="color:#24292E;">    </span><span style="color:#005CC5;">super</span><span style="color:#24292E;">(props);</span></span>
<span class="line"><span style="color:#24292E;">    </span><span style="color:#005CC5;">this</span><span style="color:#24292E;">.state </span><span style="color:#D73A49;">=</span><span style="color:#24292E;"> store.</span><span style="color:#6F42C1;">getState</span><span style="color:#24292E;">();</span></span>
<span class="line"><span style="color:#24292E;">  }</span></span>
<span class="line"><span style="color:#24292E;">  </span><span style="color:#6F42C1;">render</span><span style="color:#24292E;">() {</span></span>
<span class="line"><span style="color:#24292E;">    </span><span style="color:#D73A49;">return</span><span style="color:#24292E;"> (</span></span>
<span class="line"><span style="color:#24292E;">      &lt;</span><span style="color:#22863A;">div</span><span style="color:#24292E;"> </span><span style="color:#6F42C1;">style</span><span style="color:#D73A49;">=</span><span style="color:#24292E;">{{ marginTop: </span><span style="color:#032F62;">&#39;10px&#39;</span><span style="color:#24292E;">, marginLeft: </span><span style="color:#032F62;">&#39;10px&#39;</span><span style="color:#24292E;"> }}&gt;</span></span>
<span class="line"><span style="color:#24292E;">        &lt;</span><span style="color:#22863A;">div</span><span style="color:#24292E;">&gt;</span></span>
<span class="line"><span style="color:#24292E;">          &lt;</span><span style="color:#005CC5;">Input</span></span>
<span class="line"><span style="color:#24292E;">            </span><span style="color:#6F42C1;">placeholder</span><span style="color:#D73A49;">=</span><span style="color:#24292E;">{</span><span style="color:#005CC5;">this</span><span style="color:#24292E;">.state.inputValue}</span></span>
<span class="line"><span style="color:#24292E;">            </span><span style="color:#6F42C1;">style</span><span style="color:#D73A49;">=</span><span style="color:#24292E;">{{ width: </span><span style="color:#032F62;">&#39;300px&#39;</span><span style="color:#24292E;"> }}</span></span>
<span class="line"><span style="color:#24292E;">          /&gt;</span></span>
<span class="line"><span style="color:#24292E;">          &lt;</span><span style="color:#005CC5;">Button</span><span style="color:#24292E;"> </span><span style="color:#6F42C1;">type</span><span style="color:#D73A49;">=</span><span style="color:#032F62;">&#39;primary&#39;</span><span style="color:#24292E;">&gt;æäº¤&lt;/</span><span style="color:#005CC5;">Button</span><span style="color:#24292E;">&gt;</span></span>
<span class="line"><span style="color:#24292E;">        &lt;/</span><span style="color:#22863A;">div</span><span style="color:#24292E;">&gt;</span></span>
<span class="line"><span style="color:#24292E;">        &lt;</span><span style="color:#005CC5;">List</span></span>
<span class="line"><span style="color:#24292E;">          </span><span style="color:#6F42C1;">bordered</span></span>
<span class="line"><span style="color:#24292E;">          </span><span style="color:#6F42C1;">dataSource</span><span style="color:#D73A49;">=</span><span style="color:#24292E;">{</span><span style="color:#005CC5;">this</span><span style="color:#24292E;">.state.list}</span></span>
<span class="line"><span style="color:#24292E;">          </span><span style="color:#6F42C1;">renderItem</span><span style="color:#D73A49;">=</span><span style="color:#24292E;">{(</span><span style="color:#E36209;">item</span><span style="color:#24292E;">) </span><span style="color:#D73A49;">=&gt;</span><span style="color:#24292E;"> &lt;</span><span style="color:#005CC5;">List.Item</span><span style="color:#24292E;">&gt;{item}&lt;/</span><span style="color:#005CC5;">List.Item</span><span style="color:#24292E;">&gt;}</span></span>
<span class="line"><span style="color:#24292E;">        /&gt;</span></span>
<span class="line"><span style="color:#24292E;">      &lt;/</span><span style="color:#22863A;">div</span><span style="color:#24292E;">&gt;</span></span>
<span class="line"><span style="color:#24292E;">    );</span></span>
<span class="line"><span style="color:#24292E;">  }</span></span>
<span class="line"><span style="color:#24292E;">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#D73A49;">export</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">default</span><span style="color:#24292E;"> TodoList;</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br></div></div><p><strong>æ­¤æ—¶æµè§ˆå™¨çš„æ˜¾ç¤ºæ•ˆæœä¸ºï¼š</strong></p><p><img src="https://mondaylab-1309616765.cos.ap-shanghai.myqcloud.com/images/202305270715380.png" alt="todoListæ¥æ”¶æ¥è‡ªstoreçš„æ•°æ®"></p><h1 id="ğŸ§µ-ä¸‰ã€action-å’Œ-reducer-çš„ç¼–å†™-å¢æ·»åŠŸèƒ½" tabindex="-1">ğŸ§µ ä¸‰ã€Action å’Œ Reducer çš„ç¼–å†™ - å¢æ·»åŠŸèƒ½ <a class="header-anchor" href="#ğŸ§µ-ä¸‰ã€action-å’Œ-reducer-çš„ç¼–å†™-å¢æ·»åŠŸèƒ½" aria-label="Permalink to &quot;ğŸ§µ ä¸‰ã€Action å’Œ Reducer çš„ç¼–å†™ - å¢æ·»åŠŸèƒ½&quot;">â€‹</a></h1><h2 id="_1ã€ä¸»ä½“é¡µé¢å†…å®¹æ”¹é€ " tabindex="-1">1ã€ä¸»ä½“é¡µé¢å†…å®¹æ”¹é€  <a class="header-anchor" href="#_1ã€ä¸»ä½“é¡µé¢å†…å®¹æ”¹é€ " aria-label="Permalink to &quot;1ã€ä¸»ä½“é¡µé¢å†…å®¹æ”¹é€ &quot;">â€‹</a></h2><p>æ¥ä¸‹æ¥ï¼Œæˆ‘ä»¬ä½¿ç”¨ <code>action</code> å’Œ <code>reducer</code> ï¼Œæ¥å¯¹è¿™ä¸ªç»„ä»¶çš„æ•°æ®è¿›è¡Œå‰åä¼ é€’ã€‚é¦–å…ˆï¼Œå…ˆæ¥æ”¹é€  <code>TodoList.js</code> æ–‡ä»¶ã€‚<strong>å…·ä½“ä»£ç å¦‚ä¸‹ï¼š</strong></p><div class="language-js vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#F97583;">import</span><span style="color:#E1E4E8;"> React, { Component } </span><span style="color:#F97583;">from</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">&#39;react&#39;</span><span style="color:#E1E4E8;">;</span></span>
<span class="line"><span style="color:#F97583;">import</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">&#39;antd/dist/antd.css&#39;</span><span style="color:#E1E4E8;">;</span></span>
<span class="line"><span style="color:#F97583;">import</span><span style="color:#E1E4E8;"> { Input, Button, List } </span><span style="color:#F97583;">from</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">&#39;antd&#39;</span><span style="color:#E1E4E8;">;</span></span>
<span class="line"><span style="color:#F97583;">import</span><span style="color:#E1E4E8;"> store </span><span style="color:#F97583;">from</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">&#39;./store&#39;</span><span style="color:#E1E4E8;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F97583;">class</span><span style="color:#E1E4E8;"> </span><span style="color:#B392F0;">TodoList</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">extends</span><span style="color:#E1E4E8;"> </span><span style="color:#B392F0;">Component</span><span style="color:#E1E4E8;"> {</span></span>
<span class="line"><span style="color:#E1E4E8;">  </span><span style="color:#F97583;">constructor</span><span style="color:#E1E4E8;">(</span><span style="color:#FFAB70;">props</span><span style="color:#E1E4E8;">) {</span></span>
<span class="line"><span style="color:#E1E4E8;">    </span><span style="color:#79B8FF;">super</span><span style="color:#E1E4E8;">(props);</span></span>
<span class="line"><span style="color:#E1E4E8;">    </span><span style="color:#79B8FF;">this</span><span style="color:#E1E4E8;">.state </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> store.</span><span style="color:#B392F0;">getState</span><span style="color:#E1E4E8;">();</span></span>
<span class="line"><span style="color:#E1E4E8;">    </span><span style="color:#79B8FF;">this</span><span style="color:#E1E4E8;">.handleInputChange </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">this</span><span style="color:#E1E4E8;">.handleInputChange.</span><span style="color:#B392F0;">bind</span><span style="color:#E1E4E8;">(</span><span style="color:#79B8FF;">this</span><span style="color:#E1E4E8;">);</span></span>
<span class="line"><span style="color:#E1E4E8;">    </span><span style="color:#79B8FF;">this</span><span style="color:#E1E4E8;">.handleStoreChange </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">this</span><span style="color:#E1E4E8;">.handleStoreChange.</span><span style="color:#B392F0;">bind</span><span style="color:#E1E4E8;">(</span><span style="color:#79B8FF;">this</span><span style="color:#E1E4E8;">);</span></span>
<span class="line"><span style="color:#E1E4E8;">    </span><span style="color:#79B8FF;">this</span><span style="color:#E1E4E8;">.handleBtnClick </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">this</span><span style="color:#E1E4E8;">.handleBtnClick.</span><span style="color:#B392F0;">bind</span><span style="color:#E1E4E8;">(</span><span style="color:#79B8FF;">this</span><span style="color:#E1E4E8;">);</span></span>
<span class="line"><span style="color:#E1E4E8;">    store.</span><span style="color:#B392F0;">subscribe</span><span style="color:#E1E4E8;">(</span><span style="color:#79B8FF;">this</span><span style="color:#E1E4E8;">.handleStoreChange);</span></span>
<span class="line"><span style="color:#E1E4E8;">  }</span></span>
<span class="line"><span style="color:#E1E4E8;">  </span><span style="color:#B392F0;">render</span><span style="color:#E1E4E8;">() {</span></span>
<span class="line"><span style="color:#E1E4E8;">    </span><span style="color:#F97583;">return</span><span style="color:#E1E4E8;"> (</span></span>
<span class="line"><span style="color:#E1E4E8;">      &lt;</span><span style="color:#85E89D;">div</span><span style="color:#E1E4E8;"> </span><span style="color:#B392F0;">style</span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;">{{ marginTop: </span><span style="color:#9ECBFF;">&#39;10px&#39;</span><span style="color:#E1E4E8;">, marginLeft: </span><span style="color:#9ECBFF;">&#39;10px&#39;</span><span style="color:#E1E4E8;"> }}&gt;</span></span>
<span class="line"><span style="color:#E1E4E8;">        &lt;</span><span style="color:#85E89D;">div</span><span style="color:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="color:#E1E4E8;">          &lt;</span><span style="color:#79B8FF;">Input</span></span>
<span class="line"><span style="color:#E1E4E8;">            </span><span style="color:#B392F0;">value</span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;">{</span><span style="color:#79B8FF;">this</span><span style="color:#E1E4E8;">.state.inputValue}</span></span>
<span class="line"><span style="color:#E1E4E8;">            </span><span style="color:#B392F0;">placeholder</span><span style="color:#F97583;">=</span><span style="color:#9ECBFF;">&#39;todo info&#39;</span></span>
<span class="line"><span style="color:#E1E4E8;">            </span><span style="color:#B392F0;">style</span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;">{{ width: </span><span style="color:#9ECBFF;">&#39;300px&#39;</span><span style="color:#E1E4E8;">, marginRight: </span><span style="color:#9ECBFF;">&#39;10px&#39;</span><span style="color:#E1E4E8;"> }}</span></span>
<span class="line"><span style="color:#E1E4E8;">            </span><span style="color:#B392F0;">onChange</span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;">{</span><span style="color:#79B8FF;">this</span><span style="color:#E1E4E8;">.handleInputChange}</span></span>
<span class="line"><span style="color:#E1E4E8;">          /&gt;</span></span>
<span class="line"><span style="color:#E1E4E8;">          &lt;</span><span style="color:#79B8FF;">Button</span><span style="color:#E1E4E8;"> </span><span style="color:#B392F0;">type</span><span style="color:#F97583;">=</span><span style="color:#9ECBFF;">&#39;primary&#39;</span><span style="color:#E1E4E8;"> </span><span style="color:#B392F0;">onClick</span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;">{</span><span style="color:#79B8FF;">this</span><span style="color:#E1E4E8;">.handleBtnClick}&gt;</span></span>
<span class="line"><span style="color:#E1E4E8;">            æäº¤</span></span>
<span class="line"><span style="color:#E1E4E8;">          &lt;/</span><span style="color:#79B8FF;">Button</span><span style="color:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="color:#E1E4E8;">        &lt;/</span><span style="color:#85E89D;">div</span><span style="color:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="color:#E1E4E8;">        &lt;</span><span style="color:#79B8FF;">List</span></span>
<span class="line"><span style="color:#E1E4E8;">          </span><span style="color:#B392F0;">style</span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;">{{ marginTop: </span><span style="color:#9ECBFF;">&#39;10px&#39;</span><span style="color:#E1E4E8;">, width: </span><span style="color:#9ECBFF;">&#39;300px&#39;</span><span style="color:#E1E4E8;"> }}</span></span>
<span class="line"><span style="color:#E1E4E8;">          </span><span style="color:#B392F0;">bordered</span></span>
<span class="line"><span style="color:#E1E4E8;">          </span><span style="color:#B392F0;">dataSource</span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;">{</span><span style="color:#79B8FF;">this</span><span style="color:#E1E4E8;">.state.list}</span></span>
<span class="line"><span style="color:#E1E4E8;">          </span><span style="color:#B392F0;">renderItem</span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;">{(</span><span style="color:#FFAB70;">item</span><span style="color:#E1E4E8;">) </span><span style="color:#F97583;">=&gt;</span><span style="color:#E1E4E8;"> &lt;</span><span style="color:#79B8FF;">List.Item</span><span style="color:#E1E4E8;">&gt;{item}&lt;/</span><span style="color:#79B8FF;">List.Item</span><span style="color:#E1E4E8;">&gt;}</span></span>
<span class="line"><span style="color:#E1E4E8;">        /&gt;</span></span>
<span class="line"><span style="color:#E1E4E8;">      &lt;/</span><span style="color:#85E89D;">div</span><span style="color:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="color:#E1E4E8;">    );</span></span>
<span class="line"><span style="color:#E1E4E8;">  }</span></span>
<span class="line"></span>
<span class="line"><span style="color:#E1E4E8;">  </span><span style="color:#B392F0;">handleInputChange</span><span style="color:#E1E4E8;">(</span><span style="color:#FFAB70;">e</span><span style="color:#E1E4E8;">) {</span></span>
<span class="line"><span style="color:#E1E4E8;">    </span><span style="color:#6A737D;">// åœ¨reactä¸­ï¼Œactionæ˜¯ä¸€ä¸ªå¯¹è±¡çš„å½¢å¼</span></span>
<span class="line"><span style="color:#E1E4E8;">    </span><span style="color:#6A737D;">// typeæ—¨åœ¨å‘Šè¯‰reactè¯´ï¼Œä½ å¸®æˆ‘å»æ”¹å˜inputçš„å€¼ï¼Œè¿™ä¸ªå€¼æ˜¯ä¸‹é¢çš„valueï¼Œä¹Ÿå°±æ˜¯e.target.value</span></span>
<span class="line"><span style="color:#E1E4E8;">    </span><span style="color:#F97583;">const</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">action</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> {</span></span>
<span class="line"><span style="color:#E1E4E8;">      type: </span><span style="color:#9ECBFF;">&#39;change_input_value&#39;</span><span style="color:#E1E4E8;">,</span></span>
<span class="line"><span style="color:#E1E4E8;">      value: e.target.value,</span></span>
<span class="line"><span style="color:#E1E4E8;">    };</span></span>
<span class="line"><span style="color:#E1E4E8;">    store.</span><span style="color:#B392F0;">dispatch</span><span style="color:#E1E4E8;">(action);</span></span>
<span class="line"><span style="color:#E1E4E8;">    </span><span style="color:#6A737D;">// console.log(e.target.value)</span></span>
<span class="line"><span style="color:#E1E4E8;">  }</span></span>
<span class="line"></span>
<span class="line"><span style="color:#E1E4E8;">  </span><span style="color:#B392F0;">handleStoreChange</span><span style="color:#E1E4E8;">() {</span></span>
<span class="line"><span style="color:#E1E4E8;">    </span><span style="color:#6A737D;">// å½“æ„ŸçŸ¥åˆ°storeçš„æ•°æ®å‘ç”Ÿå˜åŒ–æ—¶ï¼Œé‚£ä¹ˆå°±å»è°ƒç”¨store.getStateæ–¹æ³•ï¼Œä»storeé‡Œé¢å†é‡æ–°å–ä¸€æ¬¡æ•°æ®ï¼Œ</span></span>
<span class="line"><span style="color:#E1E4E8;">    </span><span style="color:#6A737D;">// ç„¶åå»è°ƒç”¨setStateï¼Œæ›¿æ¢æ‰å½“å‰storeé‡Œé¢çš„æ•°æ®</span></span>
<span class="line"><span style="color:#E1E4E8;">    </span><span style="color:#79B8FF;">this</span><span style="color:#E1E4E8;">.</span><span style="color:#B392F0;">setState</span><span style="color:#E1E4E8;">(store.</span><span style="color:#B392F0;">getState</span><span style="color:#E1E4E8;">());</span></span>
<span class="line"><span style="color:#E1E4E8;">  }</span></span>
<span class="line"></span>
<span class="line"><span style="color:#E1E4E8;">  </span><span style="color:#B392F0;">handleBtnClick</span><span style="color:#E1E4E8;">() {</span></span>
<span class="line"><span style="color:#E1E4E8;">    </span><span style="color:#F97583;">const</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">action</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> {</span></span>
<span class="line"><span style="color:#E1E4E8;">      type: </span><span style="color:#9ECBFF;">&#39;add_todo_item&#39;</span><span style="color:#E1E4E8;">,</span></span>
<span class="line"><span style="color:#E1E4E8;">    };</span></span>
<span class="line"><span style="color:#E1E4E8;">    store.</span><span style="color:#B392F0;">dispatch</span><span style="color:#E1E4E8;">(action);</span></span>
<span class="line"><span style="color:#E1E4E8;">  }</span></span>
<span class="line"><span style="color:#E1E4E8;">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F97583;">export</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">default</span><span style="color:#E1E4E8;"> TodoList;</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#D73A49;">import</span><span style="color:#24292E;"> React, { Component } </span><span style="color:#D73A49;">from</span><span style="color:#24292E;"> </span><span style="color:#032F62;">&#39;react&#39;</span><span style="color:#24292E;">;</span></span>
<span class="line"><span style="color:#D73A49;">import</span><span style="color:#24292E;"> </span><span style="color:#032F62;">&#39;antd/dist/antd.css&#39;</span><span style="color:#24292E;">;</span></span>
<span class="line"><span style="color:#D73A49;">import</span><span style="color:#24292E;"> { Input, Button, List } </span><span style="color:#D73A49;">from</span><span style="color:#24292E;"> </span><span style="color:#032F62;">&#39;antd&#39;</span><span style="color:#24292E;">;</span></span>
<span class="line"><span style="color:#D73A49;">import</span><span style="color:#24292E;"> store </span><span style="color:#D73A49;">from</span><span style="color:#24292E;"> </span><span style="color:#032F62;">&#39;./store&#39;</span><span style="color:#24292E;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#D73A49;">class</span><span style="color:#24292E;"> </span><span style="color:#6F42C1;">TodoList</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">extends</span><span style="color:#24292E;"> </span><span style="color:#6F42C1;">Component</span><span style="color:#24292E;"> {</span></span>
<span class="line"><span style="color:#24292E;">  </span><span style="color:#D73A49;">constructor</span><span style="color:#24292E;">(</span><span style="color:#E36209;">props</span><span style="color:#24292E;">) {</span></span>
<span class="line"><span style="color:#24292E;">    </span><span style="color:#005CC5;">super</span><span style="color:#24292E;">(props);</span></span>
<span class="line"><span style="color:#24292E;">    </span><span style="color:#005CC5;">this</span><span style="color:#24292E;">.state </span><span style="color:#D73A49;">=</span><span style="color:#24292E;"> store.</span><span style="color:#6F42C1;">getState</span><span style="color:#24292E;">();</span></span>
<span class="line"><span style="color:#24292E;">    </span><span style="color:#005CC5;">this</span><span style="color:#24292E;">.handleInputChange </span><span style="color:#D73A49;">=</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">this</span><span style="color:#24292E;">.handleInputChange.</span><span style="color:#6F42C1;">bind</span><span style="color:#24292E;">(</span><span style="color:#005CC5;">this</span><span style="color:#24292E;">);</span></span>
<span class="line"><span style="color:#24292E;">    </span><span style="color:#005CC5;">this</span><span style="color:#24292E;">.handleStoreChange </span><span style="color:#D73A49;">=</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">this</span><span style="color:#24292E;">.handleStoreChange.</span><span style="color:#6F42C1;">bind</span><span style="color:#24292E;">(</span><span style="color:#005CC5;">this</span><span style="color:#24292E;">);</span></span>
<span class="line"><span style="color:#24292E;">    </span><span style="color:#005CC5;">this</span><span style="color:#24292E;">.handleBtnClick </span><span style="color:#D73A49;">=</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">this</span><span style="color:#24292E;">.handleBtnClick.</span><span style="color:#6F42C1;">bind</span><span style="color:#24292E;">(</span><span style="color:#005CC5;">this</span><span style="color:#24292E;">);</span></span>
<span class="line"><span style="color:#24292E;">    store.</span><span style="color:#6F42C1;">subscribe</span><span style="color:#24292E;">(</span><span style="color:#005CC5;">this</span><span style="color:#24292E;">.handleStoreChange);</span></span>
<span class="line"><span style="color:#24292E;">  }</span></span>
<span class="line"><span style="color:#24292E;">  </span><span style="color:#6F42C1;">render</span><span style="color:#24292E;">() {</span></span>
<span class="line"><span style="color:#24292E;">    </span><span style="color:#D73A49;">return</span><span style="color:#24292E;"> (</span></span>
<span class="line"><span style="color:#24292E;">      &lt;</span><span style="color:#22863A;">div</span><span style="color:#24292E;"> </span><span style="color:#6F42C1;">style</span><span style="color:#D73A49;">=</span><span style="color:#24292E;">{{ marginTop: </span><span style="color:#032F62;">&#39;10px&#39;</span><span style="color:#24292E;">, marginLeft: </span><span style="color:#032F62;">&#39;10px&#39;</span><span style="color:#24292E;"> }}&gt;</span></span>
<span class="line"><span style="color:#24292E;">        &lt;</span><span style="color:#22863A;">div</span><span style="color:#24292E;">&gt;</span></span>
<span class="line"><span style="color:#24292E;">          &lt;</span><span style="color:#005CC5;">Input</span></span>
<span class="line"><span style="color:#24292E;">            </span><span style="color:#6F42C1;">value</span><span style="color:#D73A49;">=</span><span style="color:#24292E;">{</span><span style="color:#005CC5;">this</span><span style="color:#24292E;">.state.inputValue}</span></span>
<span class="line"><span style="color:#24292E;">            </span><span style="color:#6F42C1;">placeholder</span><span style="color:#D73A49;">=</span><span style="color:#032F62;">&#39;todo info&#39;</span></span>
<span class="line"><span style="color:#24292E;">            </span><span style="color:#6F42C1;">style</span><span style="color:#D73A49;">=</span><span style="color:#24292E;">{{ width: </span><span style="color:#032F62;">&#39;300px&#39;</span><span style="color:#24292E;">, marginRight: </span><span style="color:#032F62;">&#39;10px&#39;</span><span style="color:#24292E;"> }}</span></span>
<span class="line"><span style="color:#24292E;">            </span><span style="color:#6F42C1;">onChange</span><span style="color:#D73A49;">=</span><span style="color:#24292E;">{</span><span style="color:#005CC5;">this</span><span style="color:#24292E;">.handleInputChange}</span></span>
<span class="line"><span style="color:#24292E;">          /&gt;</span></span>
<span class="line"><span style="color:#24292E;">          &lt;</span><span style="color:#005CC5;">Button</span><span style="color:#24292E;"> </span><span style="color:#6F42C1;">type</span><span style="color:#D73A49;">=</span><span style="color:#032F62;">&#39;primary&#39;</span><span style="color:#24292E;"> </span><span style="color:#6F42C1;">onClick</span><span style="color:#D73A49;">=</span><span style="color:#24292E;">{</span><span style="color:#005CC5;">this</span><span style="color:#24292E;">.handleBtnClick}&gt;</span></span>
<span class="line"><span style="color:#24292E;">            æäº¤</span></span>
<span class="line"><span style="color:#24292E;">          &lt;/</span><span style="color:#005CC5;">Button</span><span style="color:#24292E;">&gt;</span></span>
<span class="line"><span style="color:#24292E;">        &lt;/</span><span style="color:#22863A;">div</span><span style="color:#24292E;">&gt;</span></span>
<span class="line"><span style="color:#24292E;">        &lt;</span><span style="color:#005CC5;">List</span></span>
<span class="line"><span style="color:#24292E;">          </span><span style="color:#6F42C1;">style</span><span style="color:#D73A49;">=</span><span style="color:#24292E;">{{ marginTop: </span><span style="color:#032F62;">&#39;10px&#39;</span><span style="color:#24292E;">, width: </span><span style="color:#032F62;">&#39;300px&#39;</span><span style="color:#24292E;"> }}</span></span>
<span class="line"><span style="color:#24292E;">          </span><span style="color:#6F42C1;">bordered</span></span>
<span class="line"><span style="color:#24292E;">          </span><span style="color:#6F42C1;">dataSource</span><span style="color:#D73A49;">=</span><span style="color:#24292E;">{</span><span style="color:#005CC5;">this</span><span style="color:#24292E;">.state.list}</span></span>
<span class="line"><span style="color:#24292E;">          </span><span style="color:#6F42C1;">renderItem</span><span style="color:#D73A49;">=</span><span style="color:#24292E;">{(</span><span style="color:#E36209;">item</span><span style="color:#24292E;">) </span><span style="color:#D73A49;">=&gt;</span><span style="color:#24292E;"> &lt;</span><span style="color:#005CC5;">List.Item</span><span style="color:#24292E;">&gt;{item}&lt;/</span><span style="color:#005CC5;">List.Item</span><span style="color:#24292E;">&gt;}</span></span>
<span class="line"><span style="color:#24292E;">        /&gt;</span></span>
<span class="line"><span style="color:#24292E;">      &lt;/</span><span style="color:#22863A;">div</span><span style="color:#24292E;">&gt;</span></span>
<span class="line"><span style="color:#24292E;">    );</span></span>
<span class="line"><span style="color:#24292E;">  }</span></span>
<span class="line"></span>
<span class="line"><span style="color:#24292E;">  </span><span style="color:#6F42C1;">handleInputChange</span><span style="color:#24292E;">(</span><span style="color:#E36209;">e</span><span style="color:#24292E;">) {</span></span>
<span class="line"><span style="color:#24292E;">    </span><span style="color:#6A737D;">// åœ¨reactä¸­ï¼Œactionæ˜¯ä¸€ä¸ªå¯¹è±¡çš„å½¢å¼</span></span>
<span class="line"><span style="color:#24292E;">    </span><span style="color:#6A737D;">// typeæ—¨åœ¨å‘Šè¯‰reactè¯´ï¼Œä½ å¸®æˆ‘å»æ”¹å˜inputçš„å€¼ï¼Œè¿™ä¸ªå€¼æ˜¯ä¸‹é¢çš„valueï¼Œä¹Ÿå°±æ˜¯e.target.value</span></span>
<span class="line"><span style="color:#24292E;">    </span><span style="color:#D73A49;">const</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">action</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">=</span><span style="color:#24292E;"> {</span></span>
<span class="line"><span style="color:#24292E;">      type: </span><span style="color:#032F62;">&#39;change_input_value&#39;</span><span style="color:#24292E;">,</span></span>
<span class="line"><span style="color:#24292E;">      value: e.target.value,</span></span>
<span class="line"><span style="color:#24292E;">    };</span></span>
<span class="line"><span style="color:#24292E;">    store.</span><span style="color:#6F42C1;">dispatch</span><span style="color:#24292E;">(action);</span></span>
<span class="line"><span style="color:#24292E;">    </span><span style="color:#6A737D;">// console.log(e.target.value)</span></span>
<span class="line"><span style="color:#24292E;">  }</span></span>
<span class="line"></span>
<span class="line"><span style="color:#24292E;">  </span><span style="color:#6F42C1;">handleStoreChange</span><span style="color:#24292E;">() {</span></span>
<span class="line"><span style="color:#24292E;">    </span><span style="color:#6A737D;">// å½“æ„ŸçŸ¥åˆ°storeçš„æ•°æ®å‘ç”Ÿå˜åŒ–æ—¶ï¼Œé‚£ä¹ˆå°±å»è°ƒç”¨store.getStateæ–¹æ³•ï¼Œä»storeé‡Œé¢å†é‡æ–°å–ä¸€æ¬¡æ•°æ®ï¼Œ</span></span>
<span class="line"><span style="color:#24292E;">    </span><span style="color:#6A737D;">// ç„¶åå»è°ƒç”¨setStateï¼Œæ›¿æ¢æ‰å½“å‰storeé‡Œé¢çš„æ•°æ®</span></span>
<span class="line"><span style="color:#24292E;">    </span><span style="color:#005CC5;">this</span><span style="color:#24292E;">.</span><span style="color:#6F42C1;">setState</span><span style="color:#24292E;">(store.</span><span style="color:#6F42C1;">getState</span><span style="color:#24292E;">());</span></span>
<span class="line"><span style="color:#24292E;">  }</span></span>
<span class="line"></span>
<span class="line"><span style="color:#24292E;">  </span><span style="color:#6F42C1;">handleBtnClick</span><span style="color:#24292E;">() {</span></span>
<span class="line"><span style="color:#24292E;">    </span><span style="color:#D73A49;">const</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">action</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">=</span><span style="color:#24292E;"> {</span></span>
<span class="line"><span style="color:#24292E;">      type: </span><span style="color:#032F62;">&#39;add_todo_item&#39;</span><span style="color:#24292E;">,</span></span>
<span class="line"><span style="color:#24292E;">    };</span></span>
<span class="line"><span style="color:#24292E;">    store.</span><span style="color:#6F42C1;">dispatch</span><span style="color:#24292E;">(action);</span></span>
<span class="line"><span style="color:#24292E;">  }</span></span>
<span class="line"><span style="color:#24292E;">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#D73A49;">export</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">default</span><span style="color:#24292E;"> TodoList;</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br><span class="line-number">40</span><br><span class="line-number">41</span><br><span class="line-number">42</span><br><span class="line-number">43</span><br><span class="line-number">44</span><br><span class="line-number">45</span><br><span class="line-number">46</span><br><span class="line-number">47</span><br><span class="line-number">48</span><br><span class="line-number">49</span><br><span class="line-number">50</span><br><span class="line-number">51</span><br><span class="line-number">52</span><br><span class="line-number">53</span><br><span class="line-number">54</span><br><span class="line-number">55</span><br><span class="line-number">56</span><br><span class="line-number">57</span><br><span class="line-number">58</span><br><span class="line-number">59</span><br><span class="line-number">60</span><br><span class="line-number">61</span><br><span class="line-number">62</span><br><span class="line-number">63</span><br><span class="line-number">64</span><br></div></div><p>æ¥ä¸‹æ¥æˆ‘ä»¬æ¥åˆ†æä»¥ä¸Šä»£ç ã€‚é¦–å…ˆï¼Œæ¯ä¸€ä¸ªåŠ¨ä½œåˆ†åˆ«ä¼šå…ˆå»ç»‘å®šå¯¹åº”çš„äº‹ä»¶ï¼Œä¹‹åå‘¢ï¼Œåœ¨äº‹ä»¶é‡Œé¢ï¼Œå»åˆ›é€  <code>action</code> ã€‚è€Œå¯¹äºåˆ›é€ çš„ <code>action</code> æ¥è¯´ï¼Œå®ƒæ—¨åœ¨å‘Šè¯‰ <code>react</code> ï¼Œè®© <code>react</code> å»å¸®å¿™ <code>action</code> å»æ”¹å˜æŸä¸ªå€¼ï¼Œè€Œè¿™ä¸ªå€¼å°±æ˜¯å®ƒç»‘å®šçš„ <code>value</code> ã€‚</p><p>æœ€åï¼Œ <code>action</code> è¦åšçš„äº‹æƒ…ç»“æŸäº†ï¼Œé‚£ä¹ˆå®ƒçš„æ•°æ®å°±éœ€è¦å»å­˜å‚¨åˆ° <code>store</code> é‡Œé¢ã€‚äºæ˜¯é€šè¿‡ <code>store.dispatch(action)</code> æ¥è¿›è¡Œå¤„ç†ï¼Œå°† <code>action</code> çš„æ•°æ®ä¼ é€’åˆ° <code>store</code> é‡Œé¢ã€‚</p><h2 id="_2ã€æ”¹å˜-action-ä¸­çš„æ•°æ®" tabindex="-1">2ã€æ”¹å˜ action ä¸­çš„æ•°æ® <a class="header-anchor" href="#_2ã€æ”¹å˜-action-ä¸­çš„æ•°æ®" aria-label="Permalink to &quot;2ã€æ”¹å˜ action ä¸­çš„æ•°æ®&quot;">â€‹</a></h2><p>å¯¹äº <code>action</code> ä¸€å¼€å§‹çš„å€¼æ¥è¯´ï¼Œå®ƒæ˜¯å›ºå®šçš„ã€‚ä½†æœ‰æ—¶å€™æˆ‘ä»¬æ˜¯æƒ³è¦å»ä¿®æ”¹ action ä¸­çš„å€¼ï¼Œè¿™ä¸ªæ—¶å€™å°±éœ€è¦ç”¨åˆ° <code>reducer</code> ã€‚ç°åœ¨ï¼Œæˆ‘ä»¬æ¥æ”¹é€ ä¸‹ <code>reducer.js</code> æ–‡ä»¶ï¼Œè®© <code>input</code> æ¡†å¯ä»¥è‡ªç”±çš„è¾“å…¥å€¼ï¼ŒåŒæ—¶ï¼Œç‚¹å‡»<strong>æäº¤æŒ‰é’®</strong>ä¹‹åï¼Œè¿›è¡Œåˆ—è¡¨çš„å¢æ·»æ“ä½œã€‚<strong>å…·ä½“ä»£ç å¦‚ä¸‹ï¼š</strong></p><div class="language-js vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#F97583;">const</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">defaultStore</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> {</span></span>
<span class="line"><span style="color:#E1E4E8;">  inputValue: </span><span style="color:#9ECBFF;">&#39;123&#39;</span><span style="color:#E1E4E8;">,</span></span>
<span class="line"><span style="color:#E1E4E8;">  list: [</span><span style="color:#79B8FF;">1</span><span style="color:#E1E4E8;">, </span><span style="color:#79B8FF;">2</span><span style="color:#E1E4E8;">],</span></span>
<span class="line"><span style="color:#E1E4E8;">};</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D;">// reducer å¯ä»¥æ¥æ”¶stateï¼Œä½†æ˜¯ç»ä¸èƒ½ä¿®æ”¹state</span></span>
<span class="line"><span style="color:#F97583;">const</span><span style="color:#E1E4E8;"> </span><span style="color:#B392F0;">reducer</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> (</span><span style="color:#FFAB70;">state</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> defaultStore, </span><span style="color:#FFAB70;">action</span><span style="color:#E1E4E8;">) </span><span style="color:#F97583;">=&gt;</span><span style="color:#E1E4E8;"> {</span></span>
<span class="line"><span style="color:#E1E4E8;">  </span><span style="color:#F97583;">if</span><span style="color:#E1E4E8;"> (action.type </span><span style="color:#F97583;">===</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">&#39;change_input_value&#39;</span><span style="color:#E1E4E8;">) {</span></span>
<span class="line"><span style="color:#E1E4E8;">    </span><span style="color:#F97583;">const</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">newState</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">JSON</span><span style="color:#E1E4E8;">.</span><span style="color:#B392F0;">parse</span><span style="color:#E1E4E8;">(</span><span style="color:#79B8FF;">JSON</span><span style="color:#E1E4E8;">.</span><span style="color:#B392F0;">stringify</span><span style="color:#E1E4E8;">(state));</span></span>
<span class="line"><span style="color:#E1E4E8;">    newState.inputValue </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> action.value;</span></span>
<span class="line"><span style="color:#E1E4E8;">    </span><span style="color:#F97583;">return</span><span style="color:#E1E4E8;"> newState;</span></span>
<span class="line"><span style="color:#E1E4E8;">  }</span></span>
<span class="line"><span style="color:#E1E4E8;">  </span><span style="color:#F97583;">if</span><span style="color:#E1E4E8;"> (action.type </span><span style="color:#F97583;">===</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">&#39;add_todo_item&#39;</span><span style="color:#E1E4E8;">) {</span></span>
<span class="line"><span style="color:#E1E4E8;">    </span><span style="color:#F97583;">const</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">newState</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">JSON</span><span style="color:#E1E4E8;">.</span><span style="color:#B392F0;">parse</span><span style="color:#E1E4E8;">(</span><span style="color:#79B8FF;">JSON</span><span style="color:#E1E4E8;">.</span><span style="color:#B392F0;">stringify</span><span style="color:#E1E4E8;">(state));</span></span>
<span class="line"><span style="color:#E1E4E8;">    newState.list.</span><span style="color:#B392F0;">push</span><span style="color:#E1E4E8;">(newState.inputValue);</span></span>
<span class="line"><span style="color:#E1E4E8;">    newState.inputValue </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">&#39;&#39;</span><span style="color:#E1E4E8;">;</span></span>
<span class="line"><span style="color:#E1E4E8;">    console.</span><span style="color:#B392F0;">log</span><span style="color:#E1E4E8;">(newState);</span></span>
<span class="line"><span style="color:#E1E4E8;">    </span><span style="color:#F97583;">return</span><span style="color:#E1E4E8;"> newState;</span></span>
<span class="line"><span style="color:#E1E4E8;">  }</span></span>
<span class="line"><span style="color:#E1E4E8;">  </span><span style="color:#F97583;">return</span><span style="color:#E1E4E8;"> state;</span></span>
<span class="line"><span style="color:#E1E4E8;">};</span></span>
<span class="line"><span style="color:#F97583;">export</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">default</span><span style="color:#E1E4E8;"> reducer;</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#D73A49;">const</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">defaultStore</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">=</span><span style="color:#24292E;"> {</span></span>
<span class="line"><span style="color:#24292E;">  inputValue: </span><span style="color:#032F62;">&#39;123&#39;</span><span style="color:#24292E;">,</span></span>
<span class="line"><span style="color:#24292E;">  list: [</span><span style="color:#005CC5;">1</span><span style="color:#24292E;">, </span><span style="color:#005CC5;">2</span><span style="color:#24292E;">],</span></span>
<span class="line"><span style="color:#24292E;">};</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D;">// reducer å¯ä»¥æ¥æ”¶stateï¼Œä½†æ˜¯ç»ä¸èƒ½ä¿®æ”¹state</span></span>
<span class="line"><span style="color:#D73A49;">const</span><span style="color:#24292E;"> </span><span style="color:#6F42C1;">reducer</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">=</span><span style="color:#24292E;"> (</span><span style="color:#E36209;">state</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">=</span><span style="color:#24292E;"> defaultStore, </span><span style="color:#E36209;">action</span><span style="color:#24292E;">) </span><span style="color:#D73A49;">=&gt;</span><span style="color:#24292E;"> {</span></span>
<span class="line"><span style="color:#24292E;">  </span><span style="color:#D73A49;">if</span><span style="color:#24292E;"> (action.type </span><span style="color:#D73A49;">===</span><span style="color:#24292E;"> </span><span style="color:#032F62;">&#39;change_input_value&#39;</span><span style="color:#24292E;">) {</span></span>
<span class="line"><span style="color:#24292E;">    </span><span style="color:#D73A49;">const</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">newState</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">=</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">JSON</span><span style="color:#24292E;">.</span><span style="color:#6F42C1;">parse</span><span style="color:#24292E;">(</span><span style="color:#005CC5;">JSON</span><span style="color:#24292E;">.</span><span style="color:#6F42C1;">stringify</span><span style="color:#24292E;">(state));</span></span>
<span class="line"><span style="color:#24292E;">    newState.inputValue </span><span style="color:#D73A49;">=</span><span style="color:#24292E;"> action.value;</span></span>
<span class="line"><span style="color:#24292E;">    </span><span style="color:#D73A49;">return</span><span style="color:#24292E;"> newState;</span></span>
<span class="line"><span style="color:#24292E;">  }</span></span>
<span class="line"><span style="color:#24292E;">  </span><span style="color:#D73A49;">if</span><span style="color:#24292E;"> (action.type </span><span style="color:#D73A49;">===</span><span style="color:#24292E;"> </span><span style="color:#032F62;">&#39;add_todo_item&#39;</span><span style="color:#24292E;">) {</span></span>
<span class="line"><span style="color:#24292E;">    </span><span style="color:#D73A49;">const</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">newState</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">=</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">JSON</span><span style="color:#24292E;">.</span><span style="color:#6F42C1;">parse</span><span style="color:#24292E;">(</span><span style="color:#005CC5;">JSON</span><span style="color:#24292E;">.</span><span style="color:#6F42C1;">stringify</span><span style="color:#24292E;">(state));</span></span>
<span class="line"><span style="color:#24292E;">    newState.list.</span><span style="color:#6F42C1;">push</span><span style="color:#24292E;">(newState.inputValue);</span></span>
<span class="line"><span style="color:#24292E;">    newState.inputValue </span><span style="color:#D73A49;">=</span><span style="color:#24292E;"> </span><span style="color:#032F62;">&#39;&#39;</span><span style="color:#24292E;">;</span></span>
<span class="line"><span style="color:#24292E;">    console.</span><span style="color:#6F42C1;">log</span><span style="color:#24292E;">(newState);</span></span>
<span class="line"><span style="color:#24292E;">    </span><span style="color:#D73A49;">return</span><span style="color:#24292E;"> newState;</span></span>
<span class="line"><span style="color:#24292E;">  }</span></span>
<span class="line"><span style="color:#24292E;">  </span><span style="color:#D73A49;">return</span><span style="color:#24292E;"> state;</span></span>
<span class="line"><span style="color:#24292E;">};</span></span>
<span class="line"><span style="color:#D73A49;">export</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">default</span><span style="color:#24292E;"> reducer;</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br></div></div><h2 id="_3ã€store-æ•°æ®æ”¹é€ " tabindex="-1">3ã€store æ•°æ®æ”¹é€  <a class="header-anchor" href="#_3ã€store-æ•°æ®æ”¹é€ " aria-label="Permalink to &quot;3ã€store æ•°æ®æ”¹é€ &quot;">â€‹</a></h2><p>ä¸‹é¢ï¼Œæˆ‘ä»¬æ¥çœ‹ä¸‹ <code>store</code> æ–‡ä»¶å¤¹ä¸‹ <code>index.js</code> çš„å†…å®¹ã€‚æˆ‘ä»¬éœ€è¦å¯¹å…¶è¿›è¡Œç®€å•çš„æ”¹é€ ï¼Œ<strong>å…·ä½“ä»£ç å¦‚ä¸‹ï¼š</strong></p><div class="language-js vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#F97583;">import</span><span style="color:#E1E4E8;"> { createStore } </span><span style="color:#F97583;">from</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">&#39;redux&#39;</span><span style="color:#E1E4E8;">;</span></span>
<span class="line"><span style="color:#F97583;">import</span><span style="color:#E1E4E8;"> reducer </span><span style="color:#F97583;">from</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">&#39;./reducer&#39;</span><span style="color:#E1E4E8;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F97583;">const</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">store</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> </span><span style="color:#B392F0;">createStore</span><span style="color:#E1E4E8;">(</span></span>
<span class="line"><span style="color:#E1E4E8;">  reducer,</span></span>
<span class="line"><span style="color:#E1E4E8;">  window.__REDUX_DEVTOOLS_EXTENSION__ </span><span style="color:#F97583;">&amp;&amp;</span><span style="color:#E1E4E8;"> window.</span><span style="color:#B392F0;">__REDUX_DEVTOOLS_EXTENSION__</span><span style="color:#E1E4E8;">()</span></span>
<span class="line"><span style="color:#E1E4E8;">);</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F97583;">export</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">default</span><span style="color:#E1E4E8;"> store;</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#D73A49;">import</span><span style="color:#24292E;"> { createStore } </span><span style="color:#D73A49;">from</span><span style="color:#24292E;"> </span><span style="color:#032F62;">&#39;redux&#39;</span><span style="color:#24292E;">;</span></span>
<span class="line"><span style="color:#D73A49;">import</span><span style="color:#24292E;"> reducer </span><span style="color:#D73A49;">from</span><span style="color:#24292E;"> </span><span style="color:#032F62;">&#39;./reducer&#39;</span><span style="color:#24292E;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#D73A49;">const</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">store</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">=</span><span style="color:#24292E;"> </span><span style="color:#6F42C1;">createStore</span><span style="color:#24292E;">(</span></span>
<span class="line"><span style="color:#24292E;">  reducer,</span></span>
<span class="line"><span style="color:#24292E;">  window.__REDUX_DEVTOOLS_EXTENSION__ </span><span style="color:#D73A49;">&amp;&amp;</span><span style="color:#24292E;"> window.</span><span style="color:#6F42C1;">__REDUX_DEVTOOLS_EXTENSION__</span><span style="color:#24292E;">()</span></span>
<span class="line"><span style="color:#24292E;">);</span></span>
<span class="line"></span>
<span class="line"><span style="color:#D73A49;">export</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">default</span><span style="color:#24292E;"> store;</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br></div></div><p>é™¤äº† <code>reducer</code> ä¹‹å¤–ï¼Œæˆ‘ä»¬è¿˜è¦å°† <code>window.__REDUX_DEVTOOLS_EXTENSION__ &amp;&amp; window.__REDUX_DEVTOOLS_EXTENSION__()</code> ç»™ä¼ é€’è¿›å»å¹¶è°ƒç”¨è¿™ä¸ªæ–¹æ³•ã€‚</p><p>æœ€åï¼Œæˆ‘ä»¬æ¥çœ‹ä¸‹<strong>æµè§ˆå™¨çš„æ˜¾ç¤ºæ•ˆæœï¼š</strong></p><p><img src="https://mondaylab-1309616765.cos.ap-shanghai.myqcloud.com/images/202305270715038.gif" alt="actionå’Œreducerä¼ é€’æ•°æ®"></p><h1 id="ğŸ§¶-å››ã€ä½¿ç”¨-redux-å®ç°-todolist-çš„åˆ é™¤åŠŸèƒ½" tabindex="-1">ğŸ§¶ å››ã€ä½¿ç”¨ Redux å®ç° TodoList çš„åˆ é™¤åŠŸèƒ½ <a class="header-anchor" href="#ğŸ§¶-å››ã€ä½¿ç”¨-redux-å®ç°-todolist-çš„åˆ é™¤åŠŸèƒ½" aria-label="Permalink to &quot;ğŸ§¶ å››ã€ä½¿ç”¨ Redux å®ç° TodoList çš„åˆ é™¤åŠŸèƒ½&quot;">â€‹</a></h1><h2 id="_1ã€å¯¹ç»„ä»¶è¿›è¡Œäº‹ä»¶ç»‘å®š" tabindex="-1">1ã€å¯¹ç»„ä»¶è¿›è¡Œäº‹ä»¶ç»‘å®š <a class="header-anchor" href="#_1ã€å¯¹ç»„ä»¶è¿›è¡Œäº‹ä»¶ç»‘å®š" aria-label="Permalink to &quot;1ã€å¯¹ç»„ä»¶è¿›è¡Œäº‹ä»¶ç»‘å®š&quot;">â€‹</a></h2><p>ä¸Šé¢æˆ‘ä»¬å®ç°äº†å¢æ·»åŠŸèƒ½ï¼Œé‚£ä¹ˆç°åœ¨ï¼Œæˆ‘ä»¬ç»§ç»­æ¥å®ç°<strong>åˆ é™¤åŠŸèƒ½</strong>ï¼Œå®ç°<strong>æ¯ç‚¹å‡»æ¯ä¸€é¡¹æ—¶</strong>ï¼Œèƒ½å¤Ÿåˆ é™¤<strong>ç‚¹å‡»é¡¹</strong>çš„æ•°æ®ã€‚å…ˆæ¥åœ¨ <code>TodoList.js</code> æ–‡ä»¶ä¸­ç»‘å®šå¯¹åº”çš„äº‹ä»¶ï¼Œ<strong>å…·ä½“ä»£ç å¦‚ä¸‹ï¼š</strong></p><div class="language-js vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#F97583;">import</span><span style="color:#E1E4E8;"> React, { Component } </span><span style="color:#F97583;">from</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">&#39;react&#39;</span><span style="color:#E1E4E8;">;</span></span>
<span class="line"><span style="color:#F97583;">import</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">&#39;antd/dist/antd.css&#39;</span><span style="color:#E1E4E8;">;</span></span>
<span class="line"><span style="color:#F97583;">import</span><span style="color:#E1E4E8;"> { Input, Button, List } </span><span style="color:#F97583;">from</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">&#39;antd&#39;</span><span style="color:#E1E4E8;">;</span></span>
<span class="line"><span style="color:#F97583;">import</span><span style="color:#E1E4E8;"> store </span><span style="color:#F97583;">from</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">&#39;./store&#39;</span><span style="color:#E1E4E8;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F97583;">class</span><span style="color:#E1E4E8;"> </span><span style="color:#B392F0;">TodoList</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">extends</span><span style="color:#E1E4E8;"> </span><span style="color:#B392F0;">Component</span><span style="color:#E1E4E8;"> {</span></span>
<span class="line"><span style="color:#E1E4E8;">  </span><span style="color:#F97583;">constructor</span><span style="color:#E1E4E8;">(</span><span style="color:#FFAB70;">props</span><span style="color:#E1E4E8;">) {</span></span>
<span class="line"><span style="color:#E1E4E8;">    </span><span style="color:#6A737D;">// æ­¤å¤„çœç•¥ä¸Šè¿°å·²æœ‰ä»£ç </span></span>
<span class="line"><span style="color:#E1E4E8;">  }</span></span>
<span class="line"><span style="color:#E1E4E8;">  </span><span style="color:#B392F0;">render</span><span style="color:#E1E4E8;">() {</span></span>
<span class="line"><span style="color:#E1E4E8;">    </span><span style="color:#F97583;">return</span><span style="color:#E1E4E8;"> (</span></span>
<span class="line"><span style="color:#E1E4E8;">      {</span><span style="color:#6A737D;">/* æ­¤å¤„çœç•¥ä¸Šè¿°å·²æœ‰ä»£ç  */</span><span style="color:#E1E4E8;">}</span></span>
<span class="line"><span style="color:#E1E4E8;">        &lt;</span><span style="color:#79B8FF;">List</span></span>
<span class="line"><span style="color:#E1E4E8;">          </span><span style="color:#B392F0;">style</span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;">{{marginTop: </span><span style="color:#9ECBFF;">&#39;10px&#39;</span><span style="color:#E1E4E8;">, width: </span><span style="color:#9ECBFF;">&#39;300px&#39;</span><span style="color:#E1E4E8;">}}</span></span>
<span class="line"><span style="color:#E1E4E8;">          </span><span style="color:#B392F0;">bordered</span></span>
<span class="line"><span style="color:#E1E4E8;">          </span><span style="color:#B392F0;">dataSource</span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;">{</span><span style="color:#79B8FF;">this</span><span style="color:#E1E4E8;">.state.list}</span></span>
<span class="line"><span style="color:#E1E4E8;">          </span><span style="color:#B392F0;">renderItem</span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;">{(</span><span style="color:#FFAB70;">item</span><span style="color:#E1E4E8;">, </span><span style="color:#FFAB70;">index</span><span style="color:#E1E4E8;">) </span><span style="color:#F97583;">=&gt;</span><span style="color:#E1E4E8;"> &lt;</span><span style="color:#79B8FF;">List.Item</span><span style="color:#E1E4E8;"> </span><span style="color:#B392F0;">onClick</span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;">{</span><span style="color:#79B8FF;">this</span><span style="color:#E1E4E8;">.handleItemDelete.</span><span style="color:#B392F0;">bind</span><span style="color:#E1E4E8;">(</span><span style="color:#79B8FF;">this</span><span style="color:#E1E4E8;">, index)}&gt;{item}&lt;/</span><span style="color:#79B8FF;">List.Item</span><span style="color:#E1E4E8;">&gt;}</span></span>
<span class="line"><span style="color:#E1E4E8;">        /&gt;</span></span>
<span class="line"><span style="color:#E1E4E8;">      </span><span style="color:#F97583;">&lt;/</span><span style="color:#E1E4E8;">div</span><span style="color:#F97583;">&gt;</span></span>
<span class="line"><span style="color:#E1E4E8;">    )</span></span>
<span class="line"><span style="color:#E1E4E8;">  }</span></span>
<span class="line"></span>
<span class="line"><span style="color:#E1E4E8;">  </span><span style="color:#6A737D;">// æ­¤å¤„çœç•¥ä¸Šè¿°å·²æœ‰ä»£ç </span></span>
<span class="line"></span>
<span class="line"><span style="color:#E1E4E8;">  </span><span style="color:#B392F0;">handleItemDelete</span><span style="color:#E1E4E8;">(</span><span style="color:#FFAB70;">index</span><span style="color:#E1E4E8;">) {</span></span>
<span class="line"><span style="color:#E1E4E8;">    </span><span style="color:#F97583;">const</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">action</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> {</span></span>
<span class="line"><span style="color:#E1E4E8;">      type: </span><span style="color:#9ECBFF;">&#39;delete_todo_item&#39;</span><span style="color:#E1E4E8;">,</span></span>
<span class="line"><span style="color:#E1E4E8;">      index</span></span>
<span class="line"><span style="color:#E1E4E8;">    }</span></span>
<span class="line"><span style="color:#E1E4E8;">    store.</span><span style="color:#B392F0;">dispatch</span><span style="color:#E1E4E8;">(action);</span></span>
<span class="line"><span style="color:#E1E4E8;">  }</span></span>
<span class="line"><span style="color:#E1E4E8;">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F97583;">export</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">default</span><span style="color:#E1E4E8;"> TodoList;</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#D73A49;">import</span><span style="color:#24292E;"> React, { Component } </span><span style="color:#D73A49;">from</span><span style="color:#24292E;"> </span><span style="color:#032F62;">&#39;react&#39;</span><span style="color:#24292E;">;</span></span>
<span class="line"><span style="color:#D73A49;">import</span><span style="color:#24292E;"> </span><span style="color:#032F62;">&#39;antd/dist/antd.css&#39;</span><span style="color:#24292E;">;</span></span>
<span class="line"><span style="color:#D73A49;">import</span><span style="color:#24292E;"> { Input, Button, List } </span><span style="color:#D73A49;">from</span><span style="color:#24292E;"> </span><span style="color:#032F62;">&#39;antd&#39;</span><span style="color:#24292E;">;</span></span>
<span class="line"><span style="color:#D73A49;">import</span><span style="color:#24292E;"> store </span><span style="color:#D73A49;">from</span><span style="color:#24292E;"> </span><span style="color:#032F62;">&#39;./store&#39;</span><span style="color:#24292E;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#D73A49;">class</span><span style="color:#24292E;"> </span><span style="color:#6F42C1;">TodoList</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">extends</span><span style="color:#24292E;"> </span><span style="color:#6F42C1;">Component</span><span style="color:#24292E;"> {</span></span>
<span class="line"><span style="color:#24292E;">  </span><span style="color:#D73A49;">constructor</span><span style="color:#24292E;">(</span><span style="color:#E36209;">props</span><span style="color:#24292E;">) {</span></span>
<span class="line"><span style="color:#24292E;">    </span><span style="color:#6A737D;">// æ­¤å¤„çœç•¥ä¸Šè¿°å·²æœ‰ä»£ç </span></span>
<span class="line"><span style="color:#24292E;">  }</span></span>
<span class="line"><span style="color:#24292E;">  </span><span style="color:#6F42C1;">render</span><span style="color:#24292E;">() {</span></span>
<span class="line"><span style="color:#24292E;">    </span><span style="color:#D73A49;">return</span><span style="color:#24292E;"> (</span></span>
<span class="line"><span style="color:#24292E;">      {</span><span style="color:#6A737D;">/* æ­¤å¤„çœç•¥ä¸Šè¿°å·²æœ‰ä»£ç  */</span><span style="color:#24292E;">}</span></span>
<span class="line"><span style="color:#24292E;">        &lt;</span><span style="color:#005CC5;">List</span></span>
<span class="line"><span style="color:#24292E;">          </span><span style="color:#6F42C1;">style</span><span style="color:#D73A49;">=</span><span style="color:#24292E;">{{marginTop: </span><span style="color:#032F62;">&#39;10px&#39;</span><span style="color:#24292E;">, width: </span><span style="color:#032F62;">&#39;300px&#39;</span><span style="color:#24292E;">}}</span></span>
<span class="line"><span style="color:#24292E;">          </span><span style="color:#6F42C1;">bordered</span></span>
<span class="line"><span style="color:#24292E;">          </span><span style="color:#6F42C1;">dataSource</span><span style="color:#D73A49;">=</span><span style="color:#24292E;">{</span><span style="color:#005CC5;">this</span><span style="color:#24292E;">.state.list}</span></span>
<span class="line"><span style="color:#24292E;">          </span><span style="color:#6F42C1;">renderItem</span><span style="color:#D73A49;">=</span><span style="color:#24292E;">{(</span><span style="color:#E36209;">item</span><span style="color:#24292E;">, </span><span style="color:#E36209;">index</span><span style="color:#24292E;">) </span><span style="color:#D73A49;">=&gt;</span><span style="color:#24292E;"> &lt;</span><span style="color:#005CC5;">List.Item</span><span style="color:#24292E;"> </span><span style="color:#6F42C1;">onClick</span><span style="color:#D73A49;">=</span><span style="color:#24292E;">{</span><span style="color:#005CC5;">this</span><span style="color:#24292E;">.handleItemDelete.</span><span style="color:#6F42C1;">bind</span><span style="color:#24292E;">(</span><span style="color:#005CC5;">this</span><span style="color:#24292E;">, index)}&gt;{item}&lt;/</span><span style="color:#005CC5;">List.Item</span><span style="color:#24292E;">&gt;}</span></span>
<span class="line"><span style="color:#24292E;">        /&gt;</span></span>
<span class="line"><span style="color:#24292E;">      </span><span style="color:#D73A49;">&lt;/</span><span style="color:#24292E;">div</span><span style="color:#D73A49;">&gt;</span></span>
<span class="line"><span style="color:#24292E;">    )</span></span>
<span class="line"><span style="color:#24292E;">  }</span></span>
<span class="line"></span>
<span class="line"><span style="color:#24292E;">  </span><span style="color:#6A737D;">// æ­¤å¤„çœç•¥ä¸Šè¿°å·²æœ‰ä»£ç </span></span>
<span class="line"></span>
<span class="line"><span style="color:#24292E;">  </span><span style="color:#6F42C1;">handleItemDelete</span><span style="color:#24292E;">(</span><span style="color:#E36209;">index</span><span style="color:#24292E;">) {</span></span>
<span class="line"><span style="color:#24292E;">    </span><span style="color:#D73A49;">const</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">action</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">=</span><span style="color:#24292E;"> {</span></span>
<span class="line"><span style="color:#24292E;">      type: </span><span style="color:#032F62;">&#39;delete_todo_item&#39;</span><span style="color:#24292E;">,</span></span>
<span class="line"><span style="color:#24292E;">      index</span></span>
<span class="line"><span style="color:#24292E;">    }</span></span>
<span class="line"><span style="color:#24292E;">    store.</span><span style="color:#6F42C1;">dispatch</span><span style="color:#24292E;">(action);</span></span>
<span class="line"><span style="color:#24292E;">  }</span></span>
<span class="line"><span style="color:#24292E;">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#D73A49;">export</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">default</span><span style="color:#24292E;"> TodoList;</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br></div></div><h2 id="_2ã€åœ¨-reducer-ä¸­è¿›è¡Œæ•°æ®é€šä¿¡" tabindex="-1">2ã€åœ¨ reducer ä¸­è¿›è¡Œæ•°æ®é€šä¿¡ <a class="header-anchor" href="#_2ã€åœ¨-reducer-ä¸­è¿›è¡Œæ•°æ®é€šä¿¡" aria-label="Permalink to &quot;2ã€åœ¨ reducer ä¸­è¿›è¡Œæ•°æ®é€šä¿¡&quot;">â€‹</a></h2><p>æ¥ç€ï¼Œæˆ‘ä»¬åœ¨ <code>reducer.js</code> æ–‡ä»¶ä¸­ï¼Œå¯¹æ•°æ®è¿›è¡Œé€šä¿¡ã€‚<strong>å…·ä½“ä»£ç å¦‚ä¸‹ï¼š</strong></p><div class="language-js vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#F97583;">const</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">defaultStore</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> {</span></span>
<span class="line"><span style="color:#E1E4E8;">  inputValue: </span><span style="color:#9ECBFF;">&#39;123&#39;</span><span style="color:#E1E4E8;">,</span></span>
<span class="line"><span style="color:#E1E4E8;">  list: [</span><span style="color:#79B8FF;">1</span><span style="color:#E1E4E8;">, </span><span style="color:#79B8FF;">2</span><span style="color:#E1E4E8;">],</span></span>
<span class="line"><span style="color:#E1E4E8;">};</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D;">// reducer å¯ä»¥æ¥æ”¶stateï¼Œä½†æ˜¯ç»ä¸èƒ½ä¿®æ”¹state</span></span>
<span class="line"><span style="color:#F97583;">const</span><span style="color:#E1E4E8;"> </span><span style="color:#B392F0;">reducer</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> (</span><span style="color:#FFAB70;">state</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> defaultStore, </span><span style="color:#FFAB70;">action</span><span style="color:#E1E4E8;">) </span><span style="color:#F97583;">=&gt;</span><span style="color:#E1E4E8;"> {</span></span>
<span class="line"><span style="color:#E1E4E8;">  </span><span style="color:#6A737D;">// æ­¤å¤„çœç•¥ä¸Šè¿°å·²æœ‰ä»£ç </span></span>
<span class="line"></span>
<span class="line"><span style="color:#E1E4E8;">  </span><span style="color:#F97583;">if</span><span style="color:#E1E4E8;"> (action.type </span><span style="color:#F97583;">===</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">&#39;delete_todo_item&#39;</span><span style="color:#E1E4E8;">) {</span></span>
<span class="line"><span style="color:#E1E4E8;">    </span><span style="color:#F97583;">const</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">newState</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">JSON</span><span style="color:#E1E4E8;">.</span><span style="color:#B392F0;">parse</span><span style="color:#E1E4E8;">(</span><span style="color:#79B8FF;">JSON</span><span style="color:#E1E4E8;">.</span><span style="color:#B392F0;">stringify</span><span style="color:#E1E4E8;">(state));</span></span>
<span class="line"><span style="color:#E1E4E8;">    newState.list.</span><span style="color:#B392F0;">splice</span><span style="color:#E1E4E8;">(action.index, </span><span style="color:#79B8FF;">1</span><span style="color:#E1E4E8;">);</span></span>
<span class="line"><span style="color:#E1E4E8;">    </span><span style="color:#F97583;">return</span><span style="color:#E1E4E8;"> newState;</span></span>
<span class="line"><span style="color:#E1E4E8;">  }</span></span>
<span class="line"><span style="color:#E1E4E8;">  </span><span style="color:#F97583;">return</span><span style="color:#E1E4E8;"> state;</span></span>
<span class="line"><span style="color:#E1E4E8;">};</span></span>
<span class="line"><span style="color:#F97583;">export</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">default</span><span style="color:#E1E4E8;"> reducer;</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#D73A49;">const</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">defaultStore</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">=</span><span style="color:#24292E;"> {</span></span>
<span class="line"><span style="color:#24292E;">  inputValue: </span><span style="color:#032F62;">&#39;123&#39;</span><span style="color:#24292E;">,</span></span>
<span class="line"><span style="color:#24292E;">  list: [</span><span style="color:#005CC5;">1</span><span style="color:#24292E;">, </span><span style="color:#005CC5;">2</span><span style="color:#24292E;">],</span></span>
<span class="line"><span style="color:#24292E;">};</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D;">// reducer å¯ä»¥æ¥æ”¶stateï¼Œä½†æ˜¯ç»ä¸èƒ½ä¿®æ”¹state</span></span>
<span class="line"><span style="color:#D73A49;">const</span><span style="color:#24292E;"> </span><span style="color:#6F42C1;">reducer</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">=</span><span style="color:#24292E;"> (</span><span style="color:#E36209;">state</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">=</span><span style="color:#24292E;"> defaultStore, </span><span style="color:#E36209;">action</span><span style="color:#24292E;">) </span><span style="color:#D73A49;">=&gt;</span><span style="color:#24292E;"> {</span></span>
<span class="line"><span style="color:#24292E;">  </span><span style="color:#6A737D;">// æ­¤å¤„çœç•¥ä¸Šè¿°å·²æœ‰ä»£ç </span></span>
<span class="line"></span>
<span class="line"><span style="color:#24292E;">  </span><span style="color:#D73A49;">if</span><span style="color:#24292E;"> (action.type </span><span style="color:#D73A49;">===</span><span style="color:#24292E;"> </span><span style="color:#032F62;">&#39;delete_todo_item&#39;</span><span style="color:#24292E;">) {</span></span>
<span class="line"><span style="color:#24292E;">    </span><span style="color:#D73A49;">const</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">newState</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">=</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">JSON</span><span style="color:#24292E;">.</span><span style="color:#6F42C1;">parse</span><span style="color:#24292E;">(</span><span style="color:#005CC5;">JSON</span><span style="color:#24292E;">.</span><span style="color:#6F42C1;">stringify</span><span style="color:#24292E;">(state));</span></span>
<span class="line"><span style="color:#24292E;">    newState.list.</span><span style="color:#6F42C1;">splice</span><span style="color:#24292E;">(action.index, </span><span style="color:#005CC5;">1</span><span style="color:#24292E;">);</span></span>
<span class="line"><span style="color:#24292E;">    </span><span style="color:#D73A49;">return</span><span style="color:#24292E;"> newState;</span></span>
<span class="line"><span style="color:#24292E;">  }</span></span>
<span class="line"><span style="color:#24292E;">  </span><span style="color:#D73A49;">return</span><span style="color:#24292E;"> state;</span></span>
<span class="line"><span style="color:#24292E;">};</span></span>
<span class="line"><span style="color:#D73A49;">export</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">default</span><span style="color:#24292E;"> reducer;</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br></div></div><p>ç°åœ¨ï¼Œæˆ‘ä»¬æ¥çœ‹ä¸‹<strong>æµè§ˆå™¨çš„æ˜¾ç¤ºæ•ˆæœï¼š</strong></p><p><img src="https://mondaylab-1309616765.cos.ap-shanghai.myqcloud.com/images/202305270716035.gif" alt="åˆ é™¤åŠŸèƒ½"></p><h1 id="ğŸ‘“-äº”ã€é€»è¾‘å½’çº³" tabindex="-1">ğŸ‘“ äº”ã€é€»è¾‘å½’çº³ <a class="header-anchor" href="#ğŸ‘“-äº”ã€é€»è¾‘å½’çº³" aria-label="Permalink to &quot;ğŸ‘“ äº”ã€é€»è¾‘å½’çº³&quot;">â€‹</a></h1><h2 id="_1ã€actiontypes-çš„æ‹†åˆ†" tabindex="-1">1ã€ActionTypes çš„æ‹†åˆ† <a class="header-anchor" href="#_1ã€actiontypes-çš„æ‹†åˆ†" aria-label="Permalink to &quot;1ã€ActionTypes çš„æ‹†åˆ†&quot;">â€‹</a></h2><p>åœ¨ä¸Šé¢çš„ <code>TodoList.js</code> ä¸­ï¼Œå¤§å®¶å¯ä»¥çœ‹åˆ°ï¼Œæˆ‘ä»¬ä¼šé¢‘ç¹åœ°å»æ“ä½œ <code>action</code> ã€‚åŒæ—¶ï¼Œå‡è®¾è¯´å…¶ä¸­çš„ <code>type</code> å¦‚æœæˆ‘ä»¬ç¨å¾®å†™é”™äº†ä¸€ä¸ªå­—æ¯ï¼Œé‚£æ’é”™çš„è¿‡ç¨‹æ€»æ˜¯ä¸å¥½å®šä½çš„ã€‚</p><p>å› æ­¤ï¼Œæˆ‘ä»¬è¦æ¥åšçš„ä¸€ä»¶äº‹æƒ…å°±æ˜¯ <code>ActionTypes</code> çš„æ‹†åˆ†ã€‚</p><p>é¦–å…ˆï¼Œæˆ‘ä»¬åœ¨ <code>store</code> æ–‡ä»¶å¤¹ä¸‹æ–°å¢ä¸€ä¸ªæ–‡ä»¶ï¼Œå‘½åä¸º <code>actionTypes.js</code> ã€‚<strong>å…·ä½“ä»£ç å¦‚ä¸‹ï¼š</strong></p><div class="language-js vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#F97583;">export</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">const</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">CHANGE_INPUT_VALUE</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">&#39;change_input_value&#39;</span><span style="color:#E1E4E8;">;</span></span>
<span class="line"><span style="color:#F97583;">export</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">const</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">ADD_TODO_ITEM</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">&#39;add_todo_item&#39;</span><span style="color:#E1E4E8;">;</span></span>
<span class="line"><span style="color:#F97583;">export</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">const</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">DELETE_TODO_ITEM</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">&#39;delete_todo_item&#39;</span><span style="color:#E1E4E8;">;</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#D73A49;">export</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">const</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">CHANGE_INPUT_VALUE</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">=</span><span style="color:#24292E;"> </span><span style="color:#032F62;">&#39;change_input_value&#39;</span><span style="color:#24292E;">;</span></span>
<span class="line"><span style="color:#D73A49;">export</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">const</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">ADD_TODO_ITEM</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">=</span><span style="color:#24292E;"> </span><span style="color:#032F62;">&#39;add_todo_item&#39;</span><span style="color:#24292E;">;</span></span>
<span class="line"><span style="color:#D73A49;">export</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">const</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">DELETE_TODO_ITEM</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">=</span><span style="color:#24292E;"> </span><span style="color:#032F62;">&#39;delete_todo_item&#39;</span><span style="color:#24292E;">;</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><p>å…¶æ¬¡ï¼Œæ”¹é€  <code>TodoList.js</code> ä¸‹çš„å†…å®¹ã€‚<strong>å…·ä½“ä»£ç å¦‚ä¸‹ï¼š</strong></p><div class="language-js vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#F97583;">import</span><span style="color:#E1E4E8;"> {</span></span>
<span class="line"><span style="color:#E1E4E8;">  CHANGE_INPUT_VALUE,</span></span>
<span class="line"><span style="color:#E1E4E8;">  ADD_TODO_ITEM,</span></span>
<span class="line"><span style="color:#E1E4E8;">  DELETE_TODO_ITEM,</span></span>
<span class="line"><span style="color:#E1E4E8;">} </span><span style="color:#F97583;">from</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">&#39;./store/actionTypes&#39;</span><span style="color:#E1E4E8;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F97583;">class</span><span style="color:#E1E4E8;"> </span><span style="color:#B392F0;">TodoList</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">extends</span><span style="color:#E1E4E8;"> </span><span style="color:#B392F0;">Component</span><span style="color:#E1E4E8;"> {</span></span>
<span class="line"><span style="color:#E1E4E8;">  </span><span style="color:#B392F0;">handleInputChange</span><span style="color:#E1E4E8;">(</span><span style="color:#FFAB70;">e</span><span style="color:#E1E4E8;">) {</span></span>
<span class="line"><span style="color:#E1E4E8;">    </span><span style="color:#F97583;">const</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">action</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> {</span></span>
<span class="line"><span style="color:#E1E4E8;">      type: </span><span style="color:#79B8FF;">CHANGE_INPUT_VALUE</span><span style="color:#E1E4E8;">,</span></span>
<span class="line"><span style="color:#E1E4E8;">      value: e.target.value,</span></span>
<span class="line"><span style="color:#E1E4E8;">    };</span></span>
<span class="line"><span style="color:#E1E4E8;">    store.</span><span style="color:#B392F0;">dispatch</span><span style="color:#E1E4E8;">(action);</span></span>
<span class="line"><span style="color:#E1E4E8;">  }</span></span>
<span class="line"></span>
<span class="line"><span style="color:#E1E4E8;">  </span><span style="color:#B392F0;">handleStoreChange</span><span style="color:#E1E4E8;">() {</span></span>
<span class="line"><span style="color:#E1E4E8;">    </span><span style="color:#79B8FF;">this</span><span style="color:#E1E4E8;">.</span><span style="color:#B392F0;">setState</span><span style="color:#E1E4E8;">(store.</span><span style="color:#B392F0;">getState</span><span style="color:#E1E4E8;">());</span></span>
<span class="line"><span style="color:#E1E4E8;">  }</span></span>
<span class="line"></span>
<span class="line"><span style="color:#E1E4E8;">  </span><span style="color:#B392F0;">handleBtnClick</span><span style="color:#E1E4E8;">() {</span></span>
<span class="line"><span style="color:#E1E4E8;">    </span><span style="color:#F97583;">const</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">action</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> {</span></span>
<span class="line"><span style="color:#E1E4E8;">      type: </span><span style="color:#79B8FF;">ADD_TODO_ITEM</span><span style="color:#E1E4E8;">,</span></span>
<span class="line"><span style="color:#E1E4E8;">    };</span></span>
<span class="line"><span style="color:#E1E4E8;">    store.</span><span style="color:#B392F0;">dispatch</span><span style="color:#E1E4E8;">(action);</span></span>
<span class="line"><span style="color:#E1E4E8;">  }</span></span>
<span class="line"></span>
<span class="line"><span style="color:#E1E4E8;">  </span><span style="color:#B392F0;">handleItemDelete</span><span style="color:#E1E4E8;">(</span><span style="color:#FFAB70;">index</span><span style="color:#E1E4E8;">) {</span></span>
<span class="line"><span style="color:#E1E4E8;">    </span><span style="color:#F97583;">const</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">action</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> {</span></span>
<span class="line"><span style="color:#E1E4E8;">      type: </span><span style="color:#79B8FF;">DELETE_TODO_ITEM</span><span style="color:#E1E4E8;">,</span></span>
<span class="line"><span style="color:#E1E4E8;">      index,</span></span>
<span class="line"><span style="color:#E1E4E8;">    };</span></span>
<span class="line"><span style="color:#E1E4E8;">    store.</span><span style="color:#B392F0;">dispatch</span><span style="color:#E1E4E8;">(action);</span></span>
<span class="line"><span style="color:#E1E4E8;">  }</span></span>
<span class="line"><span style="color:#E1E4E8;">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F97583;">export</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">default</span><span style="color:#E1E4E8;"> TodoList;</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#D73A49;">import</span><span style="color:#24292E;"> {</span></span>
<span class="line"><span style="color:#24292E;">  CHANGE_INPUT_VALUE,</span></span>
<span class="line"><span style="color:#24292E;">  ADD_TODO_ITEM,</span></span>
<span class="line"><span style="color:#24292E;">  DELETE_TODO_ITEM,</span></span>
<span class="line"><span style="color:#24292E;">} </span><span style="color:#D73A49;">from</span><span style="color:#24292E;"> </span><span style="color:#032F62;">&#39;./store/actionTypes&#39;</span><span style="color:#24292E;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#D73A49;">class</span><span style="color:#24292E;"> </span><span style="color:#6F42C1;">TodoList</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">extends</span><span style="color:#24292E;"> </span><span style="color:#6F42C1;">Component</span><span style="color:#24292E;"> {</span></span>
<span class="line"><span style="color:#24292E;">  </span><span style="color:#6F42C1;">handleInputChange</span><span style="color:#24292E;">(</span><span style="color:#E36209;">e</span><span style="color:#24292E;">) {</span></span>
<span class="line"><span style="color:#24292E;">    </span><span style="color:#D73A49;">const</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">action</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">=</span><span style="color:#24292E;"> {</span></span>
<span class="line"><span style="color:#24292E;">      type: </span><span style="color:#005CC5;">CHANGE_INPUT_VALUE</span><span style="color:#24292E;">,</span></span>
<span class="line"><span style="color:#24292E;">      value: e.target.value,</span></span>
<span class="line"><span style="color:#24292E;">    };</span></span>
<span class="line"><span style="color:#24292E;">    store.</span><span style="color:#6F42C1;">dispatch</span><span style="color:#24292E;">(action);</span></span>
<span class="line"><span style="color:#24292E;">  }</span></span>
<span class="line"></span>
<span class="line"><span style="color:#24292E;">  </span><span style="color:#6F42C1;">handleStoreChange</span><span style="color:#24292E;">() {</span></span>
<span class="line"><span style="color:#24292E;">    </span><span style="color:#005CC5;">this</span><span style="color:#24292E;">.</span><span style="color:#6F42C1;">setState</span><span style="color:#24292E;">(store.</span><span style="color:#6F42C1;">getState</span><span style="color:#24292E;">());</span></span>
<span class="line"><span style="color:#24292E;">  }</span></span>
<span class="line"></span>
<span class="line"><span style="color:#24292E;">  </span><span style="color:#6F42C1;">handleBtnClick</span><span style="color:#24292E;">() {</span></span>
<span class="line"><span style="color:#24292E;">    </span><span style="color:#D73A49;">const</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">action</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">=</span><span style="color:#24292E;"> {</span></span>
<span class="line"><span style="color:#24292E;">      type: </span><span style="color:#005CC5;">ADD_TODO_ITEM</span><span style="color:#24292E;">,</span></span>
<span class="line"><span style="color:#24292E;">    };</span></span>
<span class="line"><span style="color:#24292E;">    store.</span><span style="color:#6F42C1;">dispatch</span><span style="color:#24292E;">(action);</span></span>
<span class="line"><span style="color:#24292E;">  }</span></span>
<span class="line"></span>
<span class="line"><span style="color:#24292E;">  </span><span style="color:#6F42C1;">handleItemDelete</span><span style="color:#24292E;">(</span><span style="color:#E36209;">index</span><span style="color:#24292E;">) {</span></span>
<span class="line"><span style="color:#24292E;">    </span><span style="color:#D73A49;">const</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">action</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">=</span><span style="color:#24292E;"> {</span></span>
<span class="line"><span style="color:#24292E;">      type: </span><span style="color:#005CC5;">DELETE_TODO_ITEM</span><span style="color:#24292E;">,</span></span>
<span class="line"><span style="color:#24292E;">      index,</span></span>
<span class="line"><span style="color:#24292E;">    };</span></span>
<span class="line"><span style="color:#24292E;">    store.</span><span style="color:#6F42C1;">dispatch</span><span style="color:#24292E;">(action);</span></span>
<span class="line"><span style="color:#24292E;">  }</span></span>
<span class="line"><span style="color:#24292E;">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#D73A49;">export</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">default</span><span style="color:#24292E;"> TodoList;</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br></div></div><p>æœ€åï¼Œæ”¹é€  <code>reducer.js</code> æ–‡ä»¶ã€‚<strong>å…·ä½“ä»£ç å¦‚ä¸‹ï¼š</strong></p><div class="language-js vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#F97583;">import</span><span style="color:#E1E4E8;"> {</span></span>
<span class="line"><span style="color:#E1E4E8;">  CHANGE_INPUT_VALUE,</span></span>
<span class="line"><span style="color:#E1E4E8;">  ADD_TODO_ITEM,</span></span>
<span class="line"><span style="color:#E1E4E8;">  DELETE_TODO_ITEM,</span></span>
<span class="line"><span style="color:#E1E4E8;">} </span><span style="color:#F97583;">from</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">&#39;./actionTypes&#39;</span><span style="color:#E1E4E8;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F97583;">const</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">defaultStore</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> {</span></span>
<span class="line"><span style="color:#E1E4E8;">  inputValue: </span><span style="color:#9ECBFF;">&#39;123&#39;</span><span style="color:#E1E4E8;">,</span></span>
<span class="line"><span style="color:#E1E4E8;">  list: [</span><span style="color:#79B8FF;">1</span><span style="color:#E1E4E8;">, </span><span style="color:#79B8FF;">2</span><span style="color:#E1E4E8;">],</span></span>
<span class="line"><span style="color:#E1E4E8;">};</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F97583;">const</span><span style="color:#E1E4E8;"> </span><span style="color:#B392F0;">reducer</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> (</span><span style="color:#FFAB70;">state</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> defaultStore, </span><span style="color:#FFAB70;">action</span><span style="color:#E1E4E8;">) </span><span style="color:#F97583;">=&gt;</span><span style="color:#E1E4E8;"> {</span></span>
<span class="line"><span style="color:#E1E4E8;">  </span><span style="color:#F97583;">if</span><span style="color:#E1E4E8;"> (action.type </span><span style="color:#F97583;">===</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">CHANGE_INPUT_VALUE</span><span style="color:#E1E4E8;">) {</span></span>
<span class="line"><span style="color:#E1E4E8;">    </span><span style="color:#F97583;">const</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">newState</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">JSON</span><span style="color:#E1E4E8;">.</span><span style="color:#B392F0;">parse</span><span style="color:#E1E4E8;">(</span><span style="color:#79B8FF;">JSON</span><span style="color:#E1E4E8;">.</span><span style="color:#B392F0;">stringify</span><span style="color:#E1E4E8;">(state));</span></span>
<span class="line"><span style="color:#E1E4E8;">    newState.inputValue </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> action.value;</span></span>
<span class="line"><span style="color:#E1E4E8;">    </span><span style="color:#F97583;">return</span><span style="color:#E1E4E8;"> newState;</span></span>
<span class="line"><span style="color:#E1E4E8;">  }</span></span>
<span class="line"><span style="color:#E1E4E8;">  </span><span style="color:#F97583;">if</span><span style="color:#E1E4E8;"> (action.type </span><span style="color:#F97583;">===</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">ADD_TODO_ITEM</span><span style="color:#E1E4E8;">) {</span></span>
<span class="line"><span style="color:#E1E4E8;">    </span><span style="color:#F97583;">const</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">newState</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">JSON</span><span style="color:#E1E4E8;">.</span><span style="color:#B392F0;">parse</span><span style="color:#E1E4E8;">(</span><span style="color:#79B8FF;">JSON</span><span style="color:#E1E4E8;">.</span><span style="color:#B392F0;">stringify</span><span style="color:#E1E4E8;">(state));</span></span>
<span class="line"><span style="color:#E1E4E8;">    newState.list.</span><span style="color:#B392F0;">push</span><span style="color:#E1E4E8;">(newState.inputValue);</span></span>
<span class="line"><span style="color:#E1E4E8;">    newState.inputValue </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">&#39;&#39;</span><span style="color:#E1E4E8;">;</span></span>
<span class="line"><span style="color:#E1E4E8;">    console.</span><span style="color:#B392F0;">log</span><span style="color:#E1E4E8;">(newState);</span></span>
<span class="line"><span style="color:#E1E4E8;">    </span><span style="color:#F97583;">return</span><span style="color:#E1E4E8;"> newState;</span></span>
<span class="line"><span style="color:#E1E4E8;">  }</span></span>
<span class="line"><span style="color:#E1E4E8;">  </span><span style="color:#F97583;">if</span><span style="color:#E1E4E8;"> (action.type </span><span style="color:#F97583;">===</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">DELETE_TODO_ITEM</span><span style="color:#E1E4E8;">) {</span></span>
<span class="line"><span style="color:#E1E4E8;">    </span><span style="color:#F97583;">const</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">newState</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">JSON</span><span style="color:#E1E4E8;">.</span><span style="color:#B392F0;">parse</span><span style="color:#E1E4E8;">(</span><span style="color:#79B8FF;">JSON</span><span style="color:#E1E4E8;">.</span><span style="color:#B392F0;">stringify</span><span style="color:#E1E4E8;">(state));</span></span>
<span class="line"><span style="color:#E1E4E8;">    newState.list.</span><span style="color:#B392F0;">splice</span><span style="color:#E1E4E8;">(action.index, </span><span style="color:#79B8FF;">1</span><span style="color:#E1E4E8;">);</span></span>
<span class="line"><span style="color:#E1E4E8;">    </span><span style="color:#F97583;">return</span><span style="color:#E1E4E8;"> newState;</span></span>
<span class="line"><span style="color:#E1E4E8;">  }</span></span>
<span class="line"><span style="color:#E1E4E8;">  </span><span style="color:#F97583;">return</span><span style="color:#E1E4E8;"> state;</span></span>
<span class="line"><span style="color:#E1E4E8;">};</span></span>
<span class="line"><span style="color:#F97583;">export</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">default</span><span style="color:#E1E4E8;"> reducer;</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#D73A49;">import</span><span style="color:#24292E;"> {</span></span>
<span class="line"><span style="color:#24292E;">  CHANGE_INPUT_VALUE,</span></span>
<span class="line"><span style="color:#24292E;">  ADD_TODO_ITEM,</span></span>
<span class="line"><span style="color:#24292E;">  DELETE_TODO_ITEM,</span></span>
<span class="line"><span style="color:#24292E;">} </span><span style="color:#D73A49;">from</span><span style="color:#24292E;"> </span><span style="color:#032F62;">&#39;./actionTypes&#39;</span><span style="color:#24292E;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#D73A49;">const</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">defaultStore</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">=</span><span style="color:#24292E;"> {</span></span>
<span class="line"><span style="color:#24292E;">  inputValue: </span><span style="color:#032F62;">&#39;123&#39;</span><span style="color:#24292E;">,</span></span>
<span class="line"><span style="color:#24292E;">  list: [</span><span style="color:#005CC5;">1</span><span style="color:#24292E;">, </span><span style="color:#005CC5;">2</span><span style="color:#24292E;">],</span></span>
<span class="line"><span style="color:#24292E;">};</span></span>
<span class="line"></span>
<span class="line"><span style="color:#D73A49;">const</span><span style="color:#24292E;"> </span><span style="color:#6F42C1;">reducer</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">=</span><span style="color:#24292E;"> (</span><span style="color:#E36209;">state</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">=</span><span style="color:#24292E;"> defaultStore, </span><span style="color:#E36209;">action</span><span style="color:#24292E;">) </span><span style="color:#D73A49;">=&gt;</span><span style="color:#24292E;"> {</span></span>
<span class="line"><span style="color:#24292E;">  </span><span style="color:#D73A49;">if</span><span style="color:#24292E;"> (action.type </span><span style="color:#D73A49;">===</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">CHANGE_INPUT_VALUE</span><span style="color:#24292E;">) {</span></span>
<span class="line"><span style="color:#24292E;">    </span><span style="color:#D73A49;">const</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">newState</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">=</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">JSON</span><span style="color:#24292E;">.</span><span style="color:#6F42C1;">parse</span><span style="color:#24292E;">(</span><span style="color:#005CC5;">JSON</span><span style="color:#24292E;">.</span><span style="color:#6F42C1;">stringify</span><span style="color:#24292E;">(state));</span></span>
<span class="line"><span style="color:#24292E;">    newState.inputValue </span><span style="color:#D73A49;">=</span><span style="color:#24292E;"> action.value;</span></span>
<span class="line"><span style="color:#24292E;">    </span><span style="color:#D73A49;">return</span><span style="color:#24292E;"> newState;</span></span>
<span class="line"><span style="color:#24292E;">  }</span></span>
<span class="line"><span style="color:#24292E;">  </span><span style="color:#D73A49;">if</span><span style="color:#24292E;"> (action.type </span><span style="color:#D73A49;">===</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">ADD_TODO_ITEM</span><span style="color:#24292E;">) {</span></span>
<span class="line"><span style="color:#24292E;">    </span><span style="color:#D73A49;">const</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">newState</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">=</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">JSON</span><span style="color:#24292E;">.</span><span style="color:#6F42C1;">parse</span><span style="color:#24292E;">(</span><span style="color:#005CC5;">JSON</span><span style="color:#24292E;">.</span><span style="color:#6F42C1;">stringify</span><span style="color:#24292E;">(state));</span></span>
<span class="line"><span style="color:#24292E;">    newState.list.</span><span style="color:#6F42C1;">push</span><span style="color:#24292E;">(newState.inputValue);</span></span>
<span class="line"><span style="color:#24292E;">    newState.inputValue </span><span style="color:#D73A49;">=</span><span style="color:#24292E;"> </span><span style="color:#032F62;">&#39;&#39;</span><span style="color:#24292E;">;</span></span>
<span class="line"><span style="color:#24292E;">    console.</span><span style="color:#6F42C1;">log</span><span style="color:#24292E;">(newState);</span></span>
<span class="line"><span style="color:#24292E;">    </span><span style="color:#D73A49;">return</span><span style="color:#24292E;"> newState;</span></span>
<span class="line"><span style="color:#24292E;">  }</span></span>
<span class="line"><span style="color:#24292E;">  </span><span style="color:#D73A49;">if</span><span style="color:#24292E;"> (action.type </span><span style="color:#D73A49;">===</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">DELETE_TODO_ITEM</span><span style="color:#24292E;">) {</span></span>
<span class="line"><span style="color:#24292E;">    </span><span style="color:#D73A49;">const</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">newState</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">=</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">JSON</span><span style="color:#24292E;">.</span><span style="color:#6F42C1;">parse</span><span style="color:#24292E;">(</span><span style="color:#005CC5;">JSON</span><span style="color:#24292E;">.</span><span style="color:#6F42C1;">stringify</span><span style="color:#24292E;">(state));</span></span>
<span class="line"><span style="color:#24292E;">    newState.list.</span><span style="color:#6F42C1;">splice</span><span style="color:#24292E;">(action.index, </span><span style="color:#005CC5;">1</span><span style="color:#24292E;">);</span></span>
<span class="line"><span style="color:#24292E;">    </span><span style="color:#D73A49;">return</span><span style="color:#24292E;"> newState;</span></span>
<span class="line"><span style="color:#24292E;">  }</span></span>
<span class="line"><span style="color:#24292E;">  </span><span style="color:#D73A49;">return</span><span style="color:#24292E;"> state;</span></span>
<span class="line"><span style="color:#24292E;">};</span></span>
<span class="line"><span style="color:#D73A49;">export</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">default</span><span style="color:#24292E;"> reducer;</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br></div></div><p>é€šè¿‡å°† <code>change_input_value</code> ã€ <code>add_todo_item</code> å’Œ <code>delete_todo_item</code> è¿›è¡Œæ•´åˆï¼Œå°†å…¶æ•´åˆåˆ° <code>actionTypes.js</code> æ–‡ä»¶ä¸‹ï¼Œè¿™æ ·ï¼Œå¦‚æœæˆ‘ä»¬é‡åˆ°å­—æ¯å†™é”™çš„æƒ…å†µä¸‹ï¼Œä¹Ÿèƒ½å¤Ÿæ›´å¥½çš„è¿›è¡Œæ’é”™ã€‚</p><h2 id="_2ã€ä½¿ç”¨-actioncreator-ç»Ÿä¸€åˆ›å»º-action" tabindex="-1">2ã€ä½¿ç”¨ actionCreator ç»Ÿä¸€åˆ›å»º action <a class="header-anchor" href="#_2ã€ä½¿ç”¨-actioncreator-ç»Ÿä¸€åˆ›å»º-action" aria-label="Permalink to &quot;2ã€ä½¿ç”¨ actionCreator ç»Ÿä¸€åˆ›å»º action&quot;">â€‹</a></h2><p>åœ¨ä¸Šé¢çš„ <code>TodoList.js</code> ä¸­ï¼Œå¤§å®¶å¯ä»¥çœ‹åˆ°ï¼Œå¯¹äºå‡ ä¸ªç»‘å®šçš„äº‹ä»¶æ¥è¯´ï¼Œæˆ‘ä»¬æ€»æ˜¯è¦<strong>é¢‘ç¹çš„å»åˆ›å»º <code>action</code></strong> ï¼Œé‡å¤æ€§åœ°æ“ä½œæ˜¯åœ¨ç¨‹åºä¸­æœ€å¿Œè®³çš„ä¸€ä¸ªäº‹æƒ…ã€‚å› æ­¤å‘¢ï¼Œæˆ‘ä»¬è¦ä½¿ç”¨ <code>actionCreator</code> ï¼Œæ¥å¯¹ <code>action</code> è¿›è¡Œç»Ÿä¸€ç®¡ç†ï¼Œä½¿å¾—é€»è¾‘æ›´åŠ åœ°ç»Ÿä¸€å®Œæ•´ã€‚</p><p>é¦–å…ˆï¼Œæˆ‘ä»¬åœ¨ <code>store</code> æ–‡ä»¶å¤¹ä¸‹æ–°åˆ›å»ºä¸€ä¸ªæ–‡ä»¶ï¼Œå‘½åä¸º <code>actionCreators.js</code> ã€‚<strong>å…·ä½“ä»£ç å¦‚ä¸‹ï¼š</strong></p><div class="language-js vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#F97583;">import</span><span style="color:#E1E4E8;"> {</span></span>
<span class="line"><span style="color:#E1E4E8;">  CHANGE_INPUT_VALUE,</span></span>
<span class="line"><span style="color:#E1E4E8;">  ADD_TODO_ITEM,</span></span>
<span class="line"><span style="color:#E1E4E8;">  DELETE_TODO_ITEM,</span></span>
<span class="line"><span style="color:#E1E4E8;">} </span><span style="color:#F97583;">from</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">&#39;./actionTypes&#39;</span><span style="color:#E1E4E8;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F97583;">export</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">const</span><span style="color:#E1E4E8;"> </span><span style="color:#B392F0;">getInputChangeAction</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> (</span><span style="color:#FFAB70;">value</span><span style="color:#E1E4E8;">) </span><span style="color:#F97583;">=&gt;</span><span style="color:#E1E4E8;"> ({</span></span>
<span class="line"><span style="color:#E1E4E8;">  type: </span><span style="color:#79B8FF;">CHANGE_INPUT_VALUE</span><span style="color:#E1E4E8;">,</span></span>
<span class="line"><span style="color:#E1E4E8;">  value: value,</span></span>
<span class="line"><span style="color:#E1E4E8;">});</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F97583;">export</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">const</span><span style="color:#E1E4E8;"> </span><span style="color:#B392F0;">getAddItemAction</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> (</span><span style="color:#FFAB70;">value</span><span style="color:#E1E4E8;">) </span><span style="color:#F97583;">=&gt;</span><span style="color:#E1E4E8;"> ({</span></span>
<span class="line"><span style="color:#E1E4E8;">  type: </span><span style="color:#79B8FF;">ADD_TODO_ITEM</span><span style="color:#E1E4E8;">,</span></span>
<span class="line"><span style="color:#E1E4E8;">});</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F97583;">export</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">const</span><span style="color:#E1E4E8;"> </span><span style="color:#B392F0;">getDeleteItemAction</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> (</span><span style="color:#FFAB70;">index</span><span style="color:#E1E4E8;">) </span><span style="color:#F97583;">=&gt;</span><span style="color:#E1E4E8;"> ({</span></span>
<span class="line"><span style="color:#E1E4E8;">  type: </span><span style="color:#79B8FF;">DELETE_TODO_ITEM</span><span style="color:#E1E4E8;">,</span></span>
<span class="line"><span style="color:#E1E4E8;">  index: index,</span></span>
<span class="line"><span style="color:#E1E4E8;">});</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#D73A49;">import</span><span style="color:#24292E;"> {</span></span>
<span class="line"><span style="color:#24292E;">  CHANGE_INPUT_VALUE,</span></span>
<span class="line"><span style="color:#24292E;">  ADD_TODO_ITEM,</span></span>
<span class="line"><span style="color:#24292E;">  DELETE_TODO_ITEM,</span></span>
<span class="line"><span style="color:#24292E;">} </span><span style="color:#D73A49;">from</span><span style="color:#24292E;"> </span><span style="color:#032F62;">&#39;./actionTypes&#39;</span><span style="color:#24292E;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#D73A49;">export</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">const</span><span style="color:#24292E;"> </span><span style="color:#6F42C1;">getInputChangeAction</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">=</span><span style="color:#24292E;"> (</span><span style="color:#E36209;">value</span><span style="color:#24292E;">) </span><span style="color:#D73A49;">=&gt;</span><span style="color:#24292E;"> ({</span></span>
<span class="line"><span style="color:#24292E;">  type: </span><span style="color:#005CC5;">CHANGE_INPUT_VALUE</span><span style="color:#24292E;">,</span></span>
<span class="line"><span style="color:#24292E;">  value: value,</span></span>
<span class="line"><span style="color:#24292E;">});</span></span>
<span class="line"></span>
<span class="line"><span style="color:#D73A49;">export</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">const</span><span style="color:#24292E;"> </span><span style="color:#6F42C1;">getAddItemAction</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">=</span><span style="color:#24292E;"> (</span><span style="color:#E36209;">value</span><span style="color:#24292E;">) </span><span style="color:#D73A49;">=&gt;</span><span style="color:#24292E;"> ({</span></span>
<span class="line"><span style="color:#24292E;">  type: </span><span style="color:#005CC5;">ADD_TODO_ITEM</span><span style="color:#24292E;">,</span></span>
<span class="line"><span style="color:#24292E;">});</span></span>
<span class="line"></span>
<span class="line"><span style="color:#D73A49;">export</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">const</span><span style="color:#24292E;"> </span><span style="color:#6F42C1;">getDeleteItemAction</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">=</span><span style="color:#24292E;"> (</span><span style="color:#E36209;">index</span><span style="color:#24292E;">) </span><span style="color:#D73A49;">=&gt;</span><span style="color:#24292E;"> ({</span></span>
<span class="line"><span style="color:#24292E;">  type: </span><span style="color:#005CC5;">DELETE_TODO_ITEM</span><span style="color:#24292E;">,</span></span>
<span class="line"><span style="color:#24292E;">  index: index,</span></span>
<span class="line"><span style="color:#24292E;">});</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br></div></div><p>ç»§ç»­ï¼Œæˆ‘ä»¬æ¥æ”¹é€  <code>TodoList.js</code> ã€‚<strong>å…·ä½“ä»£ç å¦‚ä¸‹ï¼š</strong></p><div class="language-js vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#F97583;">import</span><span style="color:#E1E4E8;"> {</span></span>
<span class="line"><span style="color:#E1E4E8;">  getInputChangeAction,</span></span>
<span class="line"><span style="color:#E1E4E8;">  getAddItemAction,</span></span>
<span class="line"><span style="color:#E1E4E8;">  getDeleteItemAction,</span></span>
<span class="line"><span style="color:#E1E4E8;">} </span><span style="color:#F97583;">from</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">&#39;./store/actionCreators&#39;</span><span style="color:#E1E4E8;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F97583;">class</span><span style="color:#E1E4E8;"> </span><span style="color:#B392F0;">TodoList</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">extends</span><span style="color:#E1E4E8;"> </span><span style="color:#B392F0;">Component</span><span style="color:#E1E4E8;"> {</span></span>
<span class="line"><span style="color:#E1E4E8;">  </span><span style="color:#B392F0;">handleInputChange</span><span style="color:#E1E4E8;">(</span><span style="color:#FFAB70;">e</span><span style="color:#E1E4E8;">) {</span></span>
<span class="line"><span style="color:#E1E4E8;">    </span><span style="color:#F97583;">const</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">action</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> </span><span style="color:#B392F0;">getInputChangeAction</span><span style="color:#E1E4E8;">(e.target.value);</span></span>
<span class="line"><span style="color:#E1E4E8;">    store.</span><span style="color:#B392F0;">dispatch</span><span style="color:#E1E4E8;">(action);</span></span>
<span class="line"><span style="color:#E1E4E8;">  }</span></span>
<span class="line"></span>
<span class="line"><span style="color:#E1E4E8;">  </span><span style="color:#B392F0;">handleBtnClick</span><span style="color:#E1E4E8;">() {</span></span>
<span class="line"><span style="color:#E1E4E8;">    </span><span style="color:#F97583;">const</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">action</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> </span><span style="color:#B392F0;">getAddItemAction</span><span style="color:#E1E4E8;">();</span></span>
<span class="line"><span style="color:#E1E4E8;">    store.</span><span style="color:#B392F0;">dispatch</span><span style="color:#E1E4E8;">(action);</span></span>
<span class="line"><span style="color:#E1E4E8;">  }</span></span>
<span class="line"></span>
<span class="line"><span style="color:#E1E4E8;">  </span><span style="color:#B392F0;">handleItemDelete</span><span style="color:#E1E4E8;">(</span><span style="color:#FFAB70;">index</span><span style="color:#E1E4E8;">) {</span></span>
<span class="line"><span style="color:#E1E4E8;">    </span><span style="color:#F97583;">const</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">action</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> </span><span style="color:#B392F0;">getDeleteItemAction</span><span style="color:#E1E4E8;">(index);</span></span>
<span class="line"><span style="color:#E1E4E8;">    store.</span><span style="color:#B392F0;">dispatch</span><span style="color:#E1E4E8;">(action);</span></span>
<span class="line"><span style="color:#E1E4E8;">  }</span></span>
<span class="line"><span style="color:#E1E4E8;">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F97583;">export</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">default</span><span style="color:#E1E4E8;"> TodoList;</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#D73A49;">import</span><span style="color:#24292E;"> {</span></span>
<span class="line"><span style="color:#24292E;">  getInputChangeAction,</span></span>
<span class="line"><span style="color:#24292E;">  getAddItemAction,</span></span>
<span class="line"><span style="color:#24292E;">  getDeleteItemAction,</span></span>
<span class="line"><span style="color:#24292E;">} </span><span style="color:#D73A49;">from</span><span style="color:#24292E;"> </span><span style="color:#032F62;">&#39;./store/actionCreators&#39;</span><span style="color:#24292E;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#D73A49;">class</span><span style="color:#24292E;"> </span><span style="color:#6F42C1;">TodoList</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">extends</span><span style="color:#24292E;"> </span><span style="color:#6F42C1;">Component</span><span style="color:#24292E;"> {</span></span>
<span class="line"><span style="color:#24292E;">  </span><span style="color:#6F42C1;">handleInputChange</span><span style="color:#24292E;">(</span><span style="color:#E36209;">e</span><span style="color:#24292E;">) {</span></span>
<span class="line"><span style="color:#24292E;">    </span><span style="color:#D73A49;">const</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">action</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">=</span><span style="color:#24292E;"> </span><span style="color:#6F42C1;">getInputChangeAction</span><span style="color:#24292E;">(e.target.value);</span></span>
<span class="line"><span style="color:#24292E;">    store.</span><span style="color:#6F42C1;">dispatch</span><span style="color:#24292E;">(action);</span></span>
<span class="line"><span style="color:#24292E;">  }</span></span>
<span class="line"></span>
<span class="line"><span style="color:#24292E;">  </span><span style="color:#6F42C1;">handleBtnClick</span><span style="color:#24292E;">() {</span></span>
<span class="line"><span style="color:#24292E;">    </span><span style="color:#D73A49;">const</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">action</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">=</span><span style="color:#24292E;"> </span><span style="color:#6F42C1;">getAddItemAction</span><span style="color:#24292E;">();</span></span>
<span class="line"><span style="color:#24292E;">    store.</span><span style="color:#6F42C1;">dispatch</span><span style="color:#24292E;">(action);</span></span>
<span class="line"><span style="color:#24292E;">  }</span></span>
<span class="line"></span>
<span class="line"><span style="color:#24292E;">  </span><span style="color:#6F42C1;">handleItemDelete</span><span style="color:#24292E;">(</span><span style="color:#E36209;">index</span><span style="color:#24292E;">) {</span></span>
<span class="line"><span style="color:#24292E;">    </span><span style="color:#D73A49;">const</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">action</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">=</span><span style="color:#24292E;"> </span><span style="color:#6F42C1;">getDeleteItemAction</span><span style="color:#24292E;">(index);</span></span>
<span class="line"><span style="color:#24292E;">    store.</span><span style="color:#6F42C1;">dispatch</span><span style="color:#24292E;">(action);</span></span>
<span class="line"><span style="color:#24292E;">  }</span></span>
<span class="line"><span style="color:#24292E;">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#D73A49;">export</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">default</span><span style="color:#24292E;"> TodoList;</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br></div></div><p>é€šè¿‡å°† <code>action</code> ä¸­çš„æ“ä½œç»Ÿä¸€æŠ½ç¦»åˆ° <code>actionCreators.js</code> å½“ä¸­ï¼Œä½¿å¾—æœ€ç»ˆçš„é€»è¾‘æ›´åŠ çš„ç»Ÿä¸€ã€‚</p><h1 id="ğŸ‘”-å…­ã€redux-çš„ä¸€äº›æ€»ç»“" tabindex="-1">ğŸ‘” å…­ã€Redux çš„ä¸€äº›æ€»ç»“ <a class="header-anchor" href="#ğŸ‘”-å…­ã€redux-çš„ä¸€äº›æ€»ç»“" aria-label="Permalink to &quot;ğŸ‘” å…­ã€Redux çš„ä¸€äº›æ€»ç»“&quot;">â€‹</a></h1><p>è®²åˆ°è¿™é‡Œï¼Œæˆ‘ä»¬å¯¹ä¸Šé¢çš„ä¸€äº›çŸ¥è¯†ç‚¹è¿›è¡Œå½’çº³æ€»ç»“ï¼Œå…·ä½“å¦‚ä¸‹</p><h2 id="_1ã€redux-è®¾è®¡å’Œä½¿ç”¨çš„ä¸‰é¡¹åŸåˆ™" tabindex="-1">1ã€Redux è®¾è®¡å’Œä½¿ç”¨çš„ä¸‰é¡¹åŸåˆ™ <a class="header-anchor" href="#_1ã€redux-è®¾è®¡å’Œä½¿ç”¨çš„ä¸‰é¡¹åŸåˆ™" aria-label="Permalink to &quot;1ã€Redux è®¾è®¡å’Œä½¿ç”¨çš„ä¸‰é¡¹åŸåˆ™&quot;">â€‹</a></h2><p><code>Redux</code> çš„è®¾è®¡å’Œä½¿ç”¨<strong>éµå¾ªä»¥ä¸‹ä¸‰å¤§åŸåˆ™ï¼š</strong></p><ul><li><code>store</code> å¿…é¡»æ˜¯å”¯ä¸€çš„ ğŸ‘‰ å³æ•´ä¸ªåº”ç”¨ä¹‹ä¸­å¿…é¡»ä¸”åªèƒ½æœ‰ä¸€ä¸ª <code>store</code> ï¼›</li><li>åªæœ‰ <code>store</code> èƒ½å¤Ÿæ”¹å˜è‡ªå·±çš„å†…å®¹ ğŸ‘‰ å³ <code>store</code> ä¸æ˜¯ <code>reducer</code> å»æ›´æ–°çš„ï¼Œè€Œæ˜¯ <code>store</code> åœ¨æ‹¿åˆ° <code>reducer</code> çš„æ•°æ®ä¹‹åï¼Œè‡ªå·±å¯¹è‡ªå·±çš„æ•°æ®è¿›è¡Œä¸€æ¬¡æ›´æ–°ï¼›å› æ­¤ï¼Œæˆ‘ä»¬å›åˆ°ä¸Šé¢çš„ <code>reducer.js</code> æ–‡ä»¶ï¼Œåœ¨ <code>react</code> ä¸­ï¼Œæ˜¯ä¸å…è®¸ <code>state.inputValue === æŸä¸ªå€¼</code> ä¹‹ç±»çš„äº‹æƒ…å‘ç”Ÿçš„å“¦ï¼Œä¹Ÿå°±æ˜¯è¯´ä¸èƒ½å¯¹å…¶ç›´æ¥è¿›è¡Œèµ‹å€¼ã€‚</li><li><code>Reducer</code> å¿…é¡»æ˜¯çº¯å‡½æ•° ğŸ‘‰ æ‰€è°“<strong>çº¯å‡½æ•°</strong>ï¼Œå³ç»™å®šå›ºå®šçš„è¾“å…¥ï¼Œå°±ä¸€å®šæœ‰å›ºå®šçš„è¾“å‡ºï¼Œè€Œä¸”ä¸ä¼šäº§ç”Ÿä»»ä½•çš„å‰¯ä½œç”¨ã€‚å›åˆ°æˆ‘ä»¬ä¸Šé¢çš„ <code>reducer.js</code> æ–‡ä»¶ï¼Œå¤§å®¶å¯ä»¥çœ‹åˆ°ï¼Œ <code>state</code> æ˜¯å›ºå®šçš„ï¼Œ <code>action</code> ä¹Ÿæ˜¯å›ºå®šçš„ï¼Œé‚£ä¹ˆæœ€ç»ˆè¿”å›çš„ <code>newState</code> è‡ªç„¶ä¹Ÿå°±æ˜¯å›ºå®šçš„ã€‚</li></ul><h2 id="_2ã€redux-çš„æ ¸å¿ƒ-api" tabindex="-1">2ã€Redux çš„æ ¸å¿ƒ API <a class="header-anchor" href="#_2ã€redux-çš„æ ¸å¿ƒ-api" aria-label="Permalink to &quot;2ã€Redux çš„æ ¸å¿ƒ API&quot;">â€‹</a></h2><p>æˆ‘ä»¬å†æ¥å¤ä¹  <code>Redux</code> çš„å‡ ä¸ªæ ¸å¿ƒ <code>API</code> ã€‚<strong>å…ˆçœ‹ä¸‹å›¾ï¼š</strong></p><p><img src="https://mondaylab-1309616765.cos.ap-shanghai.myqcloud.com/images/202305270716802.png" alt="Reduxçš„æ ¸å¿ƒAPI"></p><p>ç°åœ¨æ¥å›é¡¾ä¸‹è¿™å‡ ä¸ªæ ¸å¿ƒ <code>API</code> çš„ä½œç”¨ã€‚<strong>å…·ä½“å¦‚ä¸‹ï¼š</strong></p><ul><li>createStore â€”â€” å¯ä»¥å¸®åŠ©æˆ‘ä»¬åˆ›å»ºä¸€ä¸ª <code>store</code> ï¼›</li><li>store.dispatch â€”â€” <code>dispatch</code> æ–¹æ³•å¸®åŠ©æˆ‘ä»¬æ´¾å‘ <code>action</code> ï¼ŒåŒæ—¶ï¼Œè¿™ä¸ª <code>action</code> ä¼šä¼ é€’ç»™ <code>store</code> ï¼›</li><li>store.getState â€”â€” <code>getState </code> æ–¹æ³•å¸®åŠ©æˆ‘ä»¬è·å–åˆ°æ‰€æœ‰çš„æ•°æ®ï¼›</li><li>store.subscribe â€”â€” <code>subscribe</code> å¸®åŠ©æˆ‘ä»¬è®¢é˜… <code>store</code> çš„æ”¹å˜ï¼Œåªè¦ <code>store</code> å‘ç”Ÿæ”¹å˜ï¼Œ<code>store.subscribe</code> æ¥æ”¶çš„å›è°ƒå‡½æ•°å°±ä¼šè¢«æ‰§è¡Œã€‚</li></ul><h1 id="ğŸ‘-ä¸ƒã€è¿›é˜¶ç»„ä»¶çš„æ‹†åˆ†" tabindex="-1">ğŸ‘ ä¸ƒã€è¿›é˜¶ç»„ä»¶çš„æ‹†åˆ† <a class="header-anchor" href="#ğŸ‘-ä¸ƒã€è¿›é˜¶ç»„ä»¶çš„æ‹†åˆ†" aria-label="Permalink to &quot;ğŸ‘ ä¸ƒã€è¿›é˜¶ç»„ä»¶çš„æ‹†åˆ†&quot;">â€‹</a></h1><h2 id="_1ã€ui-ç»„ä»¶å’Œå®¹å™¨ç»„ä»¶çš„æ‹†åˆ†" tabindex="-1">1ã€UI ç»„ä»¶å’Œå®¹å™¨ç»„ä»¶çš„æ‹†åˆ† <a class="header-anchor" href="#_1ã€ui-ç»„ä»¶å’Œå®¹å™¨ç»„ä»¶çš„æ‹†åˆ†" aria-label="Permalink to &quot;1ã€UI ç»„ä»¶å’Œå®¹å™¨ç»„ä»¶çš„æ‹†åˆ†&quot;">â€‹</a></h2><p>åœ¨ä¸Šé¢çš„ä»£ç ä¸­ï¼Œæˆ‘ä»¬å·²ç»åŸºæœ¬å®Œæˆäº† <code>TodoList</code> çš„åŠŸèƒ½ã€‚ä½†æ˜¯å‘¢ï¼Œå¤§å®¶æœ‰æ²¡æœ‰å‘ç°ï¼Œåœ¨ <code>TodoList.js</code> æ–‡ä»¶ä¸­ï¼Œé¡µé¢çš„æ¸²æŸ“å’Œé¡µé¢çš„é€»è¾‘ç¼–å†™æ˜¯æ”¾åœ¨ä¸€èµ·çš„ã€‚</p><p>å¾€å¾€åœ¨å®é™…å¼€å‘ä¸­ï¼Œæˆ‘ä»¬éƒ½ä¼šç›´æ¥æŠŠ <strong><code>UI</code> ç»„ä»¶</strong>å’Œ<strong>å®¹å™¨ç»„ä»¶</strong>ç»™æ‹†åˆ†å¼€æ¥ã€‚å…¶ä¸­ï¼Œ <code>UI</code> ç»„ä»¶ä¸“é—¨ç”¨äºè´Ÿè´£<strong>é¡µé¢çš„æ¸²æŸ“</strong>ï¼Œè€Œå®¹å™¨ç»„ä»¶ç”¨äºè´Ÿè´£<strong>é¡µé¢çš„é€»è¾‘</strong>ã€‚</p><p>ä¸‹é¢æˆ‘ä»¬æ¥å¯¹å…¶è¿›è¡Œæ‹†åˆ†ã€‚é¦–å…ˆï¼Œæˆ‘ä»¬ç°åœ¨ <code>src</code> æ–‡ä»¶å¤¹ä¸‹æ–°å¢ä¸€ä¸ªæ–‡ä»¶ï¼Œå‘½åä¸º <code>TodoListUI.js</code> ã€‚<strong>å…·ä½“ä»£ç å¦‚ä¸‹ï¼š</strong></p><div class="language-js vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#F97583;">import</span><span style="color:#E1E4E8;"> React, { Component } </span><span style="color:#F97583;">from</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">&#39;react&#39;</span><span style="color:#E1E4E8;">;</span></span>
<span class="line"><span style="color:#F97583;">import</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">&#39;antd/dist/antd.css&#39;</span><span style="color:#E1E4E8;">;</span></span>
<span class="line"><span style="color:#F97583;">import</span><span style="color:#E1E4E8;"> { Input, Button, List } </span><span style="color:#F97583;">from</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">&#39;antd&#39;</span><span style="color:#E1E4E8;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F97583;">class</span><span style="color:#E1E4E8;"> </span><span style="color:#B392F0;">TodoListUI</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">extends</span><span style="color:#E1E4E8;"> </span><span style="color:#B392F0;">Component</span><span style="color:#E1E4E8;"> {</span></span>
<span class="line"><span style="color:#E1E4E8;">  </span><span style="color:#B392F0;">render</span><span style="color:#E1E4E8;">() {</span></span>
<span class="line"><span style="color:#E1E4E8;">    </span><span style="color:#F97583;">return</span><span style="color:#E1E4E8;"> (</span></span>
<span class="line"><span style="color:#E1E4E8;">      &lt;</span><span style="color:#85E89D;">div</span><span style="color:#E1E4E8;"> </span><span style="color:#B392F0;">style</span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;">{{ marginTop: </span><span style="color:#9ECBFF;">&#39;10px&#39;</span><span style="color:#E1E4E8;">, marginLeft: </span><span style="color:#9ECBFF;">&#39;10px&#39;</span><span style="color:#E1E4E8;"> }}&gt;</span></span>
<span class="line"><span style="color:#E1E4E8;">        &lt;</span><span style="color:#85E89D;">div</span><span style="color:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="color:#E1E4E8;">          &lt;</span><span style="color:#79B8FF;">Input</span></span>
<span class="line"><span style="color:#E1E4E8;">            </span><span style="color:#B392F0;">value</span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;">{</span><span style="color:#79B8FF;">this</span><span style="color:#E1E4E8;">.props.inputValue}</span></span>
<span class="line"><span style="color:#E1E4E8;">            </span><span style="color:#B392F0;">placeholder</span><span style="color:#F97583;">=</span><span style="color:#9ECBFF;">&#39;todo info&#39;</span></span>
<span class="line"><span style="color:#E1E4E8;">            </span><span style="color:#B392F0;">style</span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;">{{ width: </span><span style="color:#9ECBFF;">&#39;300px&#39;</span><span style="color:#E1E4E8;">, marginRight: </span><span style="color:#9ECBFF;">&#39;10px&#39;</span><span style="color:#E1E4E8;"> }}</span></span>
<span class="line"><span style="color:#E1E4E8;">            </span><span style="color:#B392F0;">onChange</span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;">{</span><span style="color:#79B8FF;">this</span><span style="color:#E1E4E8;">.props.handleInputChange}</span></span>
<span class="line"><span style="color:#E1E4E8;">          /&gt;</span></span>
<span class="line"><span style="color:#E1E4E8;">          &lt;</span><span style="color:#79B8FF;">Button</span><span style="color:#E1E4E8;"> </span><span style="color:#B392F0;">type</span><span style="color:#F97583;">=</span><span style="color:#9ECBFF;">&#39;primary&#39;</span><span style="color:#E1E4E8;"> </span><span style="color:#B392F0;">onClick</span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;">{</span><span style="color:#79B8FF;">this</span><span style="color:#E1E4E8;">.props.handleBtnClick}&gt;</span></span>
<span class="line"><span style="color:#E1E4E8;">            æäº¤</span></span>
<span class="line"><span style="color:#E1E4E8;">          &lt;/</span><span style="color:#79B8FF;">Button</span><span style="color:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="color:#E1E4E8;">        &lt;/</span><span style="color:#85E89D;">div</span><span style="color:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="color:#E1E4E8;">        &lt;</span><span style="color:#79B8FF;">List</span></span>
<span class="line"><span style="color:#E1E4E8;">          </span><span style="color:#B392F0;">style</span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;">{{ marginTop: </span><span style="color:#9ECBFF;">&#39;10px&#39;</span><span style="color:#E1E4E8;">, width: </span><span style="color:#9ECBFF;">&#39;300px&#39;</span><span style="color:#E1E4E8;"> }}</span></span>
<span class="line"><span style="color:#E1E4E8;">          </span><span style="color:#B392F0;">bordered</span></span>
<span class="line"><span style="color:#E1E4E8;">          </span><span style="color:#B392F0;">dataSource</span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;">{</span><span style="color:#79B8FF;">this</span><span style="color:#E1E4E8;">.props.list}</span></span>
<span class="line"><span style="color:#E1E4E8;">          </span><span style="color:#B392F0;">renderItem</span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;">{(</span><span style="color:#FFAB70;">item</span><span style="color:#E1E4E8;">, </span><span style="color:#FFAB70;">index</span><span style="color:#E1E4E8;">) </span><span style="color:#F97583;">=&gt;</span><span style="color:#E1E4E8;"> (</span></span>
<span class="line"><span style="color:#E1E4E8;">            &lt;</span><span style="color:#79B8FF;">List.Item</span></span>
<span class="line"><span style="color:#E1E4E8;">              </span><span style="color:#B392F0;">onClick</span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;">{() </span><span style="color:#F97583;">=&gt;</span><span style="color:#E1E4E8;"> {</span></span>
<span class="line"><span style="color:#E1E4E8;">                </span><span style="color:#79B8FF;">this</span><span style="color:#E1E4E8;">.props.</span><span style="color:#B392F0;">handleItemDelete</span><span style="color:#E1E4E8;">(index);</span></span>
<span class="line"><span style="color:#E1E4E8;">              }}</span></span>
<span class="line"><span style="color:#E1E4E8;">            &gt;</span></span>
<span class="line"><span style="color:#E1E4E8;">              {item}</span></span>
<span class="line"><span style="color:#E1E4E8;">            &lt;/</span><span style="color:#79B8FF;">List.Item</span><span style="color:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="color:#E1E4E8;">          )}</span></span>
<span class="line"><span style="color:#E1E4E8;">        /&gt;</span></span>
<span class="line"><span style="color:#E1E4E8;">      &lt;/</span><span style="color:#85E89D;">div</span><span style="color:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="color:#E1E4E8;">    );</span></span>
<span class="line"><span style="color:#E1E4E8;">  }</span></span>
<span class="line"><span style="color:#E1E4E8;">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F97583;">export</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">default</span><span style="color:#E1E4E8;"> TodoListUI;</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#D73A49;">import</span><span style="color:#24292E;"> React, { Component } </span><span style="color:#D73A49;">from</span><span style="color:#24292E;"> </span><span style="color:#032F62;">&#39;react&#39;</span><span style="color:#24292E;">;</span></span>
<span class="line"><span style="color:#D73A49;">import</span><span style="color:#24292E;"> </span><span style="color:#032F62;">&#39;antd/dist/antd.css&#39;</span><span style="color:#24292E;">;</span></span>
<span class="line"><span style="color:#D73A49;">import</span><span style="color:#24292E;"> { Input, Button, List } </span><span style="color:#D73A49;">from</span><span style="color:#24292E;"> </span><span style="color:#032F62;">&#39;antd&#39;</span><span style="color:#24292E;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#D73A49;">class</span><span style="color:#24292E;"> </span><span style="color:#6F42C1;">TodoListUI</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">extends</span><span style="color:#24292E;"> </span><span style="color:#6F42C1;">Component</span><span style="color:#24292E;"> {</span></span>
<span class="line"><span style="color:#24292E;">  </span><span style="color:#6F42C1;">render</span><span style="color:#24292E;">() {</span></span>
<span class="line"><span style="color:#24292E;">    </span><span style="color:#D73A49;">return</span><span style="color:#24292E;"> (</span></span>
<span class="line"><span style="color:#24292E;">      &lt;</span><span style="color:#22863A;">div</span><span style="color:#24292E;"> </span><span style="color:#6F42C1;">style</span><span style="color:#D73A49;">=</span><span style="color:#24292E;">{{ marginTop: </span><span style="color:#032F62;">&#39;10px&#39;</span><span style="color:#24292E;">, marginLeft: </span><span style="color:#032F62;">&#39;10px&#39;</span><span style="color:#24292E;"> }}&gt;</span></span>
<span class="line"><span style="color:#24292E;">        &lt;</span><span style="color:#22863A;">div</span><span style="color:#24292E;">&gt;</span></span>
<span class="line"><span style="color:#24292E;">          &lt;</span><span style="color:#005CC5;">Input</span></span>
<span class="line"><span style="color:#24292E;">            </span><span style="color:#6F42C1;">value</span><span style="color:#D73A49;">=</span><span style="color:#24292E;">{</span><span style="color:#005CC5;">this</span><span style="color:#24292E;">.props.inputValue}</span></span>
<span class="line"><span style="color:#24292E;">            </span><span style="color:#6F42C1;">placeholder</span><span style="color:#D73A49;">=</span><span style="color:#032F62;">&#39;todo info&#39;</span></span>
<span class="line"><span style="color:#24292E;">            </span><span style="color:#6F42C1;">style</span><span style="color:#D73A49;">=</span><span style="color:#24292E;">{{ width: </span><span style="color:#032F62;">&#39;300px&#39;</span><span style="color:#24292E;">, marginRight: </span><span style="color:#032F62;">&#39;10px&#39;</span><span style="color:#24292E;"> }}</span></span>
<span class="line"><span style="color:#24292E;">            </span><span style="color:#6F42C1;">onChange</span><span style="color:#D73A49;">=</span><span style="color:#24292E;">{</span><span style="color:#005CC5;">this</span><span style="color:#24292E;">.props.handleInputChange}</span></span>
<span class="line"><span style="color:#24292E;">          /&gt;</span></span>
<span class="line"><span style="color:#24292E;">          &lt;</span><span style="color:#005CC5;">Button</span><span style="color:#24292E;"> </span><span style="color:#6F42C1;">type</span><span style="color:#D73A49;">=</span><span style="color:#032F62;">&#39;primary&#39;</span><span style="color:#24292E;"> </span><span style="color:#6F42C1;">onClick</span><span style="color:#D73A49;">=</span><span style="color:#24292E;">{</span><span style="color:#005CC5;">this</span><span style="color:#24292E;">.props.handleBtnClick}&gt;</span></span>
<span class="line"><span style="color:#24292E;">            æäº¤</span></span>
<span class="line"><span style="color:#24292E;">          &lt;/</span><span style="color:#005CC5;">Button</span><span style="color:#24292E;">&gt;</span></span>
<span class="line"><span style="color:#24292E;">        &lt;/</span><span style="color:#22863A;">div</span><span style="color:#24292E;">&gt;</span></span>
<span class="line"><span style="color:#24292E;">        &lt;</span><span style="color:#005CC5;">List</span></span>
<span class="line"><span style="color:#24292E;">          </span><span style="color:#6F42C1;">style</span><span style="color:#D73A49;">=</span><span style="color:#24292E;">{{ marginTop: </span><span style="color:#032F62;">&#39;10px&#39;</span><span style="color:#24292E;">, width: </span><span style="color:#032F62;">&#39;300px&#39;</span><span style="color:#24292E;"> }}</span></span>
<span class="line"><span style="color:#24292E;">          </span><span style="color:#6F42C1;">bordered</span></span>
<span class="line"><span style="color:#24292E;">          </span><span style="color:#6F42C1;">dataSource</span><span style="color:#D73A49;">=</span><span style="color:#24292E;">{</span><span style="color:#005CC5;">this</span><span style="color:#24292E;">.props.list}</span></span>
<span class="line"><span style="color:#24292E;">          </span><span style="color:#6F42C1;">renderItem</span><span style="color:#D73A49;">=</span><span style="color:#24292E;">{(</span><span style="color:#E36209;">item</span><span style="color:#24292E;">, </span><span style="color:#E36209;">index</span><span style="color:#24292E;">) </span><span style="color:#D73A49;">=&gt;</span><span style="color:#24292E;"> (</span></span>
<span class="line"><span style="color:#24292E;">            &lt;</span><span style="color:#005CC5;">List.Item</span></span>
<span class="line"><span style="color:#24292E;">              </span><span style="color:#6F42C1;">onClick</span><span style="color:#D73A49;">=</span><span style="color:#24292E;">{() </span><span style="color:#D73A49;">=&gt;</span><span style="color:#24292E;"> {</span></span>
<span class="line"><span style="color:#24292E;">                </span><span style="color:#005CC5;">this</span><span style="color:#24292E;">.props.</span><span style="color:#6F42C1;">handleItemDelete</span><span style="color:#24292E;">(index);</span></span>
<span class="line"><span style="color:#24292E;">              }}</span></span>
<span class="line"><span style="color:#24292E;">            &gt;</span></span>
<span class="line"><span style="color:#24292E;">              {item}</span></span>
<span class="line"><span style="color:#24292E;">            &lt;/</span><span style="color:#005CC5;">List.Item</span><span style="color:#24292E;">&gt;</span></span>
<span class="line"><span style="color:#24292E;">          )}</span></span>
<span class="line"><span style="color:#24292E;">        /&gt;</span></span>
<span class="line"><span style="color:#24292E;">      &lt;/</span><span style="color:#22863A;">div</span><span style="color:#24292E;">&gt;</span></span>
<span class="line"><span style="color:#24292E;">    );</span></span>
<span class="line"><span style="color:#24292E;">  }</span></span>
<span class="line"><span style="color:#24292E;">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#D73A49;">export</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">default</span><span style="color:#24292E;"> TodoListUI;</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br></div></div><p>ç»§ç»­ï¼Œæˆ‘ä»¬æ¥æ”¹é€  <code>TodoList.js</code> æ–‡ä»¶çš„å†…å®¹ã€‚<strong>å…·ä½“ä»£ç å¦‚ä¸‹ï¼š</strong></p><div class="language-js vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#F97583;">import</span><span style="color:#E1E4E8;"> React, { Component } </span><span style="color:#F97583;">from</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">&#39;react&#39;</span><span style="color:#E1E4E8;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F97583;">import</span><span style="color:#E1E4E8;"> store </span><span style="color:#F97583;">from</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">&#39;./store&#39;</span><span style="color:#E1E4E8;">;</span></span>
<span class="line"><span style="color:#F97583;">import</span><span style="color:#E1E4E8;"> {</span></span>
<span class="line"><span style="color:#E1E4E8;">  getInputChangeAction,</span></span>
<span class="line"><span style="color:#E1E4E8;">  getAddItemAction,</span></span>
<span class="line"><span style="color:#E1E4E8;">  getDeleteItemAction,</span></span>
<span class="line"><span style="color:#E1E4E8;">} </span><span style="color:#F97583;">from</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">&#39;./store/actionCreators&#39;</span><span style="color:#E1E4E8;">;</span></span>
<span class="line"><span style="color:#F97583;">import</span><span style="color:#E1E4E8;"> TodoListUI </span><span style="color:#F97583;">from</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">&#39;./TodoListUI&#39;</span><span style="color:#E1E4E8;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F97583;">class</span><span style="color:#E1E4E8;"> </span><span style="color:#B392F0;">TodoList</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">extends</span><span style="color:#E1E4E8;"> </span><span style="color:#B392F0;">Component</span><span style="color:#E1E4E8;"> {</span></span>
<span class="line"><span style="color:#E1E4E8;">  </span><span style="color:#F97583;">constructor</span><span style="color:#E1E4E8;">(</span><span style="color:#FFAB70;">props</span><span style="color:#E1E4E8;">) {</span></span>
<span class="line"><span style="color:#E1E4E8;">    </span><span style="color:#79B8FF;">super</span><span style="color:#E1E4E8;">(props);</span></span>
<span class="line"><span style="color:#E1E4E8;">    </span><span style="color:#79B8FF;">this</span><span style="color:#E1E4E8;">.state </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> store.</span><span style="color:#B392F0;">getState</span><span style="color:#E1E4E8;">();</span></span>
<span class="line"><span style="color:#E1E4E8;">    </span><span style="color:#79B8FF;">this</span><span style="color:#E1E4E8;">.handleInputChange </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">this</span><span style="color:#E1E4E8;">.handleInputChange.</span><span style="color:#B392F0;">bind</span><span style="color:#E1E4E8;">(</span><span style="color:#79B8FF;">this</span><span style="color:#E1E4E8;">);</span></span>
<span class="line"><span style="color:#E1E4E8;">    </span><span style="color:#79B8FF;">this</span><span style="color:#E1E4E8;">.handleStoreChange </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">this</span><span style="color:#E1E4E8;">.handleStoreChange.</span><span style="color:#B392F0;">bind</span><span style="color:#E1E4E8;">(</span><span style="color:#79B8FF;">this</span><span style="color:#E1E4E8;">);</span></span>
<span class="line"><span style="color:#E1E4E8;">    </span><span style="color:#79B8FF;">this</span><span style="color:#E1E4E8;">.handleBtnClick </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">this</span><span style="color:#E1E4E8;">.handleBtnClick.</span><span style="color:#B392F0;">bind</span><span style="color:#E1E4E8;">(</span><span style="color:#79B8FF;">this</span><span style="color:#E1E4E8;">);</span></span>
<span class="line"><span style="color:#E1E4E8;">    </span><span style="color:#79B8FF;">this</span><span style="color:#E1E4E8;">.handleItemDelete </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">this</span><span style="color:#E1E4E8;">.handleItemDelete.</span><span style="color:#B392F0;">bind</span><span style="color:#E1E4E8;">(</span><span style="color:#79B8FF;">this</span><span style="color:#E1E4E8;">);</span></span>
<span class="line"><span style="color:#E1E4E8;">    store.</span><span style="color:#B392F0;">subscribe</span><span style="color:#E1E4E8;">(</span><span style="color:#79B8FF;">this</span><span style="color:#E1E4E8;">.handleStoreChange);</span></span>
<span class="line"><span style="color:#E1E4E8;">  }</span></span>
<span class="line"><span style="color:#E1E4E8;">  </span><span style="color:#B392F0;">render</span><span style="color:#E1E4E8;">() {</span></span>
<span class="line"><span style="color:#E1E4E8;">    </span><span style="color:#F97583;">return</span><span style="color:#E1E4E8;"> (</span></span>
<span class="line"><span style="color:#E1E4E8;">      &lt;</span><span style="color:#79B8FF;">TodoListUI</span></span>
<span class="line"><span style="color:#E1E4E8;">        </span><span style="color:#B392F0;">inputValue</span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;">{</span><span style="color:#79B8FF;">this</span><span style="color:#E1E4E8;">.state.inputValue}</span></span>
<span class="line"><span style="color:#E1E4E8;">        </span><span style="color:#B392F0;">list</span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;">{</span><span style="color:#79B8FF;">this</span><span style="color:#E1E4E8;">.state.list}</span></span>
<span class="line"><span style="color:#E1E4E8;">        </span><span style="color:#B392F0;">handleInputChange</span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;">{</span><span style="color:#79B8FF;">this</span><span style="color:#E1E4E8;">.handleInputChange}</span></span>
<span class="line"><span style="color:#E1E4E8;">        </span><span style="color:#B392F0;">handleBtnClick</span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;">{</span><span style="color:#79B8FF;">this</span><span style="color:#E1E4E8;">.handleBtnClick}</span></span>
<span class="line"><span style="color:#E1E4E8;">        </span><span style="color:#B392F0;">handleItemDelete</span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;">{</span><span style="color:#79B8FF;">this</span><span style="color:#E1E4E8;">.handleItemDelete}</span></span>
<span class="line"><span style="color:#E1E4E8;">      /&gt;</span></span>
<span class="line"><span style="color:#E1E4E8;">    );</span></span>
<span class="line"><span style="color:#E1E4E8;">  }</span></span>
<span class="line"></span>
<span class="line"><span style="color:#E1E4E8;">  </span><span style="color:#B392F0;">handleInputChange</span><span style="color:#E1E4E8;">(</span><span style="color:#FFAB70;">e</span><span style="color:#E1E4E8;">) {</span></span>
<span class="line"><span style="color:#E1E4E8;">    </span><span style="color:#F97583;">const</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">action</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> </span><span style="color:#B392F0;">getInputChangeAction</span><span style="color:#E1E4E8;">(e.target.value);</span></span>
<span class="line"><span style="color:#E1E4E8;">    store.</span><span style="color:#B392F0;">dispatch</span><span style="color:#E1E4E8;">(action);</span></span>
<span class="line"><span style="color:#E1E4E8;">  }</span></span>
<span class="line"></span>
<span class="line"><span style="color:#E1E4E8;">  </span><span style="color:#B392F0;">handleStoreChange</span><span style="color:#E1E4E8;">() {</span></span>
<span class="line"><span style="color:#E1E4E8;">    </span><span style="color:#79B8FF;">this</span><span style="color:#E1E4E8;">.</span><span style="color:#B392F0;">setState</span><span style="color:#E1E4E8;">(store.</span><span style="color:#B392F0;">getState</span><span style="color:#E1E4E8;">());</span></span>
<span class="line"><span style="color:#E1E4E8;">  }</span></span>
<span class="line"></span>
<span class="line"><span style="color:#E1E4E8;">  </span><span style="color:#B392F0;">handleBtnClick</span><span style="color:#E1E4E8;">() {</span></span>
<span class="line"><span style="color:#E1E4E8;">    </span><span style="color:#F97583;">const</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">action</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> </span><span style="color:#B392F0;">getAddItemAction</span><span style="color:#E1E4E8;">();</span></span>
<span class="line"><span style="color:#E1E4E8;">    store.</span><span style="color:#B392F0;">dispatch</span><span style="color:#E1E4E8;">(action);</span></span>
<span class="line"><span style="color:#E1E4E8;">  }</span></span>
<span class="line"></span>
<span class="line"><span style="color:#E1E4E8;">  </span><span style="color:#B392F0;">handleItemDelete</span><span style="color:#E1E4E8;">(</span><span style="color:#FFAB70;">index</span><span style="color:#E1E4E8;">) {</span></span>
<span class="line"><span style="color:#E1E4E8;">    </span><span style="color:#F97583;">const</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">action</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> </span><span style="color:#B392F0;">getDeleteItemAction</span><span style="color:#E1E4E8;">(index);</span></span>
<span class="line"><span style="color:#E1E4E8;">    store.</span><span style="color:#B392F0;">dispatch</span><span style="color:#E1E4E8;">(action);</span></span>
<span class="line"><span style="color:#E1E4E8;">  }</span></span>
<span class="line"><span style="color:#E1E4E8;">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F97583;">export</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">default</span><span style="color:#E1E4E8;"> TodoList;</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#D73A49;">import</span><span style="color:#24292E;"> React, { Component } </span><span style="color:#D73A49;">from</span><span style="color:#24292E;"> </span><span style="color:#032F62;">&#39;react&#39;</span><span style="color:#24292E;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#D73A49;">import</span><span style="color:#24292E;"> store </span><span style="color:#D73A49;">from</span><span style="color:#24292E;"> </span><span style="color:#032F62;">&#39;./store&#39;</span><span style="color:#24292E;">;</span></span>
<span class="line"><span style="color:#D73A49;">import</span><span style="color:#24292E;"> {</span></span>
<span class="line"><span style="color:#24292E;">  getInputChangeAction,</span></span>
<span class="line"><span style="color:#24292E;">  getAddItemAction,</span></span>
<span class="line"><span style="color:#24292E;">  getDeleteItemAction,</span></span>
<span class="line"><span style="color:#24292E;">} </span><span style="color:#D73A49;">from</span><span style="color:#24292E;"> </span><span style="color:#032F62;">&#39;./store/actionCreators&#39;</span><span style="color:#24292E;">;</span></span>
<span class="line"><span style="color:#D73A49;">import</span><span style="color:#24292E;"> TodoListUI </span><span style="color:#D73A49;">from</span><span style="color:#24292E;"> </span><span style="color:#032F62;">&#39;./TodoListUI&#39;</span><span style="color:#24292E;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#D73A49;">class</span><span style="color:#24292E;"> </span><span style="color:#6F42C1;">TodoList</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">extends</span><span style="color:#24292E;"> </span><span style="color:#6F42C1;">Component</span><span style="color:#24292E;"> {</span></span>
<span class="line"><span style="color:#24292E;">  </span><span style="color:#D73A49;">constructor</span><span style="color:#24292E;">(</span><span style="color:#E36209;">props</span><span style="color:#24292E;">) {</span></span>
<span class="line"><span style="color:#24292E;">    </span><span style="color:#005CC5;">super</span><span style="color:#24292E;">(props);</span></span>
<span class="line"><span style="color:#24292E;">    </span><span style="color:#005CC5;">this</span><span style="color:#24292E;">.state </span><span style="color:#D73A49;">=</span><span style="color:#24292E;"> store.</span><span style="color:#6F42C1;">getState</span><span style="color:#24292E;">();</span></span>
<span class="line"><span style="color:#24292E;">    </span><span style="color:#005CC5;">this</span><span style="color:#24292E;">.handleInputChange </span><span style="color:#D73A49;">=</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">this</span><span style="color:#24292E;">.handleInputChange.</span><span style="color:#6F42C1;">bind</span><span style="color:#24292E;">(</span><span style="color:#005CC5;">this</span><span style="color:#24292E;">);</span></span>
<span class="line"><span style="color:#24292E;">    </span><span style="color:#005CC5;">this</span><span style="color:#24292E;">.handleStoreChange </span><span style="color:#D73A49;">=</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">this</span><span style="color:#24292E;">.handleStoreChange.</span><span style="color:#6F42C1;">bind</span><span style="color:#24292E;">(</span><span style="color:#005CC5;">this</span><span style="color:#24292E;">);</span></span>
<span class="line"><span style="color:#24292E;">    </span><span style="color:#005CC5;">this</span><span style="color:#24292E;">.handleBtnClick </span><span style="color:#D73A49;">=</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">this</span><span style="color:#24292E;">.handleBtnClick.</span><span style="color:#6F42C1;">bind</span><span style="color:#24292E;">(</span><span style="color:#005CC5;">this</span><span style="color:#24292E;">);</span></span>
<span class="line"><span style="color:#24292E;">    </span><span style="color:#005CC5;">this</span><span style="color:#24292E;">.handleItemDelete </span><span style="color:#D73A49;">=</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">this</span><span style="color:#24292E;">.handleItemDelete.</span><span style="color:#6F42C1;">bind</span><span style="color:#24292E;">(</span><span style="color:#005CC5;">this</span><span style="color:#24292E;">);</span></span>
<span class="line"><span style="color:#24292E;">    store.</span><span style="color:#6F42C1;">subscribe</span><span style="color:#24292E;">(</span><span style="color:#005CC5;">this</span><span style="color:#24292E;">.handleStoreChange);</span></span>
<span class="line"><span style="color:#24292E;">  }</span></span>
<span class="line"><span style="color:#24292E;">  </span><span style="color:#6F42C1;">render</span><span style="color:#24292E;">() {</span></span>
<span class="line"><span style="color:#24292E;">    </span><span style="color:#D73A49;">return</span><span style="color:#24292E;"> (</span></span>
<span class="line"><span style="color:#24292E;">      &lt;</span><span style="color:#005CC5;">TodoListUI</span></span>
<span class="line"><span style="color:#24292E;">        </span><span style="color:#6F42C1;">inputValue</span><span style="color:#D73A49;">=</span><span style="color:#24292E;">{</span><span style="color:#005CC5;">this</span><span style="color:#24292E;">.state.inputValue}</span></span>
<span class="line"><span style="color:#24292E;">        </span><span style="color:#6F42C1;">list</span><span style="color:#D73A49;">=</span><span style="color:#24292E;">{</span><span style="color:#005CC5;">this</span><span style="color:#24292E;">.state.list}</span></span>
<span class="line"><span style="color:#24292E;">        </span><span style="color:#6F42C1;">handleInputChange</span><span style="color:#D73A49;">=</span><span style="color:#24292E;">{</span><span style="color:#005CC5;">this</span><span style="color:#24292E;">.handleInputChange}</span></span>
<span class="line"><span style="color:#24292E;">        </span><span style="color:#6F42C1;">handleBtnClick</span><span style="color:#D73A49;">=</span><span style="color:#24292E;">{</span><span style="color:#005CC5;">this</span><span style="color:#24292E;">.handleBtnClick}</span></span>
<span class="line"><span style="color:#24292E;">        </span><span style="color:#6F42C1;">handleItemDelete</span><span style="color:#D73A49;">=</span><span style="color:#24292E;">{</span><span style="color:#005CC5;">this</span><span style="color:#24292E;">.handleItemDelete}</span></span>
<span class="line"><span style="color:#24292E;">      /&gt;</span></span>
<span class="line"><span style="color:#24292E;">    );</span></span>
<span class="line"><span style="color:#24292E;">  }</span></span>
<span class="line"></span>
<span class="line"><span style="color:#24292E;">  </span><span style="color:#6F42C1;">handleInputChange</span><span style="color:#24292E;">(</span><span style="color:#E36209;">e</span><span style="color:#24292E;">) {</span></span>
<span class="line"><span style="color:#24292E;">    </span><span style="color:#D73A49;">const</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">action</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">=</span><span style="color:#24292E;"> </span><span style="color:#6F42C1;">getInputChangeAction</span><span style="color:#24292E;">(e.target.value);</span></span>
<span class="line"><span style="color:#24292E;">    store.</span><span style="color:#6F42C1;">dispatch</span><span style="color:#24292E;">(action);</span></span>
<span class="line"><span style="color:#24292E;">  }</span></span>
<span class="line"></span>
<span class="line"><span style="color:#24292E;">  </span><span style="color:#6F42C1;">handleStoreChange</span><span style="color:#24292E;">() {</span></span>
<span class="line"><span style="color:#24292E;">    </span><span style="color:#005CC5;">this</span><span style="color:#24292E;">.</span><span style="color:#6F42C1;">setState</span><span style="color:#24292E;">(store.</span><span style="color:#6F42C1;">getState</span><span style="color:#24292E;">());</span></span>
<span class="line"><span style="color:#24292E;">  }</span></span>
<span class="line"></span>
<span class="line"><span style="color:#24292E;">  </span><span style="color:#6F42C1;">handleBtnClick</span><span style="color:#24292E;">() {</span></span>
<span class="line"><span style="color:#24292E;">    </span><span style="color:#D73A49;">const</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">action</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">=</span><span style="color:#24292E;"> </span><span style="color:#6F42C1;">getAddItemAction</span><span style="color:#24292E;">();</span></span>
<span class="line"><span style="color:#24292E;">    store.</span><span style="color:#6F42C1;">dispatch</span><span style="color:#24292E;">(action);</span></span>
<span class="line"><span style="color:#24292E;">  }</span></span>
<span class="line"></span>
<span class="line"><span style="color:#24292E;">  </span><span style="color:#6F42C1;">handleItemDelete</span><span style="color:#24292E;">(</span><span style="color:#E36209;">index</span><span style="color:#24292E;">) {</span></span>
<span class="line"><span style="color:#24292E;">    </span><span style="color:#D73A49;">const</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">action</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">=</span><span style="color:#24292E;"> </span><span style="color:#6F42C1;">getDeleteItemAction</span><span style="color:#24292E;">(index);</span></span>
<span class="line"><span style="color:#24292E;">    store.</span><span style="color:#6F42C1;">dispatch</span><span style="color:#24292E;">(action);</span></span>
<span class="line"><span style="color:#24292E;">  }</span></span>
<span class="line"><span style="color:#24292E;">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#D73A49;">export</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">default</span><span style="color:#24292E;"> TodoList;</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br><span class="line-number">40</span><br><span class="line-number">41</span><br><span class="line-number">42</span><br><span class="line-number">43</span><br><span class="line-number">44</span><br><span class="line-number">45</span><br><span class="line-number">46</span><br><span class="line-number">47</span><br><span class="line-number">48</span><br><span class="line-number">49</span><br><span class="line-number">50</span><br><span class="line-number">51</span><br><span class="line-number">52</span><br><span class="line-number">53</span><br></div></div><p>å¤§å®¶å¯ä»¥çœ‹åˆ°ï¼Œæˆ‘ä»¬æŠŠé¡µé¢çš„å†…å®¹ç»™å•ç‹¬æŠ½ç¦»å‡ºæ¥æ”¾åˆ° <code>TodoListUI.js</code> æ–‡ä»¶å½“ä¸­ï¼Œè®©å®ƒåªåšæ¸²æŸ“è¿™ä¸€ä»¶äº‹æƒ…ã€‚è¿™æ ·ï¼Œæˆ‘ä»¬å°±æˆåŠŸçš„æŠŠ <code>UI</code> ç»„ä»¶å’Œé€»è¾‘ç»„ä»¶è¿›è¡Œæ‹†åˆ†ã€‚</p><h2 id="_2ã€æ— çŠ¶æ€ç»„ä»¶" tabindex="-1">2ã€æ— çŠ¶æ€ç»„ä»¶ <a class="header-anchor" href="#_2ã€æ— çŠ¶æ€ç»„ä»¶" aria-label="Permalink to &quot;2ã€æ— çŠ¶æ€ç»„ä»¶&quot;">â€‹</a></h2><p>æœ‰äº† <code>UI</code> ç»„ä»¶ä¹‹åï¼Œæˆ‘ä»¬å†æ¥çœ‹å¦å¤–ä¸€ç§ç»„ä»¶ï¼Œ<strong>æ— çŠ¶æ€ç»„ä»¶</strong>ã€‚æ‰€è°“<strong>æ— çŠ¶æ€ç»„ä»¶</strong>ï¼Œå°±æ˜¯æ•´ä¸ªé¡µé¢<strong>ä»€ä¹ˆé€»è¾‘éƒ½æ²¡æœ‰</strong>ï¼Œåªæœ‰ä¸€ä¸ª <code>render</code> å‡½æ•°æ—¶ï¼Œæˆ‘ä»¬å¯ä»¥æŠŠå®ƒç§°ä¹‹ä¸ºæ˜¯ä¸€ä¸ªæ— çŠ¶æ€ç»„ä»¶ã€‚</p><p>é‚£æ— çŠ¶æ€ç»„ä»¶æ€ä¹ˆå®šä¹‰å‘¢ï¼Ÿï¼Ÿ</p><p>æˆ‘ä»¬å¯ä»¥å®šä¹‰ä¸€ä¸ªå‡½æ•°ï¼Œè¿™ä¸ªå‡½æ•°æ¥æ”¶ä¸€ä¸ªå‚æ•°ï¼Œ<code>props</code> ã€‚ <code>TodoListUI.js</code> æ–‡ä»¶çš„å…·ä½“ä»£ç å¦‚ä¸‹ï¼š</p><div class="language-js vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#F97583;">import</span><span style="color:#E1E4E8;"> React </span><span style="color:#F97583;">from</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">&#39;react&#39;</span><span style="color:#E1E4E8;">;</span></span>
<span class="line"><span style="color:#F97583;">import</span><span style="color:#E1E4E8;"> { Input, Button, List } </span><span style="color:#F97583;">from</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">&#39;antd&#39;</span><span style="color:#E1E4E8;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F97583;">const</span><span style="color:#E1E4E8;"> </span><span style="color:#B392F0;">TodoListUI</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> (</span><span style="color:#FFAB70;">props</span><span style="color:#E1E4E8;">) </span><span style="color:#F97583;">=&gt;</span><span style="color:#E1E4E8;"> {</span></span>
<span class="line"><span style="color:#E1E4E8;">  </span><span style="color:#F97583;">return</span><span style="color:#E1E4E8;"> (</span></span>
<span class="line"><span style="color:#E1E4E8;">    &lt;</span><span style="color:#85E89D;">div</span><span style="color:#E1E4E8;"> </span><span style="color:#B392F0;">style</span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;">{{ marginTop: </span><span style="color:#9ECBFF;">&#39;10px&#39;</span><span style="color:#E1E4E8;">, marginLeft: </span><span style="color:#9ECBFF;">&#39;10px&#39;</span><span style="color:#E1E4E8;"> }}&gt;</span></span>
<span class="line"><span style="color:#E1E4E8;">      &lt;</span><span style="color:#85E89D;">div</span><span style="color:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="color:#E1E4E8;">        &lt;</span><span style="color:#79B8FF;">Input</span></span>
<span class="line"><span style="color:#E1E4E8;">          </span><span style="color:#B392F0;">value</span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;">{props.inputValue}</span></span>
<span class="line"><span style="color:#E1E4E8;">          </span><span style="color:#B392F0;">placeholder</span><span style="color:#F97583;">=</span><span style="color:#9ECBFF;">&#39;todo info&#39;</span></span>
<span class="line"><span style="color:#E1E4E8;">          </span><span style="color:#B392F0;">style</span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;">{{ width: </span><span style="color:#9ECBFF;">&#39;300px&#39;</span><span style="color:#E1E4E8;">, marginRight: </span><span style="color:#9ECBFF;">&#39;10px&#39;</span><span style="color:#E1E4E8;"> }}</span></span>
<span class="line"><span style="color:#E1E4E8;">          </span><span style="color:#B392F0;">onChange</span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;">{props.handleInputChange}</span></span>
<span class="line"><span style="color:#E1E4E8;">        /&gt;</span></span>
<span class="line"><span style="color:#E1E4E8;">        &lt;</span><span style="color:#79B8FF;">Button</span><span style="color:#E1E4E8;"> </span><span style="color:#B392F0;">type</span><span style="color:#F97583;">=</span><span style="color:#9ECBFF;">&#39;primary&#39;</span><span style="color:#E1E4E8;"> </span><span style="color:#B392F0;">onClick</span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;">{props.handleBtnClick}&gt;</span></span>
<span class="line"><span style="color:#E1E4E8;">          æäº¤</span></span>
<span class="line"><span style="color:#E1E4E8;">        &lt;/</span><span style="color:#79B8FF;">Button</span><span style="color:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="color:#E1E4E8;">      &lt;/</span><span style="color:#85E89D;">div</span><span style="color:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="color:#E1E4E8;">      &lt;</span><span style="color:#79B8FF;">List</span></span>
<span class="line"><span style="color:#E1E4E8;">        </span><span style="color:#B392F0;">style</span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;">{{ marginTop: </span><span style="color:#9ECBFF;">&#39;10px&#39;</span><span style="color:#E1E4E8;">, width: </span><span style="color:#9ECBFF;">&#39;300px&#39;</span><span style="color:#E1E4E8;"> }}</span></span>
<span class="line"><span style="color:#E1E4E8;">        </span><span style="color:#B392F0;">bordered</span></span>
<span class="line"><span style="color:#E1E4E8;">        </span><span style="color:#B392F0;">dataSource</span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;">{props.list}</span></span>
<span class="line"><span style="color:#E1E4E8;">        </span><span style="color:#B392F0;">renderItem</span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;">{(</span><span style="color:#FFAB70;">item</span><span style="color:#E1E4E8;">, </span><span style="color:#FFAB70;">index</span><span style="color:#E1E4E8;">) </span><span style="color:#F97583;">=&gt;</span><span style="color:#E1E4E8;"> (</span></span>
<span class="line"><span style="color:#E1E4E8;">          &lt;</span><span style="color:#79B8FF;">List.Item</span></span>
<span class="line"><span style="color:#E1E4E8;">            </span><span style="color:#B392F0;">onClick</span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;">{() </span><span style="color:#F97583;">=&gt;</span><span style="color:#E1E4E8;"> {</span></span>
<span class="line"><span style="color:#E1E4E8;">              props.</span><span style="color:#B392F0;">handleItemDelete</span><span style="color:#E1E4E8;">(index);</span></span>
<span class="line"><span style="color:#E1E4E8;">            }}</span></span>
<span class="line"><span style="color:#E1E4E8;">          &gt;</span></span>
<span class="line"><span style="color:#E1E4E8;">            {item}</span></span>
<span class="line"><span style="color:#E1E4E8;">          &lt;/</span><span style="color:#79B8FF;">List.Item</span><span style="color:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="color:#E1E4E8;">        )}</span></span>
<span class="line"><span style="color:#E1E4E8;">      /&gt;</span></span>
<span class="line"><span style="color:#E1E4E8;">    &lt;/</span><span style="color:#85E89D;">div</span><span style="color:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="color:#E1E4E8;">  );</span></span>
<span class="line"><span style="color:#E1E4E8;">};</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F97583;">export</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">default</span><span style="color:#E1E4E8;"> TodoListUI;</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#D73A49;">import</span><span style="color:#24292E;"> React </span><span style="color:#D73A49;">from</span><span style="color:#24292E;"> </span><span style="color:#032F62;">&#39;react&#39;</span><span style="color:#24292E;">;</span></span>
<span class="line"><span style="color:#D73A49;">import</span><span style="color:#24292E;"> { Input, Button, List } </span><span style="color:#D73A49;">from</span><span style="color:#24292E;"> </span><span style="color:#032F62;">&#39;antd&#39;</span><span style="color:#24292E;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#D73A49;">const</span><span style="color:#24292E;"> </span><span style="color:#6F42C1;">TodoListUI</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">=</span><span style="color:#24292E;"> (</span><span style="color:#E36209;">props</span><span style="color:#24292E;">) </span><span style="color:#D73A49;">=&gt;</span><span style="color:#24292E;"> {</span></span>
<span class="line"><span style="color:#24292E;">  </span><span style="color:#D73A49;">return</span><span style="color:#24292E;"> (</span></span>
<span class="line"><span style="color:#24292E;">    &lt;</span><span style="color:#22863A;">div</span><span style="color:#24292E;"> </span><span style="color:#6F42C1;">style</span><span style="color:#D73A49;">=</span><span style="color:#24292E;">{{ marginTop: </span><span style="color:#032F62;">&#39;10px&#39;</span><span style="color:#24292E;">, marginLeft: </span><span style="color:#032F62;">&#39;10px&#39;</span><span style="color:#24292E;"> }}&gt;</span></span>
<span class="line"><span style="color:#24292E;">      &lt;</span><span style="color:#22863A;">div</span><span style="color:#24292E;">&gt;</span></span>
<span class="line"><span style="color:#24292E;">        &lt;</span><span style="color:#005CC5;">Input</span></span>
<span class="line"><span style="color:#24292E;">          </span><span style="color:#6F42C1;">value</span><span style="color:#D73A49;">=</span><span style="color:#24292E;">{props.inputValue}</span></span>
<span class="line"><span style="color:#24292E;">          </span><span style="color:#6F42C1;">placeholder</span><span style="color:#D73A49;">=</span><span style="color:#032F62;">&#39;todo info&#39;</span></span>
<span class="line"><span style="color:#24292E;">          </span><span style="color:#6F42C1;">style</span><span style="color:#D73A49;">=</span><span style="color:#24292E;">{{ width: </span><span style="color:#032F62;">&#39;300px&#39;</span><span style="color:#24292E;">, marginRight: </span><span style="color:#032F62;">&#39;10px&#39;</span><span style="color:#24292E;"> }}</span></span>
<span class="line"><span style="color:#24292E;">          </span><span style="color:#6F42C1;">onChange</span><span style="color:#D73A49;">=</span><span style="color:#24292E;">{props.handleInputChange}</span></span>
<span class="line"><span style="color:#24292E;">        /&gt;</span></span>
<span class="line"><span style="color:#24292E;">        &lt;</span><span style="color:#005CC5;">Button</span><span style="color:#24292E;"> </span><span style="color:#6F42C1;">type</span><span style="color:#D73A49;">=</span><span style="color:#032F62;">&#39;primary&#39;</span><span style="color:#24292E;"> </span><span style="color:#6F42C1;">onClick</span><span style="color:#D73A49;">=</span><span style="color:#24292E;">{props.handleBtnClick}&gt;</span></span>
<span class="line"><span style="color:#24292E;">          æäº¤</span></span>
<span class="line"><span style="color:#24292E;">        &lt;/</span><span style="color:#005CC5;">Button</span><span style="color:#24292E;">&gt;</span></span>
<span class="line"><span style="color:#24292E;">      &lt;/</span><span style="color:#22863A;">div</span><span style="color:#24292E;">&gt;</span></span>
<span class="line"><span style="color:#24292E;">      &lt;</span><span style="color:#005CC5;">List</span></span>
<span class="line"><span style="color:#24292E;">        </span><span style="color:#6F42C1;">style</span><span style="color:#D73A49;">=</span><span style="color:#24292E;">{{ marginTop: </span><span style="color:#032F62;">&#39;10px&#39;</span><span style="color:#24292E;">, width: </span><span style="color:#032F62;">&#39;300px&#39;</span><span style="color:#24292E;"> }}</span></span>
<span class="line"><span style="color:#24292E;">        </span><span style="color:#6F42C1;">bordered</span></span>
<span class="line"><span style="color:#24292E;">        </span><span style="color:#6F42C1;">dataSource</span><span style="color:#D73A49;">=</span><span style="color:#24292E;">{props.list}</span></span>
<span class="line"><span style="color:#24292E;">        </span><span style="color:#6F42C1;">renderItem</span><span style="color:#D73A49;">=</span><span style="color:#24292E;">{(</span><span style="color:#E36209;">item</span><span style="color:#24292E;">, </span><span style="color:#E36209;">index</span><span style="color:#24292E;">) </span><span style="color:#D73A49;">=&gt;</span><span style="color:#24292E;"> (</span></span>
<span class="line"><span style="color:#24292E;">          &lt;</span><span style="color:#005CC5;">List.Item</span></span>
<span class="line"><span style="color:#24292E;">            </span><span style="color:#6F42C1;">onClick</span><span style="color:#D73A49;">=</span><span style="color:#24292E;">{() </span><span style="color:#D73A49;">=&gt;</span><span style="color:#24292E;"> {</span></span>
<span class="line"><span style="color:#24292E;">              props.</span><span style="color:#6F42C1;">handleItemDelete</span><span style="color:#24292E;">(index);</span></span>
<span class="line"><span style="color:#24292E;">            }}</span></span>
<span class="line"><span style="color:#24292E;">          &gt;</span></span>
<span class="line"><span style="color:#24292E;">            {item}</span></span>
<span class="line"><span style="color:#24292E;">          &lt;/</span><span style="color:#005CC5;">List.Item</span><span style="color:#24292E;">&gt;</span></span>
<span class="line"><span style="color:#24292E;">        )}</span></span>
<span class="line"><span style="color:#24292E;">      /&gt;</span></span>
<span class="line"><span style="color:#24292E;">    &lt;/</span><span style="color:#22863A;">div</span><span style="color:#24292E;">&gt;</span></span>
<span class="line"><span style="color:#24292E;">  );</span></span>
<span class="line"><span style="color:#24292E;">};</span></span>
<span class="line"></span>
<span class="line"><span style="color:#D73A49;">export</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">default</span><span style="color:#24292E;"> TodoListUI;</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br></div></div><p>å½“ä¸€ä¸ªæ™®é€šå‡½æ•°åªæœ‰ <code>render</code> å‡½æ•°çš„æ—¶å€™ï¼Œæˆ‘ä»¬å®Œå…¨å¯ä»¥é€šè¿‡ä¸€ä¸ª<strong>æ— çŠ¶æ€çš„ç»„ä»¶</strong>æ¥æ›¿æ¢æ‰è¿™ä¸ªæ™®é€šçš„ç»„ä»¶ã€‚é‚£ä¸ºä»€ä¹ˆè¦åšè¿™æ ·å­çš„æ›¿æ¢å‘¢ï¼Ÿ</p><p>å¦‚æœæˆ‘ä»¬æ”¹é€ ä¸º<strong>åªæœ‰ä¸€ä¸ªå‡½æ•°</strong>çš„æ—¶å€™ï¼Œé‚£ä¹ˆç¨‹åºå°±åªéœ€è¦å»è¿è¡Œè¿™ä¸ªå‡½æ•°ï¼Œä¹Ÿåªéœ€è¦åšè¿™ä¸€ä»¶äº‹æƒ…ã€‚æ¢è¨€ä¹‹ï¼Œå¦‚æœæˆ‘ä»¬ç”¨ <code>class</code> çš„è¯ï¼Œé‚£ä¹ˆå®ƒçš„ç±»èƒŒåæ˜¯ä¸€ä¸ªå¯¹è±¡ï¼Œè€Œè¿™ä¸ªå¯¹è±¡åˆæœ‰å¾ˆå¤šçš„ç”Ÿå‘½å‘¨æœŸå‡½æ•°ç­‰ç­‰ï¼Œè¿™å°±æ˜¾å¾—æ²¡æœ‰é‚£ä¹ˆçº¯ç²¹äº†ã€‚å› æ­¤ï¼Œæˆ‘ä»¬å®šä¹‰<strong>æ— çŠ¶æ€ç»„ä»¶</strong>è¿™æ ·çš„æ–¹å¼ï¼Œæ¥è®©ç»„ä»¶æ›´åŠ åœ°çº¯æ­£ã€‚</p><h1 id="ğŸ©-å…«ã€redux-å‘èµ·å¼‚æ­¥è¯·æ±‚" tabindex="-1">ğŸ© å…«ã€Redux å‘èµ·å¼‚æ­¥è¯·æ±‚ <a class="header-anchor" href="#ğŸ©-å…«ã€redux-å‘èµ·å¼‚æ­¥è¯·æ±‚" aria-label="Permalink to &quot;ğŸ© å…«ã€Redux å‘èµ·å¼‚æ­¥è¯·æ±‚&quot;">â€‹</a></h1><h2 id="_1ã€redux-ä¸­å‘é€å¼‚æ­¥è¯·æ±‚æ•°æ®" tabindex="-1">1ã€Redux ä¸­å‘é€å¼‚æ­¥è¯·æ±‚æ•°æ® <a class="header-anchor" href="#_1ã€redux-ä¸­å‘é€å¼‚æ­¥è¯·æ±‚æ•°æ®" aria-label="Permalink to &quot;1ã€Redux ä¸­å‘é€å¼‚æ­¥è¯·æ±‚æ•°æ®&quot;">â€‹</a></h2><p>å¾€å¾€åœ¨å®é™…çš„é¡¹ç›®ä¸­ï¼Œæˆ‘ä»¬æ€»æ˜¯éœ€è¦å»å’Œåç«¯è¯·æ±‚æ¥å£æ•°æ®å¹¶å‘é€ <code>AJAX</code> è¯·æ±‚ã€‚é‚£æƒ³è¦åœ¨ <code>react</code> ä¸­è¯·æ±‚åˆ°åç«¯æ¥å£æ•°æ®ï¼Œè¯¥æ€ä¹ˆå¤„ç†å‘¢ï¼Ÿ</p><p>é¦–å…ˆæˆ‘ä»¬åœ¨ <code>TodoList.js</code> ä¸‹é¢ï¼Œæ¥è¯·æ±‚æ•°æ®ã€‚<strong>å…·ä½“ä»£ç å¦‚ä¸‹ï¼š</strong></p><div class="language-js vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#F97583;">import</span><span style="color:#E1E4E8;"> {</span></span>
<span class="line"><span style="color:#E1E4E8;">  getInputChangeAction,</span></span>
<span class="line"><span style="color:#E1E4E8;">  getAddItemAction,</span></span>
<span class="line"><span style="color:#E1E4E8;">  getDeleteItemAction,</span></span>
<span class="line"><span style="color:#E1E4E8;">  initListAction,</span></span>
<span class="line"><span style="color:#E1E4E8;">} </span><span style="color:#F97583;">from</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">&#39;./store/actionCreators&#39;</span><span style="color:#E1E4E8;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F97583;">class</span><span style="color:#E1E4E8;"> </span><span style="color:#B392F0;">TodoList</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">extends</span><span style="color:#E1E4E8;"> </span><span style="color:#B392F0;">Component</span><span style="color:#E1E4E8;"> {</span></span>
<span class="line"><span style="color:#E1E4E8;">  </span><span style="color:#B392F0;">componentDidMount</span><span style="color:#E1E4E8;">() {</span></span>
<span class="line"><span style="color:#E1E4E8;">    axios.</span><span style="color:#B392F0;">get</span><span style="color:#E1E4E8;">(</span><span style="color:#9ECBFF;">&#39;./list.json&#39;</span><span style="color:#E1E4E8;">).</span><span style="color:#B392F0;">then</span><span style="color:#E1E4E8;">((</span><span style="color:#FFAB70;">res</span><span style="color:#E1E4E8;">) </span><span style="color:#F97583;">=&gt;</span><span style="color:#E1E4E8;"> {</span></span>
<span class="line"><span style="color:#E1E4E8;">      </span><span style="color:#F97583;">const</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">data</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> res.data;</span></span>
<span class="line"><span style="color:#E1E4E8;">      </span><span style="color:#F97583;">const</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">action</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> </span><span style="color:#B392F0;">initListAction</span><span style="color:#E1E4E8;">(data);</span></span>
<span class="line"><span style="color:#E1E4E8;">      store.</span><span style="color:#B392F0;">dispatch</span><span style="color:#E1E4E8;">(action);</span></span>
<span class="line"><span style="color:#E1E4E8;">    });</span></span>
<span class="line"><span style="color:#E1E4E8;">  }</span></span>
<span class="line"><span style="color:#E1E4E8;">}</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#D73A49;">import</span><span style="color:#24292E;"> {</span></span>
<span class="line"><span style="color:#24292E;">  getInputChangeAction,</span></span>
<span class="line"><span style="color:#24292E;">  getAddItemAction,</span></span>
<span class="line"><span style="color:#24292E;">  getDeleteItemAction,</span></span>
<span class="line"><span style="color:#24292E;">  initListAction,</span></span>
<span class="line"><span style="color:#24292E;">} </span><span style="color:#D73A49;">from</span><span style="color:#24292E;"> </span><span style="color:#032F62;">&#39;./store/actionCreators&#39;</span><span style="color:#24292E;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#D73A49;">class</span><span style="color:#24292E;"> </span><span style="color:#6F42C1;">TodoList</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">extends</span><span style="color:#24292E;"> </span><span style="color:#6F42C1;">Component</span><span style="color:#24292E;"> {</span></span>
<span class="line"><span style="color:#24292E;">  </span><span style="color:#6F42C1;">componentDidMount</span><span style="color:#24292E;">() {</span></span>
<span class="line"><span style="color:#24292E;">    axios.</span><span style="color:#6F42C1;">get</span><span style="color:#24292E;">(</span><span style="color:#032F62;">&#39;./list.json&#39;</span><span style="color:#24292E;">).</span><span style="color:#6F42C1;">then</span><span style="color:#24292E;">((</span><span style="color:#E36209;">res</span><span style="color:#24292E;">) </span><span style="color:#D73A49;">=&gt;</span><span style="color:#24292E;"> {</span></span>
<span class="line"><span style="color:#24292E;">      </span><span style="color:#D73A49;">const</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">data</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">=</span><span style="color:#24292E;"> res.data;</span></span>
<span class="line"><span style="color:#24292E;">      </span><span style="color:#D73A49;">const</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">action</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">=</span><span style="color:#24292E;"> </span><span style="color:#6F42C1;">initListAction</span><span style="color:#24292E;">(data);</span></span>
<span class="line"><span style="color:#24292E;">      store.</span><span style="color:#6F42C1;">dispatch</span><span style="color:#24292E;">(action);</span></span>
<span class="line"><span style="color:#24292E;">    });</span></span>
<span class="line"><span style="color:#24292E;">  }</span></span>
<span class="line"><span style="color:#24292E;">}</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br></div></div><p>æ¥ç€ï¼Œä¿®æ”¹ <code>actionTypes.js</code> ä»£ç ã€‚<strong>å…·ä½“å¦‚ä¸‹ï¼š</strong></p><div class="language-js vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#F97583;">export</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">const</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">CHANGE_INPUT_VALUE</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">&#39;change_input_value&#39;</span><span style="color:#E1E4E8;">;</span></span>
<span class="line"><span style="color:#F97583;">export</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">const</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">ADD_TODO_ITEM</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">&#39;add_todo_item&#39;</span><span style="color:#E1E4E8;">;</span></span>
<span class="line"><span style="color:#F97583;">export</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">const</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">DELETE_TODO_ITEM</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">&#39;delete_todo_item&#39;</span><span style="color:#E1E4E8;">;</span></span>
<span class="line"><span style="color:#F97583;">export</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">const</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">INIT_LIST_ACTION</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">&#39;init_list_action&#39;</span><span style="color:#E1E4E8;">;</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#D73A49;">export</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">const</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">CHANGE_INPUT_VALUE</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">=</span><span style="color:#24292E;"> </span><span style="color:#032F62;">&#39;change_input_value&#39;</span><span style="color:#24292E;">;</span></span>
<span class="line"><span style="color:#D73A49;">export</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">const</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">ADD_TODO_ITEM</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">=</span><span style="color:#24292E;"> </span><span style="color:#032F62;">&#39;add_todo_item&#39;</span><span style="color:#24292E;">;</span></span>
<span class="line"><span style="color:#D73A49;">export</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">const</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">DELETE_TODO_ITEM</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">=</span><span style="color:#24292E;"> </span><span style="color:#032F62;">&#39;delete_todo_item&#39;</span><span style="color:#24292E;">;</span></span>
<span class="line"><span style="color:#D73A49;">export</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">const</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">INIT_LIST_ACTION</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">=</span><span style="color:#24292E;"> </span><span style="color:#032F62;">&#39;init_list_action&#39;</span><span style="color:#24292E;">;</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><p>ç»§ç»­ï¼Œæˆ‘ä»¬åœ¨ <code>actionCreators.js</code> ä¸­å¯¹å°è£… <code>action</code> ã€‚<strong>å…·ä½“ä»£ç å¦‚ä¸‹ï¼š</strong></p><div class="language-js vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#F97583;">import</span><span style="color:#E1E4E8;"> {</span></span>
<span class="line"><span style="color:#E1E4E8;">  CHANGE_INPUT_VALUE,</span></span>
<span class="line"><span style="color:#E1E4E8;">  ADD_TODO_ITEM,</span></span>
<span class="line"><span style="color:#E1E4E8;">  DELETE_TODO_ITEM,</span></span>
<span class="line"><span style="color:#E1E4E8;">  INIT_LIST_ACTION,</span></span>
<span class="line"><span style="color:#E1E4E8;">} </span><span style="color:#F97583;">from</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">&#39;./actionTypes&#39;</span><span style="color:#E1E4E8;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F97583;">export</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">const</span><span style="color:#E1E4E8;"> </span><span style="color:#B392F0;">getInputChangeAction</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> (</span><span style="color:#FFAB70;">value</span><span style="color:#E1E4E8;">) </span><span style="color:#F97583;">=&gt;</span><span style="color:#E1E4E8;"> ({</span></span>
<span class="line"><span style="color:#E1E4E8;">  type: </span><span style="color:#79B8FF;">CHANGE_INPUT_VALUE</span><span style="color:#E1E4E8;">,</span></span>
<span class="line"><span style="color:#E1E4E8;">  value: value,</span></span>
<span class="line"><span style="color:#E1E4E8;">});</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F97583;">export</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">const</span><span style="color:#E1E4E8;"> </span><span style="color:#B392F0;">getAddItemAction</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> (</span><span style="color:#FFAB70;">value</span><span style="color:#E1E4E8;">) </span><span style="color:#F97583;">=&gt;</span><span style="color:#E1E4E8;"> ({</span></span>
<span class="line"><span style="color:#E1E4E8;">  type: </span><span style="color:#79B8FF;">ADD_TODO_ITEM</span><span style="color:#E1E4E8;">,</span></span>
<span class="line"><span style="color:#E1E4E8;">});</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F97583;">export</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">const</span><span style="color:#E1E4E8;"> </span><span style="color:#B392F0;">getDeleteItemAction</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> (</span><span style="color:#FFAB70;">index</span><span style="color:#E1E4E8;">) </span><span style="color:#F97583;">=&gt;</span><span style="color:#E1E4E8;"> ({</span></span>
<span class="line"><span style="color:#E1E4E8;">  type: </span><span style="color:#79B8FF;">DELETE_TODO_ITEM</span><span style="color:#E1E4E8;">,</span></span>
<span class="line"><span style="color:#E1E4E8;">  index: index,</span></span>
<span class="line"><span style="color:#E1E4E8;">});</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F97583;">export</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">const</span><span style="color:#E1E4E8;"> </span><span style="color:#B392F0;">initListAction</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> (</span><span style="color:#FFAB70;">data</span><span style="color:#E1E4E8;">) </span><span style="color:#F97583;">=&gt;</span><span style="color:#E1E4E8;"> ({</span></span>
<span class="line"><span style="color:#E1E4E8;">  type: </span><span style="color:#79B8FF;">INIT_LIST_ACTION</span><span style="color:#E1E4E8;">,</span></span>
<span class="line"><span style="color:#E1E4E8;">  data: data,</span></span>
<span class="line"><span style="color:#E1E4E8;">});</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#D73A49;">import</span><span style="color:#24292E;"> {</span></span>
<span class="line"><span style="color:#24292E;">  CHANGE_INPUT_VALUE,</span></span>
<span class="line"><span style="color:#24292E;">  ADD_TODO_ITEM,</span></span>
<span class="line"><span style="color:#24292E;">  DELETE_TODO_ITEM,</span></span>
<span class="line"><span style="color:#24292E;">  INIT_LIST_ACTION,</span></span>
<span class="line"><span style="color:#24292E;">} </span><span style="color:#D73A49;">from</span><span style="color:#24292E;"> </span><span style="color:#032F62;">&#39;./actionTypes&#39;</span><span style="color:#24292E;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#D73A49;">export</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">const</span><span style="color:#24292E;"> </span><span style="color:#6F42C1;">getInputChangeAction</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">=</span><span style="color:#24292E;"> (</span><span style="color:#E36209;">value</span><span style="color:#24292E;">) </span><span style="color:#D73A49;">=&gt;</span><span style="color:#24292E;"> ({</span></span>
<span class="line"><span style="color:#24292E;">  type: </span><span style="color:#005CC5;">CHANGE_INPUT_VALUE</span><span style="color:#24292E;">,</span></span>
<span class="line"><span style="color:#24292E;">  value: value,</span></span>
<span class="line"><span style="color:#24292E;">});</span></span>
<span class="line"></span>
<span class="line"><span style="color:#D73A49;">export</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">const</span><span style="color:#24292E;"> </span><span style="color:#6F42C1;">getAddItemAction</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">=</span><span style="color:#24292E;"> (</span><span style="color:#E36209;">value</span><span style="color:#24292E;">) </span><span style="color:#D73A49;">=&gt;</span><span style="color:#24292E;"> ({</span></span>
<span class="line"><span style="color:#24292E;">  type: </span><span style="color:#005CC5;">ADD_TODO_ITEM</span><span style="color:#24292E;">,</span></span>
<span class="line"><span style="color:#24292E;">});</span></span>
<span class="line"></span>
<span class="line"><span style="color:#D73A49;">export</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">const</span><span style="color:#24292E;"> </span><span style="color:#6F42C1;">getDeleteItemAction</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">=</span><span style="color:#24292E;"> (</span><span style="color:#E36209;">index</span><span style="color:#24292E;">) </span><span style="color:#D73A49;">=&gt;</span><span style="color:#24292E;"> ({</span></span>
<span class="line"><span style="color:#24292E;">  type: </span><span style="color:#005CC5;">DELETE_TODO_ITEM</span><span style="color:#24292E;">,</span></span>
<span class="line"><span style="color:#24292E;">  index: index,</span></span>
<span class="line"><span style="color:#24292E;">});</span></span>
<span class="line"></span>
<span class="line"><span style="color:#D73A49;">export</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">const</span><span style="color:#24292E;"> </span><span style="color:#6F42C1;">initListAction</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">=</span><span style="color:#24292E;"> (</span><span style="color:#E36209;">data</span><span style="color:#24292E;">) </span><span style="color:#D73A49;">=&gt;</span><span style="color:#24292E;"> ({</span></span>
<span class="line"><span style="color:#24292E;">  type: </span><span style="color:#005CC5;">INIT_LIST_ACTION</span><span style="color:#24292E;">,</span></span>
<span class="line"><span style="color:#24292E;">  data: data,</span></span>
<span class="line"><span style="color:#24292E;">});</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br></div></div><p>æœ€åï¼Œä¿®æ”¹ <code>reducer.js</code> ä»£ç ã€‚<strong>å…·ä½“ä»£ç å¦‚ä¸‹ï¼š</strong></p><div class="language-js vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#F97583;">import</span><span style="color:#E1E4E8;"> {</span></span>
<span class="line"><span style="color:#E1E4E8;">  CHANGE_INPUT_VALUE,</span></span>
<span class="line"><span style="color:#E1E4E8;">  ADD_TODO_ITEM,</span></span>
<span class="line"><span style="color:#E1E4E8;">  DELETE_TODO_ITEM,</span></span>
<span class="line"><span style="color:#E1E4E8;">  INIT_LIST_ACTION,</span></span>
<span class="line"><span style="color:#E1E4E8;">} </span><span style="color:#F97583;">from</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">&#39;./actionTypes&#39;</span><span style="color:#E1E4E8;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F97583;">const</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">defaultStore</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> {</span></span>
<span class="line"><span style="color:#E1E4E8;">  inputValue: </span><span style="color:#9ECBFF;">&#39;123&#39;</span><span style="color:#E1E4E8;">,</span></span>
<span class="line"><span style="color:#E1E4E8;">  list: [</span><span style="color:#79B8FF;">1</span><span style="color:#E1E4E8;">, </span><span style="color:#79B8FF;">2</span><span style="color:#E1E4E8;">, </span><span style="color:#79B8FF;">3</span><span style="color:#E1E4E8;">],</span></span>
<span class="line"><span style="color:#E1E4E8;">};</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D;">// reducer å¯ä»¥æ¥æ”¶stateï¼Œä½†æ˜¯ç»ä¸èƒ½ä¿®æ”¹state</span></span>
<span class="line"><span style="color:#F97583;">const</span><span style="color:#E1E4E8;"> </span><span style="color:#B392F0;">reducer</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> (</span><span style="color:#FFAB70;">state</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> defaultStore, </span><span style="color:#FFAB70;">action</span><span style="color:#E1E4E8;">) </span><span style="color:#F97583;">=&gt;</span><span style="color:#E1E4E8;"> {</span></span>
<span class="line"><span style="color:#E1E4E8;">  </span><span style="color:#F97583;">if</span><span style="color:#E1E4E8;"> (action.type </span><span style="color:#F97583;">===</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">CHANGE_INPUT_VALUE</span><span style="color:#E1E4E8;">) {</span></span>
<span class="line"><span style="color:#E1E4E8;">    </span><span style="color:#F97583;">const</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">newState</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">JSON</span><span style="color:#E1E4E8;">.</span><span style="color:#B392F0;">parse</span><span style="color:#E1E4E8;">(</span><span style="color:#79B8FF;">JSON</span><span style="color:#E1E4E8;">.</span><span style="color:#B392F0;">stringify</span><span style="color:#E1E4E8;">(state));</span></span>
<span class="line"><span style="color:#E1E4E8;">    newState.inputValue </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> action.value;</span></span>
<span class="line"><span style="color:#E1E4E8;">    </span><span style="color:#F97583;">return</span><span style="color:#E1E4E8;"> newState;</span></span>
<span class="line"><span style="color:#E1E4E8;">  }</span></span>
<span class="line"><span style="color:#E1E4E8;">  </span><span style="color:#F97583;">if</span><span style="color:#E1E4E8;"> (action.type </span><span style="color:#F97583;">===</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">INIT_LIST_ACTION</span><span style="color:#E1E4E8;">) {</span></span>
<span class="line"><span style="color:#E1E4E8;">    </span><span style="color:#F97583;">const</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">newState</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">JSON</span><span style="color:#E1E4E8;">.</span><span style="color:#B392F0;">parse</span><span style="color:#E1E4E8;">(</span><span style="color:#79B8FF;">JSON</span><span style="color:#E1E4E8;">.</span><span style="color:#B392F0;">stringify</span><span style="color:#E1E4E8;">(state));</span></span>
<span class="line"><span style="color:#E1E4E8;">    newState.list </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> action.data;</span></span>
<span class="line"><span style="color:#E1E4E8;">    </span><span style="color:#F97583;">return</span><span style="color:#E1E4E8;"> newState;</span></span>
<span class="line"><span style="color:#E1E4E8;">  }</span></span>
<span class="line"><span style="color:#E1E4E8;">  </span><span style="color:#F97583;">if</span><span style="color:#E1E4E8;"> (action.type </span><span style="color:#F97583;">===</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">ADD_TODO_ITEM</span><span style="color:#E1E4E8;">) {</span></span>
<span class="line"><span style="color:#E1E4E8;">    </span><span style="color:#F97583;">const</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">newState</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">JSON</span><span style="color:#E1E4E8;">.</span><span style="color:#B392F0;">parse</span><span style="color:#E1E4E8;">(</span><span style="color:#79B8FF;">JSON</span><span style="color:#E1E4E8;">.</span><span style="color:#B392F0;">stringify</span><span style="color:#E1E4E8;">(state));</span></span>
<span class="line"><span style="color:#E1E4E8;">    newState.list.</span><span style="color:#B392F0;">push</span><span style="color:#E1E4E8;">(newState.inputValue);</span></span>
<span class="line"><span style="color:#E1E4E8;">    newState.inputValue </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">&#39;&#39;</span><span style="color:#E1E4E8;">;</span></span>
<span class="line"><span style="color:#E1E4E8;">    console.</span><span style="color:#B392F0;">log</span><span style="color:#E1E4E8;">(newState);</span></span>
<span class="line"><span style="color:#E1E4E8;">    </span><span style="color:#F97583;">return</span><span style="color:#E1E4E8;"> newState;</span></span>
<span class="line"><span style="color:#E1E4E8;">  }</span></span>
<span class="line"><span style="color:#E1E4E8;">  </span><span style="color:#F97583;">if</span><span style="color:#E1E4E8;"> (action.type </span><span style="color:#F97583;">===</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">DELETE_TODO_ITEM</span><span style="color:#E1E4E8;">) {</span></span>
<span class="line"><span style="color:#E1E4E8;">    </span><span style="color:#F97583;">const</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">newState</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">JSON</span><span style="color:#E1E4E8;">.</span><span style="color:#B392F0;">parse</span><span style="color:#E1E4E8;">(</span><span style="color:#79B8FF;">JSON</span><span style="color:#E1E4E8;">.</span><span style="color:#B392F0;">stringify</span><span style="color:#E1E4E8;">(state));</span></span>
<span class="line"><span style="color:#E1E4E8;">    newState.list.</span><span style="color:#B392F0;">splice</span><span style="color:#E1E4E8;">(action.index, </span><span style="color:#79B8FF;">1</span><span style="color:#E1E4E8;">);</span></span>
<span class="line"><span style="color:#E1E4E8;">    </span><span style="color:#F97583;">return</span><span style="color:#E1E4E8;"> newState;</span></span>
<span class="line"><span style="color:#E1E4E8;">  }</span></span>
<span class="line"><span style="color:#E1E4E8;">  </span><span style="color:#F97583;">return</span><span style="color:#E1E4E8;"> state;</span></span>
<span class="line"><span style="color:#E1E4E8;">};</span></span>
<span class="line"><span style="color:#F97583;">export</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">default</span><span style="color:#E1E4E8;"> reducer;</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#D73A49;">import</span><span style="color:#24292E;"> {</span></span>
<span class="line"><span style="color:#24292E;">  CHANGE_INPUT_VALUE,</span></span>
<span class="line"><span style="color:#24292E;">  ADD_TODO_ITEM,</span></span>
<span class="line"><span style="color:#24292E;">  DELETE_TODO_ITEM,</span></span>
<span class="line"><span style="color:#24292E;">  INIT_LIST_ACTION,</span></span>
<span class="line"><span style="color:#24292E;">} </span><span style="color:#D73A49;">from</span><span style="color:#24292E;"> </span><span style="color:#032F62;">&#39;./actionTypes&#39;</span><span style="color:#24292E;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#D73A49;">const</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">defaultStore</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">=</span><span style="color:#24292E;"> {</span></span>
<span class="line"><span style="color:#24292E;">  inputValue: </span><span style="color:#032F62;">&#39;123&#39;</span><span style="color:#24292E;">,</span></span>
<span class="line"><span style="color:#24292E;">  list: [</span><span style="color:#005CC5;">1</span><span style="color:#24292E;">, </span><span style="color:#005CC5;">2</span><span style="color:#24292E;">, </span><span style="color:#005CC5;">3</span><span style="color:#24292E;">],</span></span>
<span class="line"><span style="color:#24292E;">};</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D;">// reducer å¯ä»¥æ¥æ”¶stateï¼Œä½†æ˜¯ç»ä¸èƒ½ä¿®æ”¹state</span></span>
<span class="line"><span style="color:#D73A49;">const</span><span style="color:#24292E;"> </span><span style="color:#6F42C1;">reducer</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">=</span><span style="color:#24292E;"> (</span><span style="color:#E36209;">state</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">=</span><span style="color:#24292E;"> defaultStore, </span><span style="color:#E36209;">action</span><span style="color:#24292E;">) </span><span style="color:#D73A49;">=&gt;</span><span style="color:#24292E;"> {</span></span>
<span class="line"><span style="color:#24292E;">  </span><span style="color:#D73A49;">if</span><span style="color:#24292E;"> (action.type </span><span style="color:#D73A49;">===</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">CHANGE_INPUT_VALUE</span><span style="color:#24292E;">) {</span></span>
<span class="line"><span style="color:#24292E;">    </span><span style="color:#D73A49;">const</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">newState</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">=</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">JSON</span><span style="color:#24292E;">.</span><span style="color:#6F42C1;">parse</span><span style="color:#24292E;">(</span><span style="color:#005CC5;">JSON</span><span style="color:#24292E;">.</span><span style="color:#6F42C1;">stringify</span><span style="color:#24292E;">(state));</span></span>
<span class="line"><span style="color:#24292E;">    newState.inputValue </span><span style="color:#D73A49;">=</span><span style="color:#24292E;"> action.value;</span></span>
<span class="line"><span style="color:#24292E;">    </span><span style="color:#D73A49;">return</span><span style="color:#24292E;"> newState;</span></span>
<span class="line"><span style="color:#24292E;">  }</span></span>
<span class="line"><span style="color:#24292E;">  </span><span style="color:#D73A49;">if</span><span style="color:#24292E;"> (action.type </span><span style="color:#D73A49;">===</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">INIT_LIST_ACTION</span><span style="color:#24292E;">) {</span></span>
<span class="line"><span style="color:#24292E;">    </span><span style="color:#D73A49;">const</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">newState</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">=</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">JSON</span><span style="color:#24292E;">.</span><span style="color:#6F42C1;">parse</span><span style="color:#24292E;">(</span><span style="color:#005CC5;">JSON</span><span style="color:#24292E;">.</span><span style="color:#6F42C1;">stringify</span><span style="color:#24292E;">(state));</span></span>
<span class="line"><span style="color:#24292E;">    newState.list </span><span style="color:#D73A49;">=</span><span style="color:#24292E;"> action.data;</span></span>
<span class="line"><span style="color:#24292E;">    </span><span style="color:#D73A49;">return</span><span style="color:#24292E;"> newState;</span></span>
<span class="line"><span style="color:#24292E;">  }</span></span>
<span class="line"><span style="color:#24292E;">  </span><span style="color:#D73A49;">if</span><span style="color:#24292E;"> (action.type </span><span style="color:#D73A49;">===</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">ADD_TODO_ITEM</span><span style="color:#24292E;">) {</span></span>
<span class="line"><span style="color:#24292E;">    </span><span style="color:#D73A49;">const</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">newState</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">=</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">JSON</span><span style="color:#24292E;">.</span><span style="color:#6F42C1;">parse</span><span style="color:#24292E;">(</span><span style="color:#005CC5;">JSON</span><span style="color:#24292E;">.</span><span style="color:#6F42C1;">stringify</span><span style="color:#24292E;">(state));</span></span>
<span class="line"><span style="color:#24292E;">    newState.list.</span><span style="color:#6F42C1;">push</span><span style="color:#24292E;">(newState.inputValue);</span></span>
<span class="line"><span style="color:#24292E;">    newState.inputValue </span><span style="color:#D73A49;">=</span><span style="color:#24292E;"> </span><span style="color:#032F62;">&#39;&#39;</span><span style="color:#24292E;">;</span></span>
<span class="line"><span style="color:#24292E;">    console.</span><span style="color:#6F42C1;">log</span><span style="color:#24292E;">(newState);</span></span>
<span class="line"><span style="color:#24292E;">    </span><span style="color:#D73A49;">return</span><span style="color:#24292E;"> newState;</span></span>
<span class="line"><span style="color:#24292E;">  }</span></span>
<span class="line"><span style="color:#24292E;">  </span><span style="color:#D73A49;">if</span><span style="color:#24292E;"> (action.type </span><span style="color:#D73A49;">===</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">DELETE_TODO_ITEM</span><span style="color:#24292E;">) {</span></span>
<span class="line"><span style="color:#24292E;">    </span><span style="color:#D73A49;">const</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">newState</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">=</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">JSON</span><span style="color:#24292E;">.</span><span style="color:#6F42C1;">parse</span><span style="color:#24292E;">(</span><span style="color:#005CC5;">JSON</span><span style="color:#24292E;">.</span><span style="color:#6F42C1;">stringify</span><span style="color:#24292E;">(state));</span></span>
<span class="line"><span style="color:#24292E;">    newState.list.</span><span style="color:#6F42C1;">splice</span><span style="color:#24292E;">(action.index, </span><span style="color:#005CC5;">1</span><span style="color:#24292E;">);</span></span>
<span class="line"><span style="color:#24292E;">    </span><span style="color:#D73A49;">return</span><span style="color:#24292E;"> newState;</span></span>
<span class="line"><span style="color:#24292E;">  }</span></span>
<span class="line"><span style="color:#24292E;">  </span><span style="color:#D73A49;">return</span><span style="color:#24292E;"> state;</span></span>
<span class="line"><span style="color:#24292E;">};</span></span>
<span class="line"><span style="color:#D73A49;">export</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">default</span><span style="color:#24292E;"> reducer;</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br></div></div><p>ç”±æ­¤ï¼Œæˆ‘ä»¬å°±å®ç°äº†é€šè¿‡ <code>axios</code> çš„æ–¹å¼æ¥å‘å¸ƒ <code>AJAX</code> è¯·æ±‚ï¼Œè¯·è®©å…¶è·å–åˆ°æ•°æ®ã€‚</p><h2 id="_2ã€redux-thunk-ä¸­é—´ä»¶" tabindex="-1">2ã€Redux-thunk ä¸­é—´ä»¶ <a class="header-anchor" href="#_2ã€redux-thunk-ä¸­é—´ä»¶" aria-label="Permalink to &quot;2ã€Redux-thunk ä¸­é—´ä»¶&quot;">â€‹</a></h2><h3 id="_1-è§£å†³ä»€ä¹ˆé—®é¢˜" tabindex="-1">ï¼ˆ1ï¼‰è§£å†³ä»€ä¹ˆé—®é¢˜ <a class="header-anchor" href="#_1-è§£å†³ä»€ä¹ˆé—®é¢˜" aria-label="Permalink to &quot;ï¼ˆ1ï¼‰è§£å†³ä»€ä¹ˆé—®é¢˜&quot;">â€‹</a></h3><p>åœ¨ä¸Šé¢çš„ä¾‹å­ä¸­ï¼Œæˆ‘ä»¬æˆåŠŸåœ°å¯¹æ¥å£çš„æ•°æ®å‘èµ·äº†è¯·æ±‚ã€‚ä¸Šé¢è¿™ç§æƒ…å†µæ˜¯å±äºæ¯”è¾ƒç®€å•çš„ä¾‹å­ï¼Œä½†æ˜¯å¾€å¾€åœ¨å®é™…åœºæ™¯ä¸­æˆ‘ä»¬é‡åˆ°çš„ï¼Œéƒ½æ˜¯æ¯”è¾ƒå¤æ‚çš„ä¾‹å­ã€‚</p><p>å› æ­¤ï¼Œæˆ‘ä»¬å¸Œæœ›çš„æ˜¯ï¼Œå½“é‡åˆ°<strong>å¼‚æ­¥è¯·æ±‚</strong>æˆ–è€…æ˜¯<strong>æœ‰ç€éå¸¸å¤æ‚é€»è¾‘</strong>çš„æ—¶å€™ï¼ŒæŠŠå®ƒç§»å‡ºåˆ°å…¶ä»–æ–‡ä»¶ä¸‹è¿›è¡Œç®¡ç†ã€‚</p><p>é‚£è¿™ä¸ªæ—¶å€™å°±éœ€è¦ç”¨åˆ° <strong><code>Redux-thunk</code> ä¸­é—´ä»¶</strong>æ¥è¿›è¡Œé—®é¢˜è§£å†³ã€‚æ¥ä¸‹æ¥æˆ‘ä»¬æ¥çœ‹ä¸‹ <strong><code>Redux-thunk</code> ä¸­é—´ä»¶</strong>å¦‚ä½•ä½¿ç”¨ï¼Ÿ</p><h3 id="_2-å¦‚ä½•ä½¿ç”¨" tabindex="-1">ï¼ˆ2ï¼‰å¦‚ä½•ä½¿ç”¨ <a class="header-anchor" href="#_2-å¦‚ä½•ä½¿ç”¨" aria-label="Permalink to &quot;ï¼ˆ2ï¼‰å¦‚ä½•ä½¿ç”¨&quot;">â€‹</a></h3><p><strong>ç¬¬ä¸€æ­¥ï¼š</strong> å®‰è£… <code>redux-thunk</code> ã€‚<strong>å…·ä½“å‘½ä»¤å¦‚ä¸‹ï¼š</strong></p><div class="language-bash vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#B392F0;">npm</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">i</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">redux-thunk</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">-D</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#6F42C1;">npm</span><span style="color:#24292E;"> </span><span style="color:#032F62;">i</span><span style="color:#24292E;"> </span><span style="color:#032F62;">redux-thunk</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">-D</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br></div></div><p><strong>ç¬¬äºŒæ­¥ï¼š</strong> å¼•å…¥ <code>redux-thunk</code> ã€‚å¾€å¾€æˆ‘ä»¬åœ¨å®é™…è°ƒè¯•ä¸­ï¼Œéƒ½ä¼šå—ç”¨ <code>redux-devtools</code> å»å¯¹é¡¹ç›®çš„ <code>store</code> è¿›è¡Œè°ƒè¯•ã€‚ä½†å¦‚æœæˆ‘ä»¬æ—¢è¦å¼•å…¥ <code>redux-devtools</code> ï¼Œåˆè¦å¼•å…¥ <code>redux-thunk</code> ä¸­é—´ä»¶ï¼Œè¯¥æ€ä¹ˆå¤„ç†å‘¢ï¼Ÿåœ¨ <code>store|index.js</code> æ–‡ä»¶ä¸­è¿›è¡Œå¤„ç†ã€‚<strong>å…·ä½“ä»£ç å¦‚ä¸‹ï¼š</strong></p><div class="language-js vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#6A737D;">// composeå‡½æ•°æ¥è‡ªäºreduxä¸­</span></span>
<span class="line"><span style="color:#F97583;">import</span><span style="color:#E1E4E8;"> { createStore, applyMiddleware, compose } </span><span style="color:#F97583;">from</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">&#39;redux&#39;</span><span style="color:#E1E4E8;">;</span></span>
<span class="line"><span style="color:#F97583;">import</span><span style="color:#E1E4E8;"> reducer </span><span style="color:#F97583;">from</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">&#39;./reducer&#39;</span><span style="color:#E1E4E8;">;</span></span>
<span class="line"><span style="color:#F97583;">import</span><span style="color:#E1E4E8;"> thunk </span><span style="color:#F97583;">from</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">&#39;redux-thunk&#39;</span><span style="color:#E1E4E8;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F97583;">const</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">composeEnhancers</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__</span></span>
<span class="line"><span style="color:#E1E4E8;">  </span><span style="color:#F97583;">?</span><span style="color:#E1E4E8;"> window.</span><span style="color:#B392F0;">__REDUX_DEVTOOLS_EXTENSION_COMPOSE__</span><span style="color:#E1E4E8;">({})</span></span>
<span class="line"><span style="color:#E1E4E8;">  </span><span style="color:#F97583;">:</span><span style="color:#E1E4E8;"> compose;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F97583;">const</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">enhancer</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> </span><span style="color:#B392F0;">composeEnhancers</span><span style="color:#E1E4E8;">(</span><span style="color:#B392F0;">applyMiddleware</span><span style="color:#E1E4E8;">(thunk));</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F97583;">const</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">store</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> </span><span style="color:#B392F0;">createStore</span><span style="color:#E1E4E8;">(reducer, enhancer);</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F97583;">export</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">default</span><span style="color:#E1E4E8;"> store;</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#6A737D;">// composeå‡½æ•°æ¥è‡ªäºreduxä¸­</span></span>
<span class="line"><span style="color:#D73A49;">import</span><span style="color:#24292E;"> { createStore, applyMiddleware, compose } </span><span style="color:#D73A49;">from</span><span style="color:#24292E;"> </span><span style="color:#032F62;">&#39;redux&#39;</span><span style="color:#24292E;">;</span></span>
<span class="line"><span style="color:#D73A49;">import</span><span style="color:#24292E;"> reducer </span><span style="color:#D73A49;">from</span><span style="color:#24292E;"> </span><span style="color:#032F62;">&#39;./reducer&#39;</span><span style="color:#24292E;">;</span></span>
<span class="line"><span style="color:#D73A49;">import</span><span style="color:#24292E;"> thunk </span><span style="color:#D73A49;">from</span><span style="color:#24292E;"> </span><span style="color:#032F62;">&#39;redux-thunk&#39;</span><span style="color:#24292E;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#D73A49;">const</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">composeEnhancers</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">=</span><span style="color:#24292E;"> window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__</span></span>
<span class="line"><span style="color:#24292E;">  </span><span style="color:#D73A49;">?</span><span style="color:#24292E;"> window.</span><span style="color:#6F42C1;">__REDUX_DEVTOOLS_EXTENSION_COMPOSE__</span><span style="color:#24292E;">({})</span></span>
<span class="line"><span style="color:#24292E;">  </span><span style="color:#D73A49;">:</span><span style="color:#24292E;"> compose;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#D73A49;">const</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">enhancer</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">=</span><span style="color:#24292E;"> </span><span style="color:#6F42C1;">composeEnhancers</span><span style="color:#24292E;">(</span><span style="color:#6F42C1;">applyMiddleware</span><span style="color:#24292E;">(thunk));</span></span>
<span class="line"></span>
<span class="line"><span style="color:#D73A49;">const</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">store</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">=</span><span style="color:#24292E;"> </span><span style="color:#6F42C1;">createStore</span><span style="color:#24292E;">(reducer, enhancer);</span></span>
<span class="line"></span>
<span class="line"><span style="color:#D73A49;">export</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">default</span><span style="color:#24292E;"> store;</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br></div></div><p>é€šè¿‡è¿™ç§å½¢å¼çš„ç¼–ç ï¼Œä½¿å¾—æˆ‘ä»¬çš„ <code>store</code> <strong>æ—¢æ”¯æŒ</strong> <code>windows</code> ä¸‹çš„ <code>devtools</code> ï¼Œä¹Ÿå°±æ˜¯å¯ä»¥å»è°ƒè¯• <code>store</code> ï¼Œ<strong>åˆå¯ä»¥</strong>æˆåŠŸçš„å¼•å…¥ <code>redux-thunk</code> ã€‚</p><p><strong>ç¬¬ä¸‰æ­¥ï¼š</strong> å°†å¼‚æ­¥é€»è¾‘è¿›è¡ŒæŠ½ç¦»ã€‚å…ˆæ¥ä¿®æ”¹ <code>TodoList.js</code> çš„ä»£ç ã€‚<strong>å…·ä½“å¦‚ä¸‹ï¼š</strong></p><div class="language-js vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#F97583;">import</span><span style="color:#E1E4E8;"> {</span></span>
<span class="line"><span style="color:#E1E4E8;">  getTodoList,</span></span>
<span class="line"><span style="color:#E1E4E8;">  getInputChangeAction,</span></span>
<span class="line"><span style="color:#E1E4E8;">  getAddItemAction,</span></span>
<span class="line"><span style="color:#E1E4E8;">  getDeleteItemAction,</span></span>
<span class="line"><span style="color:#E1E4E8;">} </span><span style="color:#F97583;">from</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">&#39;./store/actionCreators&#39;</span><span style="color:#E1E4E8;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F97583;">class</span><span style="color:#E1E4E8;"> </span><span style="color:#B392F0;">TodoList</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">extends</span><span style="color:#E1E4E8;"> </span><span style="color:#B392F0;">Component</span><span style="color:#E1E4E8;"> {</span></span>
<span class="line"><span style="color:#E1E4E8;">  </span><span style="color:#B392F0;">componentDidMount</span><span style="color:#E1E4E8;">() {</span></span>
<span class="line"><span style="color:#E1E4E8;">    </span><span style="color:#6A737D;">// è¿™é‡Œçš„actionæ˜¯ä¸€ä¸ªå‡½æ•°</span></span>
<span class="line"><span style="color:#E1E4E8;">    </span><span style="color:#F97583;">const</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">action</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> </span><span style="color:#B392F0;">getTodoList</span><span style="color:#E1E4E8;">();</span></span>
<span class="line"><span style="color:#E1E4E8;">    </span><span style="color:#6A737D;">// åªæœ‰ç”¨äº†thunkï¼Œactionæ‰èƒ½æ˜¯ç”¨å‡½æ•°çš„å½¢å¼å»è¿›è¡Œä¼ é€’</span></span>
<span class="line"><span style="color:#E1E4E8;">    store.</span><span style="color:#B392F0;">dispatch</span><span style="color:#E1E4E8;">(action);</span></span>
<span class="line"><span style="color:#E1E4E8;">  }</span></span>
<span class="line"><span style="color:#E1E4E8;">}</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#D73A49;">import</span><span style="color:#24292E;"> {</span></span>
<span class="line"><span style="color:#24292E;">  getTodoList,</span></span>
<span class="line"><span style="color:#24292E;">  getInputChangeAction,</span></span>
<span class="line"><span style="color:#24292E;">  getAddItemAction,</span></span>
<span class="line"><span style="color:#24292E;">  getDeleteItemAction,</span></span>
<span class="line"><span style="color:#24292E;">} </span><span style="color:#D73A49;">from</span><span style="color:#24292E;"> </span><span style="color:#032F62;">&#39;./store/actionCreators&#39;</span><span style="color:#24292E;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#D73A49;">class</span><span style="color:#24292E;"> </span><span style="color:#6F42C1;">TodoList</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">extends</span><span style="color:#24292E;"> </span><span style="color:#6F42C1;">Component</span><span style="color:#24292E;"> {</span></span>
<span class="line"><span style="color:#24292E;">  </span><span style="color:#6F42C1;">componentDidMount</span><span style="color:#24292E;">() {</span></span>
<span class="line"><span style="color:#24292E;">    </span><span style="color:#6A737D;">// è¿™é‡Œçš„actionæ˜¯ä¸€ä¸ªå‡½æ•°</span></span>
<span class="line"><span style="color:#24292E;">    </span><span style="color:#D73A49;">const</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">action</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">=</span><span style="color:#24292E;"> </span><span style="color:#6F42C1;">getTodoList</span><span style="color:#24292E;">();</span></span>
<span class="line"><span style="color:#24292E;">    </span><span style="color:#6A737D;">// åªæœ‰ç”¨äº†thunkï¼Œactionæ‰èƒ½æ˜¯ç”¨å‡½æ•°çš„å½¢å¼å»è¿›è¡Œä¼ é€’</span></span>
<span class="line"><span style="color:#24292E;">    store.</span><span style="color:#6F42C1;">dispatch</span><span style="color:#24292E;">(action);</span></span>
<span class="line"><span style="color:#24292E;">  }</span></span>
<span class="line"><span style="color:#24292E;">}</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br></div></div><p>æ¥ç€ï¼Œä¿®æ”¹ <code>actionCreators.js</code> çš„ä»£ç ã€‚<strong>å…·ä½“ä»£ç å¦‚ä¸‹ï¼š</strong></p><div class="language-js vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#6A737D;">// getTodoList æ˜¯ä¸€ä¸ªå‡½æ•°</span></span>
<span class="line"><span style="color:#6A737D;">// ä»¥è¿™ç§å½¢å¼ç”Ÿæˆçš„å‡½æ•°ï¼Œå¯ä»¥ç›´æ¥æ¥æ”¶dispatchæ–¹æ³•</span></span>
<span class="line"><span style="color:#F97583;">export</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">const</span><span style="color:#E1E4E8;"> </span><span style="color:#B392F0;">getTodoList</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> () </span><span style="color:#F97583;">=&gt;</span><span style="color:#E1E4E8;"> {</span></span>
<span class="line"><span style="color:#E1E4E8;">  </span><span style="color:#F97583;">return</span><span style="color:#E1E4E8;"> (</span><span style="color:#FFAB70;">dispatch</span><span style="color:#E1E4E8;">) </span><span style="color:#F97583;">=&gt;</span><span style="color:#E1E4E8;"> {</span></span>
<span class="line"><span style="color:#E1E4E8;">    axios.</span><span style="color:#B392F0;">get</span><span style="color:#E1E4E8;">(</span><span style="color:#9ECBFF;">&#39;./list.json&#39;</span><span style="color:#E1E4E8;">).</span><span style="color:#B392F0;">then</span><span style="color:#E1E4E8;">((</span><span style="color:#FFAB70;">res</span><span style="color:#E1E4E8;">) </span><span style="color:#F97583;">=&gt;</span><span style="color:#E1E4E8;"> {</span></span>
<span class="line"><span style="color:#E1E4E8;">      </span><span style="color:#F97583;">const</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">data</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> res.data;</span></span>
<span class="line"><span style="color:#E1E4E8;">      </span><span style="color:#6A737D;">// è¿™é‡Œçš„ action æ˜¯ä¸€ä¸ªå¯¹è±¡</span></span>
<span class="line"><span style="color:#E1E4E8;">      </span><span style="color:#F97583;">const</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">action</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> </span><span style="color:#B392F0;">initListAction</span><span style="color:#E1E4E8;">(data);</span></span>
<span class="line"><span style="color:#E1E4E8;">      </span><span style="color:#B392F0;">dispatch</span><span style="color:#E1E4E8;">(action);</span></span>
<span class="line"><span style="color:#E1E4E8;">    });</span></span>
<span class="line"><span style="color:#E1E4E8;">  };</span></span>
<span class="line"><span style="color:#E1E4E8;">};</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#6A737D;">// getTodoList æ˜¯ä¸€ä¸ªå‡½æ•°</span></span>
<span class="line"><span style="color:#6A737D;">// ä»¥è¿™ç§å½¢å¼ç”Ÿæˆçš„å‡½æ•°ï¼Œå¯ä»¥ç›´æ¥æ¥æ”¶dispatchæ–¹æ³•</span></span>
<span class="line"><span style="color:#D73A49;">export</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">const</span><span style="color:#24292E;"> </span><span style="color:#6F42C1;">getTodoList</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">=</span><span style="color:#24292E;"> () </span><span style="color:#D73A49;">=&gt;</span><span style="color:#24292E;"> {</span></span>
<span class="line"><span style="color:#24292E;">  </span><span style="color:#D73A49;">return</span><span style="color:#24292E;"> (</span><span style="color:#E36209;">dispatch</span><span style="color:#24292E;">) </span><span style="color:#D73A49;">=&gt;</span><span style="color:#24292E;"> {</span></span>
<span class="line"><span style="color:#24292E;">    axios.</span><span style="color:#6F42C1;">get</span><span style="color:#24292E;">(</span><span style="color:#032F62;">&#39;./list.json&#39;</span><span style="color:#24292E;">).</span><span style="color:#6F42C1;">then</span><span style="color:#24292E;">((</span><span style="color:#E36209;">res</span><span style="color:#24292E;">) </span><span style="color:#D73A49;">=&gt;</span><span style="color:#24292E;"> {</span></span>
<span class="line"><span style="color:#24292E;">      </span><span style="color:#D73A49;">const</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">data</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">=</span><span style="color:#24292E;"> res.data;</span></span>
<span class="line"><span style="color:#24292E;">      </span><span style="color:#6A737D;">// è¿™é‡Œçš„ action æ˜¯ä¸€ä¸ªå¯¹è±¡</span></span>
<span class="line"><span style="color:#24292E;">      </span><span style="color:#D73A49;">const</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">action</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">=</span><span style="color:#24292E;"> </span><span style="color:#6F42C1;">initListAction</span><span style="color:#24292E;">(data);</span></span>
<span class="line"><span style="color:#24292E;">      </span><span style="color:#6F42C1;">dispatch</span><span style="color:#24292E;">(action);</span></span>
<span class="line"><span style="color:#24292E;">    });</span></span>
<span class="line"><span style="color:#24292E;">  };</span></span>
<span class="line"><span style="color:#24292E;">};</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br></div></div><p>ä¸‹é¢ï¼Œæˆ‘ä»¬æ¥è§£é‡Šä¸‹ä¸Šé¢è¿™ä¸¤æ®µä»£ç ï¼Œ<strong>å…·ä½“å¦‚ä¸‹ï¼š</strong></p><p>é…ç½®å¥½ <code>redux-thunk</code> çš„ç¯å¢ƒä¹‹åï¼Œå®ƒä½¿å¾—æˆ‘ä»¬å¯ä»¥åœ¨ <code>action</code> é‡Œé¢ï¼Œå†™å¼‚æ­¥çš„ä»£ç äº†ï¼ä¸ºä»€ä¹ˆè¿™ä¹ˆè¯´å‘¢ï¼Ÿ</p><ul><li>ä»¥å‰æˆ‘ä»¬åœ¨åˆ›å»º <code>action</code> æ—¶ï¼Œåªèƒ½æ˜¯ä¸€ä¸ª<strong>JS å¯¹è±¡</strong>ï¼Œè€Œç°åœ¨ï¼Œå½“ä½¿ç”¨äº† <code>redux-thunk</code> ä¹‹åï¼Œå³ä½¿ <code>getTodoList()</code> è¿”å›çš„<strong>ä¸æ˜¯</strong>ä¸€ä¸ªå¯¹è±¡<strong>è€Œæ˜¯</strong>ä¸€ä¸ªå‡½æ•°ï¼Œä¹Ÿå¯ä»¥é€šè¿‡ <code>store.dispatch()</code> çš„æ–¹å¼ï¼ŒæŠŠå‡½æ•°å‘é€ç»™åˆ° <code>store</code> äº†ã€‚</li><li>é‚£ä¸ºä»€ä¹ˆèƒ½å¤ŸæŠŠ<strong>å‡½æ•°</strong>ç»™å‘é€å‡ºå»å‘¢ï¼Ÿå°±æ˜¯å› ä¸ºç”¨äº† <code>redux-thunk</code> ã€‚</li></ul><p>ç»§ç»­ï¼Œæˆ‘ä»¬è¦è°ˆè®º<strong>å…·ä½“çš„å®ç°æ­¥éª¤ ğŸ‘‡ï¼š</strong></p><ul><li>é¦–å…ˆè®© <code>TodoList.js</code> ä¸­çš„ <code>store</code> ï¼Œå»æ‰§è¡Œ <code>action</code> å‡½æ•°ã€‚è€Œè¿™ä¸ª <code>action</code> å‡½æ•°ï¼Œæ¥è‡ªäº <code>actionCreators.js</code> ä¸­çš„ <code>getTodoList()</code> ã€‚</li><li>å¯¹äº <code>getTodoList()</code> æ¥è¯´ï¼Œå®ƒè¦åšçš„äº‹æƒ…æ˜¯å»<strong>è¯·æ±‚ json çš„æ•°æ®</strong>å’Œ<strong>è·å– json çš„æ•°æ®</strong>ã€‚</li><li>è€Œè·å–å¥½äº†æ•°æ®ä¹‹åï¼Œæ¥ä¸‹æ¥ï¼Œè¦æ”¹å˜ <code>store</code> é‡Œé¢çš„æ•°æ®ï¼Œé‚£ä¹ˆè¦å…ˆå»åˆ›å»ºä¸€ä¸ª <code>action</code> ï¼Œè¿™ä¸ª <code>action</code> ç”¨æ¥æä¾›ç»™ <code>store.dispatch()</code> è¿›è¡Œè°ƒç”¨ã€‚ä½†æ˜¯å‘¢ï¼Œ <code>store.dispatch()</code> è¦æ€ä¹ˆå»è·å–å‘¢ï¼Ÿæˆ‘ä»¬æ‰€è¿”å›çš„é‚£ä¸ªå‡½æ•°ä¸­ï¼Œå°±ä¼šè‡ªåŠ¨åœ°æ¥æ”¶åˆ° <code>store.dispatch()</code> æ–¹æ³•ã€‚æ‰€ä»¥ï¼Œåªè¦é€šè¿‡ <code>dispatch(action)</code> ï¼Œå°† <code>action</code> ç»™æ´¾å‘å‡ºå»å°±å¯ä»¥äº†ã€‚</li><li>ä¹Ÿå°±æ˜¯è¯´ï¼Œ <code>redux-thunk</code> ä½¿å¾—æˆ‘ä»¬å»åˆ›å»º <code>action</code> æˆ–è€…æ”¯æŒ <code>action</code> æ—¶ï¼Œæ˜¯ä¸€ä¸ª<strong>å‡½æ•°</strong>çš„å½¢å¼ã€‚</li></ul><h3 id="_3-ä¸ºä»€ä¹ˆè¦ä½¿ç”¨-redux-thunk" tabindex="-1">ï¼ˆ3ï¼‰ä¸ºä»€ä¹ˆè¦ä½¿ç”¨ redux-thunk ï¼Ÿ <a class="header-anchor" href="#_3-ä¸ºä»€ä¹ˆè¦ä½¿ç”¨-redux-thunk" aria-label="Permalink to &quot;ï¼ˆ3ï¼‰ä¸ºä»€ä¹ˆè¦ä½¿ç”¨ redux-thunk ï¼Ÿ&quot;">â€‹</a></h3><p>çœ‹å®Œä¸Šé¢çš„è§£é‡Šä¹‹åï¼Œç›¸ä¿¡å¤§å®¶ä¹Ÿå°±çŸ¥é“ <code>redux-thunk</code> çš„å¥‡å¦™ä¹‹å¤„äº†ã€‚é‚£ä¸ºä»€ä¹ˆè¦ä½¿ç”¨ <code>redux-thunk</code> å‘¢ï¼ŸğŸ‘‡</p><p>å¦‚æœæŠŠå¼‚æ­¥å‡½æ•°æ”¾åœ¨<strong>ç»„ä»¶çš„ç”Ÿå‘½å‘¨æœŸ</strong>ä¸­æ¥ä½¿ç”¨çš„è¯ï¼Œé‚£ä¹ˆè¿™ä¸ª<strong>ç»„ä»¶çš„é€»è¾‘å°±ä¼šå˜å¾—è¶Šæ¥è¶Šå¤æ‚</strong>ï¼Œç»„ä»¶çš„å†…å®¹ä¹Ÿä¼šå˜å¾—è¶Šæ¥è¶Šå¤šã€‚å› æ­¤ï¼Œæˆ‘ä»¬é€šå¸¸å°±ä¼šæŠŠè¿™ç§å¤æ‚çš„å¼‚æ­¥é€»è¾‘ç»™<strong>æ‹†åˆ†å‡ºå»è¿›è¡Œå•ç‹¬ç®¡ç†</strong>ã€‚é‚£ä¹ˆç°åœ¨ï¼Œæˆ‘ä»¬å°±å€ŸåŠ© <code>redux-thunk</code> ä¸­é—´ä»¶ï¼ŒæŠŠå¼‚æ­¥é€»è¾‘ç»™æ‹†åˆ†åˆ° <code>actionCreators.js</code> å»è¿›è¡Œå•ç‹¬ç®¡ç†ã€‚ç”±æ­¤ï¼Œä½¿å¾—ä»£ç æ›´åŠ è§„èŒƒå’Œç»Ÿä¸€ã€‚</p><h3 id="_4-ä»€ä¹ˆæ˜¯-redux-thunk-ä¸­é—´ä»¶" tabindex="-1">ï¼ˆ4ï¼‰ä»€ä¹ˆæ˜¯ Redux-thunk ä¸­é—´ä»¶ï¼Ÿ <a class="header-anchor" href="#_4-ä»€ä¹ˆæ˜¯-redux-thunk-ä¸­é—´ä»¶" aria-label="Permalink to &quot;ï¼ˆ4ï¼‰ä»€ä¹ˆæ˜¯ Redux-thunk ä¸­é—´ä»¶ï¼Ÿ&quot;">â€‹</a></h3><p>åœ¨æœ‰äº†ä¸Šé¢å†…å®¹çš„é“ºå«ä¹‹åï¼Œæ¥ä¸‹æ¥ï¼Œæˆ‘ä»¬è¿”å›åˆ°ä¸­é—´ä»¶çš„æºå¤´ï¼Œæ¥è°ˆè°ˆ <code>Redux-thunk</code> ä¸­é—´ä»¶çš„åŸç†ã€‚</p><p>æ‰€è°“<strong>ä¸­é—´ä»¶</strong>ï¼Œè‚¯å®šå°±æ˜¯è¯´æ˜¯è°å’Œè°çš„ä¸­é—´ã€‚<strong>æˆ‘ä»¬å…ˆæ¥çœ‹ä¸€å¼ å›¾ï¼š</strong></p><p><img src="https://mondaylab-1309616765.cos.ap-shanghai.myqcloud.com/images/202305270716403.png" alt="Redux Data Flow"></p><p><code>Redux</code> ä¸­é—´ä»¶çš„è¿™ä¸ª<strong>ä¸­é—´</strong>ï¼ŒæŒ‡çš„æ˜¯ <code>action</code> å’Œ <code>store</code> ä¹‹é—´ã€‚</p><p>ä¹‹å‰æˆ‘ä»¬è¯´è¿‡ï¼Œåœ¨ <code>redux</code> ä¸­ï¼Œ <code>action</code> åªèƒ½æ˜¯ä¸€ä¸ªå¯¹è±¡ï¼Œå°±å› ä¸ºå®ƒæ˜¯å¯¹è±¡ï¼Œå› æ­¤ç›´æ¥æŠŠå®ƒæ´¾å‘ç»™ <code>store</code> ã€‚ç°åœ¨ï¼Œå½“æˆ‘ä»¬ä½¿ç”¨äº† <code>redux-thunk</code> ä¹‹åï¼Œ <code>action</code> å°±å¯ä»¥æ˜¯å‡½æ•°äº†ã€‚é‚£ä¸ºä»€ä¹ˆå¯ä»¥æ˜¯å‡½æ•°å‘¢ï¼Ÿ</p><p>çœ‹ä¸Šé¢çš„å›¾ä¸­ä¸éš¾å‘ç°ï¼Œ <code>action</code> é€šè¿‡ <code>dispatch</code> çš„æ–¹æ³•ï¼Œå°†æ•°æ®é€’äº¤ç»™äº† <code>store</code> ã€‚ä¸” <code>action</code> å’Œ <code>store</code> ä¹‹é—´ï¼Œæ˜¯ä¸€ä¸ª <code>dispatch</code> æ–¹æ³•ï¼Œé‚£æˆ‘ä»¬è¯´çš„ä¸­é—´ä»¶ <code>middleware</code> ï¼Œå®é™…ä¸Šå°±æ˜¯<strong>å¯¹ dispatch æ–¹æ³•çš„å°è£…å’Œå‡çº§</strong>ã€‚</p><p>å¯¹äºæœ€åŸå§‹çš„ <code>dispatch</code> æ–¹æ³•æ¥è¯´ï¼Œå®ƒä¼šæ¥æ”¶åˆ°ä¸€ä¸ª <strong>JS å¯¹è±¡</strong>å¹¶å°†å…¶ä¼ é€’ç»™ <code>store</code> ã€‚</p><p>ä½†å¦‚æœæˆ‘ä»¬ä¼ é€’çš„æ˜¯ä¸€ä¸ª <strong>å‡½æ•°</strong> çš„è¯ï¼Œé‚£ä¹ˆè¿™ä¸ª <code>dispatch</code> å°±å‡çº§äº†ã€‚ <code>dispatch</code> ä¸ä¼šç›´æ¥æŠŠå‡½æ•°ä¼ é€’ç»™ <code>store</code> ï¼Œå®ƒä¼šé€šè¿‡ <code>redux-thunk</code> ä¸­é—´ä»¶çš„æ–¹å¼ï¼Œå…ˆæ‰§è¡Œå¯¹åº”çš„å‡½æ•°ï¼Œç­‰æ‰§è¡Œåˆ°éœ€è¦è°ƒç”¨ <code>store</code> çš„æ—¶å€™ï¼Œå†å»è°ƒç”¨ <code>store</code> ã€‚</p><h1 id="ğŸ’¼-ä¹ã€redux-çš„å…¶ä»–ä¸­é—´ä»¶" tabindex="-1">ğŸ’¼ ä¹ã€Redux çš„å…¶ä»–ä¸­é—´ä»¶ <a class="header-anchor" href="#ğŸ’¼-ä¹ã€redux-çš„å…¶ä»–ä¸­é—´ä»¶" aria-label="Permalink to &quot;ğŸ’¼ ä¹ã€Redux çš„å…¶ä»–ä¸­é—´ä»¶&quot;">â€‹</a></h1><h2 id="_1ã€redux-logger" tabindex="-1">1ã€Redux-logger <a class="header-anchor" href="#_1ã€redux-logger" aria-label="Permalink to &quot;1ã€Redux-logger&quot;">â€‹</a></h2><p><code>redux</code> çš„ä¸­é—´ä»¶éå¸¸çš„å¤šï¼Œæ¯”å¦‚ <code>redux-logger</code> å¯ä»¥è®°å½• <code>action</code> æ¯ä¸€æ¬¡æ´¾å‘çš„æ—¥å¿—ã€‚é‚£å®ƒæ€ä¹ˆè®°å½•å‘¢ï¼Ÿ</p><p>å®ƒåœ¨æ¯ä¸€æ¬¡è°ƒç”¨ <code>action</code> çš„æ—¶å€™ï¼Œä¼šé€šè¿‡ <code>dispatch</code> æ–¹æ³•æŠŠ <code>action</code> ä¼ é€’ç»™ <code>store</code> ï¼Œä¹‹åå‘¢ï¼Œæˆ‘ä»¬å¯ä»¥å¯¹ <code>dispatch</code> åšä¸€ä¸ªå‡çº§ï¼Œè®© <code>dispatch</code> ä¸ä»…æŠŠ <code>action</code> ä¼ é€’ç»™ <code>store</code> ï¼Œè€Œä¸”åœ¨æ¯ä¸€æ¬¡ä¼ é€’ä¹‹å‰ï¼Œæˆ‘ä»¬è¿˜é€šè¿‡ <code>console.log</code> çš„æ–¹å¼å°†å…¶æ‰“å°å‡ºæ¥ï¼Œè¿™æ ·çš„è¯ï¼Œæˆ‘ä»¬å°±å†™äº†ä¸€ä¸ª <code>redux-logger</code> çš„ä¸­é—´ä»¶ï¼Œ å®ƒå¯ä»¥åœ¨æˆ‘ä»¬æ´¾å‘ <code>action</code> çš„æ—¶å€™ï¼ŒæŠŠ <code>action</code> æ‰“å°åœ¨æˆ‘ä»¬çš„<strong>æ§åˆ¶å°</strong>é‡Œé¢ã€‚</p><h2 id="_2ã€redux-saga" tabindex="-1">2ã€Redux-saga <a class="header-anchor" href="#_2ã€redux-saga" aria-label="Permalink to &quot;2ã€Redux-saga&quot;">â€‹</a></h2><h3 id="_1-redux-saga-æ˜¯ä»€ä¹ˆ" tabindex="-1">ï¼ˆ1ï¼‰Redux-saga æ˜¯ä»€ä¹ˆ <a class="header-anchor" href="#_1-redux-saga-æ˜¯ä»€ä¹ˆ" aria-label="Permalink to &quot;ï¼ˆ1ï¼‰Redux-saga æ˜¯ä»€ä¹ˆ&quot;">â€‹</a></h3><p>åœ¨ç°å¦‚ä»Šçš„é¡¹ç›®ä¸­ï¼Œç”¨çš„æ¯”è¾ƒç«çš„ä¸­é—´ä»¶ä¸ä»…æœ‰ <code>redux-thunk</code> ï¼Œ <code>redux-logger</code> ï¼Œè¿˜æœ‰ <code>reudx-saga</code> çš„ä½¿ç”¨èŒƒå›´ä¹Ÿéå¸¸çš„å¹¿ã€‚</p><p><code>reudx-saga</code> ä¹Ÿæ˜¯è§£å†³ <code>react</code> ä¸­<strong>å¼‚æ­¥é—®é¢˜</strong>çš„ä¸€ä¸ªä¸­é—´ä»¶ï¼Œä¸åŒäº <code>redux-thunk</code> çš„æ˜¯ï¼Œ <code>redux-thunk</code> é‡‡ç”¨çš„æ˜¯æŠŠ<strong>å¼‚æ­¥æ“ä½œ</strong>æ”¾åˆ° <code>action</code> é‡Œé¢å»æ“ä½œã€‚è€Œ <strong>redux-saga é‡‡ç”¨çš„è®¾è®¡æ€æƒ³æ˜¯</strong>ï¼Œ<u>å•ç‹¬åœ°æŠŠå¼‚æ­¥é€»è¾‘æ‹†åˆ†å‡ºæ¥ï¼Œæ”¾åˆ°å¦ä¸€ä¸ªæ–‡ä»¶ä¸­å»è¿›è¡Œç®¡ç†</u>ã€‚é‚£ <code>redux-saga</code> è¿™ä¸ªä¸­é—´ä»¶è¯¥å¦‚ä½•ä½¿ç”¨å‘¢ï¼Ÿ</p><h3 id="_2-redux-saga-å¦‚ä½•ä½¿ç”¨" tabindex="-1">ï¼ˆ2ï¼‰Redux-saga å¦‚ä½•ä½¿ç”¨ <a class="header-anchor" href="#_2-redux-saga-å¦‚ä½•ä½¿ç”¨" aria-label="Permalink to &quot;ï¼ˆ2ï¼‰Redux-saga å¦‚ä½•ä½¿ç”¨&quot;">â€‹</a></h3><p>æˆ‘ä»¬æŠŠä¸Šé¢çš„ <code>TodoList</code> ç»„ä»¶è¿›è¡Œå‡çº§æ”¹é€ ã€‚é¦–å…ˆæ˜¯ <code>store|index.js</code> æ–‡ä»¶ã€‚<strong>å…·ä½“ä»£ç å¦‚ä¸‹ï¼š</strong></p><div class="language-js vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#F97583;">import</span><span style="color:#E1E4E8;"> { createStore, applyMiddleware, compose } </span><span style="color:#F97583;">from</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">&#39;redux&#39;</span><span style="color:#E1E4E8;">;</span></span>
<span class="line"><span style="color:#F97583;">import</span><span style="color:#E1E4E8;"> reducer </span><span style="color:#F97583;">from</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">&#39;./reducer&#39;</span><span style="color:#E1E4E8;">;</span></span>
<span class="line"><span style="color:#F97583;">import</span><span style="color:#E1E4E8;"> createSagaMiddleware </span><span style="color:#F97583;">from</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">&#39;redux-saga&#39;</span><span style="color:#E1E4E8;">;</span></span>
<span class="line"><span style="color:#F97583;">import</span><span style="color:#E1E4E8;"> todoSagas </span><span style="color:#F97583;">from</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">&#39;./sagas&#39;</span><span style="color:#E1E4E8;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F97583;">const</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">sagaMiddleware</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> </span><span style="color:#B392F0;">createSagaMiddleware</span><span style="color:#E1E4E8;">();</span></span>
<span class="line"><span style="color:#F97583;">const</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">composeEnhancers</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__</span></span>
<span class="line"><span style="color:#E1E4E8;">  </span><span style="color:#F97583;">?</span><span style="color:#E1E4E8;"> window.</span><span style="color:#B392F0;">__REDUX_DEVTOOLS_EXTENSION_COMPOSE__</span><span style="color:#E1E4E8;">({})</span></span>
<span class="line"><span style="color:#E1E4E8;">  </span><span style="color:#F97583;">:</span><span style="color:#E1E4E8;"> compose;</span></span>
<span class="line"><span style="color:#F97583;">const</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">enhancer</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> </span><span style="color:#B392F0;">composeEnhancers</span><span style="color:#E1E4E8;">(</span><span style="color:#B392F0;">sagaMiddleware</span><span style="color:#E1E4E8;">(sagaMiddleware));</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F97583;">const</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">store</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> </span><span style="color:#B392F0;">createStore</span><span style="color:#E1E4E8;">(reducer, enhancer);</span></span>
<span class="line"><span style="color:#E1E4E8;">sagaMiddleware.</span><span style="color:#B392F0;">run</span><span style="color:#E1E4E8;">(todoSagas);</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F97583;">export</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">default</span><span style="color:#E1E4E8;"> store;</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#D73A49;">import</span><span style="color:#24292E;"> { createStore, applyMiddleware, compose } </span><span style="color:#D73A49;">from</span><span style="color:#24292E;"> </span><span style="color:#032F62;">&#39;redux&#39;</span><span style="color:#24292E;">;</span></span>
<span class="line"><span style="color:#D73A49;">import</span><span style="color:#24292E;"> reducer </span><span style="color:#D73A49;">from</span><span style="color:#24292E;"> </span><span style="color:#032F62;">&#39;./reducer&#39;</span><span style="color:#24292E;">;</span></span>
<span class="line"><span style="color:#D73A49;">import</span><span style="color:#24292E;"> createSagaMiddleware </span><span style="color:#D73A49;">from</span><span style="color:#24292E;"> </span><span style="color:#032F62;">&#39;redux-saga&#39;</span><span style="color:#24292E;">;</span></span>
<span class="line"><span style="color:#D73A49;">import</span><span style="color:#24292E;"> todoSagas </span><span style="color:#D73A49;">from</span><span style="color:#24292E;"> </span><span style="color:#032F62;">&#39;./sagas&#39;</span><span style="color:#24292E;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#D73A49;">const</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">sagaMiddleware</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">=</span><span style="color:#24292E;"> </span><span style="color:#6F42C1;">createSagaMiddleware</span><span style="color:#24292E;">();</span></span>
<span class="line"><span style="color:#D73A49;">const</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">composeEnhancers</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">=</span><span style="color:#24292E;"> window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__</span></span>
<span class="line"><span style="color:#24292E;">  </span><span style="color:#D73A49;">?</span><span style="color:#24292E;"> window.</span><span style="color:#6F42C1;">__REDUX_DEVTOOLS_EXTENSION_COMPOSE__</span><span style="color:#24292E;">({})</span></span>
<span class="line"><span style="color:#24292E;">  </span><span style="color:#D73A49;">:</span><span style="color:#24292E;"> compose;</span></span>
<span class="line"><span style="color:#D73A49;">const</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">enhancer</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">=</span><span style="color:#24292E;"> </span><span style="color:#6F42C1;">composeEnhancers</span><span style="color:#24292E;">(</span><span style="color:#6F42C1;">sagaMiddleware</span><span style="color:#24292E;">(sagaMiddleware));</span></span>
<span class="line"></span>
<span class="line"><span style="color:#D73A49;">const</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">store</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">=</span><span style="color:#24292E;"> </span><span style="color:#6F42C1;">createStore</span><span style="color:#24292E;">(reducer, enhancer);</span></span>
<span class="line"><span style="color:#24292E;">sagaMiddleware.</span><span style="color:#6F42C1;">run</span><span style="color:#24292E;">(todoSagas);</span></span>
<span class="line"></span>
<span class="line"><span style="color:#D73A49;">export</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">default</span><span style="color:#24292E;"> store;</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br></div></div><p>åœ¨è¿™ä¸ªæ–‡ä»¶å½“ä¸­ï¼Œä¸»è¦æ˜¯è¦æŠŠåŸºç¡€é…ç½®åšå¥½ã€‚é‚£è¿™é‡Œä¸»è¦æœ‰å‡ ä¸ªè¦æ³¨æ„çš„ç‚¹æ˜¯ï¼š</p><ul><li>å¼•å…¥ <code>createSagaMiddleware</code> ï¼›</li><li>ä¹‹åæ˜¯ä½¿ç”¨ <code>const sagaMiddleware = createSagaMiddleware()</code> å°†å…¶è¿›è¡Œå¼•å…¥ï¼›</li><li>ä½¿ç”¨ <code>apllyMiddleware</code> å»ä½¿ç”¨è¿™ä¸ªä¸­é—´ä»¶ï¼›</li><li>ä½¿ç”¨å®Œä¸­é—´ä»¶ä¹‹åï¼Œæˆ‘ä»¬åˆåˆ›å»ºäº† <code>saga.js</code> ã€‚</li></ul><hr><p>æ¥ä¸‹æ¥æˆ‘ä»¬åœ¨ <code>store</code> æ–‡ä»¶å¤¹ä¸‹åˆ›å»º <code>saga.js</code> ã€‚<strong>å…·ä½“ä»£ç å¦‚ä¸‹ï¼š</strong></p><div class="language-js vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#F97583;">import</span><span style="color:#E1E4E8;"> { takeEvery, put } </span><span style="color:#F97583;">from</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">&#39;redux-saga/effects&#39;</span><span style="color:#E1E4E8;">;</span></span>
<span class="line"><span style="color:#F97583;">import</span><span style="color:#E1E4E8;"> { initListAction } </span><span style="color:#F97583;">from</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">&#39;./actionCreators&#39;</span><span style="color:#E1E4E8;">;</span></span>
<span class="line"><span style="color:#F97583;">import</span><span style="color:#E1E4E8;"> { GET_INIT_LIST } </span><span style="color:#F97583;">from</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">&#39;./actionTypes&#39;</span><span style="color:#E1E4E8;">;</span></span>
<span class="line"><span style="color:#F97583;">import</span><span style="color:#E1E4E8;"> axios </span><span style="color:#F97583;">from</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">&#39;axios&#39;</span><span style="color:#E1E4E8;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F97583;">function</span><span style="color:#E1E4E8;"> </span><span style="color:#B392F0;">getInitList</span><span style="color:#E1E4E8;">() {</span></span>
<span class="line"><span style="color:#E1E4E8;">  </span><span style="color:#F97583;">try</span><span style="color:#E1E4E8;"> {</span></span>
<span class="line"><span style="color:#E1E4E8;">    </span><span style="color:#F97583;">const</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">res</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">yield</span><span style="color:#E1E4E8;"> axios.</span><span style="color:#B392F0;">get</span><span style="color:#E1E4E8;">(</span><span style="color:#9ECBFF;">&#39;./list.json&#39;</span><span style="color:#E1E4E8;">);</span></span>
<span class="line"><span style="color:#E1E4E8;">    </span><span style="color:#F97583;">const</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">action</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> </span><span style="color:#B392F0;">initListAction</span><span style="color:#E1E4E8;">(res.data);</span></span>
<span class="line"><span style="color:#E1E4E8;">    </span><span style="color:#F97583;">yield</span><span style="color:#E1E4E8;"> </span><span style="color:#B392F0;">put</span><span style="color:#E1E4E8;">(action);</span></span>
<span class="line"><span style="color:#E1E4E8;">  } </span><span style="color:#F97583;">catch</span><span style="color:#E1E4E8;"> (e) {</span></span>
<span class="line"><span style="color:#E1E4E8;">    console.</span><span style="color:#B392F0;">log</span><span style="color:#E1E4E8;">(</span><span style="color:#9ECBFF;">&#39;list.jsonç½‘ç»œè¯·æ±‚å¤±è´¥&#39;</span><span style="color:#E1E4E8;">);</span></span>
<span class="line"><span style="color:#E1E4E8;">  }</span></span>
<span class="line"><span style="color:#E1E4E8;">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F97583;">function*</span><span style="color:#E1E4E8;"> </span><span style="color:#B392F0;">mySaga</span><span style="color:#E1E4E8;">() {</span></span>
<span class="line"><span style="color:#E1E4E8;">  </span><span style="color:#6A737D;">// é€šè¿‡takeEveryå»æ•è·åˆ°æ¯ä¸€æ¬¡æ´¾å‘ä¸‹æ¥çš„action</span></span>
<span class="line"><span style="color:#E1E4E8;">  </span><span style="color:#F97583;">yield</span><span style="color:#E1E4E8;"> </span><span style="color:#B392F0;">takeEvery</span><span style="color:#E1E4E8;">(</span><span style="color:#79B8FF;">GET_INIT_LIST</span><span style="color:#E1E4E8;">, getInitList);</span></span>
<span class="line"><span style="color:#E1E4E8;">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F97583;">export</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">default</span><span style="color:#E1E4E8;"> mySaga;</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#D73A49;">import</span><span style="color:#24292E;"> { takeEvery, put } </span><span style="color:#D73A49;">from</span><span style="color:#24292E;"> </span><span style="color:#032F62;">&#39;redux-saga/effects&#39;</span><span style="color:#24292E;">;</span></span>
<span class="line"><span style="color:#D73A49;">import</span><span style="color:#24292E;"> { initListAction } </span><span style="color:#D73A49;">from</span><span style="color:#24292E;"> </span><span style="color:#032F62;">&#39;./actionCreators&#39;</span><span style="color:#24292E;">;</span></span>
<span class="line"><span style="color:#D73A49;">import</span><span style="color:#24292E;"> { GET_INIT_LIST } </span><span style="color:#D73A49;">from</span><span style="color:#24292E;"> </span><span style="color:#032F62;">&#39;./actionTypes&#39;</span><span style="color:#24292E;">;</span></span>
<span class="line"><span style="color:#D73A49;">import</span><span style="color:#24292E;"> axios </span><span style="color:#D73A49;">from</span><span style="color:#24292E;"> </span><span style="color:#032F62;">&#39;axios&#39;</span><span style="color:#24292E;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#D73A49;">function</span><span style="color:#24292E;"> </span><span style="color:#6F42C1;">getInitList</span><span style="color:#24292E;">() {</span></span>
<span class="line"><span style="color:#24292E;">  </span><span style="color:#D73A49;">try</span><span style="color:#24292E;"> {</span></span>
<span class="line"><span style="color:#24292E;">    </span><span style="color:#D73A49;">const</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">res</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">=</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">yield</span><span style="color:#24292E;"> axios.</span><span style="color:#6F42C1;">get</span><span style="color:#24292E;">(</span><span style="color:#032F62;">&#39;./list.json&#39;</span><span style="color:#24292E;">);</span></span>
<span class="line"><span style="color:#24292E;">    </span><span style="color:#D73A49;">const</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">action</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">=</span><span style="color:#24292E;"> </span><span style="color:#6F42C1;">initListAction</span><span style="color:#24292E;">(res.data);</span></span>
<span class="line"><span style="color:#24292E;">    </span><span style="color:#D73A49;">yield</span><span style="color:#24292E;"> </span><span style="color:#6F42C1;">put</span><span style="color:#24292E;">(action);</span></span>
<span class="line"><span style="color:#24292E;">  } </span><span style="color:#D73A49;">catch</span><span style="color:#24292E;"> (e) {</span></span>
<span class="line"><span style="color:#24292E;">    console.</span><span style="color:#6F42C1;">log</span><span style="color:#24292E;">(</span><span style="color:#032F62;">&#39;list.jsonç½‘ç»œè¯·æ±‚å¤±è´¥&#39;</span><span style="color:#24292E;">);</span></span>
<span class="line"><span style="color:#24292E;">  }</span></span>
<span class="line"><span style="color:#24292E;">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#D73A49;">function*</span><span style="color:#24292E;"> </span><span style="color:#6F42C1;">mySaga</span><span style="color:#24292E;">() {</span></span>
<span class="line"><span style="color:#24292E;">  </span><span style="color:#6A737D;">// é€šè¿‡takeEveryå»æ•è·åˆ°æ¯ä¸€æ¬¡æ´¾å‘ä¸‹æ¥çš„action</span></span>
<span class="line"><span style="color:#24292E;">  </span><span style="color:#D73A49;">yield</span><span style="color:#24292E;"> </span><span style="color:#6F42C1;">takeEvery</span><span style="color:#24292E;">(</span><span style="color:#005CC5;">GET_INIT_LIST</span><span style="color:#24292E;">, getInitList);</span></span>
<span class="line"><span style="color:#24292E;">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#D73A49;">export</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">default</span><span style="color:#24292E;"> mySaga;</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br></div></div><p>å¯¹äº <code>saga.js</code> æ¥è¯´ï¼Œæœ‰å‡ ä¸ªè¦æ³¨æ„çš„ç‚¹æ˜¯ï¼š</p><ul><li>åœ¨ <code>saga.js</code> é‡Œé¢ï¼Œä¸€å®šè¦å¯¼å‡ºä¸€ä¸ª <code>generator</code> å‡½æ•°ï¼Œåœ¨è¿™ä¸ªå‡½æ•°é‡Œé¢ï¼Œæˆ‘ä»¬å†™äº†ä¸€äº›é€»è¾‘ã€‚é€»è¾‘æ˜¯ï¼Œå½“æˆ‘ä»¬æ¥æ”¶åˆ°çš„ <code>action</code> ç±»å‹æ˜¯ <code>GET_INIT_LIST</code> æ—¶ï¼Œé‚£ä¹ˆæˆ‘ä»¬å°±ä¼šå»æ‰§è¡Œ <code>getInitList</code> è¿™ä¸ªæ–¹æ³•ã€‚</li><li><code>getInitList()</code> æ–¹æ³•æ˜¯ä¸€ä¸ªå‡½æ•°ï¼Œå®ƒå°†ä¼šå»å¸®æˆ‘ä»¬å–æ•°æ®ï¼Œå–å®Œæ•°æ®ä¹‹åï¼Œå†å°†è¿™ä¸ªæ•°æ®åˆ›å»ºå‡ºæ¥ä¸€ä¸ªæ–°çš„ <code>action</code> ï¼Œå¹¶å°†è¿™ä¸ª <code>action</code> é€šè¿‡ <code>yield put(action)</code> çš„æ–¹å¼ï¼Œæ´¾å‘ç»™ <code>store</code> ã€‚</li></ul><hr><p>ä¸‹é¢æˆ‘ä»¬æ¥çœ‹ <code>actionTypes.js</code> ä¸­çš„å†…å®¹ã€‚<strong>å…·ä½“ä»£ç å¦‚ä¸‹ï¼š</strong></p><div class="language-js vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#6A737D;">// CHANGE_INPUT_VALUEã€ADD_TODO_ITEMã€DELETE_TODO_ITEMã€INIT_LIST_ACTION</span></span>
<span class="line"><span style="color:#F97583;">export</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">const</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">GET_INIT_LIST</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">&#39;get_init_list&#39;</span><span style="color:#E1E4E8;">;</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#6A737D;">// CHANGE_INPUT_VALUEã€ADD_TODO_ITEMã€DELETE_TODO_ITEMã€INIT_LIST_ACTION</span></span>
<span class="line"><span style="color:#D73A49;">export</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">const</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">GET_INIT_LIST</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">=</span><span style="color:#24292E;"> </span><span style="color:#032F62;">&#39;get_init_list&#39;</span><span style="color:#24292E;">;</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><hr><p>æ¥ç€ï¼Œæˆ‘ä»¬æ¥åˆ° <code>TodoList.js</code> ã€‚<strong>å…·ä½“ä»£ç å¦‚ä¸‹ï¼š</strong></p><div class="language-js vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#F97583;">import</span><span style="color:#E1E4E8;"> {</span></span>
<span class="line"><span style="color:#E1E4E8;">  getInputChangeAction,</span></span>
<span class="line"><span style="color:#E1E4E8;">  getAddItemAction,</span></span>
<span class="line"><span style="color:#E1E4E8;">  getDeleteItemAction,</span></span>
<span class="line"><span style="color:#E1E4E8;">  getInitList,</span></span>
<span class="line"><span style="color:#E1E4E8;">} </span><span style="color:#F97583;">from</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">&#39;./store/actionCreators&#39;</span><span style="color:#E1E4E8;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F97583;">class</span><span style="color:#E1E4E8;"> </span><span style="color:#B392F0;">TodoList</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">extends</span><span style="color:#E1E4E8;"> </span><span style="color:#B392F0;">Component</span><span style="color:#E1E4E8;"> {</span></span>
<span class="line"><span style="color:#E1E4E8;">  </span><span style="color:#6A737D;">// æ­¤å¤„çœç•¥nå¤šå†…å®¹</span></span>
<span class="line"></span>
<span class="line"><span style="color:#E1E4E8;">  </span><span style="color:#B392F0;">componentDidMount</span><span style="color:#E1E4E8;">() {</span></span>
<span class="line"><span style="color:#E1E4E8;">    </span><span style="color:#F97583;">const</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">action</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> </span><span style="color:#B392F0;">getInitList</span><span style="color:#E1E4E8;">();</span></span>
<span class="line"><span style="color:#E1E4E8;">    store.</span><span style="color:#B392F0;">dispatch</span><span style="color:#E1E4E8;">(action);</span></span>
<span class="line"><span style="color:#E1E4E8;">  }</span></span>
<span class="line"><span style="color:#E1E4E8;">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F97583;">export</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">default</span><span style="color:#E1E4E8;"> TodoList;</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#D73A49;">import</span><span style="color:#24292E;"> {</span></span>
<span class="line"><span style="color:#24292E;">  getInputChangeAction,</span></span>
<span class="line"><span style="color:#24292E;">  getAddItemAction,</span></span>
<span class="line"><span style="color:#24292E;">  getDeleteItemAction,</span></span>
<span class="line"><span style="color:#24292E;">  getInitList,</span></span>
<span class="line"><span style="color:#24292E;">} </span><span style="color:#D73A49;">from</span><span style="color:#24292E;"> </span><span style="color:#032F62;">&#39;./store/actionCreators&#39;</span><span style="color:#24292E;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#D73A49;">class</span><span style="color:#24292E;"> </span><span style="color:#6F42C1;">TodoList</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">extends</span><span style="color:#24292E;"> </span><span style="color:#6F42C1;">Component</span><span style="color:#24292E;"> {</span></span>
<span class="line"><span style="color:#24292E;">  </span><span style="color:#6A737D;">// æ­¤å¤„çœç•¥nå¤šå†…å®¹</span></span>
<span class="line"></span>
<span class="line"><span style="color:#24292E;">  </span><span style="color:#6F42C1;">componentDidMount</span><span style="color:#24292E;">() {</span></span>
<span class="line"><span style="color:#24292E;">    </span><span style="color:#D73A49;">const</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">action</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">=</span><span style="color:#24292E;"> </span><span style="color:#6F42C1;">getInitList</span><span style="color:#24292E;">();</span></span>
<span class="line"><span style="color:#24292E;">    store.</span><span style="color:#6F42C1;">dispatch</span><span style="color:#24292E;">(action);</span></span>
<span class="line"><span style="color:#24292E;">  }</span></span>
<span class="line"><span style="color:#24292E;">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#D73A49;">export</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">default</span><span style="color:#24292E;"> TodoList;</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br></div></div><p>æœ€åæ˜¯ <code>store|actionCreators.js</code> ã€‚å…·ä½“ä»£ç å¦‚ä¸‹ï¼š</p><div class="language-js vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#F97583;">import</span><span style="color:#E1E4E8;"> {</span></span>
<span class="line"><span style="color:#E1E4E8;">  GET_INIT_LIST,</span></span>
<span class="line"><span style="color:#E1E4E8;">  CHANGE_INPUT_VALUE,</span></span>
<span class="line"><span style="color:#E1E4E8;">  ADD_TODO_ITEM,</span></span>
<span class="line"><span style="color:#E1E4E8;">  DELETE_TODO_ITEM,</span></span>
<span class="line"><span style="color:#E1E4E8;">  INIT_LIST_ACTION,</span></span>
<span class="line"><span style="color:#E1E4E8;">} </span><span style="color:#F97583;">from</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">&#39;./actionTypes&#39;</span><span style="color:#E1E4E8;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D;">// æ­¤å¤„çœç•¥nå¤šå†…å®¹</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F97583;">export</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">const</span><span style="color:#E1E4E8;"> </span><span style="color:#B392F0;">getInitList</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> () </span><span style="color:#F97583;">=&gt;</span><span style="color:#E1E4E8;"> ({</span></span>
<span class="line"><span style="color:#E1E4E8;">  type: </span><span style="color:#79B8FF;">GET_INIT_LIST</span><span style="color:#E1E4E8;">,</span></span>
<span class="line"><span style="color:#E1E4E8;">});</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#D73A49;">import</span><span style="color:#24292E;"> {</span></span>
<span class="line"><span style="color:#24292E;">  GET_INIT_LIST,</span></span>
<span class="line"><span style="color:#24292E;">  CHANGE_INPUT_VALUE,</span></span>
<span class="line"><span style="color:#24292E;">  ADD_TODO_ITEM,</span></span>
<span class="line"><span style="color:#24292E;">  DELETE_TODO_ITEM,</span></span>
<span class="line"><span style="color:#24292E;">  INIT_LIST_ACTION,</span></span>
<span class="line"><span style="color:#24292E;">} </span><span style="color:#D73A49;">from</span><span style="color:#24292E;"> </span><span style="color:#032F62;">&#39;./actionTypes&#39;</span><span style="color:#24292E;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D;">// æ­¤å¤„çœç•¥nå¤šå†…å®¹</span></span>
<span class="line"></span>
<span class="line"><span style="color:#D73A49;">export</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">const</span><span style="color:#24292E;"> </span><span style="color:#6F42C1;">getInitList</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">=</span><span style="color:#24292E;"> () </span><span style="color:#D73A49;">=&gt;</span><span style="color:#24292E;"> ({</span></span>
<span class="line"><span style="color:#24292E;">  type: </span><span style="color:#005CC5;">GET_INIT_LIST</span><span style="color:#24292E;">,</span></span>
<span class="line"><span style="color:#24292E;">});</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br></div></div><p>åœ¨ <code>TodoList.js</code> ä¸­ï¼Œæˆ‘ä»¬åˆ›å»ºäº†ä¸€ä¸ª <code>action</code> ï¼Œå¹¶å°†è¿™ä¸ª <code>action</code> æ´¾å‘ç»™ <code>store</code> ã€‚</p><h1 id="ğŸ›µ-åã€react-redux" tabindex="-1">ğŸ›µ åã€React-Redux <a class="header-anchor" href="#ğŸ›µ-åã€react-redux" aria-label="Permalink to &quot;ğŸ›µ åã€React-Redux&quot;">â€‹</a></h1><h2 id="_1ã€react-redux-æ˜¯ä»€ä¹ˆ" tabindex="-1">1ã€React-Redux æ˜¯ä»€ä¹ˆ <a class="header-anchor" href="#_1ã€react-redux-æ˜¯ä»€ä¹ˆ" aria-label="Permalink to &quot;1ã€React-Redux æ˜¯ä»€ä¹ˆ&quot;">â€‹</a></h2><p>åœ¨å­¦ä¹ äº† <code>react</code> ä¹‹åï¼Œç´§æ¥ç€ï¼Œæˆ‘ä»¬å­¦ä¹ äº† <code>redux</code> ã€‚é‚£å¦‚æœæŠŠå®ƒä»¬ä¿©ç»“åˆèµ·æ¥ï¼Œ <code>react-redux</code> æ˜¯ä»€ä¹ˆå‘¢ï¼Ÿ</p><p>å®é™…ä¸Šï¼Œå®ƒæ˜¯ä¸€ä¸ª<strong>ç¬¬ä¸‰æ–¹æ¨¡å—</strong>ï¼Œå®ƒä½¿å¾—æˆ‘ä»¬åœ¨ <code>react</code> ä¸­æ›´åŠ æ–¹ä¾¿åœ°ä½¿ç”¨ <code>redux</code> ã€‚</p><h2 id="_2ã€react-redux-çš„ä½¿ç”¨" tabindex="-1">2ã€React-Redux çš„ä½¿ç”¨ <a class="header-anchor" href="#_2ã€react-redux-çš„ä½¿ç”¨" aria-label="Permalink to &quot;2ã€React-Redux çš„ä½¿ç”¨&quot;">â€‹</a></h2><h3 id="_1-å®‰è£…-react-redux" tabindex="-1">ï¼ˆ1ï¼‰å®‰è£… React-Redux <a class="header-anchor" href="#_1-å®‰è£…-react-redux" aria-label="Permalink to &quot;ï¼ˆ1ï¼‰å®‰è£… React-Redux&quot;">â€‹</a></h3><p>åŒæ ·åœ°ï¼Œæˆ‘ä»¬ä»¥ <code>TodoList</code> ç»„ä»¶ä¸ºä¾‹ï¼Œæ¥çœ‹ä¸‹ <code>react-redux</code> çš„ä½¿ç”¨ã€‚é¦–å…ˆæ–°åˆ›å»ºä¸€ä¸ª <code>react</code> é¡¹ç›®ï¼ŒåŒæ—¶å®‰è£… <code>react-redux</code> ã€‚<strong>å…·ä½“å‘½ä»¤å¦‚ä¸‹ï¼š</strong></p><div class="language-js vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#E1E4E8;">npm install react</span><span style="color:#F97583;">-</span><span style="color:#E1E4E8;">redux</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#24292E;">npm install react</span><span style="color:#D73A49;">-</span><span style="color:#24292E;">redux</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br></div></div><h3 id="_2-é¡¹ç›®ç›®å½•" tabindex="-1">ï¼ˆ2ï¼‰é¡¹ç›®ç›®å½• <a class="header-anchor" href="#_2-é¡¹ç›®ç›®å½•" aria-label="Permalink to &quot;ï¼ˆ2ï¼‰é¡¹ç›®ç›®å½•&quot;">â€‹</a></h3><p>ä¸‹é¢å…ˆæ¥çœ‹é¡¹ç›®ç›®å½•ã€‚<strong>å…·ä½“å¦‚ä¸‹å›¾ï¼š</strong></p><p><img src="https://mondaylab-1309616765.cos.ap-shanghai.myqcloud.com/images/202305270717869.png" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°"></p><h3 id="_3-æ ¸å¿ƒå†…å®¹" tabindex="-1">ï¼ˆ3ï¼‰æ ¸å¿ƒå†…å®¹ <a class="header-anchor" href="#_3-æ ¸å¿ƒå†…å®¹" aria-label="Permalink to &quot;ï¼ˆ3ï¼‰æ ¸å¿ƒå†…å®¹&quot;">â€‹</a></h3><p><strong>ç¬¬ä¸€æ­¥</strong>ï¼Œå°† <code>TodoList</code> ç»„ä»¶æŒ‚è½½åˆ°é¡µé¢ä¸Šã€‚<code>src|index.js</code> æ–‡ä»¶ä¸‹çš„å†…å®¹å¦‚ä¸‹ï¼š</p><div class="language-js vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#F97583;">import</span><span style="color:#E1E4E8;"> React </span><span style="color:#F97583;">from</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">&#39;react&#39;</span><span style="color:#E1E4E8;">;</span></span>
<span class="line"><span style="color:#F97583;">import</span><span style="color:#E1E4E8;"> ReactDOM </span><span style="color:#F97583;">from</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">&#39;react-dom&#39;</span><span style="color:#E1E4E8;">;</span></span>
<span class="line"><span style="color:#F97583;">import</span><span style="color:#E1E4E8;"> TodoList </span><span style="color:#F97583;">from</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">&#39;./TodoList&#39;</span><span style="color:#E1E4E8;">;</span></span>
<span class="line"><span style="color:#F97583;">import</span><span style="color:#E1E4E8;"> { Provider } </span><span style="color:#F97583;">from</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">&#39;react-redux&#39;</span><span style="color:#E1E4E8;">;</span></span>
<span class="line"><span style="color:#F97583;">import</span><span style="color:#E1E4E8;"> store </span><span style="color:#F97583;">from</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">&#39;./store&#39;</span><span style="color:#E1E4E8;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F97583;">const</span><span style="color:#E1E4E8;"> </span><span style="color:#B392F0;">App</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> (</span></span>
<span class="line"><span style="color:#E1E4E8;">  </span><span style="color:#6A737D;">// è¡¨ç¤ºProvideré‡Œé¢æ‰€æœ‰çš„ç»„ä»¶ï¼Œéƒ½æœ‰èƒ½åŠ›è·å–åˆ°store</span></span>
<span class="line"><span style="color:#E1E4E8;">  &lt;</span><span style="color:#79B8FF;">Provider</span><span style="color:#E1E4E8;"> </span><span style="color:#B392F0;">store</span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;">{store}&gt;</span></span>
<span class="line"><span style="color:#E1E4E8;">    &lt;</span><span style="color:#79B8FF;">TodoList</span><span style="color:#E1E4E8;"> /&gt;</span></span>
<span class="line"><span style="color:#E1E4E8;">  &lt;/</span><span style="color:#79B8FF;">Provider</span><span style="color:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="color:#E1E4E8;">);</span></span>
<span class="line"></span>
<span class="line"><span style="color:#E1E4E8;">ReactDOM.</span><span style="color:#B392F0;">render</span><span style="color:#E1E4E8;">(App, document.</span><span style="color:#B392F0;">getElementById</span><span style="color:#E1E4E8;">(</span><span style="color:#9ECBFF;">&#39;root&#39;</span><span style="color:#E1E4E8;">));</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#D73A49;">import</span><span style="color:#24292E;"> React </span><span style="color:#D73A49;">from</span><span style="color:#24292E;"> </span><span style="color:#032F62;">&#39;react&#39;</span><span style="color:#24292E;">;</span></span>
<span class="line"><span style="color:#D73A49;">import</span><span style="color:#24292E;"> ReactDOM </span><span style="color:#D73A49;">from</span><span style="color:#24292E;"> </span><span style="color:#032F62;">&#39;react-dom&#39;</span><span style="color:#24292E;">;</span></span>
<span class="line"><span style="color:#D73A49;">import</span><span style="color:#24292E;"> TodoList </span><span style="color:#D73A49;">from</span><span style="color:#24292E;"> </span><span style="color:#032F62;">&#39;./TodoList&#39;</span><span style="color:#24292E;">;</span></span>
<span class="line"><span style="color:#D73A49;">import</span><span style="color:#24292E;"> { Provider } </span><span style="color:#D73A49;">from</span><span style="color:#24292E;"> </span><span style="color:#032F62;">&#39;react-redux&#39;</span><span style="color:#24292E;">;</span></span>
<span class="line"><span style="color:#D73A49;">import</span><span style="color:#24292E;"> store </span><span style="color:#D73A49;">from</span><span style="color:#24292E;"> </span><span style="color:#032F62;">&#39;./store&#39;</span><span style="color:#24292E;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#D73A49;">const</span><span style="color:#24292E;"> </span><span style="color:#6F42C1;">App</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">=</span><span style="color:#24292E;"> (</span></span>
<span class="line"><span style="color:#24292E;">  </span><span style="color:#6A737D;">// è¡¨ç¤ºProvideré‡Œé¢æ‰€æœ‰çš„ç»„ä»¶ï¼Œéƒ½æœ‰èƒ½åŠ›è·å–åˆ°store</span></span>
<span class="line"><span style="color:#24292E;">  &lt;</span><span style="color:#005CC5;">Provider</span><span style="color:#24292E;"> </span><span style="color:#6F42C1;">store</span><span style="color:#D73A49;">=</span><span style="color:#24292E;">{store}&gt;</span></span>
<span class="line"><span style="color:#24292E;">    &lt;</span><span style="color:#005CC5;">TodoList</span><span style="color:#24292E;"> /&gt;</span></span>
<span class="line"><span style="color:#24292E;">  &lt;/</span><span style="color:#005CC5;">Provider</span><span style="color:#24292E;">&gt;</span></span>
<span class="line"><span style="color:#24292E;">);</span></span>
<span class="line"></span>
<span class="line"><span style="color:#24292E;">ReactDOM.</span><span style="color:#6F42C1;">render</span><span style="color:#24292E;">(App, document.</span><span style="color:#6F42C1;">getElementById</span><span style="color:#24292E;">(</span><span style="color:#032F62;">&#39;root&#39;</span><span style="color:#24292E;">));</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br></div></div><p><code>Provider</code> æ˜¯ <code>react</code> æä¾›çš„ç¬¬ä¸€ä¸ªæ ¸å¿ƒ <code>API</code> ï¼Œå®ƒæ—¨åœ¨è¡¨æ˜ï¼Œ <code>Provider</code> é‡Œé¢æ‰€æœ‰çš„ç»„ä»¶ï¼Œéƒ½æœ‰èƒ½åŠ›è·å–åˆ° <code>store</code> ã€‚</p><hr><p><strong>ç¬¬äºŒæ­¥</strong>ï¼Œç¼–å†™ <code>src|TodoList.js</code> çš„å†…å®¹ã€‚<strong>å…·ä½“ä»£ç å¦‚ä¸‹ï¼š</strong></p><div class="language-js vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#F97583;">import</span><span style="color:#E1E4E8;"> React </span><span style="color:#F97583;">from</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">&#39;react&#39;</span><span style="color:#E1E4E8;">;</span></span>
<span class="line"><span style="color:#F97583;">import</span><span style="color:#E1E4E8;"> { connect } </span><span style="color:#F97583;">from</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">&#39;react-redux&#39;</span><span style="color:#E1E4E8;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F97583;">const</span><span style="color:#E1E4E8;"> </span><span style="color:#B392F0;">TodoList</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> (</span><span style="color:#FFAB70;">props</span><span style="color:#E1E4E8;">) </span><span style="color:#F97583;">=&gt;</span><span style="color:#E1E4E8;"> {</span></span>
<span class="line"><span style="color:#E1E4E8;">  </span><span style="color:#F97583;">const</span><span style="color:#E1E4E8;"> { </span><span style="color:#79B8FF;">inputValue</span><span style="color:#E1E4E8;">, </span><span style="color:#79B8FF;">list</span><span style="color:#E1E4E8;">, </span><span style="color:#79B8FF;">changeInputValue</span><span style="color:#E1E4E8;">, </span><span style="color:#79B8FF;">handleClick</span><span style="color:#E1E4E8;">, </span><span style="color:#79B8FF;">handleDelete</span><span style="color:#E1E4E8;"> } </span><span style="color:#F97583;">=</span></span>
<span class="line"><span style="color:#E1E4E8;">    props;</span></span>
<span class="line"><span style="color:#E1E4E8;">  </span><span style="color:#F97583;">return</span><span style="color:#E1E4E8;"> (</span></span>
<span class="line"><span style="color:#E1E4E8;">    &lt;</span><span style="color:#85E89D;">div</span><span style="color:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="color:#E1E4E8;">      &lt;</span><span style="color:#85E89D;">div</span><span style="color:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="color:#E1E4E8;">        &lt;</span><span style="color:#85E89D;">input</span><span style="color:#E1E4E8;"> </span><span style="color:#B392F0;">value</span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;">{inputValue} </span><span style="color:#B392F0;">onChange</span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;">{changeInputValue} /&gt;</span></span>
<span class="line"><span style="color:#E1E4E8;">        &lt;</span><span style="color:#85E89D;">button</span><span style="color:#E1E4E8;"> </span><span style="color:#B392F0;">onClick</span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;">{handleClick}&gt;æäº¤&lt;/</span><span style="color:#85E89D;">button</span><span style="color:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="color:#E1E4E8;">      &lt;/</span><span style="color:#85E89D;">div</span><span style="color:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="color:#E1E4E8;">      &lt;</span><span style="color:#85E89D;">ul</span><span style="color:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="color:#E1E4E8;">        {list.</span><span style="color:#B392F0;">map</span><span style="color:#E1E4E8;">((</span><span style="color:#FFAB70;">item</span><span style="color:#E1E4E8;">, </span><span style="color:#FFAB70;">index</span><span style="color:#E1E4E8;">) </span><span style="color:#F97583;">=&gt;</span><span style="color:#E1E4E8;"> {</span></span>
<span class="line"><span style="color:#E1E4E8;">          </span><span style="color:#F97583;">return</span><span style="color:#E1E4E8;"> (</span></span>
<span class="line"><span style="color:#E1E4E8;">            &lt;</span><span style="color:#85E89D;">li</span><span style="color:#E1E4E8;"> </span><span style="color:#B392F0;">onClick</span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;">{handleDelete} </span><span style="color:#B392F0;">key</span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;">{index}&gt;</span></span>
<span class="line"><span style="color:#E1E4E8;">              {item}</span></span>
<span class="line"><span style="color:#E1E4E8;">            &lt;/</span><span style="color:#85E89D;">li</span><span style="color:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="color:#E1E4E8;">          );</span></span>
<span class="line"><span style="color:#E1E4E8;">        })}</span></span>
<span class="line"><span style="color:#E1E4E8;">      &lt;/</span><span style="color:#85E89D;">ul</span><span style="color:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="color:#E1E4E8;">    &lt;/</span><span style="color:#85E89D;">div</span><span style="color:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="color:#E1E4E8;">  );</span></span>
<span class="line"><span style="color:#E1E4E8;">};</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F97583;">const</span><span style="color:#E1E4E8;"> </span><span style="color:#B392F0;">mapStateToProps</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> (</span><span style="color:#FFAB70;">state</span><span style="color:#E1E4E8;">) </span><span style="color:#F97583;">=&gt;</span><span style="color:#E1E4E8;"> {</span></span>
<span class="line"><span style="color:#E1E4E8;">  </span><span style="color:#F97583;">return</span><span style="color:#E1E4E8;"> {</span></span>
<span class="line"><span style="color:#E1E4E8;">    inputValue: state.inputValue,</span></span>
<span class="line"><span style="color:#E1E4E8;">    list: state.list,</span></span>
<span class="line"><span style="color:#E1E4E8;">  };</span></span>
<span class="line"><span style="color:#E1E4E8;">};</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D;">// store, dispatch, props</span></span>
<span class="line"><span style="color:#F97583;">const</span><span style="color:#E1E4E8;"> </span><span style="color:#B392F0;">mapDispatchToProps</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> (</span><span style="color:#FFAB70;">dispatch</span><span style="color:#E1E4E8;">) </span><span style="color:#F97583;">=&gt;</span><span style="color:#E1E4E8;"> {</span></span>
<span class="line"><span style="color:#E1E4E8;">  </span><span style="color:#F97583;">return</span><span style="color:#E1E4E8;"> {</span></span>
<span class="line"><span style="color:#E1E4E8;">    </span><span style="color:#B392F0;">changeInputValue</span><span style="color:#E1E4E8;">(</span><span style="color:#FFAB70;">e</span><span style="color:#E1E4E8;">) {</span></span>
<span class="line"><span style="color:#E1E4E8;">      </span><span style="color:#F97583;">const</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">action</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> {</span></span>
<span class="line"><span style="color:#E1E4E8;">        type: </span><span style="color:#9ECBFF;">&#39;change_input_value&#39;</span><span style="color:#E1E4E8;">,</span></span>
<span class="line"><span style="color:#E1E4E8;">        value: e.target.value,</span></span>
<span class="line"><span style="color:#E1E4E8;">      };</span></span>
<span class="line"><span style="color:#E1E4E8;">      </span><span style="color:#6A737D;">// console.log(action.value)</span></span>
<span class="line"><span style="color:#E1E4E8;">      </span><span style="color:#B392F0;">dispatch</span><span style="color:#E1E4E8;">(action);</span></span>
<span class="line"><span style="color:#E1E4E8;">    },</span></span>
<span class="line"><span style="color:#E1E4E8;">    </span><span style="color:#B392F0;">handleClick</span><span style="color:#E1E4E8;">() {</span></span>
<span class="line"><span style="color:#E1E4E8;">      </span><span style="color:#F97583;">const</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">action</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> {</span></span>
<span class="line"><span style="color:#E1E4E8;">        type: </span><span style="color:#9ECBFF;">&#39;add_item&#39;</span><span style="color:#E1E4E8;">,</span></span>
<span class="line"><span style="color:#E1E4E8;">      };</span></span>
<span class="line"><span style="color:#E1E4E8;">      </span><span style="color:#B392F0;">dispatch</span><span style="color:#E1E4E8;">(action);</span></span>
<span class="line"><span style="color:#E1E4E8;">    },</span></span>
<span class="line"><span style="color:#E1E4E8;">    </span><span style="color:#B392F0;">handleDelete</span><span style="color:#E1E4E8;">() {},</span></span>
<span class="line"><span style="color:#E1E4E8;">  };</span></span>
<span class="line"><span style="color:#E1E4E8;">};</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D;">// è®©æˆ‘ä»¬çš„TodoListå’Œstoreåšè¿æ¥</span></span>
<span class="line"><span style="color:#6A737D;">// TodoListæ˜¯ä¸€ä¸ªUIç»„ä»¶ï¼ŒconnectæŠŠè¿™ä¸ªUIç»„ä»¶å’Œå‰è¾¹çš„ä¸šåŠ¡é€»è¾‘ç›¸ç»“åˆï¼Œå¯ä»¥æŠŠå‰é¢æ‹¬å·çš„å†…å®¹ç§°ä¸ºæ˜¯å®¹å™¨ç»„ä»¶</span></span>
<span class="line"><span style="color:#F97583;">export</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">default</span><span style="color:#E1E4E8;"> </span><span style="color:#B392F0;">connect</span><span style="color:#E1E4E8;">(mapStateToProps, mapDispatchToProps)(TodoList);</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#D73A49;">import</span><span style="color:#24292E;"> React </span><span style="color:#D73A49;">from</span><span style="color:#24292E;"> </span><span style="color:#032F62;">&#39;react&#39;</span><span style="color:#24292E;">;</span></span>
<span class="line"><span style="color:#D73A49;">import</span><span style="color:#24292E;"> { connect } </span><span style="color:#D73A49;">from</span><span style="color:#24292E;"> </span><span style="color:#032F62;">&#39;react-redux&#39;</span><span style="color:#24292E;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#D73A49;">const</span><span style="color:#24292E;"> </span><span style="color:#6F42C1;">TodoList</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">=</span><span style="color:#24292E;"> (</span><span style="color:#E36209;">props</span><span style="color:#24292E;">) </span><span style="color:#D73A49;">=&gt;</span><span style="color:#24292E;"> {</span></span>
<span class="line"><span style="color:#24292E;">  </span><span style="color:#D73A49;">const</span><span style="color:#24292E;"> { </span><span style="color:#005CC5;">inputValue</span><span style="color:#24292E;">, </span><span style="color:#005CC5;">list</span><span style="color:#24292E;">, </span><span style="color:#005CC5;">changeInputValue</span><span style="color:#24292E;">, </span><span style="color:#005CC5;">handleClick</span><span style="color:#24292E;">, </span><span style="color:#005CC5;">handleDelete</span><span style="color:#24292E;"> } </span><span style="color:#D73A49;">=</span></span>
<span class="line"><span style="color:#24292E;">    props;</span></span>
<span class="line"><span style="color:#24292E;">  </span><span style="color:#D73A49;">return</span><span style="color:#24292E;"> (</span></span>
<span class="line"><span style="color:#24292E;">    &lt;</span><span style="color:#22863A;">div</span><span style="color:#24292E;">&gt;</span></span>
<span class="line"><span style="color:#24292E;">      &lt;</span><span style="color:#22863A;">div</span><span style="color:#24292E;">&gt;</span></span>
<span class="line"><span style="color:#24292E;">        &lt;</span><span style="color:#22863A;">input</span><span style="color:#24292E;"> </span><span style="color:#6F42C1;">value</span><span style="color:#D73A49;">=</span><span style="color:#24292E;">{inputValue} </span><span style="color:#6F42C1;">onChange</span><span style="color:#D73A49;">=</span><span style="color:#24292E;">{changeInputValue} /&gt;</span></span>
<span class="line"><span style="color:#24292E;">        &lt;</span><span style="color:#22863A;">button</span><span style="color:#24292E;"> </span><span style="color:#6F42C1;">onClick</span><span style="color:#D73A49;">=</span><span style="color:#24292E;">{handleClick}&gt;æäº¤&lt;/</span><span style="color:#22863A;">button</span><span style="color:#24292E;">&gt;</span></span>
<span class="line"><span style="color:#24292E;">      &lt;/</span><span style="color:#22863A;">div</span><span style="color:#24292E;">&gt;</span></span>
<span class="line"><span style="color:#24292E;">      &lt;</span><span style="color:#22863A;">ul</span><span style="color:#24292E;">&gt;</span></span>
<span class="line"><span style="color:#24292E;">        {list.</span><span style="color:#6F42C1;">map</span><span style="color:#24292E;">((</span><span style="color:#E36209;">item</span><span style="color:#24292E;">, </span><span style="color:#E36209;">index</span><span style="color:#24292E;">) </span><span style="color:#D73A49;">=&gt;</span><span style="color:#24292E;"> {</span></span>
<span class="line"><span style="color:#24292E;">          </span><span style="color:#D73A49;">return</span><span style="color:#24292E;"> (</span></span>
<span class="line"><span style="color:#24292E;">            &lt;</span><span style="color:#22863A;">li</span><span style="color:#24292E;"> </span><span style="color:#6F42C1;">onClick</span><span style="color:#D73A49;">=</span><span style="color:#24292E;">{handleDelete} </span><span style="color:#6F42C1;">key</span><span style="color:#D73A49;">=</span><span style="color:#24292E;">{index}&gt;</span></span>
<span class="line"><span style="color:#24292E;">              {item}</span></span>
<span class="line"><span style="color:#24292E;">            &lt;/</span><span style="color:#22863A;">li</span><span style="color:#24292E;">&gt;</span></span>
<span class="line"><span style="color:#24292E;">          );</span></span>
<span class="line"><span style="color:#24292E;">        })}</span></span>
<span class="line"><span style="color:#24292E;">      &lt;/</span><span style="color:#22863A;">ul</span><span style="color:#24292E;">&gt;</span></span>
<span class="line"><span style="color:#24292E;">    &lt;/</span><span style="color:#22863A;">div</span><span style="color:#24292E;">&gt;</span></span>
<span class="line"><span style="color:#24292E;">  );</span></span>
<span class="line"><span style="color:#24292E;">};</span></span>
<span class="line"></span>
<span class="line"><span style="color:#D73A49;">const</span><span style="color:#24292E;"> </span><span style="color:#6F42C1;">mapStateToProps</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">=</span><span style="color:#24292E;"> (</span><span style="color:#E36209;">state</span><span style="color:#24292E;">) </span><span style="color:#D73A49;">=&gt;</span><span style="color:#24292E;"> {</span></span>
<span class="line"><span style="color:#24292E;">  </span><span style="color:#D73A49;">return</span><span style="color:#24292E;"> {</span></span>
<span class="line"><span style="color:#24292E;">    inputValue: state.inputValue,</span></span>
<span class="line"><span style="color:#24292E;">    list: state.list,</span></span>
<span class="line"><span style="color:#24292E;">  };</span></span>
<span class="line"><span style="color:#24292E;">};</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D;">// store, dispatch, props</span></span>
<span class="line"><span style="color:#D73A49;">const</span><span style="color:#24292E;"> </span><span style="color:#6F42C1;">mapDispatchToProps</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">=</span><span style="color:#24292E;"> (</span><span style="color:#E36209;">dispatch</span><span style="color:#24292E;">) </span><span style="color:#D73A49;">=&gt;</span><span style="color:#24292E;"> {</span></span>
<span class="line"><span style="color:#24292E;">  </span><span style="color:#D73A49;">return</span><span style="color:#24292E;"> {</span></span>
<span class="line"><span style="color:#24292E;">    </span><span style="color:#6F42C1;">changeInputValue</span><span style="color:#24292E;">(</span><span style="color:#E36209;">e</span><span style="color:#24292E;">) {</span></span>
<span class="line"><span style="color:#24292E;">      </span><span style="color:#D73A49;">const</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">action</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">=</span><span style="color:#24292E;"> {</span></span>
<span class="line"><span style="color:#24292E;">        type: </span><span style="color:#032F62;">&#39;change_input_value&#39;</span><span style="color:#24292E;">,</span></span>
<span class="line"><span style="color:#24292E;">        value: e.target.value,</span></span>
<span class="line"><span style="color:#24292E;">      };</span></span>
<span class="line"><span style="color:#24292E;">      </span><span style="color:#6A737D;">// console.log(action.value)</span></span>
<span class="line"><span style="color:#24292E;">      </span><span style="color:#6F42C1;">dispatch</span><span style="color:#24292E;">(action);</span></span>
<span class="line"><span style="color:#24292E;">    },</span></span>
<span class="line"><span style="color:#24292E;">    </span><span style="color:#6F42C1;">handleClick</span><span style="color:#24292E;">() {</span></span>
<span class="line"><span style="color:#24292E;">      </span><span style="color:#D73A49;">const</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">action</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">=</span><span style="color:#24292E;"> {</span></span>
<span class="line"><span style="color:#24292E;">        type: </span><span style="color:#032F62;">&#39;add_item&#39;</span><span style="color:#24292E;">,</span></span>
<span class="line"><span style="color:#24292E;">      };</span></span>
<span class="line"><span style="color:#24292E;">      </span><span style="color:#6F42C1;">dispatch</span><span style="color:#24292E;">(action);</span></span>
<span class="line"><span style="color:#24292E;">    },</span></span>
<span class="line"><span style="color:#24292E;">    </span><span style="color:#6F42C1;">handleDelete</span><span style="color:#24292E;">() {},</span></span>
<span class="line"><span style="color:#24292E;">  };</span></span>
<span class="line"><span style="color:#24292E;">};</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D;">// è®©æˆ‘ä»¬çš„TodoListå’Œstoreåšè¿æ¥</span></span>
<span class="line"><span style="color:#6A737D;">// TodoListæ˜¯ä¸€ä¸ªUIç»„ä»¶ï¼ŒconnectæŠŠè¿™ä¸ªUIç»„ä»¶å’Œå‰è¾¹çš„ä¸šåŠ¡é€»è¾‘ç›¸ç»“åˆï¼Œå¯ä»¥æŠŠå‰é¢æ‹¬å·çš„å†…å®¹ç§°ä¸ºæ˜¯å®¹å™¨ç»„ä»¶</span></span>
<span class="line"><span style="color:#D73A49;">export</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">default</span><span style="color:#24292E;"> </span><span style="color:#6F42C1;">connect</span><span style="color:#24292E;">(mapStateToProps, mapDispatchToProps)(TodoList);</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br><span class="line-number">40</span><br><span class="line-number">41</span><br><span class="line-number">42</span><br><span class="line-number">43</span><br><span class="line-number">44</span><br><span class="line-number">45</span><br><span class="line-number">46</span><br><span class="line-number">47</span><br><span class="line-number">48</span><br><span class="line-number">49</span><br><span class="line-number">50</span><br><span class="line-number">51</span><br><span class="line-number">52</span><br><span class="line-number">53</span><br><span class="line-number">54</span><br><span class="line-number">55</span><br><span class="line-number">56</span><br></div></div><p>åœ¨ä¸Šé¢çš„ä»£ç ä¸­ï¼Œæˆ‘ä»¬è¦æ³¨æ„çš„æ˜¯ <code>react-redux</code> ä¸­çš„ <code>connect</code> ã€‚</p><p><code>connect</code> è¡¨ç¤ºçš„æ˜¯è¿æ¥ï¼Œé‚£ä¹ˆæ˜¯<strong>è°å’Œè°åšè¿æ¥å‘¢</strong>ï¼Ÿ <code>TodoList</code> å’Œ <code>store</code> åšè¿æ¥ã€‚å®ƒä»¬ä¿©åšè¿æ¥éœ€è¦ä¸€ä¸ª<strong>æ˜ å°„å…³ç³»</strong>ï¼Œè¿™ä¸ªæ˜ å°„å…³ç³»å°±åœ¨ <code>mapStateToProps</code> é‡Œé¢ã€‚</p><p>åœ¨ <code>mapStateToProps</code> ä¸­ï¼Œ <code>state</code> æŒ‡çš„æ˜¯ <code>store</code> é‡Œé¢çš„æ•°æ®ï¼Œé‚£ <code>store</code> é‡Œé¢çš„æ•°æ®ï¼Œå°±æŠŠå®ƒæ˜ å°„åˆ° <code>props</code> é‡Œé¢ï¼Œä¹‹åæˆ‘ä»¬å°±å¯ä»¥é€šè¿‡ <code>this.props.xxx</code> çš„æ–¹å¼ï¼Œå»è·å–åˆ° <code>store</code> é‡Œé¢çš„æ•°æ®ã€‚</p><hr><p><strong>ç¬¬ä¸‰æ­¥</strong>ï¼Œåˆ›å»º <code>reducer</code> ã€‚åœ¨ <code>src|store|reducer.js</code> ä¸‹è¿›è¡Œç¼–å†™ï¼Œ<strong>å…·ä½“ä»£ç å¦‚ä¸‹ï¼š</strong></p><div class="language-js vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#F97583;">const</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">defaultState</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> {</span></span>
<span class="line"><span style="color:#E1E4E8;">  inputValue: </span><span style="color:#9ECBFF;">&#39;&#39;</span><span style="color:#E1E4E8;">,</span></span>
<span class="line"><span style="color:#E1E4E8;">  list: [],</span></span>
<span class="line"><span style="color:#E1E4E8;">};</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F97583;">export</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">default</span><span style="color:#E1E4E8;"> (</span><span style="color:#FFAB70;">state</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> defaultState, </span><span style="color:#FFAB70;">action</span><span style="color:#E1E4E8;">) </span><span style="color:#F97583;">=&gt;</span><span style="color:#E1E4E8;"> {</span></span>
<span class="line"><span style="color:#E1E4E8;">  </span><span style="color:#F97583;">if</span><span style="color:#E1E4E8;"> (action.type </span><span style="color:#F97583;">===</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">&#39;change_input_value&#39;</span><span style="color:#E1E4E8;">) {</span></span>
<span class="line"><span style="color:#E1E4E8;">    </span><span style="color:#F97583;">const</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">newState</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">JSON</span><span style="color:#E1E4E8;">.</span><span style="color:#B392F0;">parse</span><span style="color:#E1E4E8;">(</span><span style="color:#79B8FF;">JSON</span><span style="color:#E1E4E8;">.</span><span style="color:#B392F0;">stringify</span><span style="color:#E1E4E8;">(state));</span></span>
<span class="line"><span style="color:#E1E4E8;">    newState.inputValue </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> action.value;</span></span>
<span class="line"><span style="color:#E1E4E8;">    </span><span style="color:#F97583;">return</span><span style="color:#E1E4E8;"> newState;</span></span>
<span class="line"><span style="color:#E1E4E8;">  }</span></span>
<span class="line"><span style="color:#E1E4E8;">  </span><span style="color:#F97583;">if</span><span style="color:#E1E4E8;"> (action.type </span><span style="color:#F97583;">===</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">&#39;add_item&#39;</span><span style="color:#E1E4E8;">) {</span></span>
<span class="line"><span style="color:#E1E4E8;">    </span><span style="color:#F97583;">const</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">newState</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">JSON</span><span style="color:#E1E4E8;">.</span><span style="color:#B392F0;">parse</span><span style="color:#E1E4E8;">(</span><span style="color:#79B8FF;">JSON</span><span style="color:#E1E4E8;">.</span><span style="color:#B392F0;">stringify</span><span style="color:#E1E4E8;">(state));</span></span>
<span class="line"><span style="color:#E1E4E8;">    newState.list.</span><span style="color:#B392F0;">push</span><span style="color:#E1E4E8;">(newState.inputValue);</span></span>
<span class="line"><span style="color:#E1E4E8;">    newState.inputValue </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">&#39;&#39;</span><span style="color:#E1E4E8;">;</span></span>
<span class="line"><span style="color:#E1E4E8;">    </span><span style="color:#F97583;">return</span><span style="color:#E1E4E8;"> newState;</span></span>
<span class="line"><span style="color:#E1E4E8;">  }</span></span>
<span class="line"><span style="color:#E1E4E8;">  </span><span style="color:#F97583;">return</span><span style="color:#E1E4E8;"> state;</span></span>
<span class="line"><span style="color:#E1E4E8;">};</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#D73A49;">const</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">defaultState</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">=</span><span style="color:#24292E;"> {</span></span>
<span class="line"><span style="color:#24292E;">  inputValue: </span><span style="color:#032F62;">&#39;&#39;</span><span style="color:#24292E;">,</span></span>
<span class="line"><span style="color:#24292E;">  list: [],</span></span>
<span class="line"><span style="color:#24292E;">};</span></span>
<span class="line"></span>
<span class="line"><span style="color:#D73A49;">export</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">default</span><span style="color:#24292E;"> (</span><span style="color:#E36209;">state</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">=</span><span style="color:#24292E;"> defaultState, </span><span style="color:#E36209;">action</span><span style="color:#24292E;">) </span><span style="color:#D73A49;">=&gt;</span><span style="color:#24292E;"> {</span></span>
<span class="line"><span style="color:#24292E;">  </span><span style="color:#D73A49;">if</span><span style="color:#24292E;"> (action.type </span><span style="color:#D73A49;">===</span><span style="color:#24292E;"> </span><span style="color:#032F62;">&#39;change_input_value&#39;</span><span style="color:#24292E;">) {</span></span>
<span class="line"><span style="color:#24292E;">    </span><span style="color:#D73A49;">const</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">newState</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">=</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">JSON</span><span style="color:#24292E;">.</span><span style="color:#6F42C1;">parse</span><span style="color:#24292E;">(</span><span style="color:#005CC5;">JSON</span><span style="color:#24292E;">.</span><span style="color:#6F42C1;">stringify</span><span style="color:#24292E;">(state));</span></span>
<span class="line"><span style="color:#24292E;">    newState.inputValue </span><span style="color:#D73A49;">=</span><span style="color:#24292E;"> action.value;</span></span>
<span class="line"><span style="color:#24292E;">    </span><span style="color:#D73A49;">return</span><span style="color:#24292E;"> newState;</span></span>
<span class="line"><span style="color:#24292E;">  }</span></span>
<span class="line"><span style="color:#24292E;">  </span><span style="color:#D73A49;">if</span><span style="color:#24292E;"> (action.type </span><span style="color:#D73A49;">===</span><span style="color:#24292E;"> </span><span style="color:#032F62;">&#39;add_item&#39;</span><span style="color:#24292E;">) {</span></span>
<span class="line"><span style="color:#24292E;">    </span><span style="color:#D73A49;">const</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">newState</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">=</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">JSON</span><span style="color:#24292E;">.</span><span style="color:#6F42C1;">parse</span><span style="color:#24292E;">(</span><span style="color:#005CC5;">JSON</span><span style="color:#24292E;">.</span><span style="color:#6F42C1;">stringify</span><span style="color:#24292E;">(state));</span></span>
<span class="line"><span style="color:#24292E;">    newState.list.</span><span style="color:#6F42C1;">push</span><span style="color:#24292E;">(newState.inputValue);</span></span>
<span class="line"><span style="color:#24292E;">    newState.inputValue </span><span style="color:#D73A49;">=</span><span style="color:#24292E;"> </span><span style="color:#032F62;">&#39;&#39;</span><span style="color:#24292E;">;</span></span>
<span class="line"><span style="color:#24292E;">    </span><span style="color:#D73A49;">return</span><span style="color:#24292E;"> newState;</span></span>
<span class="line"><span style="color:#24292E;">  }</span></span>
<span class="line"><span style="color:#24292E;">  </span><span style="color:#D73A49;">return</span><span style="color:#24292E;"> state;</span></span>
<span class="line"><span style="color:#24292E;">};</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br></div></div><p>å°† <code>store</code> ä¸­çš„æ•°æ®ç»™æ”¾åˆ° <code>reducer</code> å½“ä¸­å»è¿›è¡Œè®°å½•ã€‚</p><hr><p><strong>ç¬¬å››æ­¥</strong>ï¼Œå°† <code>reducer</code> ä¼ ç»™ <code>store</code> ã€‚åœ¨ <code>src|store|index.js</code> ä¸‹è¿›è¡Œç¼–å†™ï¼Œ<strong>å…·ä½“ä»£ç å¦‚ä¸‹ï¼š</strong></p><div class="language-js vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#F97583;">import</span><span style="color:#E1E4E8;"> { createStore } </span><span style="color:#F97583;">from</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">&#39;redux&#39;</span><span style="color:#E1E4E8;">;</span></span>
<span class="line"><span style="color:#F97583;">import</span><span style="color:#E1E4E8;"> reducer </span><span style="color:#F97583;">from</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">&#39;./reducer&#39;</span><span style="color:#E1E4E8;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F97583;">const</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">store</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> </span><span style="color:#B392F0;">createStore</span><span style="color:#E1E4E8;">(reducer);</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F97583;">export</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">default</span><span style="color:#E1E4E8;"> store;</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#D73A49;">import</span><span style="color:#24292E;"> { createStore } </span><span style="color:#D73A49;">from</span><span style="color:#24292E;"> </span><span style="color:#032F62;">&#39;redux&#39;</span><span style="color:#24292E;">;</span></span>
<span class="line"><span style="color:#D73A49;">import</span><span style="color:#24292E;"> reducer </span><span style="color:#D73A49;">from</span><span style="color:#24292E;"> </span><span style="color:#032F62;">&#39;./reducer&#39;</span><span style="color:#24292E;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#D73A49;">const</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">store</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">=</span><span style="color:#24292E;"> </span><span style="color:#6F42C1;">createStore</span><span style="color:#24292E;">(reducer);</span></span>
<span class="line"></span>
<span class="line"><span style="color:#D73A49;">export</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">default</span><span style="color:#24292E;"> store;</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><p>æˆ‘ä»¬å°† <code>reducer</code> ä¸­å­˜æ”¾çš„å†…å®¹è¿›è¡Œæ·±æ‹·è´ï¼Œå¹¶æŠŠå®ƒä¼ å›ç»™ <code>store</code> ã€‚è¿™æ ·ï¼Œå°±å½¢æˆäº†ä¸€ä¸ªæ•°æ®ä¼ é€’çš„é—­ç¯ã€‚</p><hr><p>æœ€åï¼Œæˆ‘ä»¬æ¥çœ‹ä¸€ä¸‹æµè§ˆå™¨æ˜¾ç¤ºçš„æ•ˆæœï¼š</p><p><img src="https://mondaylab-1309616765.cos.ap-shanghai.myqcloud.com/images/202305270717466.gif" alt="React-Redux"></p><p>ç›¸æ¯”äºä½¿ç”¨ä¸­é—´ä»¶æ¥è¯´ï¼Œ <code>React-Redux</code> çš„ä½¿ç”¨æ›´åŠ åœ°<strong>ç›´è§‚</strong>å’Œ<strong>ç®€æ´</strong>ã€‚åœ¨å®é™…é¡¹ç›®ä¸­ï¼Œä¸ç®¡æ˜¯ <code>redux</code> ä¸­é—´ä»¶ï¼Œè¿˜æ˜¯ <code>react-redux</code> ï¼Œéƒ½å€¼å¾—æ‹¿æ¥åšçŠ¶æ€ç®¡ç†ã€‚</p><p>é‚£ä¹ˆè¦æ³¨æ„çš„æ˜¯ï¼Œ<code>redux</code> ä¸­é—´ä»¶å’Œ <code>react-redux</code> ä¹‹é—´ï¼Œå„è‡ªåœ¨ä½¿ç”¨è¿‡ç¨‹ä¸­<strong>ä¸åŒçš„ç‚¹</strong>ï¼ŒåŒºåˆ†å¥½å³å¯ã€‚è‡³äºåœ¨é¡¹ç›®ä¸­<strong>ä½¿ç”¨å“ªä¸€ç§ç±»å‹</strong>ï¼Œå°±<strong>ä¾æ®å½“ä¸‹çš„é¡¹ç›®åœºæ™¯</strong>å»å†³å®šå°±å¥½å•¦ï¼</p><h1 id="ğŸš¦-åä¸€ã€ç»“æŸè¯­" tabindex="-1">ğŸš¦ åä¸€ã€ç»“æŸè¯­ <a class="header-anchor" href="#ğŸš¦-åä¸€ã€ç»“æŸè¯­" aria-label="Permalink to &quot;ğŸš¦ åä¸€ã€ç»“æŸè¯­&quot;">â€‹</a></h1><p>åœ¨ä¸Šé¢çš„æ–‡ç« ä¸­ï¼Œæˆ‘ä»¬è®²è§£äº† <code>Redux</code> è®¾è®¡å’Œä½¿ç”¨çš„ä¸‰é¡¹åŸåˆ™ï¼ŒåŒæ—¶ï¼Œä¹Ÿè®²è§£äº† <code>Redux</code> ä¸­çš„ä¸€äº›æ ¸å¿ƒ <code>API</code> ã€‚é™¤æ­¤ä¹‹å¤–å‘¢ï¼Œæˆ‘ä»¬è¿˜å­¦ä¹ äº† <code>redux</code> çš„ä¸­é—´ä»¶ï¼Œ <code>redux-thunk</code> å’Œ <code>redux-saga</code> ã€‚åŒæ—¶ï¼Œè¿˜å­¦ä¹ äº†å¦å¤–ä¸€ä¸ªåšçŠ¶æ€ç®¡ç†çš„å†…å®¹ï¼Œ <code>react-redux</code> ã€‚</p><p>åˆ°è¿™é‡Œï¼Œå…³äº <code>redux</code> çš„å†…å®¹å°±ä»‹ç»å®Œæ¯•å•¦ï¼ä¸çŸ¥é“å¤§å®¶æ˜¯å¦å¯¹ <code>redux</code> åˆæœ‰äº†æ–°çš„äº†è§£å‘¢ï¼Ÿ</p><h1 id="ğŸ£-å½©è›‹-one-more-thing" tabindex="-1">ğŸ£ å½©è›‹ One More Thing <a class="header-anchor" href="#ğŸ£-å½©è›‹-one-more-thing" aria-label="Permalink to &quot;ğŸ£ å½©è›‹ One More Thing&quot;">â€‹</a></h1><h2 id="å¾€æœŸæ¨è" tabindex="-1">ï¼ˆï¼šå¾€æœŸæ¨è <a class="header-anchor" href="#å¾€æœŸæ¨è" aria-label="Permalink to &quot;ï¼ˆï¼šå¾€æœŸæ¨è&quot;">â€‹</a></h2><p>ğŸ‘‰<a href="https://juejin.cn/post/7018019363139616805" target="_blank" rel="noreferrer">åˆæ¢ reactï¼Œç”¨ react å®ç°ä¸€ä¸ª todoList åŠŸèƒ½</a></p><p>ğŸ‘‰<a href="https://juejin.cn/post/7020631362142994469" target="_blank" rel="noreferrer">react åªåœç•™åœ¨è¡¨å±‚ï¼Ÿäº”å¤§çŸ¥è¯†ç‚¹å¸¦ä½ æ¢³ç†è¿›é˜¶çŸ¥è¯†</a></p>`,221),e=[o];function t(c,r,E,y,i,d){return n(),a("div",null,e)}const b=s(p,[["render",t]]);export{F as __pageData,b as default};
