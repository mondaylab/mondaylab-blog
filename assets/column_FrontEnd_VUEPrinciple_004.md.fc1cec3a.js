import{_ as s,c as n,o as a,N as l}from"./chunks/framework.6510d215.js";const C=JSON.parse('{"title":"vue2çš„å“åº”å¼åŸç†å­¦â€œåºŸâ€äº†å—ï¼Ÿç»§ç»­è§‚æ‘©vue3å“åº”å¼åŸç†Proxy","description":"","frontmatter":{"title":"vue2çš„å“åº”å¼åŸç†å­¦â€œåºŸâ€äº†å—ï¼Ÿç»§ç»­è§‚æ‘©vue3å“åº”å¼åŸç†Proxy","author":"å‘¨ä¸€","date":"2021-06-30","categories":["å‰ç«¯å¼€å‘"],"tags":["vue.jsåŸç†è§£æ"],"sidebar":"auto"},"headers":[{"level":1,"title":"å‰è¨€","slug":"å‰è¨€","link":"#å‰è¨€","children":[]},{"level":1,"title":"ä¸€ã€ğŸŸ© å›é¡¾ Object.defineProperty","slug":"ä¸€ã€ğŸŸ©-å›é¡¾-object-defineproperty","link":"#ä¸€ã€ğŸŸ©-å›é¡¾-object-defineproperty","children":[]},{"level":1,"title":"äºŒã€ğŸŸ¨Proxy åŸºæœ¬ä½¿ç”¨","slug":"äºŒã€ğŸŸ¨proxy-åŸºæœ¬ä½¿ç”¨","link":"#äºŒã€ğŸŸ¨proxy-åŸºæœ¬ä½¿ç”¨","children":[]},{"level":1,"title":"ä¸‰ã€ğŸŸ¦ å­¦ä¹  Proxy è¯­æ³•ï¼šReflect","slug":"ä¸‰ã€ğŸŸ¦-å­¦ä¹ -proxy-è¯­æ³•-reflect","link":"#ä¸‰ã€ğŸŸ¦-å­¦ä¹ -proxy-è¯­æ³•-reflect","children":[]},{"level":1,"title":"å››ã€ğŸŸ§Vue3 å¦‚ä½•ç”¨ Proxy å®ç°å“åº”å¼","slug":"å››ã€ğŸŸ§vue3-å¦‚ä½•ç”¨-proxy-å®ç°å“åº”å¼","link":"#å››ã€ğŸŸ§vue3-å¦‚ä½•ç”¨-proxy-å®ç°å“åº”å¼","children":[{"level":2,"title":"1ã€å®ç°å“åº”å¼","slug":"_1ã€å®ç°å“åº”å¼","link":"#_1ã€å®ç°å“åº”å¼","children":[]},{"level":2,"title":"2ã€Proxy æ€»ç»“","slug":"_2ã€proxy-æ€»ç»“","link":"#_2ã€proxy-æ€»ç»“","children":[{"level":3,"title":"ï¼ˆ1ï¼‰æ·±åº¦ç›‘å¬ï¼Œæ€§èƒ½æ›´å¥½","slug":"_1-æ·±åº¦ç›‘å¬-æ€§èƒ½æ›´å¥½","link":"#_1-æ·±åº¦ç›‘å¬-æ€§èƒ½æ›´å¥½","children":[]},{"level":3,"title":"ï¼ˆ2ï¼‰å¯ç›‘å¬ æ–°å¢/åˆ é™¤ å±æ€§","slug":"_2-å¯ç›‘å¬-æ–°å¢-åˆ é™¤-å±æ€§","link":"#_2-å¯ç›‘å¬-æ–°å¢-åˆ é™¤-å±æ€§","children":[]},{"level":3,"title":"ï¼ˆ3ï¼‰å¯ç›‘å¬æ•°ç»„å˜åŒ–","slug":"_3-å¯ç›‘å¬æ•°ç»„å˜åŒ–","link":"#_3-å¯ç›‘å¬æ•°ç»„å˜åŒ–","children":[]}]},{"level":2,"title":"3ã€ä¸¤è€…å¯¹æ¯”","slug":"_3ã€ä¸¤è€…å¯¹æ¯”","link":"#_3ã€ä¸¤è€…å¯¹æ¯”","children":[]}]},{"level":1,"title":"äº”ã€ğŸŸª ç»“æŸè¯­","slug":"äº”ã€ğŸŸª-ç»“æŸè¯­","link":"#äº”ã€ğŸŸª-ç»“æŸè¯­","children":[]}],"relativePath":"column/FrontEnd/VUEPrinciple/004.md","lastUpdated":1685151998000}'),p={name:"column/FrontEnd/VUEPrinciple/004.md"},e=l(`<h1 id="å‰è¨€" tabindex="-1">å‰è¨€ <a class="header-anchor" href="#å‰è¨€" aria-label="Permalink to &quot;å‰è¨€&quot;">â€‹</a></h1><p>ä¹‹å‰å†™è¿‡ä¸€ç¯‡æ–‡ç« è°ˆè®º <code>vue2.x</code> çš„<strong>å“åº”å¼åŸç†</strong>ï¼Œä½†å› ä¸º <code>vue3</code> ä¹Ÿæ¥äº†ï¼Œç´§è·Ÿç€ <code>vue3</code> çš„æ­¥ä¼ï¼Œå‘¨ä¸€å¼€å§‹å­¦èµ·äº† <code>vue3</code> çš„å“åº”å¼åŸç†ã€‚</p><p>å¤§å®¶åº”è¯¥éƒ½å¬è¿‡ï¼Œ <code>vue3</code> ç”¨ <code>proxy</code> æ¥è§£å†³å“åº”å¼åŸç†ï¼ŒåŒæ—¶å®ƒè§£å†³äº† <code>vue2</code> ä¸­ <code>Object.definePropery</code> å­˜åœ¨çš„ä¸€äº›é—®é¢˜ï¼Œä½†åŒæ—¶ä¹Ÿå¸¦æ¥äº†ä¸€äº›é—®é¢˜ã€‚</p><p>åœ¨ä¸‹é¢çš„è¿™ç¯‡æ–‡ç« ä¸­ï¼Œå°†è®²è§£å…³äº <code>vue3</code> ç”¨ <code>proxy</code> å¦‚ä½•å®ç°å“åº”å¼ï¼Œä»¥åŠå¸¦æ¥çš„ä¸€äº›é—®é¢˜ã€‚ä¸€èµ·æ¥å­¦ä¹ å§ ğŸ’¯</p><h1 id="ä¸€ã€ğŸŸ©-å›é¡¾-object-defineproperty" tabindex="-1">ä¸€ã€ğŸŸ© å›é¡¾ Object.defineProperty <a class="header-anchor" href="#ä¸€ã€ğŸŸ©-å›é¡¾-object-defineproperty" aria-label="Permalink to &quot;ä¸€ã€ğŸŸ© å›é¡¾ Object.defineProperty&quot;">â€‹</a></h1><p>è¿™é‡Œéœ€è¦å¤§å®¶å¯¹ <code>ObjectProperty</code> çš„çŸ¥è¯†ç‚¹æœ‰ä¸€ä¸ªé¢„å…ˆäº†è§£ï¼Œ<a href="https://blog.csdn.net/weixin_44803753/article/details/117535265" target="_blank" rel="noreferrer">å¦‚æœ‰éœ€è¦äº†è§£å¯ç‚¹å‡»æ–‡ç« è¿›è¡ŒæŸ¥çœ‹~</a></p><p>ç°åœ¨ï¼Œæˆ‘ä»¬æ¥å›é¡¾ä¸‹ <code>Object.defineProperty</code> çš„<strong>ç¼ºç‚¹ï¼š</strong></p><ul><li>æ·±åº¦ç›‘å¬æ—¶éœ€è¦<strong>ä¸€æ¬¡æ€§</strong>é€’å½’ï¼›</li><li>æ— æ³•ç›‘å¬<strong>æ–°å¢å±æ€§</strong>/<strong>åˆ é™¤å±æ€§</strong>ï¼ˆéœ€è¦é…åˆ <code>Vue.set</code> æˆ– <code>Vue.delete</code> ä½¿ç”¨ï¼‰ï¼›</li><li>æ— æ³•åŸç”Ÿ<strong>ç›‘å¬æ•°ç»„</strong>ï¼Œéœ€è¦ç‰¹æ®Šå¤„ç†ã€‚</li></ul><p>å¸¦ç€ <code>Object.defineProperty</code> çš„è¿™å‡ ä¸ªç¼ºç‚¹ï¼Œæ¥ä¸‹æ¥æˆ‘ä»¬å¼€å§‹è¿›å…¥ <code>Proxy</code> çš„ä¸–ç•Œã€‚</p><h1 id="äºŒã€ğŸŸ¨proxy-åŸºæœ¬ä½¿ç”¨" tabindex="-1">äºŒã€ğŸŸ¨Proxy åŸºæœ¬ä½¿ç”¨ <a class="header-anchor" href="#äºŒã€ğŸŸ¨proxy-åŸºæœ¬ä½¿ç”¨" aria-label="Permalink to &quot;äºŒã€ğŸŸ¨Proxy åŸºæœ¬ä½¿ç”¨&quot;">â€‹</a></h1><p>ä¸‹é¢ç”¨ä¸€æ®µä»£ç æ¥æ¼”ç¤º <code>Proxy</code> çš„åŸºæœ¬ä½¿ç”¨ã€‚<strong>å…·ä½“ä»£ç å¦‚ä¸‹ï¼š</strong></p><div class="language-js line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#C792EA;">const</span><span style="color:#A6ACCD;"> data </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#F07178;">name</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">monday</span><span style="color:#89DDFF;">&#39;</span><span style="color:#89DDFF;">,</span></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#F07178;">age</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">18</span><span style="color:#89DDFF;">,</span></span>
<span class="line"><span style="color:#89DDFF;">};</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;">//const data = [&#39;a&#39;, &#39;b&#39;, &#39;c&#39;]</span></span>
<span class="line"></span>
<span class="line"><span style="color:#C792EA;">const</span><span style="color:#A6ACCD;"> proxyData </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">new</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">Proxy</span><span style="color:#A6ACCD;">(data</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#F07178;">get</span><span style="color:#89DDFF;">(</span><span style="color:#A6ACCD;font-style:italic;">target</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> </span><span style="color:#A6ACCD;font-style:italic;">key</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> </span><span style="color:#A6ACCD;font-style:italic;">receiver</span><span style="color:#89DDFF;">)</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#89DDFF;">    </span><span style="color:#676E95;font-style:italic;">//åªå¤„ç†æœ¬èº«(éåŸå‹çš„)å±æ€§</span></span>
<span class="line"><span style="color:#F07178;">    </span><span style="color:#C792EA;">const</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">ownKeys</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">=</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">Reflect</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">ownKeys</span><span style="color:#F07178;">(</span><span style="color:#A6ACCD;">target</span><span style="color:#F07178;">)</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#F07178;">    </span><span style="color:#89DDFF;font-style:italic;">if</span><span style="color:#F07178;"> (</span><span style="color:#A6ACCD;">oenKeys</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">includes</span><span style="color:#F07178;">(</span><span style="color:#A6ACCD;">key</span><span style="color:#F07178;">)) </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#F07178;">      </span><span style="color:#A6ACCD;">console</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">log</span><span style="color:#F07178;">(</span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">get</span><span style="color:#89DDFF;">&#39;</span><span style="color:#89DDFF;">,</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">key</span><span style="color:#F07178;">)</span><span style="color:#89DDFF;">;</span><span style="color:#F07178;"> </span><span style="color:#676E95;font-style:italic;">//ç›‘å¬</span></span>
<span class="line"><span style="color:#F07178;">    </span><span style="color:#89DDFF;">}</span></span>
<span class="line"><span style="color:#F07178;">    </span><span style="color:#C792EA;">const</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">result</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">=</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">Reflect</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">get</span><span style="color:#F07178;">(</span><span style="color:#A6ACCD;">target</span><span style="color:#89DDFF;">,</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">key</span><span style="color:#89DDFF;">,</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">receiver</span><span style="color:#F07178;">)</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#F07178;">    </span><span style="color:#89DDFF;font-style:italic;">return</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">result</span><span style="color:#89DDFF;">;</span><span style="color:#F07178;"> </span><span style="color:#676E95;font-style:italic;">// è¿”å›ç»“æœ</span></span>
<span class="line"><span style="color:#F07178;">  </span><span style="color:#89DDFF;">},</span></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#F07178;">set</span><span style="color:#89DDFF;">(</span><span style="color:#A6ACCD;font-style:italic;">target</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> </span><span style="color:#A6ACCD;font-style:italic;">key</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> </span><span style="color:#A6ACCD;font-style:italic;">val</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> </span><span style="color:#A6ACCD;font-style:italic;">receiver</span><span style="color:#89DDFF;">)</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#89DDFF;">    </span><span style="color:#676E95;font-style:italic;">//é‡å¤çš„æ•°æ®ï¼Œä¸å¤„ç†</span></span>
<span class="line"><span style="color:#F07178;">    </span><span style="color:#89DDFF;font-style:italic;">if</span><span style="color:#F07178;"> (</span><span style="color:#A6ACCD;">val</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">===</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">target</span><span style="color:#F07178;">[</span><span style="color:#A6ACCD;">key</span><span style="color:#F07178;">]) </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#F07178;">      </span><span style="color:#89DDFF;font-style:italic;">return</span><span style="color:#F07178;"> </span><span style="color:#FF9CAC;">true</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#F07178;">    </span><span style="color:#89DDFF;">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F07178;">    </span><span style="color:#C792EA;">const</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">result</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">=</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">Reflect</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">set</span><span style="color:#F07178;">(</span><span style="color:#A6ACCD;">target</span><span style="color:#89DDFF;">,</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">key</span><span style="color:#89DDFF;">,</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">val</span><span style="color:#89DDFF;">,</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">receiver</span><span style="color:#F07178;">)</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#F07178;">    </span><span style="color:#A6ACCD;">console</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">log</span><span style="color:#F07178;">(</span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">set</span><span style="color:#89DDFF;">&#39;</span><span style="color:#89DDFF;">,</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">key</span><span style="color:#89DDFF;">,</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">val</span><span style="color:#F07178;">)</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#89DDFF;">    </span><span style="color:#676E95;font-style:italic;">//console.log(&#39;result&#39;, result) //true</span></span>
<span class="line"><span style="color:#F07178;">    </span><span style="color:#89DDFF;font-style:italic;">return</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">result</span><span style="color:#89DDFF;">;</span><span style="color:#F07178;"> </span><span style="color:#676E95;font-style:italic;">// æ˜¯å¦è®¾ç½®æˆåŠŸ</span></span>
<span class="line"><span style="color:#F07178;">  </span><span style="color:#89DDFF;">},</span></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#F07178;">deleteProperty</span><span style="color:#89DDFF;">(</span><span style="color:#A6ACCD;font-style:italic;">target</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> </span><span style="color:#A6ACCD;font-style:italic;">key</span><span style="color:#89DDFF;">)</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#F07178;">    </span><span style="color:#C792EA;">const</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">result</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">=</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">Reflect</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">deleteProperty</span><span style="color:#F07178;">(</span><span style="color:#A6ACCD;">target</span><span style="color:#89DDFF;">,</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">key</span><span style="color:#F07178;">)</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#F07178;">    </span><span style="color:#A6ACCD;">console</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">log</span><span style="color:#F07178;">(</span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">delete property</span><span style="color:#89DDFF;">&#39;</span><span style="color:#89DDFF;">,</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">key</span><span style="color:#F07178;">)</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#F07178;">    </span><span style="color:#89DDFF;font-style:italic;">return</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">result</span><span style="color:#89DDFF;">;</span><span style="color:#F07178;"> </span><span style="color:#676E95;font-style:italic;">// æ˜¯å¦åˆ é™¤æˆåŠŸ</span></span>
<span class="line"><span style="color:#F07178;">  </span><span style="color:#89DDFF;">},</span></span>
<span class="line"><span style="color:#89DDFF;">}</span><span style="color:#A6ACCD;">)</span><span style="color:#89DDFF;">;</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br></div></div><p>é€šè¿‡ä»¥ä¸Šä»£ç å¯å¾—ï¼Œæˆ‘ä»¬å…ˆå®šä¹‰ä¸€ä¸ªå¯¹è±¡å­—é¢é‡çš„ <code>data</code> ï¼Œä¹‹ååœ¨ä½œä¸º <code>Proxy</code> å®ä¾‹åŒ–çš„å‚æ•°è¿›è¡Œä¼ é€’ã€‚ä¸” <code>proxyData</code> å®ç°äº† <code>get</code> ã€ <code>set</code> å’Œ <code>deleteProperty</code> çš„æ–¹æ³•ï¼Œå¯ä»¥å¯¹æ•°æ®è¿›è¡Œ<strong>å¢åˆ æ”¹</strong>æ“ä½œã€‚</p><h1 id="ä¸‰ã€ğŸŸ¦-å­¦ä¹ -proxy-è¯­æ³•-reflect" tabindex="-1">ä¸‰ã€ğŸŸ¦ å­¦ä¹  Proxy è¯­æ³•ï¼šReflect <a class="header-anchor" href="#ä¸‰ã€ğŸŸ¦-å­¦ä¹ -proxy-è¯­æ³•-reflect" aria-label="Permalink to &quot;ä¸‰ã€ğŸŸ¦ å­¦ä¹  Proxy è¯­æ³•ï¼šReflect&quot;">â€‹</a></h1><p>æˆ‘ä»¬å†æ¥è®¤è¯† <code>Proxy</code> çš„ä¸€ä¸ªå¥½æœ‹å‹ï¼Œ<strong>Reflect</strong>ã€‚</p><p><code>Reflect</code> å¯¹è±¡æœ‰ç€å’Œ <code>Proxy</code> ä¸€ä¸€å¯¹åº”çš„èƒ½åŠ›ï¼Œ<strong>Reflect å¯¹è±¡</strong>ä¸€å…±æœ‰ <strong>13 ä¸ªé™æ€æ–¹æ³•</strong>ï¼Œè¿™ä¹Ÿå°±æ˜¯æˆ‘ä»¬å¹³å¸¸æ‰€å¬åˆ°çš„ <code>proxy</code> æœ‰å¤šè¾¾<strong>13 ç§æ‹¦æˆªè¡Œä¸º</strong>ï¼Œè€Œ <code>Reflect</code> çš„è¿™ 13 ç§é™æ€æ–¹æ³•åŒ¹é…çš„å°±æ˜¯ <code>Proxy</code> çš„<strong>13 ç§æ‹¦æˆªè¡Œä¸º</strong> ã€‚</p><table><thead><tr><th style="text-align:center;">é™æ€æ–¹æ³•åˆ—è¡¨</th></tr></thead><tbody><tr><td style="text-align:center;">Reflect.get(target, name, receiver)</td></tr><tr><td style="text-align:center;">Reflect.set(target, name, value, receiver)</td></tr><tr><td style="text-align:center;">Reflect.has(obj, name)</td></tr><tr><td style="text-align:center;">Reflect.deleteProperty(obj, name)</td></tr><tr><td style="text-align:center;">Reflect.construct(target, args)</td></tr><tr><td style="text-align:center;">Reflect.getPrototypeOf(obj)</td></tr><tr><td style="text-align:center;">Reflect.setPrototypeOf(obj, newProto)</td></tr><tr><td style="text-align:center;">Reflect.apply(func, thisArg, args)</td></tr><tr><td style="text-align:center;">Reflect.defineProperty(target, propertyKey, attribute)</td></tr><tr><td style="text-align:center;">Reflect.getOwnPropertyDescriptor(target, propertyKey)</td></tr><tr><td style="text-align:center;">Reflect.isExtensible(target)</td></tr><tr><td style="text-align:center;">Reflect.preventExtensions(target)</td></tr><tr><td style="text-align:center;">Reflect.ownKeys(target)</td></tr></tbody></table><p><code>Reflect</code> çš„å‡ºç°æ˜¯ä¸ºäº†æ›¿æ¢æ‰ <code>Object</code> ä¸Šçš„å·¥å…·å‡½æ•°ï¼Œè¿™é‡Œä¸åšå…·ä½“ä»‹ç»ï¼Œ<a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Reflect/Comparing_Reflect_and_Object_methods" target="_blank" rel="noreferrer">è¯¦æƒ…å¯æŸ¥çœ‹æ–‡æ¡£</a> ã€‚</p><h1 id="å››ã€ğŸŸ§vue3-å¦‚ä½•ç”¨-proxy-å®ç°å“åº”å¼" tabindex="-1">å››ã€ğŸŸ§Vue3 å¦‚ä½•ç”¨ Proxy å®ç°å“åº”å¼ <a class="header-anchor" href="#å››ã€ğŸŸ§vue3-å¦‚ä½•ç”¨-proxy-å®ç°å“åº”å¼" aria-label="Permalink to &quot;å››ã€ğŸŸ§Vue3 å¦‚ä½•ç”¨ Proxy å®ç°å“åº”å¼&quot;">â€‹</a></h1><h2 id="_1ã€å®ç°å“åº”å¼" tabindex="-1">1ã€å®ç°å“åº”å¼ <a class="header-anchor" href="#_1ã€å®ç°å“åº”å¼" aria-label="Permalink to &quot;1ã€å®ç°å“åº”å¼&quot;">â€‹</a></h2><p>ä¸‹é¢æ¥å®ç° Proxy çš„å“åº”å¼ã€‚<strong>é™„ä¸Šä»£ç ï¼š</strong></p><div class="language-JS line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">JS</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#676E95;font-style:italic;">// åˆ›å»ºå“åº”å¼</span></span>
<span class="line"><span style="color:#C792EA;">function</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">reactive</span><span style="color:#89DDFF;">(</span><span style="color:#A6ACCD;font-style:italic;">target</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{})</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#F07178;">    </span><span style="color:#89DDFF;font-style:italic;">if</span><span style="color:#F07178;"> (</span><span style="color:#89DDFF;">typeof</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">target</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">!==</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">object</span><span style="color:#89DDFF;">&#39;</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">||</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">target</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">==</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">null</span><span style="color:#F07178;">) </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#89DDFF;">        </span><span style="color:#676E95;font-style:italic;">// ä¸æ˜¯å¯¹è±¡æˆ–æ•°ç»„ï¼Œåˆ™è¿”å›</span></span>
<span class="line"><span style="color:#F07178;">        </span><span style="color:#89DDFF;font-style:italic;">return</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">target</span></span>
<span class="line"><span style="color:#F07178;">    </span><span style="color:#89DDFF;">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#89DDFF;">    </span><span style="color:#676E95;font-style:italic;">// ä»£ç†é…ç½®</span></span>
<span class="line"><span style="color:#F07178;">    </span><span style="color:#C792EA;">const</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">proxyConf</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">=</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#F07178;">        get</span><span style="color:#89DDFF;">(</span><span style="color:#A6ACCD;font-style:italic;">target</span><span style="color:#89DDFF;">,</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;font-style:italic;">key</span><span style="color:#89DDFF;">,</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;font-style:italic;">receiver</span><span style="color:#89DDFF;">)</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#89DDFF;">            </span><span style="color:#676E95;font-style:italic;">// åªå¤„ç†æœ¬èº«ï¼ˆéåŸå‹çš„ï¼‰å±æ€§</span></span>
<span class="line"><span style="color:#F07178;">            </span><span style="color:#C792EA;">const</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">ownKeys</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">=</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">Reflect</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">ownKeys</span><span style="color:#F07178;">(</span><span style="color:#A6ACCD;">target</span><span style="color:#F07178;">)</span></span>
<span class="line"><span style="color:#F07178;">            </span><span style="color:#89DDFF;font-style:italic;">if</span><span style="color:#F07178;"> (</span><span style="color:#A6ACCD;">ownKeys</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">includes</span><span style="color:#F07178;">(</span><span style="color:#A6ACCD;">key</span><span style="color:#F07178;">)) </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#F07178;">                </span><span style="color:#A6ACCD;">console</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">log</span><span style="color:#F07178;">(</span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">get</span><span style="color:#89DDFF;">&#39;</span><span style="color:#89DDFF;">,</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">key</span><span style="color:#F07178;">) </span><span style="color:#676E95;font-style:italic;">// ç›‘å¬</span></span>
<span class="line"><span style="color:#F07178;">            </span><span style="color:#89DDFF;">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F07178;">            </span><span style="color:#C792EA;">const</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">result</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">=</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">Reflect</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">get</span><span style="color:#F07178;">(</span><span style="color:#A6ACCD;">target</span><span style="color:#89DDFF;">,</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">key</span><span style="color:#89DDFF;">,</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">receiver</span><span style="color:#F07178;">)</span></span>
<span class="line"></span>
<span class="line"><span style="color:#89DDFF;">            </span><span style="color:#676E95;font-style:italic;">// æ·±åº¦ç›‘å¬</span></span>
<span class="line"><span style="color:#F07178;">            </span><span style="color:#89DDFF;font-style:italic;">return</span><span style="color:#F07178;"> </span><span style="color:#82AAFF;">reactive</span><span style="color:#F07178;">(</span><span style="color:#A6ACCD;">result</span><span style="color:#F07178;">)</span></span>
<span class="line"><span style="color:#F07178;">        </span><span style="color:#89DDFF;">},</span></span>
<span class="line"><span style="color:#F07178;">        set</span><span style="color:#89DDFF;">(</span><span style="color:#A6ACCD;font-style:italic;">target</span><span style="color:#89DDFF;">,</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;font-style:italic;">key</span><span style="color:#89DDFF;">,</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;font-style:italic;">val</span><span style="color:#89DDFF;">,</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;font-style:italic;">receiver</span><span style="color:#89DDFF;">)</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#89DDFF;">            </span><span style="color:#676E95;font-style:italic;">// é‡å¤çš„æ•°æ®ï¼Œä¸å¤„ç†</span></span>
<span class="line"><span style="color:#F07178;">            </span><span style="color:#89DDFF;font-style:italic;">if</span><span style="color:#F07178;"> (</span><span style="color:#A6ACCD;">val</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">===</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">target</span><span style="color:#F07178;">[</span><span style="color:#A6ACCD;">key</span><span style="color:#F07178;">]) </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#F07178;">                </span><span style="color:#89DDFF;font-style:italic;">return</span><span style="color:#F07178;"> </span><span style="color:#FF9CAC;">true</span></span>
<span class="line"><span style="color:#F07178;">            </span><span style="color:#89DDFF;">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F07178;">            </span><span style="color:#C792EA;">const</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">ownKeys</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">=</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">Reflect</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">ownKeys</span><span style="color:#F07178;">(</span><span style="color:#A6ACCD;">target</span><span style="color:#F07178;">)</span></span>
<span class="line"><span style="color:#89DDFF;">            </span><span style="color:#676E95;font-style:italic;">// åˆ¤æ–­æ˜¯å·²æœ‰å±æ€§è¿˜æ˜¯æ–°å¢å±æ€§</span></span>
<span class="line"><span style="color:#F07178;">            </span><span style="color:#89DDFF;font-style:italic;">if</span><span style="color:#F07178;"> (</span><span style="color:#A6ACCD;">ownKeys</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">includes</span><span style="color:#F07178;">(</span><span style="color:#A6ACCD;">key</span><span style="color:#F07178;">)) </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#F07178;">                </span><span style="color:#A6ACCD;">console</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">log</span><span style="color:#F07178;">(</span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">å·²æœ‰çš„ key</span><span style="color:#89DDFF;">&#39;</span><span style="color:#89DDFF;">,</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">key</span><span style="color:#F07178;">)</span></span>
<span class="line"><span style="color:#F07178;">            </span><span style="color:#89DDFF;">}</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;font-style:italic;">else</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#F07178;">                </span><span style="color:#A6ACCD;">console</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">log</span><span style="color:#F07178;">(</span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">æ–°å¢çš„ key</span><span style="color:#89DDFF;">&#39;</span><span style="color:#89DDFF;">,</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">key</span><span style="color:#F07178;">)</span></span>
<span class="line"><span style="color:#F07178;">            </span><span style="color:#89DDFF;">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F07178;">            </span><span style="color:#C792EA;">const</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">result</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">=</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">Reflect</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">set</span><span style="color:#F07178;">(</span><span style="color:#A6ACCD;">target</span><span style="color:#89DDFF;">,</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">key</span><span style="color:#89DDFF;">,</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">val</span><span style="color:#89DDFF;">,</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">receiver</span><span style="color:#F07178;">)</span></span>
<span class="line"><span style="color:#F07178;">            </span><span style="color:#A6ACCD;">console</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">log</span><span style="color:#F07178;">(</span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">set</span><span style="color:#89DDFF;">&#39;</span><span style="color:#89DDFF;">,</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">key</span><span style="color:#89DDFF;">,</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">val</span><span style="color:#F07178;">)</span></span>
<span class="line"><span style="color:#89DDFF;">            </span><span style="color:#676E95;font-style:italic;">// console.log(&#39;result&#39;, result) // true</span></span>
<span class="line"><span style="color:#F07178;">            </span><span style="color:#89DDFF;font-style:italic;">return</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">result</span><span style="color:#F07178;"> </span><span style="color:#676E95;font-style:italic;">// æ˜¯å¦è®¾ç½®æˆåŠŸ</span></span>
<span class="line"><span style="color:#F07178;">        </span><span style="color:#89DDFF;">},</span></span>
<span class="line"><span style="color:#F07178;">        deleteProperty</span><span style="color:#89DDFF;">(</span><span style="color:#A6ACCD;font-style:italic;">target</span><span style="color:#89DDFF;">,</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;font-style:italic;">key</span><span style="color:#89DDFF;">)</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#F07178;">            </span><span style="color:#C792EA;">const</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">result</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">=</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">Reflect</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">deleteProperty</span><span style="color:#F07178;">(</span><span style="color:#A6ACCD;">target</span><span style="color:#89DDFF;">,</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">key</span><span style="color:#F07178;">)</span></span>
<span class="line"><span style="color:#F07178;">            </span><span style="color:#A6ACCD;">console</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">log</span><span style="color:#F07178;">(</span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">delete property</span><span style="color:#89DDFF;">&#39;</span><span style="color:#89DDFF;">,</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">key</span><span style="color:#F07178;">)</span></span>
<span class="line"><span style="color:#89DDFF;">            </span><span style="color:#676E95;font-style:italic;">// console.log(&#39;result&#39;, result) // true</span></span>
<span class="line"><span style="color:#F07178;">            </span><span style="color:#89DDFF;font-style:italic;">return</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">result</span><span style="color:#F07178;"> </span><span style="color:#676E95;font-style:italic;">// æ˜¯å¦åˆ é™¤æˆåŠŸ</span></span>
<span class="line"><span style="color:#F07178;">        </span><span style="color:#89DDFF;">}</span></span>
<span class="line"><span style="color:#F07178;">    </span><span style="color:#89DDFF;">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#89DDFF;">    </span><span style="color:#676E95;font-style:italic;">// ç”Ÿæˆä»£ç†å¯¹è±¡</span></span>
<span class="line"><span style="color:#F07178;">    </span><span style="color:#C792EA;">const</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">observed</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">=</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">new</span><span style="color:#F07178;"> </span><span style="color:#82AAFF;">Proxy</span><span style="color:#F07178;">(</span><span style="color:#A6ACCD;">target</span><span style="color:#89DDFF;">,</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">proxyConf</span><span style="color:#F07178;">)</span></span>
<span class="line"><span style="color:#F07178;">    </span><span style="color:#89DDFF;font-style:italic;">return</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">observed</span></span>
<span class="line"><span style="color:#89DDFF;">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#676E95;font-style:italic;">// æµ‹è¯•æ•°æ®</span></span>
<span class="line"><span style="color:#C792EA;">const</span><span style="color:#A6ACCD;"> data </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#F07178;">name</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">monday</span><span style="color:#89DDFF;">&#39;</span><span style="color:#89DDFF;">,</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#F07178;">age</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">18</span><span style="color:#89DDFF;">,</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#F07178;">info</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#A6ACCD;">        </span><span style="color:#F07178;">city</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">FuZhou</span><span style="color:#89DDFF;">&#39;</span><span style="color:#89DDFF;">,</span></span>
<span class="line"><span style="color:#A6ACCD;">        </span><span style="color:#F07178;">a</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#A6ACCD;">            </span><span style="color:#F07178;">b</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#A6ACCD;">                </span><span style="color:#F07178;">c</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#A6ACCD;">                    </span><span style="color:#F07178;">d</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#A6ACCD;">                        </span><span style="color:#F07178;">e</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">100</span></span>
<span class="line"><span style="color:#A6ACCD;">                    </span><span style="color:#89DDFF;">}</span></span>
<span class="line"><span style="color:#A6ACCD;">                </span><span style="color:#89DDFF;">}</span></span>
<span class="line"><span style="color:#A6ACCD;">            </span><span style="color:#89DDFF;">}</span></span>
<span class="line"><span style="color:#A6ACCD;">        </span><span style="color:#89DDFF;">}</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#89DDFF;">}</span></span>
<span class="line"><span style="color:#89DDFF;">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#C792EA;">const</span><span style="color:#A6ACCD;"> proxyData </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">reactive</span><span style="color:#A6ACCD;">(data)</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br><span class="line-number">40</span><br><span class="line-number">41</span><br><span class="line-number">42</span><br><span class="line-number">43</span><br><span class="line-number">44</span><br><span class="line-number">45</span><br><span class="line-number">46</span><br><span class="line-number">47</span><br><span class="line-number">48</span><br><span class="line-number">49</span><br><span class="line-number">50</span><br><span class="line-number">51</span><br><span class="line-number">52</span><br><span class="line-number">53</span><br><span class="line-number">54</span><br><span class="line-number">55</span><br><span class="line-number">56</span><br><span class="line-number">57</span><br><span class="line-number">58</span><br><span class="line-number">59</span><br><span class="line-number">60</span><br><span class="line-number">61</span><br><span class="line-number">62</span><br><span class="line-number">63</span><br><span class="line-number">64</span><br><span class="line-number">65</span><br><span class="line-number">66</span><br><span class="line-number">67</span><br><span class="line-number">68</span><br><span class="line-number">69</span><br><span class="line-number">70</span><br><span class="line-number">71</span><br><span class="line-number">72</span><br></div></div><p><strong>æˆ‘ä»¬åœ¨æ§åˆ¶å°æ¥éªŒè¯æ•°æ®ï¼š</strong></p><p><img src="https://mondaylab-1309616765.cos.ap-shanghai.myqcloud.com/images/202305270737608.png" alt="proxy"></p><p>ä»ä¸Šå›¾ä¸­å¯ä»¥çœ‹åˆ°ï¼Œç”¨ <code>proxy</code> æ¥å®ç°å“åº”å¼ï¼Œå¦‚æœé‡åˆ°éœ€è¦æ·±åº¦é€’å½’çš„æ•°ç»„æ—¶ï¼Œå®ƒä¸ä¼šåƒ <code>defineProperty</code> é‚£æ ·<strong>æ·±åº¦é€’å½’</strong>ï¼Œå®ƒä¼šåœ¨ä»€ä¹ˆæ—¶å€™ <code>get</code> ï¼Œä»€ä¹ˆæ—¶å€™å†æ·±åº¦é€’å½’ã€‚æœ¬è´¨ä¸Šæ¥è®²å°±æ˜¯ï¼Œä½ è·å–åˆ°å“ªä¸€å±‚ï¼Œé‚£ä¸€å±‚æ‰ä¼š<strong>è§¦å‘å“åº”å¼</strong>ã€‚<strong>ä½ è·å–ä¸åˆ°çš„æ·±å±‚ï¼Œå®ƒå°±ä¸ä¼šè§¦å‘å“åº”å¼</strong>ã€‚ä¸”ä»ä»£ç ä¸­æˆ‘ä»¬å¯ä»¥äº†è§£åˆ°ï¼Œ <code>Proxy</code> åœ¨ä¿®æ”¹å±æ€§æ—¶ï¼Œå¦‚æœæ•°æ®æ˜¯<strong>é‡å¤çš„</strong>ï¼Œåˆ™ä¸è¿›è¡Œå¤„ç†ã€‚å¦‚æœæ•°æ®<strong>ä¸é‡å¤</strong>ï¼Œå†è¿›è¡Œå¤„ç†ã€‚è¿™æ ·ä¸€æ¥ï¼Œå°±æå¤§ç¨‹åº¦ä¸Š<strong>æé«˜äº†è½¯ä»¶çš„æ€§èƒ½</strong>ã€‚</p><h2 id="_2ã€proxy-æ€»ç»“" tabindex="-1">2ã€Proxy æ€»ç»“ <a class="header-anchor" href="#_2ã€proxy-æ€»ç»“" aria-label="Permalink to &quot;2ã€Proxy æ€»ç»“&quot;">â€‹</a></h2><p>ç°åœ¨æ¥å¯¹ä¸Šè¿° Proxy çš„å†…å®¹<strong>åšä¸€ä¸ªæ€»ç»“ï¼š</strong></p><h3 id="_1-æ·±åº¦ç›‘å¬-æ€§èƒ½æ›´å¥½" tabindex="-1">ï¼ˆ1ï¼‰æ·±åº¦ç›‘å¬ï¼Œæ€§èƒ½æ›´å¥½ <a class="header-anchor" href="#_1-æ·±åº¦ç›‘å¬-æ€§èƒ½æ›´å¥½" aria-label="Permalink to &quot;ï¼ˆ1ï¼‰æ·±åº¦ç›‘å¬ï¼Œæ€§èƒ½æ›´å¥½&quot;">â€‹</a></h3><p><code>defineProperty</code> æ˜¯ä¸€æ¬¡æ€§é€’å½’å®Œæˆï¼›è€Œ <code>Proxy</code> æ˜¯ä»€ä¹ˆæ—¶å€™ <code>get</code> ï¼Œä»€ä¹ˆæ—¶å€™å†<strong>æ·±åº¦é€’å½’</strong>ã€‚</p><h3 id="_2-å¯ç›‘å¬-æ–°å¢-åˆ é™¤-å±æ€§" tabindex="-1">ï¼ˆ2ï¼‰å¯ç›‘å¬ æ–°å¢/åˆ é™¤ å±æ€§ <a class="header-anchor" href="#_2-å¯ç›‘å¬-æ–°å¢-åˆ é™¤-å±æ€§" aria-label="Permalink to &quot;ï¼ˆ2ï¼‰å¯ç›‘å¬ æ–°å¢/åˆ é™¤ å±æ€§&quot;">â€‹</a></h3><p>åœ¨ <code>vue2</code> ä¸­ï¼Œ <code>defineProperty</code> æ˜¯<strong>æ— æ³•æ–°å¢/åˆ é™¤å±æ€§</strong>çš„ï¼Œéœ€è¦é…åˆ <code>Vue.set</code> å’Œ <code>Vue.delete</code> æ¥ä½¿ç”¨ï¼Œè€Œåœ¨ <code>Vue3</code> ä¸­ï¼Œ <code>Proxy</code> <strong>å¯ä»¥æ–°å¢å’Œåˆ é™¤å±æ€§</strong>ï¼Œæ— éœ€è¿›è¡Œç‰¹æ®Šå¤„ç†ã€‚</p><h3 id="_3-å¯ç›‘å¬æ•°ç»„å˜åŒ–" tabindex="-1">ï¼ˆ3ï¼‰å¯ç›‘å¬æ•°ç»„å˜åŒ– <a class="header-anchor" href="#_3-å¯ç›‘å¬æ•°ç»„å˜åŒ–" aria-label="Permalink to &quot;ï¼ˆ3ï¼‰å¯ç›‘å¬æ•°ç»„å˜åŒ–&quot;">â€‹</a></h3><p>åœ¨ <code>vue2</code> ä¸­ï¼Œç›‘å¬æ•°ç»„å˜åŒ–æ˜¯éœ€è¦è¿›è¡Œç‰¹æ®Šå¤„ç†ï¼Œä¸”<strong>åªèƒ½ä¸€æ¬¡æ€§æ·±åº¦é€’å½’å®Œæˆ</strong>ã€‚è€Œåœ¨ <code>vue3</code> ä¸­ï¼Œå¯ä»¥<strong>ç›‘å¬æ•°ç»„å˜åŒ–</strong>ï¼Œå¹¶ä¸”æ˜¯<strong>ä»€ä¹ˆæ—¶å€™ get ä»€ä¹ˆæ—¶å€™å†é€’å½’</strong>ï¼Œè·å–ä¸åˆ°çš„æ·±å±‚ï¼Œä¸ä¼šè§¦å‘å“åº”å¼ã€‚</p><h2 id="_3ã€ä¸¤è€…å¯¹æ¯”" tabindex="-1">3ã€ä¸¤è€…å¯¹æ¯” <a class="header-anchor" href="#_3ã€ä¸¤è€…å¯¹æ¯”" aria-label="Permalink to &quot;3ã€ä¸¤è€…å¯¹æ¯”&quot;">â€‹</a></h2><p>è®²åˆ°è¿™é‡Œï¼Œæˆ‘ä»¬å†æŠŠ <code>vue2</code> ä¸­çš„ <code>Object.defineProperty</code> å’Œ <code>vue3</code> ä¸­çš„ <code>Proxy</code> <strong>åšä¸€ä¸ªå¯¹æ¯”ï¼š</strong></p><ul><li><code>Proxy</code> èƒ½è‰¯å¥½çš„è§„é¿ <code>Object.defineProperty</code> çš„é—®é¢˜ï¼›</li><li><code>Proxy</code> æ— æ³•å…¼å®¹æ‰€æœ‰æµè§ˆå™¨ï¼ˆå¦‚ <code>IE11</code> ï¼‰ï¼Œä¸”æ— æ³• <code>polyfill</code> ã€‚</li></ul><h1 id="äº”ã€ğŸŸª-ç»“æŸè¯­" tabindex="-1">äº”ã€ğŸŸª ç»“æŸè¯­ <a class="header-anchor" href="#äº”ã€ğŸŸª-ç»“æŸè¯­" aria-label="Permalink to &quot;äº”ã€ğŸŸª ç»“æŸè¯­&quot;">â€‹</a></h1><p>ä»æŸç§ç¨‹åº¦ä¸Šæ¥è¯´ï¼Œ <code>vue3</code> çš„ <code>Proxy</code> ç¡®å®å¸¦æ¥äº†ä¸€äº›å¥½å¤„ï¼Œä½†åŒæ—¶ä¹Ÿå¸¦æ¥äº†ä¸€äº›é—®é¢˜ã€‚æ­£å› ä¸ºå¦‚æ­¤ï¼Œ <code>vue2</code> çš„ <code>Object.defineProperty</code> è¿˜ä¼šå­˜åœ¨å¾ˆé•¿ä¸€æ®µæ—¶é—´ã€‚æ‰€ä»¥ï¼Œæ–°æŠ€æœ¯çš„ä½¿ç”¨æ€»ä¼šç»è¿‡ä¸€ä¸ªä»è¯•ç”¨é˜¶æ®µåˆ°ç¨³å®šé˜¶æ®µçš„è¿‡ç¨‹ã€‚</p><p>å…³äº vue3 çš„å“åº”å¼åŸç†è®²åˆ°è¿™é‡Œå°±ç»“æŸå•¦ï¼å¦‚æœ‰ç–‘é—®æ¬¢è¿æissue~</p>`,39),o=[e];function t(r,c,y,F,D,i){return a(),n("div",null,o)}const d=s(p,[["render",t]]);export{C as __pageData,d as default};
