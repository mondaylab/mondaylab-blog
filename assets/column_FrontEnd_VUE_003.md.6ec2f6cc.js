import{_ as s,o as n,c as a,Q as l}from"./chunks/framework.98c15f2e.js";const m=JSON.parse('{"title":"æ•²é»‘æ¿ï¼vue3é‡ç‚¹ï¼ä¸€æ–‡äº†è§£Composition APIæ–°ç‰¹æ€§ï¼šrefã€toRefã€toRefs","description":"","frontmatter":{"title":"æ•²é»‘æ¿ï¼vue3é‡ç‚¹ï¼ä¸€æ–‡äº†è§£Composition APIæ–°ç‰¹æ€§ï¼šrefã€toRefã€toRefs","author":"å‘¨ä¸€","date":"2021-06-23","categories":["å‰ç«¯å¼€å‘"],"tags":["vue.js"],"sidebar":"auto"},"headers":[{"level":1,"title":"å‰è¨€","slug":"å‰è¨€","link":"#å‰è¨€","children":[]},{"level":1,"title":"ä¸€ã€ğŸ™ å¦‚ä½•ç†è§£ refã€toRef å’Œ toRefs","slug":"ä¸€ã€ğŸ™-å¦‚ä½•ç†è§£-refã€toref-å’Œ-torefs","link":"#ä¸€ã€ğŸ™-å¦‚ä½•ç†è§£-refã€toref-å’Œ-torefs","children":[{"level":2,"title":"1ã€refã€toRef å’Œ toRefs æ˜¯ä»€ä¹ˆ","slug":"_1ã€refã€toref-å’Œ-torefs-æ˜¯ä»€ä¹ˆ","link":"#_1ã€refã€toref-å’Œ-torefs-æ˜¯ä»€ä¹ˆ","children":[{"level":3,"title":"ï¼ˆ1ï¼‰ref","slug":"_1-ref","link":"#_1-ref","children":[{"level":4,"title":"1ï¼‰ref æ˜¯ä»€ä¹ˆ","slug":"_1-ref-æ˜¯ä»€ä¹ˆ","link":"#_1-ref-æ˜¯ä»€ä¹ˆ","children":[]},{"level":4,"title":"2ï¼‰ä¸¾ä¸ªä¾‹å­ ğŸŒ°","slug":"_2-ä¸¾ä¸ªä¾‹å­-ğŸŒ°","link":"#_2-ä¸¾ä¸ªä¾‹å­-ğŸŒ°","children":[]}]},{"level":3,"title":"ï¼ˆ2ï¼‰toRef æ˜¯ä»€ä¹ˆ","slug":"_2-toref-æ˜¯ä»€ä¹ˆ","link":"#_2-toref-æ˜¯ä»€ä¹ˆ","children":[{"level":4,"title":"1ï¼‰toRef æ˜¯ä»€ä¹ˆ","slug":"_1-toref-æ˜¯ä»€ä¹ˆ","link":"#_1-toref-æ˜¯ä»€ä¹ˆ","children":[]},{"level":4,"title":"2ï¼‰ä¸¾ä¸ªä¾‹å­ ğŸŒ°","slug":"_2-ä¸¾ä¸ªä¾‹å­-ğŸŒ°-1","link":"#_2-ä¸¾ä¸ªä¾‹å­-ğŸŒ°-1","children":[]}]},{"level":3,"title":"ï¼ˆ3ï¼‰toRefs æ˜¯ä»€ä¹ˆ","slug":"_3-torefs-æ˜¯ä»€ä¹ˆ","link":"#_3-torefs-æ˜¯ä»€ä¹ˆ","children":[{"level":4,"title":"1ï¼‰toRefs æ˜¯ä»€ä¹ˆ","slug":"_1-torefs-æ˜¯ä»€ä¹ˆ","link":"#_1-torefs-æ˜¯ä»€ä¹ˆ","children":[]},{"level":4,"title":"2ï¼‰ä¸¾ä¸ªä¾‹å­ ğŸŒ°","slug":"_2-ä¸¾ä¸ªä¾‹å­-ğŸŒ°-2","link":"#_2-ä¸¾ä¸ªä¾‹å­-ğŸŒ°-2","children":[]}]},{"level":3,"title":"ï¼ˆ4ï¼‰åˆæˆå‡½æ•°è¿”å›å“åº”å¼å¯¹è±¡","slug":"_4-åˆæˆå‡½æ•°è¿”å›å“åº”å¼å¯¹è±¡","link":"#_4-åˆæˆå‡½æ•°è¿”å›å“åº”å¼å¯¹è±¡","children":[]}]},{"level":2,"title":"2ã€æœ€ä½³ä½¿ç”¨æ–¹å¼","slug":"_2ã€æœ€ä½³ä½¿ç”¨æ–¹å¼","link":"#_2ã€æœ€ä½³ä½¿ç”¨æ–¹å¼","children":[]},{"level":2,"title":"3ã€æ·±å…¥ç†è§£","slug":"_3ã€æ·±å…¥ç†è§£","link":"#_3ã€æ·±å…¥ç†è§£","children":[{"level":3,"title":"ï¼ˆ1ï¼‰ä¸ºä»€ä¹ˆéœ€è¦ç”¨ ref","slug":"_1-ä¸ºä»€ä¹ˆéœ€è¦ç”¨-ref","link":"#_1-ä¸ºä»€ä¹ˆéœ€è¦ç”¨-ref","children":[]},{"level":3,"title":"ï¼ˆ2ï¼‰ä¸ºä½• ref éœ€è¦.value å±æ€§","slug":"_2-ä¸ºä½•-ref-éœ€è¦-value-å±æ€§","link":"#_2-ä¸ºä½•-ref-éœ€è¦-value-å±æ€§","children":[]},{"level":3,"title":"ï¼ˆ3ï¼‰ä¸ºä»€ä¹ˆéœ€è¦ toRef å’Œ toRefs","slug":"_3-ä¸ºä»€ä¹ˆéœ€è¦-toref-å’Œ-torefs","link":"#_3-ä¸ºä»€ä¹ˆéœ€è¦-toref-å’Œ-torefs","children":[]}]}]},{"level":1,"title":"äºŒã€ğŸ™†â€â™€ï¸Composition API å®ç°é€»è¾‘å¤ç”¨","slug":"äºŒã€ğŸ™†â€â™€ï¸composition-api-å®ç°é€»è¾‘å¤ç”¨","link":"#äºŒã€ğŸ™†â€â™€ï¸composition-api-å®ç°é€»è¾‘å¤ç”¨","children":[{"level":2,"title":"1ã€è§„åˆ™","slug":"_1ã€è§„åˆ™","link":"#_1ã€è§„åˆ™","children":[]},{"level":2,"title":"2ã€ä¸¾ä¸ªä¾‹å­ ğŸŒ°","slug":"_2ã€ä¸¾ä¸ªä¾‹å­-ğŸŒ°","link":"#_2ã€ä¸¾ä¸ªä¾‹å­-ğŸŒ°","children":[]}]},{"level":1,"title":"ä¸‰ã€ğŸ™…â€â™€ï¸ ç»“æŸè¯­","slug":"ä¸‰ã€ğŸ™…â€â™€ï¸-ç»“æŸè¯­","link":"#ä¸‰ã€ğŸ™…â€â™€ï¸-ç»“æŸè¯­","children":[]}],"relativePath":"column/FrontEnd/VUE/003.md","filePath":"column/FrontEnd/VUE/003.md","lastUpdated":1685151998000}'),p={name:"column/FrontEnd/VUE/003.md"},e=l(`<h1 id="å‰è¨€" tabindex="-1">å‰è¨€ <a class="header-anchor" href="#å‰è¨€" aria-label="Permalink to &quot;å‰è¨€&quot;">â€‹</a></h1><p>åœ¨<a href="https://blog.csdn.net/weixin_44803753/article/details/117880811" target="_blank" rel="noreferrer">ä¸Šä¸€ç¯‡æ–‡ç« </a>ä¸­ï¼Œæˆ‘ä»¬åˆæ­¥äº†è§£äº† vue3 çš„æ–°ç‰¹æ€§ï¼Œä»Šå¤©ï¼Œæˆ‘ä»¬å°†å»¶ç»­<strong>Composition API</strong>çš„è¯é¢˜ï¼Œæ¥äº†è§£<strong>Composition API</strong>å¸¦æ¥çš„æ–°ç‰¹æ€§ï¼š <code>ref</code> ã€ <code>toRef</code> å’Œ <code>toRefs</code> ã€‚</p><p>ä¸‹é¢å¼€å§‹è¿›å…¥æœ¬æ–‡çš„è®²è§£ âœ¨</p><h1 id="ä¸€ã€ğŸ™-å¦‚ä½•ç†è§£-refã€toref-å’Œ-torefs" tabindex="-1">ä¸€ã€ğŸ™ å¦‚ä½•ç†è§£ refã€toRef å’Œ toRefs <a class="header-anchor" href="#ä¸€ã€ğŸ™-å¦‚ä½•ç†è§£-refã€toref-å’Œ-torefs" aria-label="Permalink to &quot;ä¸€ã€ğŸ™ å¦‚ä½•ç†è§£ refã€toRef å’Œ toRefs&quot;">â€‹</a></h1><h2 id="_1ã€refã€toref-å’Œ-torefs-æ˜¯ä»€ä¹ˆ" tabindex="-1">1ã€refã€toRef å’Œ toRefs æ˜¯ä»€ä¹ˆ <a class="header-anchor" href="#_1ã€refã€toref-å’Œ-torefs-æ˜¯ä»€ä¹ˆ" aria-label="Permalink to &quot;1ã€refã€toRef å’Œ toRefs æ˜¯ä»€ä¹ˆ&quot;">â€‹</a></h2><h3 id="_1-ref" tabindex="-1">ï¼ˆ1ï¼‰ref <a class="header-anchor" href="#_1-ref" aria-label="Permalink to &quot;ï¼ˆ1ï¼‰ref&quot;">â€‹</a></h3><h4 id="_1-ref-æ˜¯ä»€ä¹ˆ" tabindex="-1">1ï¼‰ref æ˜¯ä»€ä¹ˆ <a class="header-anchor" href="#_1-ref-æ˜¯ä»€ä¹ˆ" aria-label="Permalink to &quot;1ï¼‰ref æ˜¯ä»€ä¹ˆ&quot;">â€‹</a></h4><ul><li><code>ref</code> å¯ä»¥ç”Ÿæˆ <code>å€¼ç±»å‹</code>ï¼ˆå³åŸºæœ¬æ•°æ®ç±»å‹ï¼‰ çš„å“åº”å¼æ•°æ®ï¼›</li><li><code>ref</code> å¯ä»¥ç”¨äº<strong>æ¨¡æ¿</strong>å’Œ<strong>reative</strong>ï¼›</li><li><code>ref</code> é€šè¿‡ <code>.value</code> æ¥ä¿®æ”¹å€¼ï¼ˆä¸€å®šè¦è®°å¾—åŠ ä¸Š <code>.value</code> ï¼‰ï¼›</li><li><code>ref</code> ä¸ä»…å¯ä»¥ç”¨äº<strong>å“åº”å¼</strong>ï¼Œè¿˜å¯ä»¥ç”¨äºæ¨¡æ¿çš„ <code>DOM</code> å…ƒç´ ã€‚</li></ul><h4 id="_2-ä¸¾ä¸ªä¾‹å­-ğŸŒ°" tabindex="-1">2ï¼‰ä¸¾ä¸ªä¾‹å­ ğŸŒ° <a class="header-anchor" href="#_2-ä¸¾ä¸ªä¾‹å­-ğŸŒ°" aria-label="Permalink to &quot;2ï¼‰ä¸¾ä¸ªä¾‹å­ ğŸŒ°&quot;">â€‹</a></h4><p>å‡è®¾æˆ‘ä»¬å®šä¹‰äº†ä¸¤ä¸ªå€¼ç±»å‹çš„æ•°æ®ï¼Œå¹¶é€šè¿‡ä¸€ä¸ªå®šæ—¶å™¨æ¥çœ‹å®ƒå“åº”å¼å‰åçš„æ•ˆæœã€‚<strong>æ¥ä¸‹æ¥æˆ‘ä»¬ç”¨ä»£ç æ¥æ¼”ç¤ºä¸€ä¸‹ï¼š</strong></p><div class="language-html vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">html</span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#E1E4E8;">&lt;</span><span style="color:#85E89D;">template</span><span style="color:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="color:#E1E4E8;">  &lt;</span><span style="color:#85E89D;">p</span><span style="color:#E1E4E8;">&gt;ref demo {{ageRef}} {{state.name}}&lt;/</span><span style="color:#85E89D;">p</span><span style="color:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="color:#E1E4E8;">&lt;/</span><span style="color:#85E89D;">template</span><span style="color:#E1E4E8;">&gt;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#E1E4E8;">&lt;</span><span style="color:#85E89D;">script</span><span style="color:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="color:#E1E4E8;">  </span><span style="color:#F97583;">import</span><span style="color:#E1E4E8;"> { ref, reactive } </span><span style="color:#F97583;">from</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">&#39;vue&#39;</span><span style="color:#E1E4E8;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#E1E4E8;">  </span><span style="color:#F97583;">export</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">default</span><span style="color:#E1E4E8;"> {</span></span>
<span class="line"><span style="color:#E1E4E8;">    name: </span><span style="color:#9ECBFF;">&#39;Ref&#39;</span><span style="color:#E1E4E8;">,</span></span>
<span class="line"><span style="color:#E1E4E8;">    </span><span style="color:#B392F0;">setup</span><span style="color:#E1E4E8;">() {</span></span>
<span class="line"><span style="color:#E1E4E8;">      </span><span style="color:#F97583;">const</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">ageRef</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> </span><span style="color:#B392F0;">ref</span><span style="color:#E1E4E8;">(</span><span style="color:#79B8FF;">18</span><span style="color:#E1E4E8;">);</span></span>
<span class="line"><span style="color:#E1E4E8;">      </span><span style="color:#F97583;">const</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">nameRef</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> </span><span style="color:#B392F0;">ref</span><span style="color:#E1E4E8;">(</span><span style="color:#9ECBFF;">&#39;monday&#39;</span><span style="color:#E1E4E8;">);</span></span>
<span class="line"></span>
<span class="line"><span style="color:#E1E4E8;">      </span><span style="color:#F97583;">const</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">state</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> </span><span style="color:#B392F0;">reactive</span><span style="color:#E1E4E8;">({</span></span>
<span class="line"><span style="color:#E1E4E8;">        name: nameRef,</span></span>
<span class="line"><span style="color:#E1E4E8;">      });</span></span>
<span class="line"></span>
<span class="line"><span style="color:#E1E4E8;">      </span><span style="color:#B392F0;">setTimeout</span><span style="color:#E1E4E8;">(() </span><span style="color:#F97583;">=&gt;</span><span style="color:#E1E4E8;"> {</span></span>
<span class="line"><span style="color:#E1E4E8;">        console.</span><span style="color:#B392F0;">log</span><span style="color:#E1E4E8;">(</span><span style="color:#9ECBFF;">&#39;ageRef&#39;</span><span style="color:#E1E4E8;">, ageRef.value, </span><span style="color:#9ECBFF;">&#39;nameRef&#39;</span><span style="color:#E1E4E8;">, nameRef.value);</span></span>
<span class="line"><span style="color:#E1E4E8;">        ageRef.value </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">20</span><span style="color:#E1E4E8;">;</span></span>
<span class="line"><span style="color:#E1E4E8;">        nameRef.value </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">&#39;mondaylab&#39;</span><span style="color:#E1E4E8;">;</span></span>
<span class="line"><span style="color:#E1E4E8;">        console.</span><span style="color:#B392F0;">log</span><span style="color:#E1E4E8;">(</span><span style="color:#9ECBFF;">&#39;ageRef&#39;</span><span style="color:#E1E4E8;">, ageRef.value, </span><span style="color:#9ECBFF;">&#39;nameRef&#39;</span><span style="color:#E1E4E8;">, nameRef.value);</span></span>
<span class="line"><span style="color:#E1E4E8;">      }, </span><span style="color:#79B8FF;">1500</span><span style="color:#E1E4E8;">);</span></span>
<span class="line"></span>
<span class="line"><span style="color:#E1E4E8;">      </span><span style="color:#F97583;">return</span><span style="color:#E1E4E8;"> {</span></span>
<span class="line"><span style="color:#E1E4E8;">        ageRef,</span></span>
<span class="line"><span style="color:#E1E4E8;">        state,</span></span>
<span class="line"><span style="color:#E1E4E8;">      };</span></span>
<span class="line"><span style="color:#E1E4E8;">    },</span></span>
<span class="line"><span style="color:#E1E4E8;">  };</span></span>
<span class="line"><span style="color:#E1E4E8;">&lt;/</span><span style="color:#85E89D;">script</span><span style="color:#E1E4E8;">&gt;</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#24292E;">&lt;</span><span style="color:#22863A;">template</span><span style="color:#24292E;">&gt;</span></span>
<span class="line"><span style="color:#24292E;">  &lt;</span><span style="color:#22863A;">p</span><span style="color:#24292E;">&gt;ref demo {{ageRef}} {{state.name}}&lt;/</span><span style="color:#22863A;">p</span><span style="color:#24292E;">&gt;</span></span>
<span class="line"><span style="color:#24292E;">&lt;/</span><span style="color:#22863A;">template</span><span style="color:#24292E;">&gt;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#24292E;">&lt;</span><span style="color:#22863A;">script</span><span style="color:#24292E;">&gt;</span></span>
<span class="line"><span style="color:#24292E;">  </span><span style="color:#D73A49;">import</span><span style="color:#24292E;"> { ref, reactive } </span><span style="color:#D73A49;">from</span><span style="color:#24292E;"> </span><span style="color:#032F62;">&#39;vue&#39;</span><span style="color:#24292E;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#24292E;">  </span><span style="color:#D73A49;">export</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">default</span><span style="color:#24292E;"> {</span></span>
<span class="line"><span style="color:#24292E;">    name: </span><span style="color:#032F62;">&#39;Ref&#39;</span><span style="color:#24292E;">,</span></span>
<span class="line"><span style="color:#24292E;">    </span><span style="color:#6F42C1;">setup</span><span style="color:#24292E;">() {</span></span>
<span class="line"><span style="color:#24292E;">      </span><span style="color:#D73A49;">const</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">ageRef</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">=</span><span style="color:#24292E;"> </span><span style="color:#6F42C1;">ref</span><span style="color:#24292E;">(</span><span style="color:#005CC5;">18</span><span style="color:#24292E;">);</span></span>
<span class="line"><span style="color:#24292E;">      </span><span style="color:#D73A49;">const</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">nameRef</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">=</span><span style="color:#24292E;"> </span><span style="color:#6F42C1;">ref</span><span style="color:#24292E;">(</span><span style="color:#032F62;">&#39;monday&#39;</span><span style="color:#24292E;">);</span></span>
<span class="line"></span>
<span class="line"><span style="color:#24292E;">      </span><span style="color:#D73A49;">const</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">state</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">=</span><span style="color:#24292E;"> </span><span style="color:#6F42C1;">reactive</span><span style="color:#24292E;">({</span></span>
<span class="line"><span style="color:#24292E;">        name: nameRef,</span></span>
<span class="line"><span style="color:#24292E;">      });</span></span>
<span class="line"></span>
<span class="line"><span style="color:#24292E;">      </span><span style="color:#6F42C1;">setTimeout</span><span style="color:#24292E;">(() </span><span style="color:#D73A49;">=&gt;</span><span style="color:#24292E;"> {</span></span>
<span class="line"><span style="color:#24292E;">        console.</span><span style="color:#6F42C1;">log</span><span style="color:#24292E;">(</span><span style="color:#032F62;">&#39;ageRef&#39;</span><span style="color:#24292E;">, ageRef.value, </span><span style="color:#032F62;">&#39;nameRef&#39;</span><span style="color:#24292E;">, nameRef.value);</span></span>
<span class="line"><span style="color:#24292E;">        ageRef.value </span><span style="color:#D73A49;">=</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">20</span><span style="color:#24292E;">;</span></span>
<span class="line"><span style="color:#24292E;">        nameRef.value </span><span style="color:#D73A49;">=</span><span style="color:#24292E;"> </span><span style="color:#032F62;">&#39;mondaylab&#39;</span><span style="color:#24292E;">;</span></span>
<span class="line"><span style="color:#24292E;">        console.</span><span style="color:#6F42C1;">log</span><span style="color:#24292E;">(</span><span style="color:#032F62;">&#39;ageRef&#39;</span><span style="color:#24292E;">, ageRef.value, </span><span style="color:#032F62;">&#39;nameRef&#39;</span><span style="color:#24292E;">, nameRef.value);</span></span>
<span class="line"><span style="color:#24292E;">      }, </span><span style="color:#005CC5;">1500</span><span style="color:#24292E;">);</span></span>
<span class="line"></span>
<span class="line"><span style="color:#24292E;">      </span><span style="color:#D73A49;">return</span><span style="color:#24292E;"> {</span></span>
<span class="line"><span style="color:#24292E;">        ageRef,</span></span>
<span class="line"><span style="color:#24292E;">        state,</span></span>
<span class="line"><span style="color:#24292E;">      };</span></span>
<span class="line"><span style="color:#24292E;">    },</span></span>
<span class="line"><span style="color:#24292E;">  };</span></span>
<span class="line"><span style="color:#24292E;">&lt;/</span><span style="color:#22863A;">script</span><span style="color:#24292E;">&gt;</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br></div></div><p><strong>åˆ«çœ¨çœ¼ï¼Œæ¥çœ‹ä¸‹æ­¤æ—¶æµè§ˆå™¨çš„æ˜¾ç¤ºæ•ˆæœï¼š</strong></p><p><img src="https://mondaylab-1309616765.cos.ap-shanghai.myqcloud.com/images/202305270730148.gif" alt="ref"></p><p>å¤§å®¶å¯ä»¥çœ‹åˆ°ï¼Œæ§åˆ¶å°å…ˆåæ‰“å°çš„é¡ºåºæ˜¯<strong>å“åº”å¼å‰çš„æ•°æ®</strong>å’Œ<strong>å“åº”å¼åçš„æ•°æ®</strong>ã€‚å› æ­¤ï¼Œé€šè¿‡ <code>ref</code> ï¼Œå¯ä»¥å®ç°<strong>å€¼ç±»å‹çš„æ•°æ®å“åº”å¼</strong>ã€‚</p><hr><p>å€¼å¾—æ³¨æ„çš„æ˜¯ï¼Œ <code>ref</code> ä¸ä»…å¯ä»¥å®ç°å“åº”å¼ï¼Œè¿˜å¯ä»¥ç”¨äº<strong>æ¨¡æ¿çš„ DOM å…ƒç´ </strong>ã€‚<strong>æˆ‘ä»¬ç”¨ä¸€æ®µä»£ç æ¥æ¼”ç¤ºä¸€ä¸‹ï¼š</strong></p><div class="language-html vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">html</span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#E1E4E8;">&lt;</span><span style="color:#85E89D;">template</span><span style="color:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="color:#E1E4E8;">  &lt;</span><span style="color:#85E89D;">p</span><span style="color:#E1E4E8;"> </span><span style="color:#B392F0;">ref</span><span style="color:#E1E4E8;">=</span><span style="color:#9ECBFF;">&quot;elemRef&quot;</span><span style="color:#E1E4E8;">&gt;ä»Šå¤©æ˜¯å‘¨ä¸€&lt;/</span><span style="color:#85E89D;">p</span><span style="color:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="color:#E1E4E8;">&lt;/</span><span style="color:#85E89D;">template</span><span style="color:#E1E4E8;">&gt;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#E1E4E8;">&lt;</span><span style="color:#85E89D;">script</span><span style="color:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="color:#E1E4E8;">  </span><span style="color:#F97583;">import</span><span style="color:#E1E4E8;"> { ref, onMounted } </span><span style="color:#F97583;">from</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">&#39;vue&#39;</span><span style="color:#E1E4E8;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#E1E4E8;">  </span><span style="color:#F97583;">export</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">default</span><span style="color:#E1E4E8;"> {</span></span>
<span class="line"><span style="color:#E1E4E8;">    name: </span><span style="color:#9ECBFF;">&#39;RefTemplate&#39;</span><span style="color:#E1E4E8;">,</span></span>
<span class="line"><span style="color:#E1E4E8;">    </span><span style="color:#B392F0;">setup</span><span style="color:#E1E4E8;">() {</span></span>
<span class="line"><span style="color:#E1E4E8;">      </span><span style="color:#F97583;">const</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">elemRef</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> </span><span style="color:#B392F0;">ref</span><span style="color:#E1E4E8;">(</span><span style="color:#79B8FF;">null</span><span style="color:#E1E4E8;">);</span></span>
<span class="line"></span>
<span class="line"><span style="color:#E1E4E8;">      </span><span style="color:#B392F0;">onMounted</span><span style="color:#E1E4E8;">(() </span><span style="color:#F97583;">=&gt;</span><span style="color:#E1E4E8;"> {</span></span>
<span class="line"><span style="color:#E1E4E8;">        console.</span><span style="color:#B392F0;">log</span><span style="color:#E1E4E8;">(</span><span style="color:#9ECBFF;">&#39;ref template&#39;</span><span style="color:#E1E4E8;">, elemRef.value.innerHTML, elemRef.value);</span></span>
<span class="line"><span style="color:#E1E4E8;">      });</span></span>
<span class="line"></span>
<span class="line"><span style="color:#E1E4E8;">      </span><span style="color:#F97583;">return</span><span style="color:#E1E4E8;"> {</span></span>
<span class="line"><span style="color:#E1E4E8;">        elemRef,</span></span>
<span class="line"><span style="color:#E1E4E8;">      };</span></span>
<span class="line"><span style="color:#E1E4E8;">    },</span></span>
<span class="line"><span style="color:#E1E4E8;">  };</span></span>
<span class="line"><span style="color:#E1E4E8;">&lt;/</span><span style="color:#85E89D;">script</span><span style="color:#E1E4E8;">&gt;</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#24292E;">&lt;</span><span style="color:#22863A;">template</span><span style="color:#24292E;">&gt;</span></span>
<span class="line"><span style="color:#24292E;">  &lt;</span><span style="color:#22863A;">p</span><span style="color:#24292E;"> </span><span style="color:#6F42C1;">ref</span><span style="color:#24292E;">=</span><span style="color:#032F62;">&quot;elemRef&quot;</span><span style="color:#24292E;">&gt;ä»Šå¤©æ˜¯å‘¨ä¸€&lt;/</span><span style="color:#22863A;">p</span><span style="color:#24292E;">&gt;</span></span>
<span class="line"><span style="color:#24292E;">&lt;/</span><span style="color:#22863A;">template</span><span style="color:#24292E;">&gt;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#24292E;">&lt;</span><span style="color:#22863A;">script</span><span style="color:#24292E;">&gt;</span></span>
<span class="line"><span style="color:#24292E;">  </span><span style="color:#D73A49;">import</span><span style="color:#24292E;"> { ref, onMounted } </span><span style="color:#D73A49;">from</span><span style="color:#24292E;"> </span><span style="color:#032F62;">&#39;vue&#39;</span><span style="color:#24292E;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#24292E;">  </span><span style="color:#D73A49;">export</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">default</span><span style="color:#24292E;"> {</span></span>
<span class="line"><span style="color:#24292E;">    name: </span><span style="color:#032F62;">&#39;RefTemplate&#39;</span><span style="color:#24292E;">,</span></span>
<span class="line"><span style="color:#24292E;">    </span><span style="color:#6F42C1;">setup</span><span style="color:#24292E;">() {</span></span>
<span class="line"><span style="color:#24292E;">      </span><span style="color:#D73A49;">const</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">elemRef</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">=</span><span style="color:#24292E;"> </span><span style="color:#6F42C1;">ref</span><span style="color:#24292E;">(</span><span style="color:#005CC5;">null</span><span style="color:#24292E;">);</span></span>
<span class="line"></span>
<span class="line"><span style="color:#24292E;">      </span><span style="color:#6F42C1;">onMounted</span><span style="color:#24292E;">(() </span><span style="color:#D73A49;">=&gt;</span><span style="color:#24292E;"> {</span></span>
<span class="line"><span style="color:#24292E;">        console.</span><span style="color:#6F42C1;">log</span><span style="color:#24292E;">(</span><span style="color:#032F62;">&#39;ref template&#39;</span><span style="color:#24292E;">, elemRef.value.innerHTML, elemRef.value);</span></span>
<span class="line"><span style="color:#24292E;">      });</span></span>
<span class="line"></span>
<span class="line"><span style="color:#24292E;">      </span><span style="color:#D73A49;">return</span><span style="color:#24292E;"> {</span></span>
<span class="line"><span style="color:#24292E;">        elemRef,</span></span>
<span class="line"><span style="color:#24292E;">      };</span></span>
<span class="line"><span style="color:#24292E;">    },</span></span>
<span class="line"><span style="color:#24292E;">  };</span></span>
<span class="line"><span style="color:#24292E;">&lt;/</span><span style="color:#22863A;">script</span><span style="color:#24292E;">&gt;</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br></div></div><p><strong>æ­¤æ—¶æµè§ˆå™¨çš„æ˜¾ç¤ºæ•ˆæœå¦‚ä¸‹æ‰€ç¤ºï¼š</strong></p><p><img src="https://mondaylab-1309616765.cos.ap-shanghai.myqcloud.com/images/202305270730762.png" alt="ref"></p><p>æˆ‘ä»¬é€šè¿‡åœ¨æ¨¡æ¿ä¸­ç»‘å®šä¸€ä¸ª <code>ref</code> ï¼Œä¹‹ååœ¨ç”Ÿå‘½å‘¨æœŸä¸­è°ƒç”¨ï¼Œæœ€åæµè§ˆå™¨æ˜¾ç¤ºå‡ºè¯¥ <code>DOM</code> å…ƒç´ ã€‚æ‰€ä»¥è¯´ï¼Œ <code>ref</code> ä¹Ÿå¯ä»¥ç”¨æ¥<strong>æ¸²æŸ“æ¨¡æ¿ä¸­çš„ DOM å…ƒç´ </strong>ã€‚</p><h3 id="_2-toref-æ˜¯ä»€ä¹ˆ" tabindex="-1">ï¼ˆ2ï¼‰toRef æ˜¯ä»€ä¹ˆ <a class="header-anchor" href="#_2-toref-æ˜¯ä»€ä¹ˆ" aria-label="Permalink to &quot;ï¼ˆ2ï¼‰toRef æ˜¯ä»€ä¹ˆ&quot;">â€‹</a></h3><h4 id="_1-toref-æ˜¯ä»€ä¹ˆ" tabindex="-1">1ï¼‰toRef æ˜¯ä»€ä¹ˆ <a class="header-anchor" href="#_1-toref-æ˜¯ä»€ä¹ˆ" aria-label="Permalink to &quot;1ï¼‰toRef æ˜¯ä»€ä¹ˆ&quot;">â€‹</a></h4><ul><li><p><code>toRef</code> å¯ä»¥å“åº”å¯¹è±¡ <code>Object</code> ï¼Œå…¶é’ˆå¯¹çš„æ˜¯æŸä¸€ä¸ªå“åº”å¼å¯¹è±¡ï¼ˆ <code>reactive</code> å°è£…ï¼‰çš„å±æ€§<code>prop</code> ã€‚</p></li><li><p><code>toRef</code> å’Œå¯¹è±¡ <code>Object</code> ä¸¤è€…<strong>ä¿æŒå¼•ç”¨å…³ç³»</strong>ï¼Œå³ä¸€ä¸ªæ”¹å®Œå¦å¤–ä¸€ä¸ªä¹Ÿè·Ÿç€æ”¹ã€‚</p></li><li><p><code>toRef</code> å¦‚æœç”¨äºæ™®é€šå¯¹è±¡ï¼ˆéå“åº”å¼å¯¹è±¡ï¼‰ï¼Œäº§å‡ºçš„ç»“æœä¸å…·å¤‡å“åº”å¼ã€‚<strong>å¦‚ä¸‹ä»£ç æ‰€ç¤ºï¼š</strong></p></li></ul><div class="language-js vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#6A737D;">//æ™®é€šå¯¹è±¡</span></span>
<span class="line"><span style="color:#F97583;">const</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">state</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> {</span></span>
<span class="line"><span style="color:#E1E4E8;">  age: </span><span style="color:#79B8FF;">20</span><span style="color:#E1E4E8;">,</span></span>
<span class="line"><span style="color:#E1E4E8;">  name: </span><span style="color:#9ECBFF;">&#39;monday&#39;</span><span style="color:#E1E4E8;">,</span></span>
<span class="line"><span style="color:#E1E4E8;">};</span></span>
<span class="line"><span style="color:#6A737D;">//å“åº”å¼å¯¹è±¡</span></span>
<span class="line"><span style="color:#F97583;">const</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">state</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> </span><span style="color:#B392F0;">reactive</span><span style="color:#E1E4E8;">({</span></span>
<span class="line"><span style="color:#E1E4E8;">  age: </span><span style="color:#79B8FF;">20</span><span style="color:#E1E4E8;">,</span></span>
<span class="line"><span style="color:#E1E4E8;">  name: </span><span style="color:#9ECBFF;">&#39;monday&#39;</span><span style="color:#E1E4E8;">,</span></span>
<span class="line"><span style="color:#E1E4E8;">});</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#6A737D;">//æ™®é€šå¯¹è±¡</span></span>
<span class="line"><span style="color:#D73A49;">const</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">state</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">=</span><span style="color:#24292E;"> {</span></span>
<span class="line"><span style="color:#24292E;">  age: </span><span style="color:#005CC5;">20</span><span style="color:#24292E;">,</span></span>
<span class="line"><span style="color:#24292E;">  name: </span><span style="color:#032F62;">&#39;monday&#39;</span><span style="color:#24292E;">,</span></span>
<span class="line"><span style="color:#24292E;">};</span></span>
<span class="line"><span style="color:#6A737D;">//å“åº”å¼å¯¹è±¡</span></span>
<span class="line"><span style="color:#D73A49;">const</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">state</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">=</span><span style="color:#24292E;"> </span><span style="color:#6F42C1;">reactive</span><span style="color:#24292E;">({</span></span>
<span class="line"><span style="color:#24292E;">  age: </span><span style="color:#005CC5;">20</span><span style="color:#24292E;">,</span></span>
<span class="line"><span style="color:#24292E;">  name: </span><span style="color:#032F62;">&#39;monday&#39;</span><span style="color:#24292E;">,</span></span>
<span class="line"><span style="color:#24292E;">});</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br></div></div><h4 id="_2-ä¸¾ä¸ªä¾‹å­-ğŸŒ°-1" tabindex="-1">2ï¼‰ä¸¾ä¸ªä¾‹å­ ğŸŒ° <a class="header-anchor" href="#_2-ä¸¾ä¸ªä¾‹å­-ğŸŒ°-1" aria-label="Permalink to &quot;2ï¼‰ä¸¾ä¸ªä¾‹å­ ğŸŒ°&quot;">â€‹</a></h4><p>å¯¹äºä¸€ä¸ªæ™®é€šå¯¹è±¡æ¥è¯´ï¼Œå¦‚æœè¿™ä¸ªæ™®é€šå¯¹è±¡è¦å®ç°å“åº”å¼ï¼Œå°±ç”¨ <code>reactive</code> ã€‚ç”¨äº† <code>reactive</code> ä¹‹åï¼Œå®ƒå°±åœ¨å“åº”å¼å¯¹è±¡é‡Œé¢ã€‚é‚£ä¹ˆåœ¨ ä¸€ä¸ªå“åº”å¼å¯¹è±¡é‡Œé¢ï¼Œå¦‚æœå…¶ä¸­æœ‰<strong>ä¸€ä¸ªå±æ€§</strong>è¦æ‹¿å‡ºæ¥å•ç‹¬åšå“åº”å¼çš„è¯ï¼Œå°±ç”¨ <code>toRef</code> ã€‚æ¥ä¸¾ä¸ªä¾‹å­çœ‹ä¸€çœ‹ï¼š</p><div class="language-html vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">html</span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#E1E4E8;">&lt;</span><span style="color:#85E89D;">template</span><span style="color:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="color:#E1E4E8;">  &lt;</span><span style="color:#85E89D;">p</span><span style="color:#E1E4E8;">&gt;toRef demo - {{ageRef}} - {{state.name}} {{state.age}}&lt;/</span><span style="color:#85E89D;">p</span><span style="color:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="color:#E1E4E8;">&lt;/</span><span style="color:#85E89D;">template</span><span style="color:#E1E4E8;">&gt;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#E1E4E8;">&lt;</span><span style="color:#85E89D;">script</span><span style="color:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="color:#E1E4E8;">  </span><span style="color:#F97583;">import</span><span style="color:#E1E4E8;"> { ref, toRef, reactive, computed } </span><span style="color:#F97583;">from</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">&#39;vue&#39;</span><span style="color:#E1E4E8;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#E1E4E8;">  </span><span style="color:#F97583;">export</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">default</span><span style="color:#E1E4E8;"> {</span></span>
<span class="line"><span style="color:#E1E4E8;">    name: </span><span style="color:#9ECBFF;">&#39;ToRef&#39;</span><span style="color:#E1E4E8;">,</span></span>
<span class="line"><span style="color:#E1E4E8;">    </span><span style="color:#B392F0;">setup</span><span style="color:#E1E4E8;">() {</span></span>
<span class="line"><span style="color:#E1E4E8;">      </span><span style="color:#F97583;">const</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">state</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> </span><span style="color:#B392F0;">reactive</span><span style="color:#E1E4E8;">({</span></span>
<span class="line"><span style="color:#E1E4E8;">        age: </span><span style="color:#79B8FF;">18</span><span style="color:#E1E4E8;">,</span></span>
<span class="line"><span style="color:#E1E4E8;">        name: </span><span style="color:#9ECBFF;">&#39;monday&#39;</span><span style="color:#E1E4E8;">,</span></span>
<span class="line"><span style="color:#E1E4E8;">      });</span></span>
<span class="line"></span>
<span class="line"><span style="color:#E1E4E8;">      </span><span style="color:#6A737D;">// // toRef å¦‚æœç”¨äºæ™®é€šå¯¹è±¡ï¼ˆéå“åº”å¼å¯¹è±¡ï¼‰ï¼Œäº§å‡ºçš„ç»“æœä¸å…·å¤‡å“åº”å¼</span></span>
<span class="line"><span style="color:#E1E4E8;">      </span><span style="color:#6A737D;">// const state = {</span></span>
<span class="line"><span style="color:#E1E4E8;">      </span><span style="color:#6A737D;">//     age: 18,</span></span>
<span class="line"><span style="color:#E1E4E8;">      </span><span style="color:#6A737D;">//     name: &#39;monday&#39;</span></span>
<span class="line"><span style="color:#E1E4E8;">      </span><span style="color:#6A737D;">// }</span></span>
<span class="line"></span>
<span class="line"><span style="color:#E1E4E8;">      </span><span style="color:#6A737D;">//å®ç°æŸä¸€ä¸ªå±æ€§çš„æ•°æ®å“åº”å¼</span></span>
<span class="line"><span style="color:#E1E4E8;">      </span><span style="color:#F97583;">const</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">ageRef</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> </span><span style="color:#B392F0;">toRef</span><span style="color:#E1E4E8;">(state, </span><span style="color:#9ECBFF;">&#39;age&#39;</span><span style="color:#E1E4E8;">);</span></span>
<span class="line"></span>
<span class="line"><span style="color:#E1E4E8;">      </span><span style="color:#B392F0;">setTimeout</span><span style="color:#E1E4E8;">(() </span><span style="color:#F97583;">=&gt;</span><span style="color:#E1E4E8;"> {</span></span>
<span class="line"><span style="color:#E1E4E8;">        state.age </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">20</span><span style="color:#E1E4E8;">;</span></span>
<span class="line"><span style="color:#E1E4E8;">      }, </span><span style="color:#79B8FF;">1500</span><span style="color:#E1E4E8;">);</span></span>
<span class="line"></span>
<span class="line"><span style="color:#E1E4E8;">      </span><span style="color:#B392F0;">setTimeout</span><span style="color:#E1E4E8;">(() </span><span style="color:#F97583;">=&gt;</span><span style="color:#E1E4E8;"> {</span></span>
<span class="line"><span style="color:#E1E4E8;">        ageRef.value </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">25</span><span style="color:#E1E4E8;">; </span><span style="color:#6A737D;">// .value ä¿®æ”¹å€¼</span></span>
<span class="line"><span style="color:#E1E4E8;">      }, </span><span style="color:#79B8FF;">3000</span><span style="color:#E1E4E8;">);</span></span>
<span class="line"></span>
<span class="line"><span style="color:#E1E4E8;">      </span><span style="color:#F97583;">return</span><span style="color:#E1E4E8;"> {</span></span>
<span class="line"><span style="color:#E1E4E8;">        state,</span></span>
<span class="line"><span style="color:#E1E4E8;">        ageRef,</span></span>
<span class="line"><span style="color:#E1E4E8;">      };</span></span>
<span class="line"><span style="color:#E1E4E8;">    },</span></span>
<span class="line"><span style="color:#E1E4E8;">  };</span></span>
<span class="line"><span style="color:#E1E4E8;">&lt;/</span><span style="color:#85E89D;">script</span><span style="color:#E1E4E8;">&gt;</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#24292E;">&lt;</span><span style="color:#22863A;">template</span><span style="color:#24292E;">&gt;</span></span>
<span class="line"><span style="color:#24292E;">  &lt;</span><span style="color:#22863A;">p</span><span style="color:#24292E;">&gt;toRef demo - {{ageRef}} - {{state.name}} {{state.age}}&lt;/</span><span style="color:#22863A;">p</span><span style="color:#24292E;">&gt;</span></span>
<span class="line"><span style="color:#24292E;">&lt;/</span><span style="color:#22863A;">template</span><span style="color:#24292E;">&gt;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#24292E;">&lt;</span><span style="color:#22863A;">script</span><span style="color:#24292E;">&gt;</span></span>
<span class="line"><span style="color:#24292E;">  </span><span style="color:#D73A49;">import</span><span style="color:#24292E;"> { ref, toRef, reactive, computed } </span><span style="color:#D73A49;">from</span><span style="color:#24292E;"> </span><span style="color:#032F62;">&#39;vue&#39;</span><span style="color:#24292E;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#24292E;">  </span><span style="color:#D73A49;">export</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">default</span><span style="color:#24292E;"> {</span></span>
<span class="line"><span style="color:#24292E;">    name: </span><span style="color:#032F62;">&#39;ToRef&#39;</span><span style="color:#24292E;">,</span></span>
<span class="line"><span style="color:#24292E;">    </span><span style="color:#6F42C1;">setup</span><span style="color:#24292E;">() {</span></span>
<span class="line"><span style="color:#24292E;">      </span><span style="color:#D73A49;">const</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">state</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">=</span><span style="color:#24292E;"> </span><span style="color:#6F42C1;">reactive</span><span style="color:#24292E;">({</span></span>
<span class="line"><span style="color:#24292E;">        age: </span><span style="color:#005CC5;">18</span><span style="color:#24292E;">,</span></span>
<span class="line"><span style="color:#24292E;">        name: </span><span style="color:#032F62;">&#39;monday&#39;</span><span style="color:#24292E;">,</span></span>
<span class="line"><span style="color:#24292E;">      });</span></span>
<span class="line"></span>
<span class="line"><span style="color:#24292E;">      </span><span style="color:#6A737D;">// // toRef å¦‚æœç”¨äºæ™®é€šå¯¹è±¡ï¼ˆéå“åº”å¼å¯¹è±¡ï¼‰ï¼Œäº§å‡ºçš„ç»“æœä¸å…·å¤‡å“åº”å¼</span></span>
<span class="line"><span style="color:#24292E;">      </span><span style="color:#6A737D;">// const state = {</span></span>
<span class="line"><span style="color:#24292E;">      </span><span style="color:#6A737D;">//     age: 18,</span></span>
<span class="line"><span style="color:#24292E;">      </span><span style="color:#6A737D;">//     name: &#39;monday&#39;</span></span>
<span class="line"><span style="color:#24292E;">      </span><span style="color:#6A737D;">// }</span></span>
<span class="line"></span>
<span class="line"><span style="color:#24292E;">      </span><span style="color:#6A737D;">//å®ç°æŸä¸€ä¸ªå±æ€§çš„æ•°æ®å“åº”å¼</span></span>
<span class="line"><span style="color:#24292E;">      </span><span style="color:#D73A49;">const</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">ageRef</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">=</span><span style="color:#24292E;"> </span><span style="color:#6F42C1;">toRef</span><span style="color:#24292E;">(state, </span><span style="color:#032F62;">&#39;age&#39;</span><span style="color:#24292E;">);</span></span>
<span class="line"></span>
<span class="line"><span style="color:#24292E;">      </span><span style="color:#6F42C1;">setTimeout</span><span style="color:#24292E;">(() </span><span style="color:#D73A49;">=&gt;</span><span style="color:#24292E;"> {</span></span>
<span class="line"><span style="color:#24292E;">        state.age </span><span style="color:#D73A49;">=</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">20</span><span style="color:#24292E;">;</span></span>
<span class="line"><span style="color:#24292E;">      }, </span><span style="color:#005CC5;">1500</span><span style="color:#24292E;">);</span></span>
<span class="line"></span>
<span class="line"><span style="color:#24292E;">      </span><span style="color:#6F42C1;">setTimeout</span><span style="color:#24292E;">(() </span><span style="color:#D73A49;">=&gt;</span><span style="color:#24292E;"> {</span></span>
<span class="line"><span style="color:#24292E;">        ageRef.value </span><span style="color:#D73A49;">=</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">25</span><span style="color:#24292E;">; </span><span style="color:#6A737D;">// .value ä¿®æ”¹å€¼</span></span>
<span class="line"><span style="color:#24292E;">      }, </span><span style="color:#005CC5;">3000</span><span style="color:#24292E;">);</span></span>
<span class="line"></span>
<span class="line"><span style="color:#24292E;">      </span><span style="color:#D73A49;">return</span><span style="color:#24292E;"> {</span></span>
<span class="line"><span style="color:#24292E;">        state,</span></span>
<span class="line"><span style="color:#24292E;">        ageRef,</span></span>
<span class="line"><span style="color:#24292E;">      };</span></span>
<span class="line"><span style="color:#24292E;">    },</span></span>
<span class="line"><span style="color:#24292E;">  };</span></span>
<span class="line"><span style="color:#24292E;">&lt;/</span><span style="color:#22863A;">script</span><span style="color:#24292E;">&gt;</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br></div></div><p><strong>æ­¤æ—¶æˆ‘ä»¬æ¥çœ‹ä¸‹æµè§ˆå™¨çš„æ˜¾ç¤ºæ•ˆæœï¼š</strong></p><p><img src="https://mondaylab-1309616765.cos.ap-shanghai.myqcloud.com/images/202305270730602.gif" alt="toRef"></p><p>æˆ‘ä»¬é€šè¿‡ <code>reactive</code> æ¥åˆ›å»ºä¸€ä¸ª<strong>å“åº”å¼å¯¹è±¡</strong>ï¼Œä¹‹åå‘¢ï¼Œå¦‚æœåªå•ç‹¬è¦å¯¹å“åº”å¼å¯¹è±¡é‡Œé¢çš„<strong>æŸä¸€ä¸ªå±æ€§</strong>è¿›è¡Œå“åº”å¼ï¼Œé‚£ä¹ˆä½¿ç”¨<code>toRef</code> æ¥è§£å†³ã€‚ç”¨ <code>toRef(Object, prop)</code> çš„å½¢å¼æ¥ä¼ <strong>å¯¹è±¡å</strong>å’Œ<strong>å…·ä½“çš„å±æ€§å</strong>ï¼Œè¾¾åˆ°æŸä¸ªå±æ€§æ•°æ®å“åº”å¼çš„æ•ˆæœã€‚</p><h3 id="_3-torefs-æ˜¯ä»€ä¹ˆ" tabindex="-1">ï¼ˆ3ï¼‰toRefs æ˜¯ä»€ä¹ˆ <a class="header-anchor" href="#_3-torefs-æ˜¯ä»€ä¹ˆ" aria-label="Permalink to &quot;ï¼ˆ3ï¼‰toRefs æ˜¯ä»€ä¹ˆ&quot;">â€‹</a></h3><h4 id="_1-torefs-æ˜¯ä»€ä¹ˆ" tabindex="-1">1ï¼‰toRefs æ˜¯ä»€ä¹ˆ <a class="header-anchor" href="#_1-torefs-æ˜¯ä»€ä¹ˆ" aria-label="Permalink to &quot;1ï¼‰toRefs æ˜¯ä»€ä¹ˆ&quot;">â€‹</a></h4><ul><li>ä¸ <code>toRef</code> ä¸ä¸€æ ·çš„æ˜¯ï¼Œ <code>toRefs</code> æ˜¯é’ˆå¯¹æ•´ä¸ªå¯¹è±¡çš„æ‰€æœ‰å±æ€§ï¼Œç›®æ ‡åœ¨äºå°†å“åº”å¼å¯¹è±¡ï¼ˆ <code>reactive</code> å°è£…ï¼‰è½¬æ¢ä¸ºæ™®é€šå¯¹è±¡</li><li>æ™®é€šå¯¹è±¡é‡Œçš„æ¯ä¸€ä¸ªå±æ€§ <code>prop</code> éƒ½å¯¹åº”ä¸€ä¸ª <code>ref</code></li><li><code>toRefs</code> å’Œå¯¹è±¡ <code>Object</code> ä¸¤è€…<strong>ä¿æŒå¼•ç”¨å…³ç³»</strong>ï¼Œå³ä¸€ä¸ªæ”¹å®Œå¦å¤–ä¸€ä¸ªä¹Ÿè·Ÿç€æ”¹ã€‚</li></ul><h4 id="_2-ä¸¾ä¸ªä¾‹å­-ğŸŒ°-2" tabindex="-1">2ï¼‰ä¸¾ä¸ªä¾‹å­ ğŸŒ° <a class="header-anchor" href="#_2-ä¸¾ä¸ªä¾‹å­-ğŸŒ°-2" aria-label="Permalink to &quot;2ï¼‰ä¸¾ä¸ªä¾‹å­ ğŸŒ°&quot;">â€‹</a></h4><p>å‡è®¾æˆ‘ä»¬è¦å°†ä¸€ä¸ªå“åº”å¼å¯¹è±¡é‡Œé¢çš„æ‰€æœ‰å…ƒç´ å–å‡ºæ¥ï¼Œé‚£ä¹ˆæˆ‘ä»¬å¯ä»¥è¿™ä¹ˆå¤„ç†ã€‚<strong>ä»£ç å¦‚ä¸‹ï¼š</strong></p><div class="language-html vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">html</span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#E1E4E8;">&lt;</span><span style="color:#85E89D;">template</span><span style="color:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="color:#E1E4E8;">  &lt;</span><span style="color:#85E89D;">p</span><span style="color:#E1E4E8;">&gt;toRefs demo {{state.age}} {{state.name}}&lt;/</span><span style="color:#85E89D;">p</span><span style="color:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="color:#E1E4E8;">&lt;/</span><span style="color:#85E89D;">template</span><span style="color:#E1E4E8;">&gt;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#E1E4E8;">&lt;</span><span style="color:#85E89D;">script</span><span style="color:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="color:#E1E4E8;">  </span><span style="color:#F97583;">import</span><span style="color:#E1E4E8;"> { ref, toRef, toRefs, reactive } </span><span style="color:#F97583;">from</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">&#39;vue&#39;</span><span style="color:#E1E4E8;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#E1E4E8;">  </span><span style="color:#F97583;">export</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">default</span><span style="color:#E1E4E8;"> {</span></span>
<span class="line"><span style="color:#E1E4E8;">    name: </span><span style="color:#9ECBFF;">&#39;ToRefs&#39;</span><span style="color:#E1E4E8;">,</span></span>
<span class="line"><span style="color:#E1E4E8;">    </span><span style="color:#B392F0;">setup</span><span style="color:#E1E4E8;">() {</span></span>
<span class="line"><span style="color:#E1E4E8;">      </span><span style="color:#F97583;">const</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">state</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> </span><span style="color:#B392F0;">reactive</span><span style="color:#E1E4E8;">({</span></span>
<span class="line"><span style="color:#E1E4E8;">        age: </span><span style="color:#79B8FF;">20</span><span style="color:#E1E4E8;">,</span></span>
<span class="line"><span style="color:#E1E4E8;">        name: </span><span style="color:#9ECBFF;">&#39;monday&#39;</span><span style="color:#E1E4E8;">,</span></span>
<span class="line"><span style="color:#E1E4E8;">      });</span></span>
<span class="line"></span>
<span class="line"><span style="color:#E1E4E8;">      </span><span style="color:#F97583;">return</span><span style="color:#E1E4E8;"> {</span></span>
<span class="line"><span style="color:#E1E4E8;">        state,</span></span>
<span class="line"><span style="color:#E1E4E8;">      };</span></span>
<span class="line"><span style="color:#E1E4E8;">    },</span></span>
<span class="line"><span style="color:#E1E4E8;">  };</span></span>
<span class="line"><span style="color:#E1E4E8;">&lt;/</span><span style="color:#85E89D;">script</span><span style="color:#E1E4E8;">&gt;</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#24292E;">&lt;</span><span style="color:#22863A;">template</span><span style="color:#24292E;">&gt;</span></span>
<span class="line"><span style="color:#24292E;">  &lt;</span><span style="color:#22863A;">p</span><span style="color:#24292E;">&gt;toRefs demo {{state.age}} {{state.name}}&lt;/</span><span style="color:#22863A;">p</span><span style="color:#24292E;">&gt;</span></span>
<span class="line"><span style="color:#24292E;">&lt;/</span><span style="color:#22863A;">template</span><span style="color:#24292E;">&gt;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#24292E;">&lt;</span><span style="color:#22863A;">script</span><span style="color:#24292E;">&gt;</span></span>
<span class="line"><span style="color:#24292E;">  </span><span style="color:#D73A49;">import</span><span style="color:#24292E;"> { ref, toRef, toRefs, reactive } </span><span style="color:#D73A49;">from</span><span style="color:#24292E;"> </span><span style="color:#032F62;">&#39;vue&#39;</span><span style="color:#24292E;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#24292E;">  </span><span style="color:#D73A49;">export</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">default</span><span style="color:#24292E;"> {</span></span>
<span class="line"><span style="color:#24292E;">    name: </span><span style="color:#032F62;">&#39;ToRefs&#39;</span><span style="color:#24292E;">,</span></span>
<span class="line"><span style="color:#24292E;">    </span><span style="color:#6F42C1;">setup</span><span style="color:#24292E;">() {</span></span>
<span class="line"><span style="color:#24292E;">      </span><span style="color:#D73A49;">const</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">state</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">=</span><span style="color:#24292E;"> </span><span style="color:#6F42C1;">reactive</span><span style="color:#24292E;">({</span></span>
<span class="line"><span style="color:#24292E;">        age: </span><span style="color:#005CC5;">20</span><span style="color:#24292E;">,</span></span>
<span class="line"><span style="color:#24292E;">        name: </span><span style="color:#032F62;">&#39;monday&#39;</span><span style="color:#24292E;">,</span></span>
<span class="line"><span style="color:#24292E;">      });</span></span>
<span class="line"></span>
<span class="line"><span style="color:#24292E;">      </span><span style="color:#D73A49;">return</span><span style="color:#24292E;"> {</span></span>
<span class="line"><span style="color:#24292E;">        state,</span></span>
<span class="line"><span style="color:#24292E;">      };</span></span>
<span class="line"><span style="color:#24292E;">    },</span></span>
<span class="line"><span style="color:#24292E;">  };</span></span>
<span class="line"><span style="color:#24292E;">&lt;/</span><span style="color:#22863A;">script</span><span style="color:#24292E;">&gt;</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br></div></div><p><strong>æ­¤æ—¶æµè§ˆå™¨çš„æ˜¾ç¤ºç»“æœå¦‚ä¸‹ï¼š</strong></p><p><img src="https://mondaylab-1309616765.cos.ap-shanghai.myqcloud.com/images/202305270730742.png" alt="toRefs"></p><p>ä½†æ˜¯è¿™æ ·å­å¥½åƒæœ‰ç‚¹ç•¥æ˜¾éº»çƒ¦ï¼Œå› ä¸ºåœ¨æ¨¡æ¿ç¼–è¯‘çš„æ—¶å€™ä¸€ç›´è¦ <code>state.</code> ï¼Œè¿™æ ·å¦‚æœé‡åˆ°è¦å–å¾ˆå¤šä¸ªå±æ€§çš„æ—¶å€™å°±æœ‰ç‚¹è‡ƒè‚¿äº†ã€‚</p><hr><p>æ—¢ç„¶å¤ªè‡ƒè‚¿äº†ï¼Œé‚£æˆ‘ä»¬æ¢ä¸€ç§æ€è·¯ï¼ŒæŠŠ <code>state</code> è¿›è¡Œè§£æ„ã€‚<strong>ä»£ç å¦‚ä¸‹ï¼š</strong></p><div class="language-html vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">html</span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#E1E4E8;">&lt;</span><span style="color:#85E89D;">template</span><span style="color:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="color:#E1E4E8;">  &lt;</span><span style="color:#85E89D;">p</span><span style="color:#E1E4E8;">&gt;toRefs demo {{age}} {{name}}&lt;/</span><span style="color:#85E89D;">p</span><span style="color:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="color:#E1E4E8;">&lt;/</span><span style="color:#85E89D;">template</span><span style="color:#E1E4E8;">&gt;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#E1E4E8;">&lt;</span><span style="color:#85E89D;">script</span><span style="color:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="color:#E1E4E8;">  </span><span style="color:#F97583;">import</span><span style="color:#E1E4E8;"> { ref, toRef, toRefs, reactive } </span><span style="color:#F97583;">from</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">&#39;vue&#39;</span><span style="color:#E1E4E8;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#E1E4E8;">  </span><span style="color:#F97583;">export</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">default</span><span style="color:#E1E4E8;"> {</span></span>
<span class="line"><span style="color:#E1E4E8;">    name: </span><span style="color:#9ECBFF;">&#39;ToRefs&#39;</span><span style="color:#E1E4E8;">,</span></span>
<span class="line"><span style="color:#E1E4E8;">    </span><span style="color:#B392F0;">setup</span><span style="color:#E1E4E8;">() {</span></span>
<span class="line"><span style="color:#E1E4E8;">      </span><span style="color:#F97583;">const</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">state</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> </span><span style="color:#B392F0;">reactive</span><span style="color:#E1E4E8;">({</span></span>
<span class="line"><span style="color:#E1E4E8;">        age: </span><span style="color:#79B8FF;">20</span><span style="color:#E1E4E8;">,</span></span>
<span class="line"><span style="color:#E1E4E8;">        name: </span><span style="color:#9ECBFF;">&#39;monday&#39;</span><span style="color:#E1E4E8;">,</span></span>
<span class="line"><span style="color:#E1E4E8;">      });</span></span>
<span class="line"></span>
<span class="line"><span style="color:#E1E4E8;">      </span><span style="color:#F97583;">return</span><span style="color:#E1E4E8;"> {</span></span>
<span class="line"><span style="color:#E1E4E8;">        </span><span style="color:#F97583;">...</span><span style="color:#E1E4E8;">state,</span></span>
<span class="line"><span style="color:#E1E4E8;">      };</span></span>
<span class="line"><span style="color:#E1E4E8;">    },</span></span>
<span class="line"><span style="color:#E1E4E8;">  };</span></span>
<span class="line"><span style="color:#E1E4E8;">&lt;/</span><span style="color:#85E89D;">script</span><span style="color:#E1E4E8;">&gt;</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#24292E;">&lt;</span><span style="color:#22863A;">template</span><span style="color:#24292E;">&gt;</span></span>
<span class="line"><span style="color:#24292E;">  &lt;</span><span style="color:#22863A;">p</span><span style="color:#24292E;">&gt;toRefs demo {{age}} {{name}}&lt;/</span><span style="color:#22863A;">p</span><span style="color:#24292E;">&gt;</span></span>
<span class="line"><span style="color:#24292E;">&lt;/</span><span style="color:#22863A;">template</span><span style="color:#24292E;">&gt;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#24292E;">&lt;</span><span style="color:#22863A;">script</span><span style="color:#24292E;">&gt;</span></span>
<span class="line"><span style="color:#24292E;">  </span><span style="color:#D73A49;">import</span><span style="color:#24292E;"> { ref, toRef, toRefs, reactive } </span><span style="color:#D73A49;">from</span><span style="color:#24292E;"> </span><span style="color:#032F62;">&#39;vue&#39;</span><span style="color:#24292E;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#24292E;">  </span><span style="color:#D73A49;">export</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">default</span><span style="color:#24292E;"> {</span></span>
<span class="line"><span style="color:#24292E;">    name: </span><span style="color:#032F62;">&#39;ToRefs&#39;</span><span style="color:#24292E;">,</span></span>
<span class="line"><span style="color:#24292E;">    </span><span style="color:#6F42C1;">setup</span><span style="color:#24292E;">() {</span></span>
<span class="line"><span style="color:#24292E;">      </span><span style="color:#D73A49;">const</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">state</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">=</span><span style="color:#24292E;"> </span><span style="color:#6F42C1;">reactive</span><span style="color:#24292E;">({</span></span>
<span class="line"><span style="color:#24292E;">        age: </span><span style="color:#005CC5;">20</span><span style="color:#24292E;">,</span></span>
<span class="line"><span style="color:#24292E;">        name: </span><span style="color:#032F62;">&#39;monday&#39;</span><span style="color:#24292E;">,</span></span>
<span class="line"><span style="color:#24292E;">      });</span></span>
<span class="line"></span>
<span class="line"><span style="color:#24292E;">      </span><span style="color:#D73A49;">return</span><span style="color:#24292E;"> {</span></span>
<span class="line"><span style="color:#24292E;">        </span><span style="color:#D73A49;">...</span><span style="color:#24292E;">state,</span></span>
<span class="line"><span style="color:#24292E;">      };</span></span>
<span class="line"><span style="color:#24292E;">    },</span></span>
<span class="line"><span style="color:#24292E;">  };</span></span>
<span class="line"><span style="color:#24292E;">&lt;/</span><span style="color:#22863A;">script</span><span style="color:#24292E;">&gt;</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br></div></div><p><strong>æ­¤æ—¶æµè§ˆå™¨çš„æ˜¾ç¤ºç»“æœå¦‚ä¸‹ï¼š</strong></p><p><img src="https://mondaylab-1309616765.cos.ap-shanghai.myqcloud.com/images/202305270730419.png" alt="toRefs"></p><p>æ•ˆæœæ˜¯ä¸€æ ·çš„ï¼Œçœ‹èµ·æ¥æ¸…æ™°äº†å¾ˆå¤šã€‚ä½†æ˜¯å‘¢â€¦â€¦å¤©ä¸Šæ€»ä¸ä¼šæœ‰æ— ç¼˜æ— æ•…çš„é¦…é¥¼å‡ºç°ï¼Œå¾—åˆ°ä¸€äº›å¥½å¤„çš„åŒæ—¶æ€»è¦å¤±å»äº›åŸæœ¬æ‹¥æœ‰çš„ä¸œè¥¿ã€‚</p><hr><p>å¯¹äºè§£æ„åçš„å¯¹è±¡æ¥è¯´ï¼Œå¦‚æœç›´æ¥è§£æ„ <code>reactive</code> ï¼Œé‚£ä¹ˆè§£æ„å‡ºæ¥çš„å¯¹è±¡ä¼šç›´æ¥å¤±å»å“åº”å¼ã€‚æˆ‘ä»¬ç”¨ä¸€ä¸ªå®šæ—¶å™¨æ¥æ£€éªŒä¸‹æ•ˆæœï¼Œ<strong>å…·ä½“ä»£ç å¦‚ä¸‹ï¼š</strong></p><div class="language-html vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">html</span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#E1E4E8;">&lt;</span><span style="color:#85E89D;">template</span><span style="color:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="color:#E1E4E8;">  &lt;</span><span style="color:#85E89D;">p</span><span style="color:#E1E4E8;">&gt;toRefs demo {{age}} {{name}}&lt;/</span><span style="color:#85E89D;">p</span><span style="color:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="color:#E1E4E8;">&lt;/</span><span style="color:#85E89D;">template</span><span style="color:#E1E4E8;">&gt;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#E1E4E8;">&lt;</span><span style="color:#85E89D;">script</span><span style="color:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="color:#E1E4E8;">  </span><span style="color:#F97583;">import</span><span style="color:#E1E4E8;"> { ref, toRef, toRefs, reactive } </span><span style="color:#F97583;">from</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">&#39;vue&#39;</span><span style="color:#E1E4E8;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#E1E4E8;">  </span><span style="color:#F97583;">export</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">default</span><span style="color:#E1E4E8;"> {</span></span>
<span class="line"><span style="color:#E1E4E8;">    name: </span><span style="color:#9ECBFF;">&#39;ToRefs&#39;</span><span style="color:#E1E4E8;">,</span></span>
<span class="line"><span style="color:#E1E4E8;">    </span><span style="color:#B392F0;">setup</span><span style="color:#E1E4E8;">() {</span></span>
<span class="line"><span style="color:#E1E4E8;">      </span><span style="color:#F97583;">const</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">state</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> </span><span style="color:#B392F0;">reactive</span><span style="color:#E1E4E8;">({</span></span>
<span class="line"><span style="color:#E1E4E8;">        age: </span><span style="color:#79B8FF;">20</span><span style="color:#E1E4E8;">,</span></span>
<span class="line"><span style="color:#E1E4E8;">        name: </span><span style="color:#9ECBFF;">&#39;monday&#39;</span><span style="color:#E1E4E8;">,</span></span>
<span class="line"><span style="color:#E1E4E8;">      });</span></span>
<span class="line"></span>
<span class="line"><span style="color:#E1E4E8;">      </span><span style="color:#B392F0;">setTimeout</span><span style="color:#E1E4E8;">(() </span><span style="color:#F97583;">=&gt;</span><span style="color:#E1E4E8;"> {</span></span>
<span class="line"><span style="color:#E1E4E8;">        state.age </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">25</span><span style="color:#E1E4E8;">;</span></span>
<span class="line"><span style="color:#E1E4E8;">      }, </span><span style="color:#79B8FF;">1500</span><span style="color:#E1E4E8;">);</span></span>
<span class="line"></span>
<span class="line"><span style="color:#E1E4E8;">      </span><span style="color:#F97583;">return</span><span style="color:#E1E4E8;"> {</span></span>
<span class="line"><span style="color:#E1E4E8;">        </span><span style="color:#F97583;">...</span><span style="color:#E1E4E8;">state,</span></span>
<span class="line"><span style="color:#E1E4E8;">      };</span></span>
<span class="line"><span style="color:#E1E4E8;">    },</span></span>
<span class="line"><span style="color:#E1E4E8;">  };</span></span>
<span class="line"><span style="color:#E1E4E8;">&lt;/</span><span style="color:#85E89D;">script</span><span style="color:#E1E4E8;">&gt;</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#24292E;">&lt;</span><span style="color:#22863A;">template</span><span style="color:#24292E;">&gt;</span></span>
<span class="line"><span style="color:#24292E;">  &lt;</span><span style="color:#22863A;">p</span><span style="color:#24292E;">&gt;toRefs demo {{age}} {{name}}&lt;/</span><span style="color:#22863A;">p</span><span style="color:#24292E;">&gt;</span></span>
<span class="line"><span style="color:#24292E;">&lt;/</span><span style="color:#22863A;">template</span><span style="color:#24292E;">&gt;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#24292E;">&lt;</span><span style="color:#22863A;">script</span><span style="color:#24292E;">&gt;</span></span>
<span class="line"><span style="color:#24292E;">  </span><span style="color:#D73A49;">import</span><span style="color:#24292E;"> { ref, toRef, toRefs, reactive } </span><span style="color:#D73A49;">from</span><span style="color:#24292E;"> </span><span style="color:#032F62;">&#39;vue&#39;</span><span style="color:#24292E;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#24292E;">  </span><span style="color:#D73A49;">export</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">default</span><span style="color:#24292E;"> {</span></span>
<span class="line"><span style="color:#24292E;">    name: </span><span style="color:#032F62;">&#39;ToRefs&#39;</span><span style="color:#24292E;">,</span></span>
<span class="line"><span style="color:#24292E;">    </span><span style="color:#6F42C1;">setup</span><span style="color:#24292E;">() {</span></span>
<span class="line"><span style="color:#24292E;">      </span><span style="color:#D73A49;">const</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">state</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">=</span><span style="color:#24292E;"> </span><span style="color:#6F42C1;">reactive</span><span style="color:#24292E;">({</span></span>
<span class="line"><span style="color:#24292E;">        age: </span><span style="color:#005CC5;">20</span><span style="color:#24292E;">,</span></span>
<span class="line"><span style="color:#24292E;">        name: </span><span style="color:#032F62;">&#39;monday&#39;</span><span style="color:#24292E;">,</span></span>
<span class="line"><span style="color:#24292E;">      });</span></span>
<span class="line"></span>
<span class="line"><span style="color:#24292E;">      </span><span style="color:#6F42C1;">setTimeout</span><span style="color:#24292E;">(() </span><span style="color:#D73A49;">=&gt;</span><span style="color:#24292E;"> {</span></span>
<span class="line"><span style="color:#24292E;">        state.age </span><span style="color:#D73A49;">=</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">25</span><span style="color:#24292E;">;</span></span>
<span class="line"><span style="color:#24292E;">      }, </span><span style="color:#005CC5;">1500</span><span style="color:#24292E;">);</span></span>
<span class="line"></span>
<span class="line"><span style="color:#24292E;">      </span><span style="color:#D73A49;">return</span><span style="color:#24292E;"> {</span></span>
<span class="line"><span style="color:#24292E;">        </span><span style="color:#D73A49;">...</span><span style="color:#24292E;">state,</span></span>
<span class="line"><span style="color:#24292E;">      };</span></span>
<span class="line"><span style="color:#24292E;">    },</span></span>
<span class="line"><span style="color:#24292E;">  };</span></span>
<span class="line"><span style="color:#24292E;">&lt;/</span><span style="color:#22863A;">script</span><span style="color:#24292E;">&gt;</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br></div></div><p><strong>æ­¤æ—¶æµè§ˆå™¨çš„æ˜¾ç¤ºç»“æœå¦‚ä¸‹ï¼š</strong></p><p><img src="https://mondaylab-1309616765.cos.ap-shanghai.myqcloud.com/images/202305270730055.gif" alt="toRefs"></p><p>æˆ‘ä»¬ç­‰äº†å¥½å‡ ç§’ä¹‹åï¼Œå‘ç° <code>age</code> è¿Ÿè¿Ÿä¸å˜æˆ<strong>25</strong>ï¼Œæ‰€ä»¥å½“æˆ‘ä»¬è§£æ„ <code>reactive</code> çš„å¯¹è±¡æ—¶ï¼Œå“åº”å¼å°†ä¼šç›´æ¥å¤±å»ã€‚</p><hr><p>æ‰€ä»¥ï¼Œå°±æ¥åˆ°äº†æˆ‘ä»¬çš„ <code>toRefs</code> ã€‚ <code>toRefs</code> åœ¨æŠŠå“åº”å¼å¯¹è±¡è½¬å˜ä¸ºæ™®é€šå¯¹è±¡åï¼Œä¸ä¼šä¸¢å¤±æ‰å“åº”å¼çš„åŠŸèƒ½ã€‚å…·ä½“æˆ‘ä»¬<strong>ç”¨ä»£ç æ¥æ¼”ç¤ºä¸€ä¸‹ï¼š</strong></p><div class="language-html vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">html</span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#E1E4E8;">&lt;</span><span style="color:#85E89D;">template</span><span style="color:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="color:#E1E4E8;">  &lt;</span><span style="color:#85E89D;">p</span><span style="color:#E1E4E8;">&gt;toRefs demo {{age}} {{name}}&lt;/</span><span style="color:#85E89D;">p</span><span style="color:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="color:#E1E4E8;">&lt;/</span><span style="color:#85E89D;">template</span><span style="color:#E1E4E8;">&gt;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#E1E4E8;">&lt;</span><span style="color:#85E89D;">script</span><span style="color:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="color:#E1E4E8;">  </span><span style="color:#F97583;">import</span><span style="color:#E1E4E8;"> { ref, toRef, toRefs, reactive } </span><span style="color:#F97583;">from</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">&#39;vue&#39;</span><span style="color:#E1E4E8;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#E1E4E8;">  </span><span style="color:#F97583;">export</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">default</span><span style="color:#E1E4E8;"> {</span></span>
<span class="line"><span style="color:#E1E4E8;">    name: </span><span style="color:#9ECBFF;">&#39;ToRefs&#39;</span><span style="color:#E1E4E8;">,</span></span>
<span class="line"><span style="color:#E1E4E8;">    </span><span style="color:#B392F0;">setup</span><span style="color:#E1E4E8;">() {</span></span>
<span class="line"><span style="color:#E1E4E8;">      </span><span style="color:#F97583;">const</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">state</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> </span><span style="color:#B392F0;">reactive</span><span style="color:#E1E4E8;">({</span></span>
<span class="line"><span style="color:#E1E4E8;">        age: </span><span style="color:#79B8FF;">18</span><span style="color:#E1E4E8;">,</span></span>
<span class="line"><span style="color:#E1E4E8;">        name: </span><span style="color:#9ECBFF;">&#39;monday&#39;</span><span style="color:#E1E4E8;">,</span></span>
<span class="line"><span style="color:#E1E4E8;">      });</span></span>
<span class="line"></span>
<span class="line"><span style="color:#E1E4E8;">      </span><span style="color:#F97583;">const</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">stateAsRefs</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> </span><span style="color:#B392F0;">toRefs</span><span style="color:#E1E4E8;">(state); </span><span style="color:#6A737D;">// å°†å“åº”å¼å¯¹è±¡ï¼Œå˜æˆæ™®é€šå¯¹è±¡</span></span>
<span class="line"></span>
<span class="line"><span style="color:#E1E4E8;">      </span><span style="color:#B392F0;">setTimeout</span><span style="color:#E1E4E8;">(() </span><span style="color:#F97583;">=&gt;</span><span style="color:#E1E4E8;"> {</span></span>
<span class="line"><span style="color:#E1E4E8;">        console.</span><span style="color:#B392F0;">log</span><span style="color:#E1E4E8;">(</span><span style="color:#9ECBFF;">&#39;age&#39;</span><span style="color:#E1E4E8;">, state.age, </span><span style="color:#9ECBFF;">&#39;name&#39;</span><span style="color:#E1E4E8;">, state.name);</span></span>
<span class="line"><span style="color:#E1E4E8;">        (state.age </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">20</span><span style="color:#E1E4E8;">), (state.name </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">&#39;å‘¨ä¸€&#39;</span><span style="color:#E1E4E8;">);</span></span>
<span class="line"><span style="color:#E1E4E8;">        console.</span><span style="color:#B392F0;">log</span><span style="color:#E1E4E8;">(</span><span style="color:#9ECBFF;">&#39;age&#39;</span><span style="color:#E1E4E8;">, state.age, </span><span style="color:#9ECBFF;">&#39;name&#39;</span><span style="color:#E1E4E8;">, state.name);</span></span>
<span class="line"><span style="color:#E1E4E8;">      }, </span><span style="color:#79B8FF;">1500</span><span style="color:#E1E4E8;">);</span></span>
<span class="line"></span>
<span class="line"><span style="color:#E1E4E8;">      </span><span style="color:#F97583;">return</span><span style="color:#E1E4E8;"> stateAsRefs;</span></span>
<span class="line"><span style="color:#E1E4E8;">    },</span></span>
<span class="line"><span style="color:#E1E4E8;">  };</span></span>
<span class="line"><span style="color:#E1E4E8;">&lt;/</span><span style="color:#85E89D;">script</span><span style="color:#E1E4E8;">&gt;</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#24292E;">&lt;</span><span style="color:#22863A;">template</span><span style="color:#24292E;">&gt;</span></span>
<span class="line"><span style="color:#24292E;">  &lt;</span><span style="color:#22863A;">p</span><span style="color:#24292E;">&gt;toRefs demo {{age}} {{name}}&lt;/</span><span style="color:#22863A;">p</span><span style="color:#24292E;">&gt;</span></span>
<span class="line"><span style="color:#24292E;">&lt;/</span><span style="color:#22863A;">template</span><span style="color:#24292E;">&gt;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#24292E;">&lt;</span><span style="color:#22863A;">script</span><span style="color:#24292E;">&gt;</span></span>
<span class="line"><span style="color:#24292E;">  </span><span style="color:#D73A49;">import</span><span style="color:#24292E;"> { ref, toRef, toRefs, reactive } </span><span style="color:#D73A49;">from</span><span style="color:#24292E;"> </span><span style="color:#032F62;">&#39;vue&#39;</span><span style="color:#24292E;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#24292E;">  </span><span style="color:#D73A49;">export</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">default</span><span style="color:#24292E;"> {</span></span>
<span class="line"><span style="color:#24292E;">    name: </span><span style="color:#032F62;">&#39;ToRefs&#39;</span><span style="color:#24292E;">,</span></span>
<span class="line"><span style="color:#24292E;">    </span><span style="color:#6F42C1;">setup</span><span style="color:#24292E;">() {</span></span>
<span class="line"><span style="color:#24292E;">      </span><span style="color:#D73A49;">const</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">state</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">=</span><span style="color:#24292E;"> </span><span style="color:#6F42C1;">reactive</span><span style="color:#24292E;">({</span></span>
<span class="line"><span style="color:#24292E;">        age: </span><span style="color:#005CC5;">18</span><span style="color:#24292E;">,</span></span>
<span class="line"><span style="color:#24292E;">        name: </span><span style="color:#032F62;">&#39;monday&#39;</span><span style="color:#24292E;">,</span></span>
<span class="line"><span style="color:#24292E;">      });</span></span>
<span class="line"></span>
<span class="line"><span style="color:#24292E;">      </span><span style="color:#D73A49;">const</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">stateAsRefs</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">=</span><span style="color:#24292E;"> </span><span style="color:#6F42C1;">toRefs</span><span style="color:#24292E;">(state); </span><span style="color:#6A737D;">// å°†å“åº”å¼å¯¹è±¡ï¼Œå˜æˆæ™®é€šå¯¹è±¡</span></span>
<span class="line"></span>
<span class="line"><span style="color:#24292E;">      </span><span style="color:#6F42C1;">setTimeout</span><span style="color:#24292E;">(() </span><span style="color:#D73A49;">=&gt;</span><span style="color:#24292E;"> {</span></span>
<span class="line"><span style="color:#24292E;">        console.</span><span style="color:#6F42C1;">log</span><span style="color:#24292E;">(</span><span style="color:#032F62;">&#39;age&#39;</span><span style="color:#24292E;">, state.age, </span><span style="color:#032F62;">&#39;name&#39;</span><span style="color:#24292E;">, state.name);</span></span>
<span class="line"><span style="color:#24292E;">        (state.age </span><span style="color:#D73A49;">=</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">20</span><span style="color:#24292E;">), (state.name </span><span style="color:#D73A49;">=</span><span style="color:#24292E;"> </span><span style="color:#032F62;">&#39;å‘¨ä¸€&#39;</span><span style="color:#24292E;">);</span></span>
<span class="line"><span style="color:#24292E;">        console.</span><span style="color:#6F42C1;">log</span><span style="color:#24292E;">(</span><span style="color:#032F62;">&#39;age&#39;</span><span style="color:#24292E;">, state.age, </span><span style="color:#032F62;">&#39;name&#39;</span><span style="color:#24292E;">, state.name);</span></span>
<span class="line"><span style="color:#24292E;">      }, </span><span style="color:#005CC5;">1500</span><span style="color:#24292E;">);</span></span>
<span class="line"></span>
<span class="line"><span style="color:#24292E;">      </span><span style="color:#D73A49;">return</span><span style="color:#24292E;"> stateAsRefs;</span></span>
<span class="line"><span style="color:#24292E;">    },</span></span>
<span class="line"><span style="color:#24292E;">  };</span></span>
<span class="line"><span style="color:#24292E;">&lt;/</span><span style="color:#22863A;">script</span><span style="color:#24292E;">&gt;</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br></div></div><p><strong>æ­¤æ—¶æˆ‘ä»¬è§‚å¯Ÿæµè§ˆå™¨çš„æ˜¾ç¤ºæ•ˆæœï¼š</strong></p><p><img src="https://mondaylab-1309616765.cos.ap-shanghai.myqcloud.com/images/202305270731913.gif" alt="toRefs"></p><p>å¤§å®¶å¯ä»¥çœ‹åˆ°ï¼Œç”¨äº† <code>toRefs</code> ï¼Œæ™®é€šå¯¹è±¡çš„å€¼æˆåŠŸè¢«å–å‡ºæ¥äº†ï¼Œå¹¶ä¸”è¿˜<strong>ä¸ä¼šä¸¢å¤±å“åº”å¼çš„åŠŸèƒ½</strong>ï¼Œè¯¥æ”¹å˜çš„å€¼ä¸€ä¸ªä¹Ÿä¸å°‘ã€‚</p><h3 id="_4-åˆæˆå‡½æ•°è¿”å›å“åº”å¼å¯¹è±¡" tabindex="-1">ï¼ˆ4ï¼‰åˆæˆå‡½æ•°è¿”å›å“åº”å¼å¯¹è±¡ <a class="header-anchor" href="#_4-åˆæˆå‡½æ•°è¿”å›å“åº”å¼å¯¹è±¡" aria-label="Permalink to &quot;ï¼ˆ4ï¼‰åˆæˆå‡½æ•°è¿”å›å“åº”å¼å¯¹è±¡&quot;">â€‹</a></h3><p>äº†è§£äº†ä¸Šé¢ä¸‰ç§ç±»å‹çš„ä½¿ç”¨ï¼Œæˆ‘ä»¬å†æ¥çœ‹ä¸€ç§åœºæ™¯ï¼š<strong>åˆæˆå‡½æ•°å¦‚ä½•è¿”å›å“åº”å¼å¯¹è±¡</strong>ã€‚<strong>ä¸‹é¢é™„ä¸Šä»£ç ï¼š</strong></p><div class="language-js vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#F97583;">function</span><span style="color:#E1E4E8;"> </span><span style="color:#B392F0;">useFeatureX</span><span style="color:#E1E4E8;">() {</span></span>
<span class="line"><span style="color:#E1E4E8;">  </span><span style="color:#F97583;">const</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">state</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> </span><span style="color:#B392F0;">reactive</span><span style="color:#E1E4E8;">({</span></span>
<span class="line"><span style="color:#E1E4E8;">    x: </span><span style="color:#79B8FF;">1</span><span style="color:#E1E4E8;">,</span></span>
<span class="line"><span style="color:#E1E4E8;">    y: </span><span style="color:#79B8FF;">2</span><span style="color:#E1E4E8;">,</span></span>
<span class="line"><span style="color:#E1E4E8;">  });</span></span>
<span class="line"><span style="color:#E1E4E8;">  </span><span style="color:#6A737D;">//é€»è¾‘è¿è¡ŒçŠ¶æ€ï¼Œâ€¦â€¦</span></span>
<span class="line"><span style="color:#E1E4E8;">  </span><span style="color:#6A737D;">//è¿”å›æ—¶è½¬æ¢ä¸ºref</span></span>
<span class="line"><span style="color:#E1E4E8;">  </span><span style="color:#F97583;">return</span><span style="color:#E1E4E8;"> </span><span style="color:#B392F0;">toRefs</span><span style="color:#E1E4E8;">(state);</span></span>
<span class="line"><span style="color:#E1E4E8;">}</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#D73A49;">function</span><span style="color:#24292E;"> </span><span style="color:#6F42C1;">useFeatureX</span><span style="color:#24292E;">() {</span></span>
<span class="line"><span style="color:#24292E;">  </span><span style="color:#D73A49;">const</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">state</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">=</span><span style="color:#24292E;"> </span><span style="color:#6F42C1;">reactive</span><span style="color:#24292E;">({</span></span>
<span class="line"><span style="color:#24292E;">    x: </span><span style="color:#005CC5;">1</span><span style="color:#24292E;">,</span></span>
<span class="line"><span style="color:#24292E;">    y: </span><span style="color:#005CC5;">2</span><span style="color:#24292E;">,</span></span>
<span class="line"><span style="color:#24292E;">  });</span></span>
<span class="line"><span style="color:#24292E;">  </span><span style="color:#6A737D;">//é€»è¾‘è¿è¡ŒçŠ¶æ€ï¼Œâ€¦â€¦</span></span>
<span class="line"><span style="color:#24292E;">  </span><span style="color:#6A737D;">//è¿”å›æ—¶è½¬æ¢ä¸ºref</span></span>
<span class="line"><span style="color:#24292E;">  </span><span style="color:#D73A49;">return</span><span style="color:#24292E;"> </span><span style="color:#6F42C1;">toRefs</span><span style="color:#24292E;">(state);</span></span>
<span class="line"><span style="color:#24292E;">}</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br></div></div><div class="language-js vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#F97583;">export</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">default</span><span style="color:#E1E4E8;"> {</span></span>
<span class="line"><span style="color:#E1E4E8;">  </span><span style="color:#B392F0;">setup</span><span style="color:#E1E4E8;">() {</span></span>
<span class="line"><span style="color:#E1E4E8;">    </span><span style="color:#6A737D;">//å¯ä»¥åœ¨ä¸å¤±å»å“åº”æ€§çš„æƒ…å†µä¸‹ç ´åç»“æ„</span></span>
<span class="line"><span style="color:#E1E4E8;">    </span><span style="color:#F97583;">const</span><span style="color:#E1E4E8;"> { </span><span style="color:#79B8FF;">x</span><span style="color:#E1E4E8;">, </span><span style="color:#79B8FF;">y</span><span style="color:#E1E4E8;"> } </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> </span><span style="color:#B392F0;">useFeatureX</span><span style="color:#E1E4E8;">();</span></span>
<span class="line"><span style="color:#E1E4E8;">    </span><span style="color:#F97583;">return</span><span style="color:#E1E4E8;"> {</span></span>
<span class="line"><span style="color:#E1E4E8;">      x,</span></span>
<span class="line"><span style="color:#E1E4E8;">      y,</span></span>
<span class="line"><span style="color:#E1E4E8;">    };</span></span>
<span class="line"><span style="color:#E1E4E8;">  },</span></span>
<span class="line"><span style="color:#E1E4E8;">};</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#D73A49;">export</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">default</span><span style="color:#24292E;"> {</span></span>
<span class="line"><span style="color:#24292E;">  </span><span style="color:#6F42C1;">setup</span><span style="color:#24292E;">() {</span></span>
<span class="line"><span style="color:#24292E;">    </span><span style="color:#6A737D;">//å¯ä»¥åœ¨ä¸å¤±å»å“åº”æ€§çš„æƒ…å†µä¸‹ç ´åç»“æ„</span></span>
<span class="line"><span style="color:#24292E;">    </span><span style="color:#D73A49;">const</span><span style="color:#24292E;"> { </span><span style="color:#005CC5;">x</span><span style="color:#24292E;">, </span><span style="color:#005CC5;">y</span><span style="color:#24292E;"> } </span><span style="color:#D73A49;">=</span><span style="color:#24292E;"> </span><span style="color:#6F42C1;">useFeatureX</span><span style="color:#24292E;">();</span></span>
<span class="line"><span style="color:#24292E;">    </span><span style="color:#D73A49;">return</span><span style="color:#24292E;"> {</span></span>
<span class="line"><span style="color:#24292E;">      x,</span></span>
<span class="line"><span style="color:#24292E;">      y,</span></span>
<span class="line"><span style="color:#24292E;">    };</span></span>
<span class="line"><span style="color:#24292E;">  },</span></span>
<span class="line"><span style="color:#24292E;">};</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br></div></div><p>åœ¨ç¬¬ä¸€æ®µä»£ç ä¸­ï¼Œæˆ‘ä»¬å®šä¹‰äº†ä¸€ä¸ªå‡½æ•°ï¼Œå¹¶ä¸”ç”¨ <code>toRefs</code> å°† <code>state</code> å¯¹è±¡è¿›è¡Œè¿”å›ï¼Œä¹‹å<strong>åœ¨ç»„ä»¶é‡Œé¢ç›´æ¥è°ƒç”¨å“åº”å¼å¯¹è±¡</strong>ã€‚</p><p>é€šè¿‡è¿™æ ·æ–¹å¼ï¼Œè®©ä»£ç é€»è¾‘å˜å¾—æ›´åŠ æ¸…æ™°æ˜äº†ï¼Œå¤ç”¨æ€§æ›´å¼ºã€‚</p><h2 id="_2ã€æœ€ä½³ä½¿ç”¨æ–¹å¼" tabindex="-1">2ã€æœ€ä½³ä½¿ç”¨æ–¹å¼ <a class="header-anchor" href="#_2ã€æœ€ä½³ä½¿ç”¨æ–¹å¼" aria-label="Permalink to &quot;2ã€æœ€ä½³ä½¿ç”¨æ–¹å¼&quot;">â€‹</a></h2><p><strong>é€šè¿‡ä¸Šé¢çš„æ¼”ç¤ºå¯ä»¥å¾—å‡ºä»¥ä¸‹å‡ ç‚¹ç»“è®ºï¼š</strong></p><ul><li>ç”¨ <code>reactive</code> åšå¯¹è±¡çš„<strong>å“åº”å¼</strong>ï¼Œç”¨ <code>ref</code> åš<strong>å€¼ç±»å‹</strong>çš„å“åº”å¼ã€‚</li><li><code>setup</code> ä¸­è¿”å› <code>toRefs(state)</code> ï¼Œæˆ–è€… <code>toRef(state, &#39;xxx&#39;)</code> ã€‚</li><li>ä¸ºäº†é˜²æ­¢è¯¯ä¼šäº§ç”Ÿï¼Œ <code>ref</code> çš„å˜é‡å‘½åå°½é‡éƒ½ç”¨ <code>xxxRef</code> ï¼Œè¿™æ ·åœ¨ä½¿ç”¨çš„æ—¶å€™ä¼šæ›´æ¸…æ¥šæ˜äº†ã€‚</li><li><strong>åˆæˆå‡½æ•°</strong>è¿”å›<strong>å“åº”å¼å¯¹è±¡</strong>æ—¶ï¼Œä½¿ç”¨ <code>toRefs</code></li></ul><h2 id="_3ã€æ·±å…¥ç†è§£" tabindex="-1">3ã€æ·±å…¥ç†è§£ <a class="header-anchor" href="#_3ã€æ·±å…¥ç†è§£" aria-label="Permalink to &quot;3ã€æ·±å…¥ç†è§£&quot;">â€‹</a></h2><p>è®²å®Œ <code>ref</code> ã€ <code>toRef</code> å’Œ <code>toRefs</code> ï¼Œæˆ‘ä»¬å†æ¥æ€è€ƒä¸€ä¸ªé—®é¢˜ï¼š<strong>ä¸ºä»€ä¹ˆä¸€å®šè¦ç”¨å®ƒä»¬å‘¢ï¼Ÿå¯ä»¥ä¸ç”¨å—ï¼Ÿ</strong></p><h3 id="_1-ä¸ºä»€ä¹ˆéœ€è¦ç”¨-ref" tabindex="-1">ï¼ˆ1ï¼‰ä¸ºä»€ä¹ˆéœ€è¦ç”¨ ref <a class="header-anchor" href="#_1-ä¸ºä»€ä¹ˆéœ€è¦ç”¨-ref" aria-label="Permalink to &quot;ï¼ˆ1ï¼‰ä¸ºä»€ä¹ˆéœ€è¦ç”¨ ref&quot;">â€‹</a></h3><ul><li><strong>å€¼ç±»å‹</strong>ï¼ˆå³åŸºæœ¬æ•°æ®ç±»å‹ï¼‰æ— å¤„ä¸åœ¨ï¼Œå¦‚æœä¸ç”¨ <code>ref</code> è€Œç›´æ¥è¿”å›å€¼ç±»å‹ï¼Œ<strong>ä¼šä¸¢å¤±å“åº”å¼</strong>ã€‚</li><li>æ¯”å¦‚åœ¨ <strong><code>setup</code></strong> ã€ <strong><code>computed</code></strong> ã€<strong>åˆæˆå‡½æ•°</strong>ç­‰å„ç§åœºæ™¯ä¸­ï¼Œéƒ½æœ‰å¯èƒ½è¿”å›<strong>å€¼ç±»å‹</strong>ã€‚</li><li><code>Vue</code> å¦‚æœä¸å®šä¹‰ <code>ref</code> ï¼Œç”¨æˆ·å°†è‡ªå·±åˆ¶é€  <code>ref</code> ï¼Œè¿™æ ·åè€Œä¼šæ›´åŠ æ··ä¹±ã€‚</li></ul><h3 id="_2-ä¸ºä½•-ref-éœ€è¦-value-å±æ€§" tabindex="-1">ï¼ˆ2ï¼‰ä¸ºä½• ref éœ€è¦.value å±æ€§ <a class="header-anchor" href="#_2-ä¸ºä½•-ref-éœ€è¦-value-å±æ€§" aria-label="Permalink to &quot;ï¼ˆ2ï¼‰ä¸ºä½• ref éœ€è¦.value å±æ€§&quot;">â€‹</a></h3><p>é€šè¿‡ä¸Šé¢çš„åˆ†ææˆ‘ä»¬çŸ¥é“ï¼Œ <code>ref</code> éœ€è¦é€šè¿‡ <code>.value</code> æ¥ä¿®æ”¹å€¼ã€‚è¿™çœ‹èµ·æ¥æ˜¯ä¸€ä¸ªå¾ˆéº»çƒ¦çš„æ“ä½œï¼Œæ€»æ˜¯é¢‘ç¹çš„ <code>.value</code> æ„Ÿè§‰ç‰¹åˆ«çç¢ã€‚é‚£ä¸ºä»€ä¹ˆä¸€å®šè¦ <code>.value</code> å‘¢ï¼Ÿæˆ‘ä»¬æ¥æ­å¼€å®ƒçš„é¢çº±ã€‚</p><ul><li><code>ref</code> æ˜¯ä¸€ä¸ª<strong>å¯¹è±¡</strong>ï¼Œè¿™ä¸ªå¯¹è±¡ä¸ä¸¢å¤±å“åº”å¼ï¼Œä¸”è¿™ä¸ªå¯¹è±¡ç”¨ <code>value</code> æ¥å­˜å‚¨å€¼ã€‚</li><li>å› æ­¤ï¼Œé€šè¿‡ <code>.value</code> å±æ€§çš„ <code>get</code> å’Œ <code>set</code> æ¥å®ç°å“åº”å¼ã€‚</li><li>åªæœ‰å½“ç”¨äº <strong>æ¨¡æ¿</strong> å’Œ <strong>reactive</strong> æ—¶ï¼Œä¸éœ€è¦ <code>.value</code> æ¥å®ç°å“åº”å¼ï¼Œè€Œ<strong>å…¶ä»–æƒ…å†µåˆ™éƒ½éœ€è¦</strong>ã€‚</li></ul><h3 id="_3-ä¸ºä»€ä¹ˆéœ€è¦-toref-å’Œ-torefs" tabindex="-1">ï¼ˆ3ï¼‰ä¸ºä»€ä¹ˆéœ€è¦ toRef å’Œ toRefs <a class="header-anchor" href="#_3-ä¸ºä»€ä¹ˆéœ€è¦-toref-å’Œ-torefs" aria-label="Permalink to &quot;ï¼ˆ3ï¼‰ä¸ºä»€ä¹ˆéœ€è¦ toRef å’Œ toRefs&quot;">â€‹</a></h3><p>ä¸ <code>ref</code> ä¸ä¸€æ ·çš„æ˜¯ï¼Œ <code>toRef</code> å’Œ <code>toRefs</code> è¿™ä¸¤ä¸ªå…„å¼Ÿï¼Œå®ƒä»¬<strong>ä¸åˆ›é€ å“åº”å¼</strong>ï¼Œè€Œæ˜¯<strong>å»¶ç»­å“åº”å¼</strong>ã€‚åˆ›é€ å“åº”å¼ä¸€èˆ¬ç”± <code>ref</code> æˆ–è€… <code>reactive</code> æ¥è§£å†³ï¼Œè€Œ <code>toRef</code> å’Œ <code>toRefs</code> åˆ™æ˜¯æŠŠå¯¹è±¡çš„æ•°æ®è¿›è¡Œåˆ†è§£å’Œæ‰©æ•£ï¼Œå…¶è¿™ä¸ªå¯¹è±¡é’ˆå¯¹çš„æ˜¯<strong>å“åº”å¼å¯¹è±¡</strong>è€Œ<strong>éæ™®é€šå¯¹è±¡</strong>ã€‚<strong>æ€»ç»“èµ·æ¥æœ‰ä»¥ä¸‹ä¸‰ç‚¹ï¼š</strong></p><ul><li><strong>åˆè¡·ï¼š</strong> åœ¨<strong>ä¸ä¸¢å¤±å“åº”å¼</strong>çš„æƒ…å†µä¸‹ï¼ŒæŠŠå¯¹è±¡æ•°æ®è¿›è¡Œ <strong>åˆ†è§£æˆ–æ‰©æ•£</strong>ã€‚</li><li><strong>å‰æï¼š</strong> é’ˆå¯¹çš„æ˜¯<strong>å“åº”å¼å¯¹è±¡</strong>ï¼ˆ <code>reactrive</code> å°è£…çš„ï¼‰è€Œ<strong>éæ™®é€šå¯¹è±¡</strong>ã€‚</li><li><strong>æ³¨æ„ï¼š</strong> <strong>ä¸åˆ›é€ </strong>å“åº”å¼ï¼Œè€Œæ˜¯<strong>å»¶ç»­</strong>å“åº”å¼ã€‚</li></ul><h1 id="äºŒã€ğŸ™†â€â™€ï¸composition-api-å®ç°é€»è¾‘å¤ç”¨" tabindex="-1">äºŒã€ğŸ™†â€â™€ï¸Composition API å®ç°é€»è¾‘å¤ç”¨ <a class="header-anchor" href="#äºŒã€ğŸ™†â€â™€ï¸composition-api-å®ç°é€»è¾‘å¤ç”¨" aria-label="Permalink to &quot;äºŒã€ğŸ™†â€â™€ï¸Composition API å®ç°é€»è¾‘å¤ç”¨&quot;">â€‹</a></h1><h2 id="_1ã€è§„åˆ™" tabindex="-1">1ã€è§„åˆ™ <a class="header-anchor" href="#_1ã€è§„åˆ™" aria-label="Permalink to &quot;1ã€è§„åˆ™&quot;">â€‹</a></h2><p><strong>å…ˆæ¥äº†è§£å‡ æ¡è§„åˆ™ï¼š</strong></p><ul><li><code>Composition API</code> æŒ‡<strong>æŠ½ç¦»é€»è¾‘ä»£ç åˆ°ä¸€ä¸ªå‡½æ•°</strong>ï¼›</li><li>å‡½æ•°çš„å‘½åçº¦å®šä¸º <code>useXxxx</code> æ ¼å¼ï¼ˆReact hooks ä¹Ÿæ˜¯ï¼‰ï¼›</li><li>åœ¨ <code>setup</code> ä¸­å¼•ç”¨ <code>useXxx</code> å‡½æ•°ã€‚</li></ul><h2 id="_2ã€ä¸¾ä¸ªä¾‹å­-ğŸŒ°" tabindex="-1">2ã€ä¸¾ä¸ªä¾‹å­ ğŸŒ° <a class="header-anchor" href="#_2ã€ä¸¾ä¸ªä¾‹å­-ğŸŒ°" aria-label="Permalink to &quot;2ã€ä¸¾ä¸ªä¾‹å­ ğŸŒ°&quot;">â€‹</a></h2><p>å¼•ç”¨ä¸€ä¸ªéå¸¸ç»å…¸çš„ä¾‹å­ï¼š<strong>è·å–é¼ æ ‡çš„å®šä½</strong>ã€‚<strong>æ¥ä¸‹æ¥æˆ‘ä»¬ç”¨ Composition API æ¥è¿›è¡Œå°è£…æ¼”ç¤ºï¼š</strong></p><p>å®šä¹‰ä¸€ä¸ª <code>js</code> æ–‡ä»¶ï¼Œåå­—ä¸º <code>useMousePosition</code> ï¼Œ<strong>å…·ä½“ä»£ç å¦‚ä¸‹ï¼š</strong></p><div class="language-js vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#F97583;">import</span><span style="color:#E1E4E8;"> { reactive, ref, onMounted, onUnmounted } </span><span style="color:#F97583;">from</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">&#39;vue&#39;</span><span style="color:#E1E4E8;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F97583;">function</span><span style="color:#E1E4E8;"> </span><span style="color:#B392F0;">useMousePosition</span><span style="color:#E1E4E8;">() {</span></span>
<span class="line"><span style="color:#E1E4E8;">  </span><span style="color:#F97583;">const</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">x</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> </span><span style="color:#B392F0;">ref</span><span style="color:#E1E4E8;">(</span><span style="color:#79B8FF;">0</span><span style="color:#E1E4E8;">);</span></span>
<span class="line"><span style="color:#E1E4E8;">  </span><span style="color:#F97583;">const</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">y</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> </span><span style="color:#B392F0;">ref</span><span style="color:#E1E4E8;">(</span><span style="color:#79B8FF;">0</span><span style="color:#E1E4E8;">);</span></span>
<span class="line"></span>
<span class="line"><span style="color:#E1E4E8;">  </span><span style="color:#F97583;">function</span><span style="color:#E1E4E8;"> </span><span style="color:#B392F0;">update</span><span style="color:#E1E4E8;">(</span><span style="color:#FFAB70;">e</span><span style="color:#E1E4E8;">) {</span></span>
<span class="line"><span style="color:#E1E4E8;">    x.value </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> e.pageX;</span></span>
<span class="line"><span style="color:#E1E4E8;">    y.value </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> e.pageY;</span></span>
<span class="line"><span style="color:#E1E4E8;">  }</span></span>
<span class="line"></span>
<span class="line"><span style="color:#E1E4E8;">  </span><span style="color:#B392F0;">onMounted</span><span style="color:#E1E4E8;">(() </span><span style="color:#F97583;">=&gt;</span><span style="color:#E1E4E8;"> {</span></span>
<span class="line"><span style="color:#E1E4E8;">    console.</span><span style="color:#B392F0;">log</span><span style="color:#E1E4E8;">(</span><span style="color:#9ECBFF;">&#39;useMousePosition mounted&#39;</span><span style="color:#E1E4E8;">);</span></span>
<span class="line"><span style="color:#E1E4E8;">    window.</span><span style="color:#B392F0;">addEventListener</span><span style="color:#E1E4E8;">(</span><span style="color:#9ECBFF;">&#39;mousemove&#39;</span><span style="color:#E1E4E8;">, update);</span></span>
<span class="line"><span style="color:#E1E4E8;">  });</span></span>
<span class="line"></span>
<span class="line"><span style="color:#E1E4E8;">  </span><span style="color:#B392F0;">onUnmounted</span><span style="color:#E1E4E8;">(() </span><span style="color:#F97583;">=&gt;</span><span style="color:#E1E4E8;"> {</span></span>
<span class="line"><span style="color:#E1E4E8;">    console.</span><span style="color:#B392F0;">log</span><span style="color:#E1E4E8;">(</span><span style="color:#9ECBFF;">&#39;useMousePosition unMounted&#39;</span><span style="color:#E1E4E8;">);</span></span>
<span class="line"><span style="color:#E1E4E8;">    window.</span><span style="color:#B392F0;">removeEventListener</span><span style="color:#E1E4E8;">(</span><span style="color:#9ECBFF;">&#39;mousemove&#39;</span><span style="color:#E1E4E8;">, update);</span></span>
<span class="line"><span style="color:#E1E4E8;">  });</span></span>
<span class="line"></span>
<span class="line"><span style="color:#E1E4E8;">  </span><span style="color:#F97583;">return</span><span style="color:#E1E4E8;"> {</span></span>
<span class="line"><span style="color:#E1E4E8;">    x,</span></span>
<span class="line"><span style="color:#E1E4E8;">    y,</span></span>
<span class="line"><span style="color:#E1E4E8;">  };</span></span>
<span class="line"><span style="color:#E1E4E8;">}</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#D73A49;">import</span><span style="color:#24292E;"> { reactive, ref, onMounted, onUnmounted } </span><span style="color:#D73A49;">from</span><span style="color:#24292E;"> </span><span style="color:#032F62;">&#39;vue&#39;</span><span style="color:#24292E;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#D73A49;">function</span><span style="color:#24292E;"> </span><span style="color:#6F42C1;">useMousePosition</span><span style="color:#24292E;">() {</span></span>
<span class="line"><span style="color:#24292E;">  </span><span style="color:#D73A49;">const</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">x</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">=</span><span style="color:#24292E;"> </span><span style="color:#6F42C1;">ref</span><span style="color:#24292E;">(</span><span style="color:#005CC5;">0</span><span style="color:#24292E;">);</span></span>
<span class="line"><span style="color:#24292E;">  </span><span style="color:#D73A49;">const</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">y</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">=</span><span style="color:#24292E;"> </span><span style="color:#6F42C1;">ref</span><span style="color:#24292E;">(</span><span style="color:#005CC5;">0</span><span style="color:#24292E;">);</span></span>
<span class="line"></span>
<span class="line"><span style="color:#24292E;">  </span><span style="color:#D73A49;">function</span><span style="color:#24292E;"> </span><span style="color:#6F42C1;">update</span><span style="color:#24292E;">(</span><span style="color:#E36209;">e</span><span style="color:#24292E;">) {</span></span>
<span class="line"><span style="color:#24292E;">    x.value </span><span style="color:#D73A49;">=</span><span style="color:#24292E;"> e.pageX;</span></span>
<span class="line"><span style="color:#24292E;">    y.value </span><span style="color:#D73A49;">=</span><span style="color:#24292E;"> e.pageY;</span></span>
<span class="line"><span style="color:#24292E;">  }</span></span>
<span class="line"></span>
<span class="line"><span style="color:#24292E;">  </span><span style="color:#6F42C1;">onMounted</span><span style="color:#24292E;">(() </span><span style="color:#D73A49;">=&gt;</span><span style="color:#24292E;"> {</span></span>
<span class="line"><span style="color:#24292E;">    console.</span><span style="color:#6F42C1;">log</span><span style="color:#24292E;">(</span><span style="color:#032F62;">&#39;useMousePosition mounted&#39;</span><span style="color:#24292E;">);</span></span>
<span class="line"><span style="color:#24292E;">    window.</span><span style="color:#6F42C1;">addEventListener</span><span style="color:#24292E;">(</span><span style="color:#032F62;">&#39;mousemove&#39;</span><span style="color:#24292E;">, update);</span></span>
<span class="line"><span style="color:#24292E;">  });</span></span>
<span class="line"></span>
<span class="line"><span style="color:#24292E;">  </span><span style="color:#6F42C1;">onUnmounted</span><span style="color:#24292E;">(() </span><span style="color:#D73A49;">=&gt;</span><span style="color:#24292E;"> {</span></span>
<span class="line"><span style="color:#24292E;">    console.</span><span style="color:#6F42C1;">log</span><span style="color:#24292E;">(</span><span style="color:#032F62;">&#39;useMousePosition unMounted&#39;</span><span style="color:#24292E;">);</span></span>
<span class="line"><span style="color:#24292E;">    window.</span><span style="color:#6F42C1;">removeEventListener</span><span style="color:#24292E;">(</span><span style="color:#032F62;">&#39;mousemove&#39;</span><span style="color:#24292E;">, update);</span></span>
<span class="line"><span style="color:#24292E;">  });</span></span>
<span class="line"></span>
<span class="line"><span style="color:#24292E;">  </span><span style="color:#D73A49;">return</span><span style="color:#24292E;"> {</span></span>
<span class="line"><span style="color:#24292E;">    x,</span></span>
<span class="line"><span style="color:#24292E;">    y,</span></span>
<span class="line"><span style="color:#24292E;">  };</span></span>
<span class="line"><span style="color:#24292E;">}</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br></div></div><p>å†å®šä¹‰ä¸€ä¸ª <code>.vue</code> æ–‡ä»¶ï¼Œå‘½åä¸º <code>index.vue</code> ã€‚<strong>å…·ä½“ä»£ç å¦‚ä¸‹ï¼š</strong></p><div class="language-html vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">html</span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#E1E4E8;">&lt;</span><span style="color:#85E89D;">template</span><span style="color:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="color:#E1E4E8;">  &lt;</span><span style="color:#85E89D;">p</span><span style="color:#E1E4E8;"> </span><span style="color:#B392F0;">v-if</span><span style="color:#E1E4E8;">=</span><span style="color:#9ECBFF;">&quot;flag&quot;</span><span style="color:#E1E4E8;">&gt;mouse position {{x}} {{y}}&lt;/</span><span style="color:#85E89D;">p</span><span style="color:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="color:#E1E4E8;">  &lt;</span><span style="color:#85E89D;">button</span><span style="color:#E1E4E8;"> </span><span style="color:#B392F0;">@click</span><span style="color:#E1E4E8;">=</span><span style="color:#9ECBFF;">&quot;changeFlagHandler&quot;</span><span style="color:#E1E4E8;">&gt;change flag&lt;/</span><span style="color:#85E89D;">button</span><span style="color:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="color:#E1E4E8;">&lt;/</span><span style="color:#85E89D;">template</span><span style="color:#E1E4E8;">&gt;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#E1E4E8;">&lt;</span><span style="color:#85E89D;">script</span><span style="color:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="color:#E1E4E8;">  </span><span style="color:#F97583;">import</span><span style="color:#E1E4E8;"> { reactive } </span><span style="color:#F97583;">from</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">&#39;vue&#39;</span></span>
<span class="line"><span style="color:#E1E4E8;">  </span><span style="color:#F97583;">import</span><span style="color:#E1E4E8;"> useMousePosition </span><span style="color:#F97583;">from</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">&#39;./useMousePosition&#39;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#E1E4E8;">  </span><span style="color:#F97583;">export</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">default</span><span style="color:#E1E4E8;"> {</span></span>
<span class="line"><span style="color:#E1E4E8;">      name: </span><span style="color:#9ECBFF;">&#39;MousePosition&#39;</span><span style="color:#E1E4E8;">,</span></span>
<span class="line"><span style="color:#E1E4E8;">      return {</span></span>
<span class="line"><span style="color:#E1E4E8;">        </span><span style="color:#B392F0;">flag</span><span style="color:#E1E4E8;">: </span><span style="color:#79B8FF;">true</span></span>
<span class="line"><span style="color:#E1E4E8;">      },</span></span>
<span class="line"><span style="color:#E1E4E8;">      </span><span style="color:#B392F0;">setup</span><span style="color:#E1E4E8;">() {</span></span>
<span class="line"><span style="color:#E1E4E8;">          </span><span style="color:#F97583;">const</span><span style="color:#E1E4E8;"> { </span><span style="color:#79B8FF;">x</span><span style="color:#E1E4E8;">, </span><span style="color:#79B8FF;">y</span><span style="color:#E1E4E8;"> } </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> </span><span style="color:#B392F0;">useMousePosition</span><span style="color:#E1E4E8;">()</span></span>
<span class="line"><span style="color:#E1E4E8;">          </span><span style="color:#F97583;">return</span><span style="color:#E1E4E8;"> {</span></span>
<span class="line"><span style="color:#E1E4E8;">              x,</span></span>
<span class="line"><span style="color:#E1E4E8;">              y</span></span>
<span class="line"><span style="color:#E1E4E8;">          }</span></span>
<span class="line"><span style="color:#E1E4E8;">      }ï¼Œ</span></span>
<span class="line"><span style="color:#E1E4E8;">       </span><span style="color:#B392F0;">changeFlagHandler</span><span style="color:#E1E4E8;">() {</span></span>
<span class="line"><span style="color:#E1E4E8;">        </span><span style="color:#79B8FF;">this</span><span style="color:#E1E4E8;">.flag </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">!</span><span style="color:#79B8FF;">this</span><span style="color:#E1E4E8;">.flag</span></span>
<span class="line"><span style="color:#E1E4E8;">      },</span></span>
<span class="line"><span style="color:#E1E4E8;">  }</span></span>
<span class="line"><span style="color:#E1E4E8;">&lt;/</span><span style="color:#85E89D;">script</span><span style="color:#E1E4E8;">&gt;</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#24292E;">&lt;</span><span style="color:#22863A;">template</span><span style="color:#24292E;">&gt;</span></span>
<span class="line"><span style="color:#24292E;">  &lt;</span><span style="color:#22863A;">p</span><span style="color:#24292E;"> </span><span style="color:#6F42C1;">v-if</span><span style="color:#24292E;">=</span><span style="color:#032F62;">&quot;flag&quot;</span><span style="color:#24292E;">&gt;mouse position {{x}} {{y}}&lt;/</span><span style="color:#22863A;">p</span><span style="color:#24292E;">&gt;</span></span>
<span class="line"><span style="color:#24292E;">  &lt;</span><span style="color:#22863A;">button</span><span style="color:#24292E;"> </span><span style="color:#6F42C1;">@click</span><span style="color:#24292E;">=</span><span style="color:#032F62;">&quot;changeFlagHandler&quot;</span><span style="color:#24292E;">&gt;change flag&lt;/</span><span style="color:#22863A;">button</span><span style="color:#24292E;">&gt;</span></span>
<span class="line"><span style="color:#24292E;">&lt;/</span><span style="color:#22863A;">template</span><span style="color:#24292E;">&gt;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#24292E;">&lt;</span><span style="color:#22863A;">script</span><span style="color:#24292E;">&gt;</span></span>
<span class="line"><span style="color:#24292E;">  </span><span style="color:#D73A49;">import</span><span style="color:#24292E;"> { reactive } </span><span style="color:#D73A49;">from</span><span style="color:#24292E;"> </span><span style="color:#032F62;">&#39;vue&#39;</span></span>
<span class="line"><span style="color:#24292E;">  </span><span style="color:#D73A49;">import</span><span style="color:#24292E;"> useMousePosition </span><span style="color:#D73A49;">from</span><span style="color:#24292E;"> </span><span style="color:#032F62;">&#39;./useMousePosition&#39;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#24292E;">  </span><span style="color:#D73A49;">export</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">default</span><span style="color:#24292E;"> {</span></span>
<span class="line"><span style="color:#24292E;">      name: </span><span style="color:#032F62;">&#39;MousePosition&#39;</span><span style="color:#24292E;">,</span></span>
<span class="line"><span style="color:#24292E;">      return {</span></span>
<span class="line"><span style="color:#24292E;">        </span><span style="color:#6F42C1;">flag</span><span style="color:#24292E;">: </span><span style="color:#005CC5;">true</span></span>
<span class="line"><span style="color:#24292E;">      },</span></span>
<span class="line"><span style="color:#24292E;">      </span><span style="color:#6F42C1;">setup</span><span style="color:#24292E;">() {</span></span>
<span class="line"><span style="color:#24292E;">          </span><span style="color:#D73A49;">const</span><span style="color:#24292E;"> { </span><span style="color:#005CC5;">x</span><span style="color:#24292E;">, </span><span style="color:#005CC5;">y</span><span style="color:#24292E;"> } </span><span style="color:#D73A49;">=</span><span style="color:#24292E;"> </span><span style="color:#6F42C1;">useMousePosition</span><span style="color:#24292E;">()</span></span>
<span class="line"><span style="color:#24292E;">          </span><span style="color:#D73A49;">return</span><span style="color:#24292E;"> {</span></span>
<span class="line"><span style="color:#24292E;">              x,</span></span>
<span class="line"><span style="color:#24292E;">              y</span></span>
<span class="line"><span style="color:#24292E;">          }</span></span>
<span class="line"><span style="color:#24292E;">      }ï¼Œ</span></span>
<span class="line"><span style="color:#24292E;">       </span><span style="color:#6F42C1;">changeFlagHandler</span><span style="color:#24292E;">() {</span></span>
<span class="line"><span style="color:#24292E;">        </span><span style="color:#005CC5;">this</span><span style="color:#24292E;">.flag </span><span style="color:#D73A49;">=</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">!</span><span style="color:#005CC5;">this</span><span style="color:#24292E;">.flag</span></span>
<span class="line"><span style="color:#24292E;">      },</span></span>
<span class="line"><span style="color:#24292E;">  }</span></span>
<span class="line"><span style="color:#24292E;">&lt;/</span><span style="color:#22863A;">script</span><span style="color:#24292E;">&gt;</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br></div></div><p><strong>æ­¤æ—¶æµè§ˆå™¨çš„æ˜¾ç¤ºæ•ˆæœå¦‚ä¸‹ï¼š</strong></p><p><img src="https://mondaylab-1309616765.cos.ap-shanghai.myqcloud.com/images/202305270731308.gif" alt="mousePosition"></p><p>äº†è§£å®Œ <code>ref</code> åï¼Œæˆ‘ä»¬æ¥å®ç°è¿™ä¸ªåŠŸèƒ½çœ‹èµ·æ¥ä¼šæ¸…æ™°å¾ˆå¤šã€‚æˆ‘ä»¬å…ˆé€šè¿‡ <code>ref</code> å¯¹ <code>x</code> å’Œ <code>y</code> åšå“åº”å¼æ“ä½œï¼Œä¹‹åé€šè¿‡ <code>.value</code> æ¥ä¿®æ”¹å€¼ï¼Œæœ€ç»ˆè¾¾åˆ°æ—¶åˆ»è·å–é¼ æ ‡å®šä½çš„æ•ˆæœã€‚åŒæ—¶ï¼Œå¦‚æœæˆ‘ä»¬æ—¶åˆ»ä¿æŒç€é¼ æ ‡ç§»åŠ¨æ—¶ä¸æ–­æ”¹å˜å€¼ï¼Œè¿™æ ·å­æ˜¯<strong>éå¸¸è€—è´¹æ€§èƒ½çš„</strong>ã€‚æ‰€ä»¥ï¼Œæˆ‘ä»¬å¯ä»¥é€šè¿‡ä¸€ä¸ªæŒ‰é’®ï¼Œæ¥éšæ—¶æ§åˆ¶å®ƒçš„å‡ºç°ä¸éšè—ã€‚</p><p>å¤§å®¶å¯ä»¥å‘ç°ï¼Œå½“éšè—çš„æ—¶å€™ï¼Œéšåä¼š<strong>è§¦å‘ <code>onUnmounted</code> ç”Ÿå‘½å‘¨æœŸ</strong>ï¼Œ<strong>ç»„ä»¶å†…å®¹éšä¹‹è¢«é”€æ¯</strong>ã€‚ä¹Ÿå°±æ˜¯è¯´ï¼Œä½¿ç”¨çš„æ—¶å€™è°ƒç”¨ï¼Œä¸ä½¿ç”¨çš„æ—¶å€™åŠæ—¶é”€æ¯ï¼Œè¿™æ ·å­å¯ä»¥å¾ˆå¤§ç¨‹åº¦ä¸Š<strong>æå‡æ€§èƒ½</strong>ã€‚</p><h1 id="ä¸‰ã€ğŸ™…â€â™€ï¸-ç»“æŸè¯­" tabindex="-1">ä¸‰ã€ğŸ™…â€â™€ï¸ ç»“æŸè¯­ <a class="header-anchor" href="#ä¸‰ã€ğŸ™…â€â™€ï¸-ç»“æŸè¯­" aria-label="Permalink to &quot;ä¸‰ã€ğŸ™…â€â™€ï¸ ç»“æŸè¯­&quot;">â€‹</a></h1><p>é€šè¿‡ä¸Šæ–‡çš„å­¦ä¹ ï¼Œæˆ‘ä»¬å¯ä»¥çŸ¥é“ï¼Œ <code>ref</code> ã€ <code>toRef</code> å’Œ <code>toRefs</code> æ˜¯ <code>vue3</code> ä¸­ <code>Composition API</code> çš„æ–°ç‰¹æ€§ï¼Œä¸” <code>vue3</code> ä¸€èˆ¬é€šè¿‡ <code>ref</code> ã€ <code>toRef</code> å’Œ <code>toRefs</code> æ¥<strong>å®ç°æ•°æ®å“åº”å¼</strong>ã€‚æœ‰äº†è¿™ä¸‰ä¸ªå†…å®¹ï¼Œå®ç°æ•°æ®å“åº”å¼çœ‹èµ·æ¥æ–¹ä¾¿è®¸å¤šï¼Œè€Œä¸å†åƒ <code>vue2</code> ä¸­é‚£ç§å¤„ç†èµ·æ¥å¾ˆå›°éš¾ã€‚</p><p>åˆ°è¿™é‡Œï¼Œå…³äº <code>ref</code> ã€ <code>toRef</code> å’Œ <code>toRefs</code> çš„å†…å®¹å°±è®²å®Œå•¦ï¼å¸Œæœ›å¯¹å¤§å®¶æœ‰å¸®åŠ©ï¼</p>`,93),o=[e];function t(c,r,E,y,i,u){return n(),a("div",null,o)}const d=s(p,[["render",t]]);export{m as __pageData,d as default};
